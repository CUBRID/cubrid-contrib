-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findOpenResortExpertOpinStatList

		SELECT	t.dept_abbr_nm, t.handl_org_cd, t.close_flag, t.total, t.choice_cnt, t.handl_unregist_cnt, t.handl_open_cnt, t.handl_part_open_cnt, handl_close_cnt, t.expert_unregist_cnt, t.expert_open_cnt, t.expert_part_open_cnt, t.expert_close_cnt, t.review_cnt		FROM	(					SELECT					   b.dept_abbr_nm, 					   a.handl_org_cd, 					   b.close_flag,					   a.total,					   a.choice_cnt,					   a.handl_unregist_cnt,					   a.handl_open_cnt,					   a.handl_part_open_cnt,					   a.handl_close_cnt,					   a.expert_unregist_cnt,					   a.expert_open_cnt,					   a.expert_part_open_cnt,					   a.expert_close_cnt,					   a.review_cnt					FROM (					      SELECT handl_org_cd,					         COUNT(*) total, 					         SUM(choice_cnt) AS choice_cnt,					         SUM(handl_unregist_cnt) AS handl_unregist_cnt,					         SUM(handl_open_cnt) AS handl_open_cnt,					         SUM(handl_part_open_cnt) AS handl_part_open_cnt,					         SUM(handl_close_cnt) AS handl_close_cnt,					         SUM(expert_unregist_cnt) AS expert_unregist_cnt,					         SUM(expert_open_cnt) AS expert_open_cnt,					         SUM(expert_part_open_cnt) AS expert_part_open_cnt,					         SUM(expert_close_cnt) AS expert_close_cnt,					         SUM(review_cnt) AS review_cnt					      FROM(					          SELECT handl_org_cd,					          (CASE WHEN  resort_prog_state_cd = '2' then 1 ELSE 0 END ) AS choice_cnt ,					          (CASE WHEN  resort_prog_state_cd = '3' then 1 ELSE 0 END) AS handl_unregist_cnt ,					          (CASE WHEN  resort_prog_state_cd IN ('4','5','6','7') AND handl_org_open_div_cd = '1' then 1 ELSE 0 END) AS handl_open_cnt,              					          (CASE WHEN  resort_prog_state_cd IN ('4','5','6','7') AND handl_org_open_div_cd = '2' then 1 ELSE 0 END) AS handl_part_open_cnt ,					          (CASE WHEN  resort_prog_state_cd IN ('4','5','6','7') AND handl_org_open_div_cd = '3' then 1 ELSE 0 END) AS handl_close_cnt ,					          (CASE WHEN  resort_prog_state_cd = '4' then 1 ELSE 0 END) AS expert_unregist_cnt ,					          (CASE WHEN  resort_prog_state_cd IN ('5','6','7') AND expert_org_open_div_cd = '1' then 1 ELSE 0 END) AS expert_open_cnt ,					          (CASE WHEN  resort_prog_state_cd IN ('5','6','7') AND expert_org_open_div_cd = '2' then 1 ELSE 0 END) AS expert_part_open_cnt ,					          (CASE WHEN  resort_prog_state_cd IN ('5','6','7') AND expert_org_open_div_cd = '3' then 1 ELSE 0 END) AS expert_close_cnt ,					          (CASE WHEN  resort_prog_state_cd IN ('5','6','7') AND discu_trgt_flag = '1' then 1 ELSE 0 END) AS review_cnt 					          FROM tb_rdopenresortopin 					          WHERE  	record_center_id = '1' AND  					              resort_case = '1'  AND  					              handl_org_cd = '1' 					          					          AND     resort_yyyy = '1'					          AND resort_prog_state_cd IN ('3','4','5','6','7') 					          AND handl_org_cd != '0' 					      ) 					      GROUP BY handl_org_cd) a, tb_stdept b 						WHERE a.handl_org_cd = b.org_cd 					UNION						SELECT						   DISTINCT '기록관' AS dept_abbr_nm, 						   a.handl_org_cd, 						  '1' AS close_flag,						   a.total,						   a.choice_cnt,						   a.handl_unregist_cnt,						   a.handl_open_cnt,						   a.handl_part_open_cnt,						   a.handl_close_cnt,						   a.expert_unregist_cnt,						   a.expert_open_cnt,						   a.expert_part_open_cnt,						   a.expert_close_cnt,						   a.review_cnt						FROM (						      SELECT handl_org_cd,						         COUNT(*) total, 						         SUM(choice_cnt) AS choice_cnt,						         SUM(handl_unregist_cnt) AS handl_unregist_cnt,						         SUM(handl_open_cnt) AS handl_open_cnt,						         SUM(handl_part_open_cnt) AS handl_part_open_cnt,						         SUM(handl_close_cnt) AS handl_close_cnt,						         SUM(expert_unregist_cnt) AS expert_unregist_cnt,						         SUM(expert_open_cnt) AS expert_open_cnt,						         SUM(expert_part_open_cnt) AS expert_part_open_cnt,						         SUM(expert_close_cnt) AS expert_close_cnt,						         SUM(review_cnt) AS review_cnt						      FROM(						          SELECT handl_org_cd,						          (CASE WHEN  resort_prog_state_cd = '2' then 1 ELSE 0 END ) AS choice_cnt ,						          (CASE WHEN  resort_prog_state_cd = '3' then 1 ELSE 0 END) AS handl_unregist_cnt ,						          (CASE WHEN  resort_prog_state_cd IN ('4','5','6','7') AND handl_org_open_div_cd = '1' then 1 ELSE 0 END) AS handl_open_cnt,              						          (CASE WHEN  resort_prog_state_cd IN ('4','5','6','7') AND handl_org_open_div_cd = '2' then 1 ELSE 0 END) AS handl_part_open_cnt ,						          (CASE WHEN  resort_prog_state_cd IN ('4','5','6','7') AND handl_org_open_div_cd = '3' then 1 ELSE 0 END) AS handl_close_cnt ,						          (CASE WHEN  resort_prog_state_cd = '4' then 1 ELSE 0 END) AS expert_unregist_cnt ,						          (CASE WHEN  resort_prog_state_cd IN ('5','6','7') AND expert_org_open_div_cd = '1' then 1 ELSE 0 END) AS expert_open_cnt ,						          (CASE WHEN  resort_prog_state_cd IN ('5','6','7') AND expert_org_open_div_cd = '2' then 1 ELSE 0 END) AS expert_part_open_cnt ,						          (CASE WHEN  resort_prog_state_cd IN ('5','6','7') AND expert_org_open_div_cd = '3' then 1 ELSE 0 END) AS expert_close_cnt ,						          (CASE WHEN  resort_prog_state_cd IN ('5','6','7') AND discu_trgt_flag = '1' then 1 ELSE 0 END) AS review_cnt 						          FROM tb_rdopenresortopin 						          WHERE  	record_center_id = '1' AND  						              resort_case = '1'  AND  						              handl_org_cd = '1' 						          AND     resort_yyyy = '1'						          AND resort_prog_state_cd IN ('3','4','5','6','7') 						          AND handl_org_cd = '0' 						      ) 						      GROUP BY handl_org_cd) a          				) t		ORDER by t.handl_org_cd ASC				;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findOpenResortOpinProgStatePagedList

		SELECT E.*		FROM (			SELECT ROWNUM AS rnum				, C.*			FROM (				SELECT t.dept_abbr_nm					, t.close_flag					, t.handl_org_cd					, t.choice_cnt					, t.handl_opin_cnt					, t.expert_opin_end_cnt					, t.expert_opin_cont_cnt					, t.review_opin_cnt					, t.opin_rslt_cnt					, t.dwn_cnt, t.dept_cnt				FROM (					SELECT d.dept_abbr_nm						, d.close_flag						, d.handl_org_cd						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd = '3') as dept_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('3','4','5','6') and excel_dwn_flag = '1') as dwn_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('3','4','5','6','7')) as choice_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('4','5','6','7')) as handl_opin_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('5','6','7') and discu_trgt_flag = '0') as expert_opin_end_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('5','6','7') and discu_trgt_flag = '1') as expert_opin_cont_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('6','7') and discu_trgt_flag = '1') as review_opin_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd = '7') as opin_rslt_cnt					FROM (						SELECT b.dept_abbr_nm							, b.close_flag							, a.handl_org_cd							, '1' as resort_yyyy							, '1' as record_center_id						FROM (							SELECT handl_org_cd							FROM tb_rdopenresortopin							WHERE record_center_id = '1'							AND resort_yyyy = '1'							GROUP BY handl_org_cd						) a, tb_stdept b  		         						WHERE   a.handl_org_cd = b.org_cd					) d					UNION					SELECT distinct '기록관' as dept_abbr_nm						, '1' as close_flag						, d.handl_org_cd						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd = '3') as dept_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('3','4','5','6') and excel_dwn_flag = '1') as dwn_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('3','4','5','6','7')) as choice_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('4','5','6','7')) as handl_opin_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('5','6','7') and discu_trgt_flag = '0') as expert_opin_end_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('5','6','7') and discu_trgt_flag = '1') as expert_opin_cont_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('6','7') and discu_trgt_flag = '1') as review_opin_cnt						, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd = '7') as opin_rslt_cnt					FROM tb_rdopenresortopin d					WHERE d.record_center_id = '1'		            AND d.resort_yyyy = '1'		            AND d.handl_org_cd = '0'		            				) t				ORDER by t.handl_org_cd ASC			) C			WHERE ROWNUM <= '1'		) E		WHERE E.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : select
-- Query Id : countOpenResortOpinProgStatePagedList

		SELECT COUNT(1)		FROM (			SELECT d.dept_abbr_nm				, d.close_flag				, d.handl_org_cd				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd = '3') as dept_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('3','4','5','6') and excel_dwn_flag = '1') as dwn_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('3','4','5','6','7')) as choice_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('4','5','6','7')) as handl_opin_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('5','6','7') and discu_trgt_flag = '0') as expert_opin_end_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('5','6','7') and discu_trgt_flag = '1') as expert_opin_cont_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('6','7') and discu_trgt_flag = '1') as review_opin_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd = '7') as opin_rslt_cnt			FROM (				SELECT b.dept_abbr_nm					, b.close_flag					, a.handl_org_cd					, '1' as resort_yyyy					, '1' as record_center_id				FROM (					SELECT handl_org_cd					FROM tb_rdopenresortopin					WHERE record_center_id = '1'					AND resort_yyyy = '1'					GROUP BY handl_org_cd				) a, tb_stdept b  		         				WHERE   a.handl_org_cd = b.org_cd			) d			UNION			SELECT distinct '기록관' as dept_abbr_nm				, '1' as close_flag				, d.handl_org_cd				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd = '3') as dept_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('3','4','5','6') and excel_dwn_flag = '1') as dwn_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('3','4','5','6','7')) as choice_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('4','5','6','7')) as handl_opin_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('5','6','7') and discu_trgt_flag = '0') as expert_opin_end_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('5','6','7') and discu_trgt_flag = '1') as expert_opin_cont_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd in ('6','7') and discu_trgt_flag = '1') as review_opin_cnt				, (select count(*) from tb_rdopenresortopin where record_center_id = d.record_center_id and resort_yyyy = d.resort_yyyy  and handl_org_cd = d.handl_org_cd and resort_prog_state_cd = '7') as opin_rslt_cnt			FROM tb_rdopenresortopin d			WHERE d.record_center_id = '1'            AND d.resort_yyyy = '1'            AND d.handl_org_cd = '0'            		) t	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateOpenResortHandlOpin

		UPDATE	tb_rdopenresortopin		SET handl_org_open_div_cd = '1'			, handl_open_grade = '1'			, handl_open_limit_part = '1'			, handl_open_reg_ymd = '1'			, handl_org_chrgr_id = '1'			, handl_org_open_opin = trim('1')			, resort_prog_state_cd = '1'			, rjct_flag = '0'			, handl_Org_Open_Ymd = '1'		WHERE record_center_id = '1'		AND record_id = '1'		AND resort_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateOpenResortTrgtRjct

		UPDATE tb_rdopenresortopin		SET resort_prog_state_cd = '1'			, rjct_flag = '1'			, handl_org_chrgr_id = ''			, handl_org_cd = ''		WHERE record_center_id = '1'		AND folder_id = '1'		AND record_id = '1'		AND resort_yyyy = '1'		AND resort_case = '1'		AND resort_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateOpenResortExpertOpin

		UPDATE tb_rdopenresortopin		SET expert_org_open_div_cd = '1'			, expert_open_grade = '1'			, expert_limit_part = '1'			, expert_reg_ymd = '1'			, expert_org_open_opin = trim('1')			, resort_prog_state_cd = '1'			, discu_trgt_flag = '1'			, record_chrgr_id = '1'			, expert_org_open_ymd = '1'		WHERE record_center_id = '1'		AND record_id = '1'		AND resort_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateOpenResortReviewOpin

		UPDATE tb_rdopenresortopin		SET review_org_open_div_cd = '1'			, review_open_grade = '1'			, review_limit_part = '1'			, review_reg_ymd = '1'			, review_org_open_opin = trim('1')			, resort_prog_state_cd = '1'			, review_org_open_ymd = '1' 		WHERE record_center_id = '1'		AND record_id = '1'		AND resort_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateRecordRevwState

		UPDATE 	tb_rdrecord		SET		open_revw_prog_state = '1'		WHERE	record_center_id = '1'		AND		record_id = '1'		;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateOpenResortExcelDwnFlag

		UPDATE	tb_rdopenresortopin		SET		excel_dwn_flag = '1'		WHERE	record_center_id = '1'		AND		record_id = '1'		AND		resort_seq = '1'		;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : select
-- Query Id : countAlreadyRsltOpenResortOpin

		SELECT /*+  index(TB_RDOPENRESORTOPIN TB_RDOPENRESORTOPIN_IDX06 )*/ COUNT(*)		FROM tb_rdopenresortopin		WHERE record_center_id = '1'		AND	record_id = '1'		AND	resort_seq = '1'		AND	resort_prog_state_cd = '7';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findOpenResortHistPagedList

		SELECT B.*		FROM (			SELECT ROWNUM AS rnum				, A.*			FROM (				SELECT record_center_id					, record_id					, chng_hist_no					, open_div_cd_bef					, open_div_cd_aft					, chng_ymd					, chng_rsn					, chng_user_id					, take_mng_no					, open_grade_bef					, open_grade_aft					, open_limit_part_bef					, open_limit_part_aft					, part_open_rsn_bef					, part_open_rsn_aft					, chng_org_cd					, resort_yyyy					, resort_case					, resort_case_no					, resort_doc_no					, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = o.chng_org_cd) as chng_org_nm					, (SELECT user_nm FROM tb_stuser WHERE record_center_id = o.record_center_id AND user_id = o.chng_user_id) as chng_user_nm					, (SELECT resort_reason FROM tb_rdopenresortreason WHERE record_center_id = o.record_center_id AND resort_yyyy = o.resort_yyyy AND resort_case = o.resort_case AND resort_case_no = o.resort_case_no) as resort_reason					, (SELECT discu_trgt_flag FROM tb_rdopenresortopin WHERE record_center_id = o.record_center_id AND resort_yyyy = o.resort_yyyy AND resort_case = o.resort_case AND resort_case_no = o.resort_case_no AND resort_doc_no = o.resort_doc_no AND record_center_id = o.record_center_id AND record_id = o.record_id) as discu_trgt_flag				FROM tb_rdopenhist o				WHERE record_center_id = '1'				AND record_id = '1'				ORDER BY chng_hist_no DESC			) A			WHERE ROWNUM <= '1'		) B		WHERE B.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : select
-- Query Id : countOpenResortHistPagedList

		SELECT	COUNT(*)		FROM	(			SELECT record_center_id				, record_id				, chng_hist_no				, open_div_cd_bef				, open_div_cd_aft				, chng_ymd				, chng_rsn				, chng_user_id				, take_mng_no				, open_grade_bef				, open_grade_aft				, open_limit_part_bef				, open_limit_part_aft				, part_open_rsn_bef				, part_open_rsn_aft				, chng_org_cd				, resort_yyyy				, resort_case				, resort_case_no				, resort_doc_no				, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = o.chng_org_cd) as chng_org_nm				, (SELECT user_nm FROM tb_stuser WHERE record_center_id = o.record_center_id AND user_id = o.chng_user_id) as chng_user_nm				, (SELECT resort_reason FROM tb_rdopenresortreason WHERE record_center_id = o.record_center_id AND resort_yyyy = o.resort_yyyy AND resort_case = o.resort_case AND resort_case_no = o.resort_case_no) as resort_reason				, (SELECT discu_trgt_flag FROM tb_rdopenresortopin WHERE record_center_id = o.record_center_id AND resort_yyyy = o.resort_yyyy AND resort_case = o.resort_case AND resort_case_no = o.resort_case_no AND resort_doc_no = o.resort_doc_no AND record_center_id = o.record_center_id AND record_id = o.record_id) as discu_trgt_flag			FROM tb_rdopenhist o			WHERE record_center_id = '1'			AND record_id = '1'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findOpenResortOpinRegOpinBatchErrorXls

		SELECT file_nm			, file_key		FROM TB_ZZREQEXCELLIST		WHERE REQ_USER_ID = '1'		AND REQ_MENU_ID = '1'		AND REQ_INDEX = '1';


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinRegOpin.xml
