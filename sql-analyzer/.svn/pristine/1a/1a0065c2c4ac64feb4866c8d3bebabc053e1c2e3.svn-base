-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeSchedPagedList

		SELECT COUNT(A.org_cd)		FROM  TB_STORG A		   , (SELECT * 		      FROM TB_TKORGTAKESCHED		      WHERE record_center_id = '1'		      AND   take_yyyy = '1') B		WHERE A.record_center_id = B.record_center_id(+)		AND   A.org_cd = B.take_org_cd(+)		AND   A.record_center_id = '1'         AND               A.org_cd = '1'          AND               A.close_flag = '1'         ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeSchedPagedList

		SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (			SELECT A.org_cd take_org_cd			     , A.org_nm take_org_nm			     , A.org_abbr_nm take_org_abbr_nm			     , B.take_yyyy			     , B.erecord_take_start_plan_ymd			     , B.erecord_take_close_plan_ymd			     , B.noelct_take_start_plan_ymd			     , B.noelct_take_close_plan_ymd			     , B.take_sched_set_state			FROM  TB_STORG A			   , (SELECT * 			      FROM TB_TKORGTAKESCHED			      WHERE record_center_id = '1'			      AND   take_yyyy = '1') B			WHERE A.record_center_id = B.record_center_id(+)			AND   A.org_cd = B.take_org_cd(+)			AND   A.record_center_id = '1' AND 	              A.org_cd = '1'	          AND 	              A.close_flag = '1'	          				ORDER BY A.org_cd			 			) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeSchedList

		SELECT COUNT(1)		FROM TB_TKORGTAKESCHED		WHERE record_center_id = '1'		AND   take_org_cd = '1'		AND   take_yyyy = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeSchedList

		INSERT INTO TB_TKORGTAKESCHED		(	record_center_id			, take_org_cd			, take_yyyy			, erecord_take_start_plan_ymd			, erecord_take_close_plan_ymd			, noelct_take_start_plan_ymd			, noelct_take_close_plan_ymd			, take_sched_set_state			, reg_user_id			, reg_dtime		)		VALUES		(	'1'			, '1'			, '1'			, '1'			, '1'			, '1'			, '1'			, '1'			, '1'			, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeSchedList

		UPDATE TB_TKORGTAKESCHED		SET erecord_take_start_plan_ymd = '1'		  , erecord_take_close_plan_ymd = '1'		  , noelct_take_start_plan_ymd = '1'		  , noelct_take_close_plan_ymd = '1'		  , take_sched_set_state = '1'		  , chng_user_id = '1'		  		  , chng_dtime = TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		WHERE record_center_id = '1'		AND   take_org_cd = '1'		AND   take_yyyy = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteUndTakeSchedList

		DELETE TB_TKORGTAKESCHED		WHERE record_center_id = '1'		AND   take_org_cd = '1'		AND   take_yyyy = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeRecvPagedList

				SELECT COUNT(1)		FROM (			SELECT A.record_center_id				, A.org_cd AS take_org_cd				, A.org_nm AS take_org_nm				, A.org_abbr_nm AS take_org_abbr_nm				, A.creat_sys_cd				, (SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='RD17' AND com_cd=A.creat_sys_cd) creat_sys_cd_nm				, '1' take_yyyy				, B.take_sno				, NVL(B.take_state_div_cd,DECODE(A.take_sched_set_state,'1','02','3','02','01')) take_state_div_cd				, NVL((SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='TK08' AND com_cd=B.take_state_div_cd)				        ,DECODE(A.take_sched_set_state,'1','일정수립완료','3','일정수립완료','일정미수립')) take_state_div_cd_nm				, NVL(B.recv_fin_state_cd,'0') recv_fin_state_cd				, DECODE(B.recv_fin_state_cd,'1','접수중','2','접수실패','3','접수완료','4','접수대기','미접수') recv_fin_state_cd_nm			FROM 				(					SELECT A.record_center_id, A.org_cd, A.org_nm, A.org_abbr_nm, B.creat_sys_cd, C.take_sched_set_state					FROM TB_STORG A					, TB_STLINKTRGT B					, (SELECT record_center_id,take_org_cd,take_sched_set_state					    FROM TB_TKORGTAKESCHED WHERE take_yyyy = '1') C					WHERE A.record_center_id = '1' AND 						  A.org_cd = '1'					  AND 						  A.close_flag = '1'					 					AND  A.link_trgt_id = B.link_trgt_id					 AND 						  B.creat_sys_cd = '1'					 					AND  A.record_center_id = C.record_center_id(+)					AND  A.org_cd = C.take_org_cd(+)				) A				, (					SELECT *					FROM TB_TKORGTAKEPLAN					WHERE record_center_id = '1'					AND   take_yyyy = '1' AND 						  take_org_cd = '1'					  AND 						  creat_sys_cd = '1'					 					AND	  (app_take_type_cd is null OR app_take_type_cd = '0')				) B			WHERE A.record_center_id = B.record_center_id(+)			AND   A.org_cd = B.take_org_cd(+)			AND   A.creat_sys_cd = B.creat_sys_cd(+)		) Z WHERE  				  Z.take_state_div_cd = '1'			  AND 				  Z.take_state_div_cd = '1'			  AND 				  Z.recv_fin_state_cd = '1'			  ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeRecvPagedList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT Z.record_center_id, Z.take_yyyy, Z.take_org_cd, Z.take_org_nm, Z.take_org_abbr_nm		    , Z.creat_sys_cd, Z.creat_sys_cd_nm, Z.take_sno, Z.take_state_div_cd, Z.take_state_div_cd_nm			, Z.recv_fin_state_cd, Z.recv_fin_state_cd_nm, Z.recv_folder_cnt, Z.recv_record_cnt			, (SELECT COUNT(1) FROM TB_TKFOLDER D			    WHERE D.record_center_id=Z.record_center_id				AND D.take_yyyy=Z.take_yyyy				AND D.take_org_cd=Z.take_org_cd				AND D.creat_sys_cd=Z.creat_sys_cd				AND D.take_sno=Z.take_sno) folder_cnt01			, (SELECT COUNT(1) FROM TB_TKFOLDER D, TB_TKRECORD E			    WHERE D.record_center_id=Z.record_center_id				AND D.take_yyyy=Z.take_yyyy				AND D.take_org_cd=Z.take_org_cd				AND D.creat_sys_cd=Z.creat_sys_cd				AND D.take_sno=Z.take_sno				AND E.record_center_id=D.record_center_id				AND E.folder_take_seq=D.folder_take_seq) record_cnt01			, (SELECT COUNT(1) FROM TB_TKFOLDER D			    WHERE D.record_center_id=Z.record_center_id				AND D.take_yyyy=Z.take_yyyy				AND D.take_org_cd=Z.take_org_cd				AND D.creat_sys_cd=Z.creat_sys_cd				AND D.take_sno=Z.take_sno				AND D.take_fin_flag = '1') folder_cnt05		FROM (			SELECT A.record_center_id				, A.org_cd AS take_org_cd				, A.org_nm AS take_org_nm				, A.org_abbr_nm AS take_org_abbr_nm				, A.creat_sys_cd				, (SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='RD17' AND com_cd=A.creat_sys_cd) creat_sys_cd_nm				, '1' take_yyyy				, B.take_sno				, NVL(B.take_state_div_cd,DECODE(A.take_sched_set_state,'1','02','3','02','01')) take_state_div_cd				, NVL((SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='TK08' AND com_cd=B.take_state_div_cd)				        ,DECODE(A.take_sched_set_state,'1','일정수립완료','3','일정수립완료','일정미수립')) take_state_div_cd_nm				, NVL(B.recv_fin_state_cd,'0') recv_fin_state_cd				, DECODE(B.recv_fin_state_cd,'1','접수중','2','접수실패','3','접수완료','4','접수대기','미접수') recv_fin_state_cd_nm				, NVL(B.recv_folder_cnt,0) AS recv_folder_cnt				, NVL(B.recv_record_cnt,0) AS recv_record_cnt			FROM 				(					SELECT A.record_center_id, A.org_cd, A.org_nm, A.org_abbr_nm, B.creat_sys_cd, C.take_sched_set_state					FROM TB_STORG A					, TB_STLINKTRGT B					, (SELECT record_center_id,take_org_cd,take_sched_set_state					    FROM TB_TKORGTAKESCHED WHERE take_yyyy = '1') C					WHERE A.record_center_id = '1'					 AND 						  A.org_cd = '1'					  AND 						  A.close_flag = '1'					 					AND  A.link_trgt_id = B.link_trgt_id					 AND 						  B.creat_sys_cd = '1'					 					AND  A.record_center_id = C.record_center_id(+)					AND  A.org_cd = C.take_org_cd(+)				) A				, (					SELECT *					FROM TB_TKORGTAKEPLAN					WHERE record_center_id = '1'					AND   take_yyyy = '1' AND 						  take_org_cd = '1'					  AND 						  creat_sys_cd = '1'					 					AND	  (app_take_type_cd is null OR app_take_type_cd = '0')				) B			WHERE A.record_center_id = B.record_center_id(+)			AND   A.org_cd = B.take_org_cd(+)			AND   A.creat_sys_cd = B.creat_sys_cd(+)		) Z WHERE  				  Z.take_state_div_cd = '1'			  AND 				  Z.take_state_div_cd = '1'			  AND 				  Z.recv_fin_state_cd = '1'			  		ORDER BY Z.record_center_id, Z.take_org_cd, Z.creat_sys_cd		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeRecvNewPagedList

		SELECT C.*    FROM (        SELECT ROWNUM AS rnum            , B.*        FROM (		SELECT Z.record_center_id, Z.take_yyyy, Z.take_org_cd, Z.take_org_nm, Z.take_org_abbr_nm            , Z.creat_sys_cd, Z.creat_sys_cd_nm, Z.take_sno, Z.parent_take_sno, Z.take_state_div_cd, Z.take_state_div_cd_nm            , Z.recv_fin_state_cd, Z.recv_fin_state_cd_nm, Z.recv_folder_cnt, Z.recv_record_cnt, Z.recv_attach_cnt            , nvl(z.folder_cnt01, 0) as folder_cnt01            , nvl((z.folder_cnt01-z.folder_cnt03), 0) as folder_cnt02            , nvl(z.folder_cnt03, 0) as folder_cnt03            , nvl(z.record_cnt01, 0) as record_cnt01            , nvl((z.record_cnt01-z.record_cnt03), 0) as record_cnt02            , nvl(z.record_cnt03, 0) as record_cnt03            , nvl(z.attach_cnt01, 0) as attach_cnt01            , nvl((z.attach_cnt01-z.attach_cnt03), 0) as attach_cnt02            , nvl(z.attach_cnt03, 0) as attach_cnt03            , nvl(z.folder_cnt04, 0) as folder_cnt04             , nvl(z.folder_cnt05, 0) as folder_cnt05            , rjct_hist_cnt            , reg_dtime            , recv_re_flag        FROM (            SELECT A.record_center_id                , A.org_cd AS take_org_cd                , A.org_nm AS take_org_nm                , A.org_abbr_nm AS take_org_abbr_nm                , A.creat_sys_cd                , (SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='RD17' AND com_cd=A.creat_sys_cd) creat_sys_cd_nm                , '1' take_yyyy                , B.take_sno                , B.parent_take_sno                , NVL(B.take_state_div_cd,DECODE(A.take_sched_set_state,'1','02','3','02','01')) take_state_div_cd                , (CASE WHEN B.take_sno != B.parent_take_sno AND B.take_state_div_cd = '04' THEN '재접수완료'                        ELSE (NVL((SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='TK08' AND com_cd=B.take_state_div_cd)                                ,DECODE(A.take_sched_set_state,'1','일정수립완료','3','일정수립완료','일정미수립')))                   END) take_state_div_cd_nm                , NVL(B.recv_fin_state_cd,'0') recv_fin_state_cd                , DECODE(B.recv_fin_state_cd,'1','접수중','2','접수실패','3','접수완료','4','접수대기','미접수') recv_fin_state_cd_nm                , NVL(B.recv_folder_cnt,0) AS recv_folder_cnt                , NVL(B.recv_record_cnt,0) AS recv_record_cnt                , NVL(B.recv_attach_cnt,0) AS recv_attach_cnt                , B.recv_ymd                , (SELECT MAX(D.recv_ymd)                 	 FROM TB_TKORGTAKEPLAN D                 	WHERE D.record_center_id = B.record_center_id                      AND D.take_yyyy        = B.take_yyyy                      AND D.take_org_cd      = B.take_org_cd                      AND D.creat_sys_cd     = B.creat_sys_cd                      AND D.parent_take_sno  = B.parent_take_sno) max_recv_ymd                , NVL(recv_folder_cnt, 0) as folder_cnt01            	, NVL(recv_folder_err_cnt, 0) as folder_cnt03            	, NVL(recv_record_cnt, 0) as record_cnt01            	, NVL(recv_record_err_cnt, 0) as record_cnt03                	, NVL(recv_attach_cnt, 0) as attach_cnt01             	, NVL(recv_attach_err_cnt, 0) as attach_cnt03            	,(SELECT COUNT(1)             		FROM TB_TKFOLDER D               	   WHERE D.record_center_id	= B.record_center_id                	 AND D.take_yyyy		= B.take_yyyy                	 AND D.take_org_cd		= B.take_org_cd                	 AND D.creat_sys_cd		= B.creat_sys_cd                	 AND D.take_sno			= B.take_sno                	 AND D.rjct_flag = '1') folder_cnt04            	,(SELECT COUNT(1) FROM TB_TKFOLDER D                   WHERE D.record_center_id=B.record_center_id                	 AND D.take_yyyy			= B.take_yyyy                	 AND D.take_org_cd			= B.take_org_cd                	 AND D.creat_sys_cd			= B.creat_sys_cd                	 AND D.take_sno				= B.take_sno                	 AND D.take_fin_flag = '1') folder_cnt05            	,(SELECT COUNT(1) 					FROM tb_tkfoldertakehist D				   				   WHERE 				   EXISTS (				    		SELECT 1				    		  FROM TB_TKFOLDER S				    		 WHERE S.record_center_id  	= B.record_center_id				    		   AND S.take_yyyy          = B.take_yyyy				    		   AND S.take_org_cd        = B.take_org_cd				    		   AND S.creat_sys_cd       = B.creat_sys_cd				    		   AND S.take_sno           = B.take_sno				    		   AND S.reg_dtime			= D.reg_dtime						   AND S.record_center_id = D.record_center_id						   AND S.creat_sys_cd = D.creat_sys_cd						   AND S.org_cd = D.org_cd						   AND S.clss_id = D.clss_id						   AND S.creat_yyyy = D.creat_yyyy						   AND S.folder_reg_seq = D.folder_reg_seq						   AND S.ho_no = D.ho_no						   AND S.take_sno = D.take_sno						)	 				 AND take_state_cd IN ('02','03')            	 ) rjct_hist_cnt            	 ,(SELECT 	MAX(D.reg_dtime)             	     FROM 	tb_tkfolder D            	    WHERE 	D.record_center_id = B.record_center_id            	      AND	D.take_yyyy			= B.take_yyyy            	      AND	D.take_org_cd 		= B.take_org_cd            	      AND 	D.creat_sys_cd		= B.creat_sys_cd            	      AND	D.take_sno			= B.take_sno            	   ) reg_dtime            	   ,(SELECT count(1)            	     FROM 	tb_tkfolder D            	    WHERE 	D.record_center_id = B.record_center_id            	      AND	D.take_yyyy			= B.take_yyyy            	      AND	D.take_org_cd 		= B.take_org_cd            	      AND 	D.creat_sys_cd		= B.creat_sys_cd            	      AND	D.take_sno			= B.take_sno            	      AND   D.recv_re_flag 		= '1'            	   ) recv_re_flag           FROM (					SELECT A.record_center_id, A.org_cd, A.org_nm, A.org_abbr_nm, B.creat_sys_cd, C.take_sched_set_state					FROM TB_STORG A					, TB_STLINKTRGT B					, (SELECT record_center_id,take_org_cd,take_sched_set_state					    FROM TB_TKORGTAKESCHED WHERE take_yyyy = '1') C					WHERE A.record_center_id = '1'					 AND 						  A.org_cd = '1'					  AND 						  A.close_flag = '1'					 					AND  A.link_trgt_id = B.link_trgt_id					 AND 						  B.creat_sys_cd = '1'					 					AND  A.record_center_id = C.record_center_id(+)					AND  A.org_cd = C.take_org_cd(+)				) A				, (					SELECT *					FROM TB_TKORGTAKEPLAN					WHERE record_center_id = '1'					AND   take_yyyy = '1' AND 						  take_org_cd = '1'					  AND 						  creat_sys_cd = '1'					 					AND	  (app_take_type_cd is null OR app_take_type_cd = '0')				) B			WHERE A.record_center_id = B.record_center_id(+)			AND   A.org_cd = B.take_org_cd(+)			AND   A.creat_sys_cd = B.creat_sys_cd(+)			) Z WHERE  				  Z.take_state_div_cd = '1'			  AND 				  Z.take_state_div_cd = '1'			  AND 				  Z.recv_fin_state_cd = '1'			  		ORDER BY Z.record_center_id, Z.max_recv_ymd desc nulls last,  Z.take_org_cd, Z.creat_sys_cd DESC,  Z.take_state_div_cd_nm desc, Z.take_sno desc		        	 ) B        WHERE ROWNUM <= '1'    ) C    WHERE C.rnum >= '1'  ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteTkVirusCheck

	DELETE FROM TB_TKVIRUSCHECK	WHERE RECORD_CENTER_ID = '1'	AND RECORD_TAKE_SEQ IN	(		SELECT C.RECORD_TAKE_SEQ		FROM TB_TKORGTAKEPLAN A INNER JOIN TB_TKFOLDER B		ON A.RECORD_CENTER_ID = B.RECORD_CENTER_ID		AND A.TAKE_ORG_CD = B.TAKE_ORG_CD		AND A.TAKE_YYYY = B.TAKE_YYYY		AND A.TAKE_SNO = B.TAKE_SNO		INNER JOIN TB_TKRECORD C		ON B.RECORD_CENTER_ID = C.RECORD_CENTER_ID		AND B.FOLDER_TAKE_SEQ = C.FOLDER_TAKE_SEQ		WHERE A.RECORD_CENTER_ID = '1'		AND A.TAKE_ORG_CD = '1'		AND A.TAKE_YYYY = '1'		AND A.TAKE_SNO = '1'	);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderTakeHist

	 	DELETE FROM TB_TKFOLDERTAKEHIST                 	 	WHERE CONCAT(record_center_id, folder_take_seq)	 	IN (	 		SELECT CONCAT(record_center_id, folder_take_seq)	 		FROM tb_tkfolder 		    WHERE record_center_id 	= '1'		    AND take_org_cd 		= '1'		    AND take_yyyy 			= '1'		    AND take_sno 			= '1'	 	)                AND record_center_id > 0 AND folder_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderRecordAttachFile

		DELETE FROM TB_TKATTACHFILE                		WHERE CONCAT(record_center_id, record_take_seq)		IN 		(			SELECT CONCAT(C.record_center_id, C.record_take_seq)                        FROM   TB_TKFOLDER A INNER JOIN TB_TKRECORD B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq                        INNER JOIN TB_TKATTACHFILE C ON B.record_center_id = C.record_center_id AND    B.record_take_seq = C.record_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND record_take_seq > 0	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderRecordChngHist

		DELETE FROM TB_TKRECORDCHNGHIST                		WHERE CONCAT(record_center_id, record_take_seq)		IN 		(			SELECT CONCAT(C.record_center_id, C.record_take_seq)                        FROM   TB_TKFOLDER A INNER JOIN TB_TKRECORD B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq                        INNER JOIN TB_TKRECORDCHNGHIST C ON B.record_center_id = C.record_center_id AND    B.record_take_seq = C.record_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND record_take_seq > 0	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderRecordCreat

		DELETE FROM TB_TKRECORDCREAT                		WHERE CONCAT(record_center_id, record_take_seq)		IN 		(			SELECT CONCAT(C.record_center_id, C.record_take_seq)			FROM TB_TKFOLDER A INNER JOIN TB_TKRECORD B ON A.record_center_id = B.record_center_id AND A.folder_take_seq = B.folder_take_seq      			INNER JOIN TB_TKRECORDCREAT C ON    B.record_center_id = C.record_center_id AND    B.record_take_seq = C.record_take_seq              			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND record_take_seq > 0	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderRecordSpclList

		DELETE FROM TB_TKSPCLLIST                		WHERE CONCAT(record_center_id, record_take_seq)		IN 		(			SELECT CONCAT(C.record_center_id, C.record_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKRECORD B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq                        INNER JOIN TB_TKSPCLLIST C ON B.record_center_id = C.record_center_id AND    B.record_take_seq = C.record_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'			AND    C.spcl_list_loc = '2'		)                AND record_center_id > 0 AND record_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderRecordRel

		DELETE FROM TB_TKRECORDREL                		WHERE CONCAT(record_center_id, record_take_seq)		IN 		(			SELECT CONCAT(C.record_center_id, C.record_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKRECORD B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq                        INNER JOIN TB_TKRECORDREL C ON B.record_center_id = C.record_center_id AND    B.record_take_seq = C.record_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND record_take_seq > 0	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderRecordInfoSrc

		DELETE FROM TB_TKRECORDINFOSRC                		WHERE CONCAT(record_center_id, record_take_seq)		IN 		(			SELECT CONCAT(C.record_center_id, C.record_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKRECORD B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq                        INNER JOIN TB_TKRECORDINFOSRC C ON B.record_center_id = C.record_center_id AND    B.record_take_seq = C.record_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderRecordError

		DELETE FROM TB_TKRECORDERROR                		WHERE CONCAT(record_center_id, record_take_seq)		IN 		(			SELECT CONCAT(C.record_center_id, C.record_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKRECORD B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq                        INNER JOIN TB_TKRECORDERROR C ON B.record_center_id = C.record_center_id AND    B.record_take_seq = C.record_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND record_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderRecordOpenHist

		DELETE FROM TB_TKRECORDOPENHIST                		WHERE CONCAT(record_center_id, record_take_seq)                 IN                (			SELECT CONCAT(C.record_center_id, C.record_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKRECORD B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq                        INNER JOIN TB_TKRECORDOPENHIST C ON B.record_center_id = C.record_center_id AND    B.record_take_seq = C.record_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND record_take_seq > 0	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderRecord

		DELETE FROM TB_TKRECORD                		WHERE CONCAT(record_center_id, folder_take_seq)                 IN                (			SELECT CONCAT(B.record_center_id, B.folder_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKRECORD B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND folder_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderChngHist

		DELETE FROM TB_TKFOLDERCHNGHIST                		WHERE CONCAT(record_center_id, folder_take_seq)                IN                (			SELECT CONCAT(B.record_center_id, B.folder_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKFOLDERCHNGHIST B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND folder_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderCreat

		DELETE FROM TB_TKFOLDERCREAT                		WHERE CONCAT(record_center_id, folder_take_seq)		IN		(			SELECT CONCAT(B.record_center_id, B.folder_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKFOLDERCREAT B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND folder_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderTakeTakovr

		DELETE FROM TB_TKFOLDERTAKETAKOVR                		WHERE CONCAT(record_center_id, folder_take_seq)                IN                (			SELECT CONCAT(B.record_center_id, B.folder_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKFOLDERTAKETAKOVR B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND folder_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderSpclList

		DELETE FROM TB_TKSPCLLIST                		WHERE CONCAT(record_center_id, folder_take_seq)                IN                (			SELECT CONCAT(B.record_center_id, B.folder_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKSPCLLIST B ON  A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'			AND    B.spcl_list_loc = '1'		)                AND record_center_id > 0 AND folder_take_seq > 0	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderRel

		DELETE FROM TB_TKFOLDERREL                		WHERE CONCAT(record_center_id, folder_take_seq)                IN                (			SELECT CONCAT(B.record_center_id, B.folder_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKFOLDERREL B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND folder_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderError

		DELETE FROM TB_TKFOLDERERROR                		WHERE CONCAT(record_center_id, folder_take_seq)                IN                (			SELECT CONCAT(B.record_center_id, B.folder_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKFOLDERERROR B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND folder_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderPjtClss

		DELETE FROM TB_TKFOLDERPJTCLSS                		WHERE CONCAT(record_center_id, folder_take_seq)                IN                (			SELECT CONCAT(B.record_center_id, B.folder_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKFOLDERPJTCLSS B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND folder_take_seq > 0	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolderNonElectPlan

		DELETE FROM TB_TKFOLDER_NONELECT                		WHERE CONCAT(record_center_id, folder_take_seq)                IN                (			SELECT CONCAT(B.record_center_id, B.folder_take_seq)			FROM   TB_TKFOLDER A INNER JOIN TB_TKFOLDERPJTCLSS B ON A.record_center_id = B.record_center_id AND    A.folder_take_seq = B.folder_take_seq			WHERE  A.record_center_id = '1'			AND    A.take_yyyy = '1'			AND    A.take_org_cd = '1'			AND    A.creat_sys_cd = '1'			AND    A.take_sno = '1'		)                AND record_center_id > 0 AND folder_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeFolder

		DELETE FROM TB_TKFOLDER A		WHERE  A.record_center_id = '1'		AND    A.take_yyyy = '1'		AND    A.take_org_cd = '1'		AND    A.creat_sys_cd = '1'		AND    A.take_sno = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeOrgTakeError

		DELETE FROM TB_TKORGTAKEERROR A		WHERE  A.record_center_id = '1'		AND    A.take_yyyy = '1'		AND    A.take_org_cd = '1'		AND    A.creat_sys_cd = '1'		AND    A.take_sno = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeOrgRecvError

		DELETE FROM TB_TKORGRECVERROR A		WHERE  A.record_center_id = '1'		AND    A.take_yyyy = '1'		AND    A.take_org_cd = '1'		AND    A.creat_sys_cd = '1'		AND    A.take_sno = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : delete
-- Query Id : deleteRecvTakeOrgTakePlan

		DELETE FROM TB_TKORGTAKEPLAN a		WHERE  A.record_center_id = '1'		AND    A.take_yyyy = '1'		AND    A.take_org_cd = '1'		AND    A.creat_sys_cd = '1'		AND    A.take_sno = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckPagedList

				SELECT count(1)	    FROM (SELECT  A.record_center_id	                , A.take_yyyy	                , A.take_org_cd 	                , A.creat_sys_cd	                , A.parent_take_sno parent_take_sno	                , max(A.take_sno) take_sno	                , sum(A.recv_folder_cnt) recv_folder_cnt	                , sum(A.recv_record_cnt) recv_record_cnt	          FROM tb_tkorgtakeplan A	          WHERE A.record_center_id = '1'	          AND   A.take_yyyy = '1'	          AND   A.take_org_cd  IN (SELECT B.org_cd	                                   FROM TB_STORG B, TB_STLINKTRGT C	                                   WHERE B.record_center_id = '1'	                                   AND   B.lINk_trgt_id=C.lINk_trgt_id	                                    AND 	                                      B.org_cd = '1'	                                     AND 	                                      C.creat_sys_cd = '1'	                                    	                                  )	           AND 	                A.creat_sys_cd = '1'	           	          AND   A.recv_fin_state_cd = '3'	           AND 	                A.take_state_div_cd = '1'	                                               	          AND  (A.app_take_type_cd is null OR A.app_take_type_cd = '0')	          GROUP BY record_center_id, creat_sys_cd, take_yyyy, take_org_cd, parent_take_sno 	    ) B;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckPagedList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT Z.record_center_id		      ,Z.take_yyyy		      ,Z.take_org_cd		      ,Z.creat_sys_cd		      ,Z.take_sno		      ,Z.take_state_div_cd		      ,(SELECT org_nm FROM TB_STORG WHERE record_center_id=Z.record_center_id AND org_cd=Z.take_org_cd) take_org_nm		      ,(SELECT org_abbr_nm FROM TB_STORG WHERE record_center_id=Z.record_center_id AND org_cd=Z.take_org_cd) take_org_abbr_nm		      ,(SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='RD17' AND com_cd=Z.creat_sys_cd) creat_sys_cd_nm		      ,(SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='TK08' AND com_cd=Z.take_state_div_cd) take_state_div_cd_nm		      ,Z.recv_folder_cnt		      ,Z.recv_record_cnt		      ,Z.virus_check_flag		      ,TO_NUMBER(SUBSTR(Z.folder_info, 1, 10)) folder_cnt01		      ,TO_NUMBER(SUBSTR(Z.folder_info, 12, 10)) folder_cnt02		      ,TO_NUMBER(SUBSTR(Z.folder_info, 23, 10)) folder_cnt03		      ,TO_NUMBER(SUBSTR(Z.folder_info, 34, 10)) folder_cnt04		      ,TO_NUMBER(SUBSTR(Z.folder_info, 45, 10)) folder_cnt05		      ,TO_NUMBER(SUBSTR(Z.folder_info, 56, 10)) folder_cnt06		      ,TO_NUMBER(SUBSTR(Z.folder_info, 67, 10)) folder_cnt07		      ,TO_NUMBER(SUBSTR(Z.record_info, 1, 10)) record_cnt01		      ,TO_NUMBER(SUBSTR(Z.record_info, 12, 10)) record_cnt02		      ,TO_NUMBER(SUBSTR(Z.record_info, 23, 10)) record_cnt03		      ,TO_NUMBER(SUBSTR(Z.record_info, 34, 10)) record_cnt04		      ,TO_NUMBER(SUBSTR(Z.record_info, 45, 10)) record_cnt05		      ,TO_NUMBER(SUBSTR(Z.record_info, 56, 10)) record_cnt06		      ,TO_NUMBER(SUBSTR(Z.record_info, 67, 10)) record_cnt07		      ,erecord_flag_cnt		FROM (		    SELECT   B.record_center_id		           , B.take_yyyy		           , B.take_org_cd		           , B.creat_sys_cd		           , B.parent_take_sno		           , B.take_sno		           , B.recv_folder_cnt		           , B.recv_record_cnt 		           , (SELECT Z.take_state_div_cd FROM tb_tkorgtakeplan Z WHERE Z.record_center_id = B.record_center_id AND Z.take_yyyy = B.take_yyyy AND Z.take_org_cd = B.take_org_cd AND Z.creat_sys_cd = B.creat_sys_cd AND Z.take_sno = B.take_sno) take_state_div_cd		           , (SELECT Z.virus_check_flag FROM tb_tkorgtakeplan Z WHERE Z.record_center_id = B.record_center_id AND Z.take_yyyy = B.take_yyyy AND Z.take_org_cd = B.take_org_cd AND Z.creat_sys_cd = B.creat_sys_cd AND Z.take_sno = B.take_sno) virus_check_flag		           ,  ( SELECT LPAD(COUNT(1),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.exam_rslt_cd, '1', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.exam_rslt_cd, '2', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.rjct_flag, '1', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_flag, '1', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_state_cd, '0', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_state_cd, '3', 1, 0)),0),10,'0')		                        FROM TB_TKFOLDER C		                        WHERE C.record_center_id    = B.record_center_id		                        AND   C.take_yyyy           = B.take_yyyy		                        AND   C.take_org_cd         = B.take_org_cd		                        AND   C.creat_sys_cd        = B.creat_sys_cd		                        AND   C.take_sno            IN (SELECT Z.take_sno 		                                                        FROM tb_tkorgtakeplan Z 		                                                        WHERE Z.record_center_id = B.record_center_id 		                                                        AND Z.take_yyyy = B.take_yyyy 		                                                        AND Z.take_org_cd = B.take_org_cd 		                                                        AND Z.creat_sys_cd = B.creat_sys_cd		                                                        AND Z.parent_take_sno = B.parent_take_sno)		                        AND   C.recv_re_flag  is null		                        ) AS folder_INfo		            , ( SELECT LPAD(COUNT(1),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.exam_rslt_cd, '1',1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.exam_rslt_cd, '2', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.rjct_flag, '1', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_flag, '1', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_state_cd, '0', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_state_cd, '3', 1, 0)),0),10,'0')		                        FROM  TB_TKFOLDER C		                            , TB_TKRECORD D		                        WHERE C.record_center_id    = B.record_center_id		                        AND   C.take_yyyy           = B.take_yyyy		                        AND   C.take_org_cd         = B.take_org_cd		                        AND   C.creat_sys_cd        = B.creat_sys_cd		                        AND   C.take_sno            IN (SELECT Z.take_sno 		                                                        FROM tb_tkorgtakeplan Z 		                                                        WHERE Z.record_center_id = B.record_center_id 		                                                        AND Z.take_yyyy = B.take_yyyy 		                                                        AND Z.take_org_cd = B.take_org_cd 		                                                        AND Z.creat_sys_cd = B.creat_sys_cd		                                                        AND Z.parent_take_sno = B.parent_take_sno)		                        AND   C.recv_re_flag is null		                        AND   D.record_center_id    = C.record_center_id		                        AND   D.folder_take_seq     = C.folder_take_seq) AS record_INfo		            , ( SELECT count(1)                        FROM   tb_tkfolder X                        WHERE  X.record_center_id = B.record_center_id                       AND    X.take_yyyy = B.take_yyyy                       AND    X.take_org_cd = B.take_org_cd                       AND    X.creat_sys_cd = B.creat_sys_cd                        AND    X.take_sno     IN (SELECT Z.take_sno                                                                 FROM tb_tkorgtakeplan Z                                                                 WHERE Z.record_center_id = B.record_center_id                                                                 AND Z.take_yyyy = B.take_yyyy                                                                 AND Z.take_org_cd = B.take_org_cd                                                                 AND Z.creat_sys_cd = B.creat_sys_cd                                                                AND Z.parent_take_sno = B.parent_take_sno)                       AND X.erecord_flag in ('2','3')                       AND recv_re_flag is null) erecord_flag_cnt                     ,B.take_ymd                     ,B.reg_dtime		    FROM (SELECT  A.record_center_id		                , A.take_yyyy		                , A.take_org_cd 		                , A.creat_sys_cd		                , A.parent_take_sno parent_take_sno		                , MAX(A.take_sno) take_sno		                , SUM(A.recv_folder_cnt) recv_folder_cnt		                , SUM(A.recv_record_cnt) recv_record_cnt		                , MAX(A.take_ymd) take_ymd                     	, MAX(A.reg_dtime) reg_dtime		          FROM tb_tkorgtakeplan A		          WHERE A.record_center_id = '1'		          AND   A.take_yyyy = '1'		          AND   A.take_org_cd  IN (SELECT B.org_cd		                                   FROM TB_STORG B, TB_STLINKTRGT C		                                   WHERE B.record_center_id = '1'		                                   AND   B.lINk_trgt_id=C.lINk_trgt_id		                                    AND 		                                      B.org_cd = '1'		                                     AND 		                                      C.creat_sys_cd = '1'		                                    		                                  )		           AND 		                A.creat_sys_cd = '1'		           		          AND   A.recv_fin_state_cd = '3'		           AND 		                A.take_state_div_cd = '1'		                                               		          AND  (A.app_take_type_cd is null OR A.app_take_type_cd = '0')		          GROUP BY record_center_id, creat_sys_cd, take_yyyy, take_org_cd, parent_take_sno 		    ) B		)Z		ORDER BY Z.record_center_id, Z.take_ymd DESC, Z.reg_dtime DESC, Z.take_yyyy, Z.take_org_cd, Z.creat_sys_cd, Z.take_sno		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckRjctInfrm

		SELECT record_center_id		     , take_yyyy		     , take_org_cd		     , creat_sys_cd		     , take_sno		     , take_state_div_cd		     , rjct_ymd		     , rjct_rsn		     , recv_div_cd		     , infrm_file_nm		     , NVL(infrm_div_cd,'0') infrm_div_cd		FROM  TB_TKORGTAKEPLAN		WHERE record_center_id = '1'		AND   take_yyyy = '1'		AND   take_org_cd = '1'		AND   creat_sys_cd = '1'		AND   take_sno = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckTakeInfrm

		SELECT record_center_id		     , take_yyyy		     , take_org_cd		     , creat_sys_cd		     , take_sno		     , take_state_div_cd		     , take_ymd		     , take_user_nm		     , takovr_user_nm		     , recv_div_cd		     , infrm_file_nm		     , NVL(infrm_div_cd,'0') infrm_div_cd		FROM  TB_TKORGTAKEPLAN		WHERE record_center_id = '1'		AND   take_yyyy = '1'		AND   take_org_cd = '1'		AND   creat_sys_cd = '1'		AND   take_sno = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckPrintHeader

		SELECT A.record_center_id		     , A.take_yyyy		     , A.take_org_cd		     , A.creat_sys_cd		     , A.take_sno		     , A.take_user_nm		     , A.takovr_user_nm		     , B.org_nm take_org_nm		FROM  TB_TKORGTAKEPLAN A		    , TB_STORG B		WHERE A.record_center_id = '1'		AND   A.take_yyyy = '1'		AND   A.take_org_cd = '1'		AND   A.creat_sys_cd = '1'		AND   A.take_sno = '1'		AND   A.record_center_id = B.record_center_id		AND   A.take_org_cd = B.org_cd	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckPrintFolder

		SELECT A.creat_sys_folder_id		     , A.org_cd		     , A.clss_id		     , A.creat_yyyy		     , A.folder_reg_seq		     , A.ho_no		     		     		     		     				     , A.title		     , TO_CHAR(TO_NUMBER(A.record_reg_cnt)) record_reg_cnt		     , TO_CHAR(TO_NUMBER(A.record_tot_page_cnt)) record_tot_page_cnt		     , B.com_cd_nm folder_type_div_cd		FROM  TB_TKFOLDER A		    , (SELECT com_cd, com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd = 'RD01') B		WHERE A.folder_type_div_cd = B.com_cd(+)		AND   A.record_center_id = '1'		AND   A.take_yyyy = '1'		AND   A.take_org_cd = '1'		AND   A.creat_sys_cd = '1'		AND   A.take_sno = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckFolderPagedList

		SELECT COUNT(1)		FROM  (			SELECT A.folder_take_seq			     , A.clss_id			     , A.clss_nm			     , A.title			     , A.creat_yyyy			     , A.presv_term_cd				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = DECODE(A.creat_sys_cd,'02','RD57','RD07')				    AND   C.com_cd = A.presv_term_cd) presv_term_nm			     , A.erecord_flag				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'RD23'				    AND   C.com_cd = A.erecord_flag) erecord_flag_nm			     , A.virus_flag			     , A.error_flag			     , DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) auto_check			     , NVL(A.exam_rslt_cd,'0') exam_rslt_cd			     , (SELECT C.com_cd_nm		            FROM  TB_ZZCOMCD C			        WHERE C.com_type_cd = 'TK03'			        AND   C.com_cd = NVL(A.exam_rslt_cd,'0')) exam_rslt_nm			     , A.rjct_flag			     , A.rjct_cont			     , A.take_fin_flag			     , DECODE(A.take_fin_flag,'1','4',DECODE(A.rjct_flag,'1','3',NVL(A.exam_rslt_cd,'0'))) status			     , A.take_fin_state_cd			     ,  NVL((SELECT Z.take_off_div_cd 		         		 FROM tb_tkfolder_nonelect Z 		         		 WHERE Z.record_center_id = A.record_center_id 		         		 AND Z.folder_take_seq = 		         		 A.folder_take_seq), '0') nefolder_state_cd			FROM  TB_TKFOLDER A			WHERE A.record_center_id = '1'			AND   A.take_yyyy = '1'			AND   A.take_org_cd = '1'			AND   A.creat_sys_cd = '1' AND 				A.org_cd = '1'			 			AND   A.take_sno IN (SELECT Z.take_sno                         		 FROM tb_tkorgtakeplan Z                         	 	 WHERE Z.record_center_id= A.record_center_id                         		 AND   Z.take_yyyy       = A.take_yyyy                         		 AND   Z.take_org_cd     = A.take_org_cd                         		 AND   Z.creat_sys_cd    = A.creat_sys_cd                         		 and   Z.parent_take_sno = (SELECT K.parent_take_sno                                                     		FROM tb_tkorgtakeplan K                                                     		WHERE K.record_center_id = Z.record_center_id                                                     		AND K.take_yyyy = Z.take_yyyy                                                     		AND K.take_org_cd = Z.take_org_cd                                                    		AND K.creat_sys_cd = Z.creat_sys_cd                                                     		AND K.take_sno = '1'))    		AND recv_re_flag is null AND 				  A.erecord_flag = '1'			 		)		 WHERE  				  auto_check = '1'			  AND 				  auto_check = '1'			  AND 				  status = '1'			  AND  					nefolder_state_cd = '0' AND erecord_flag IN ('2', '3')				   ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderPagedList

	SELECT C.*  FROM (SELECT ROWNUM AS rnum, B.*          FROM (		SELECT record_center_id		     , folder_take_seq		     , clss_id		     , clss_nm		     , title		     , creat_yyyy		     , presv_term_cd		     , presv_term_nm		     , erecord_flag		     , erecord_flag_nm		     , virus_flag		     , error_flag		     , auto_check		     , exam_rslt_cd		     , exam_rslt_nm		     , rjct_flag		     , rjct_cont		     , take_fin_flag		     , status		     , DECODE(status,'4','인수','3','반려',exam_rslt_nm) status_nm		     , take_fin_state_cd		     , recv_re_cnt		     , nefolder_state_cd		FROM  (			SELECT A.record_center_id			     , A.folder_take_seq			     , A.clss_id			     , A.clss_nm			     , A.title			     , A.creat_yyyy			     , A.presv_term_cd				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = DECODE(A.creat_sys_cd,'02','RD57','RD07')				    AND   C.com_cd = A.presv_term_cd) presv_term_nm			     , A.erecord_flag				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'RD23'				    AND   C.com_cd = A.erecord_flag) erecord_flag_nm			     , A.virus_flag			     , A.error_flag			     , DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) auto_check			     , NVL(A.exam_rslt_cd,'0') exam_rslt_cd			     , (SELECT C.com_cd_nm		            FROM  TB_ZZCOMCD C			        WHERE C.com_type_cd = 'TK03'			        AND   C.com_cd = NVL(A.exam_rslt_cd,'0')) exam_rslt_nm			     , A.rjct_flag			     , A.rjct_cont			     , A.take_fin_flag			     , DECODE(A.take_fin_flag,'1','4',DECODE(A.rjct_flag,'1','3',NVL(A.exam_rslt_cd,'0'))) status			     , A.take_fin_state_cd			     , (SELECT COUNT(1)		            FROM tb_tkfoldertakehist Z 		            WHERE Z.record_center_id = A.record_center_id 		            AND Z.creat_sys_cd = A.creat_sys_cd 		            AND Z.org_cd = A.org_cd		            AND Z.clss_id = A.clss_id		            AND Z.folder_reg_seq = A.folder_reg_seq		            AND Z.ho_no = A.ho_no		            AND Z.take_state_cd IN ('02','03')) recv_re_cnt		         ,  NVL((SELECT Z.take_off_div_cd 		         		 FROM tb_tkfolder_nonelect Z 		         		 WHERE Z.record_center_id = A.record_center_id 		         		 AND Z.folder_take_seq = A.folder_take_seq), '0') nefolder_state_cd			FROM  TB_TKFOLDER A			WHERE A.record_center_id = '1'			AND   A.take_yyyy = '1'			AND   A.take_org_cd = '1'			AND   A.creat_sys_cd = '1'			 AND 				A.org_cd = '1'			 			AND   A.take_sno IN (SELECT Z.take_sno                         		 FROM tb_tkorgtakeplan Z                         	 	 WHERE Z.record_center_id= A.record_center_id                         		 AND   Z.take_yyyy       = A.take_yyyy                         		 AND   Z.take_org_cd     = A.take_org_cd                         		 AND   Z.creat_sys_cd    = A.creat_sys_cd                         		 and   Z.parent_take_sno = (SELECT K.parent_take_sno                                                     		FROM tb_tkorgtakeplan K                                                     		WHERE K.record_center_id = Z.record_center_id                                                     		AND K.take_yyyy = Z.take_yyyy                                                     		AND K.take_org_cd = Z.take_org_cd                                                    		AND K.creat_sys_cd = Z.creat_sys_cd                                                    		AND K.take_sno = '1'))    		AND recv_re_flag is null AND 				  A.erecord_flag = '1'			 		)		 WHERE  				  auto_check = '1'			  AND 				  auto_check = '1'			  AND 				  status = '1'			  AND  					nefolder_state_cd = '0' AND erecord_flag IN ('2', '3')				   		ORDER BY folder_take_seq		) B		WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderCount

		SELECT COUNT(1)		  FROM TB_TKFOLDER A		 WHERE A.record_center_id   = '1'		   AND A.take_yyyy          = '1'		   AND A.take_org_cd        = '1'		   AND A.creat_sys_cd       = '1'		   AND A.take_sno IN (		                    SELECT Z.take_sno		                      FROM tb_tkorgtakeplan Z		                     WHERE Z.record_center_id = A.record_center_id		                       AND Z.take_yyyy = A.take_yyyy		                       AND Z.take_org_cd = A.take_org_cd		                       AND Z.creat_sys_cd = A.creat_sys_cd		                       AND Z.parent_take_sno = (		                                                SELECT K.parent_take_sno		                                                  FROM tb_tkorgtakeplan K		                                                 WHERE K.record_center_id = Z.record_center_id		                                                   AND K.take_yyyy = Z.take_yyyy		                                                   AND K.take_org_cd = Z.take_org_cd		                                                   AND K.creat_sys_cd = Z.creat_sys_cd		                                                   AND K.take_sno = '1'		                                                )		                     )		   AND (a.recv_re_flag IS NULL OR NVL (A.recv_re_flag, '0') = '0')		   AND DECODE (A.error_flag, 'Y', 'X', DECODE (NVL (A.virus_dtime, ''), '', 'X', DECODE (A.virus_flag, '1', 'X', 'O'))) = 'O'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckExamErrorCount

		SELECT COUNT(1)		  FROM TB_TKFOLDER A		 WHERE A.record_center_id   = '1'		   AND A.take_yyyy          = '1'		   AND A.take_org_cd        = '1'		   AND A.creat_sys_cd       = '1'		   AND A.take_sno IN (		                    SELECT Z.take_sno		                      FROM tb_tkorgtakeplan Z		                     WHERE Z.record_center_id = A.record_center_id		                       AND Z.take_yyyy = A.take_yyyy		                       AND Z.take_org_cd = A.take_org_cd		                       AND Z.creat_sys_cd = A.creat_sys_cd		                       AND Z.parent_take_sno = (		                                                SELECT K.parent_take_sno		                                                  FROM tb_tkorgtakeplan K		                                                 WHERE K.record_center_id = Z.record_center_id		                                                   AND K.take_yyyy = Z.take_yyyy		                                                   AND K.take_org_cd = Z.take_org_cd		                                                   AND K.creat_sys_cd = Z.creat_sys_cd		                                                   AND K.take_sno = '1'		                                                )		                     )		   AND (a.recv_re_flag IS NULL OR NVL (A.recv_re_flag, '0') = '0')		   AND a.exam_rslt_cd = '2'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeFolderCount

		SELECT COUNT(1)		  FROM TB_TKFOLDER A		 WHERE A.record_center_id   = '1'		   AND A.take_yyyy          = '1'		   AND A.take_org_cd        = '1'		   AND A.creat_sys_cd       = '1'		   AND A.take_sno IN (		                    SELECT Z.take_sno		                      FROM tb_tkorgtakeplan Z		                     WHERE Z.record_center_id = A.record_center_id		                       AND Z.take_yyyy = A.take_yyyy		                       AND Z.take_org_cd = A.take_org_cd		                       AND Z.creat_sys_cd = A.creat_sys_cd		                       AND Z.parent_take_sno = (		                                                SELECT K.parent_take_sno		                                                  FROM tb_tkorgtakeplan K		                                                 WHERE K.record_center_id = Z.record_center_id		                                                   AND K.take_yyyy = Z.take_yyyy		                                                   AND K.take_org_cd = Z.take_org_cd		                                                   AND K.creat_sys_cd = Z.creat_sys_cd		                                                   AND K.take_sno = '1'		                                                )		                     )		   AND (a.recv_re_flag IS NULL OR NVL (A.recv_re_flag, '0') = '0');


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeChechTakeStateDiv

 	 SELECT A.take_state_div_cd 	   FROM tb_tkorgtakeplan A	  WHERE A.record_center_id = '1'	    AND A.take_yyyy          = '1'	    AND A.take_org_cd        = '1'	    AND A.creat_sys_cd       = '1'	    AND A.take_sno 		     = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckNerecordFolderCnt

		    SELECT  SUM(CASE WHEN A.erecord_flag = '2' OR A.erecord_flag = '3' THEN '1'		                 ELSE '0'		            END) n_erecord_cnt		           ,SUM((SELECT COUNT(1) FROM tb_tkfolder_nonelect Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_take_seq = A.folder_take_seq AND A.erecord_flag in ('2','3'))) n_erecord_plan_cnt		    FROM tb_tkfolder A		    WHERE A.record_center_id = '1'		    AND A.take_yyyy          = '1'		    AND A.take_org_cd        = '1'		    AND A.creat_sys_cd       = '1'		    AND A.take_sno IN (SELECT Z.take_sno 		                                     FROM tb_tkorgtakeplan Z		                                       WHERE Z.record_center_id= A.record_center_id		                                      AND   Z.take_yyyy       = A.take_yyyy		                                      AND   Z.take_org_cd     = A.take_org_cd		                                      AND   Z.creat_sys_cd    = A.creat_sys_cd		                                      and   Z.parent_take_sno = (SELECT K.parent_take_sno 		                                                                FROM tb_tkorgtakeplan K 		                                                                WHERE K.record_center_id = Z.record_center_id 		                                                                AND K.take_yyyy = Z.take_yyyy 		                                                                AND K.take_org_cd = Z.take_org_cd		                                                                AND K.creat_sys_cd = Z.creat_sys_cd 		                                                                AND K.take_sno = '1'))		    AND A.recv_re_flag IS NULL	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakePlanFolderPagedList

		SELECT COUNT(1)		FROM  (		    SELECT (SELECT NVL(Z.take_off_div_cd, '0') FROM tb_tkfolder_nonelect Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_take_seq = A.folder_take_seq) take_off_div_cd		    FROM  TB_TKFOLDER A		    WHERE A.record_center_id = '1'		    AND   A.take_yyyy        = '1'		    AND   A.take_org_cd      = '1'		    AND   A.creat_sys_cd     = '1'		    AND   A.take_sno IN (SELECT Z.take_sno 		                         FROM tb_tkorgtakeplan Z		                           WHERE Z.record_center_id= A.record_center_id		                          AND   Z.take_yyyy       = A.take_yyyy		                          AND   Z.take_org_cd     = A.take_org_cd		                          AND   Z.creat_sys_cd    = A.creat_sys_cd		                          and   Z.parent_take_sno = (SELECT K.parent_take_sno 		                                                    FROM tb_tkorgtakeplan K 		                                                    WHERE K.record_center_id = Z.record_center_id 		                                                    AND K.take_yyyy = Z.take_yyyy 		                                                    AND K.take_org_cd = Z.take_org_cd 		                                                    AND K.creat_sys_cd = Z.creat_sys_cd		                                                    AND K.take_sno = '1'))		    AND erecord_flag in ('2', '3')		    AND recv_re_flag is null		) C WHERE  				NVL(C.take_off_div_cd, '0') = '1'			  AND 				NVL(C.take_off_div_cd, '0') = '1'			  ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakePlanFolderPagedList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT C.folder_take_seq		      ,C.clss_id		      ,C.clss_nm		      ,C.title		      ,C.creat_yyyy		      ,C.presv_term_cd		      ,C.presv_term_nm		      ,C.erecord_flag		      ,C.erecord_flag_nm		      ,C.exam_rslt_cd		      ,C.exam_rslt_nm		      ,C.take_fin_flag		      ,C.take_plan_yyyy		      ,NVL(C.take_off_div_cd, '0') take_off_div_cd		      ,C.take_off_rsn		      ,C.not_efile		      , case 		      	when NVL(C.take_off_div_cd, '0') = '0' then '미처리'		      	when NVL(C.take_off_div_cd, '0') = '1' then '확정'		      	when NVL(C.take_off_div_cd, '0') = '2' then '보류'		      	end AS take_state_div_nm		FROM  (		    SELECT A.folder_take_seq		         , A.clss_id		         , A.clss_nm		         , A.title		         , A.creat_yyyy		         , A.presv_term_cd		         , (SELECT C.com_cd_nm		            FROM TB_ZZCOMCD C		            WHERE C.com_type_cd = DECODE(A.creat_sys_cd,'02','RD57','RD07')		            AND   C.com_cd = A.presv_term_cd) presv_term_nm		         , A.erecord_flag		         , (SELECT C.com_cd_nm		            FROM TB_ZZCOMCD C		            WHERE C.com_type_cd = 'RD23'		            AND   C.com_cd = A.erecord_flag) erecord_flag_nm		         , A.exam_rslt_cd		         , (SELECT C.com_cd_nm		            FROM  TB_ZZCOMCD C		            WHERE C.com_type_cd = 'TK03'		            AND   C.com_cd = NVL(A.exam_rslt_cd,'0')) exam_rslt_nm		         , A.take_fin_flag		         , (SELECT Z.take_plan_yyyy FROM tb_tkfolder_nonelect Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_take_seq = A.folder_take_seq) take_plan_yyyy		         , (SELECT NVL(Z.take_off_div_cd, '0') FROM tb_tkfolder_nonelect Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_take_seq = A.folder_take_seq) take_off_div_cd		         , (SELECT Z.take_off_RSN FROM tb_tkfolder_nonelect Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_take_seq = A.folder_take_seq) take_off_rsn		         , (SELECT COUNT(1) FROM tb_tkrecord Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_take_seq = A.folder_take_seq AND Z.erecord_flag = '2') not_efile		    FROM  TB_TKFOLDER A		    WHERE A.record_center_id = '1'		    AND   A.take_yyyy        = '1'		    AND   A.take_org_cd      = '1'		    AND   A.creat_sys_cd     = '1'		    AND   A.take_sno IN (SELECT Z.take_sno 		                         FROM tb_tkorgtakeplan Z		                           WHERE Z.record_center_id= A.record_center_id		                          AND   Z.take_yyyy       = A.take_yyyy		                          AND   Z.take_org_cd     = A.take_org_cd		                          AND   Z.creat_sys_cd    = A.creat_sys_cd		                          and   Z.parent_take_sno = (SELECT K.parent_take_sno 		                                                    FROM tb_tkorgtakeplan K 		                                                    WHERE K.record_center_id = Z.record_center_id 		                                                    AND K.take_yyyy = Z.take_yyyy 		                                                    AND K.take_org_cd = Z.take_org_cd 		                                                    AND K.creat_sys_cd = Z.creat_sys_cd		                                                    AND K.take_sno = '1'))		    AND erecord_flag in ('2', '3')		    AND recv_re_flag is null		) C WHERE  				NVL(C.take_off_div_cd, '0') = '1'			  AND 				NVL(C.take_off_div_cd, '0') = '1'			  		ORDER BY folder_take_seq		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakePlanFolderList

	 	SELECT COUNT(1) FROM tb_tkfolder_nonelect WHERE record_center_id = '1' AND folder_take_seq = '1'	 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakePlanFolderList

		INSERT INTO tb_tkfolder_nonelect 			(record_center_id, folder_take_seq, take_plan_yyyy, take_off_div_cd, take_off_rsn, reg_dtime)		VALUES						('1', '1', '1', '1', '1', TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS'))	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : updateUndTakePlanFolderList

		UPDATE tb_tkfolder_nonelect 		   SET take_plan_yyyy = '1'		   	  ,take_off_div_cd = '1'		      ,take_off_rsn   = '1'		      ,reg_dtime 	  = TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS')		 WHERE record_center_id = '1'		   AND folder_take_seq  = '1' 	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakePlanNonElectFolderId

		SELECT folder_id FROM tb_rdfolder WHERE record_center_id = '1' AND folder_take_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakePlanNonElectFolder

		SELECT count(1) FROM tb_rdfolder_nonelect WHERE record_center_id = '1' AND folder_id = '1'		;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderBatch

		UPDATE TB_TKFOLDER                		SET exam_rslt_cd = (CASE WHEN error_flag = 'Y' THEN '2' ELSE '1' END)		WHERE CONCAT(record_center_id, folder_take_seq)			IN ( SELECT CONCAT(record_center_id, folder_take_seq)		         FROM ( SELECT E.record_center_id, E.folder_take_seq, E.take_yyyy, E.take_org_cd, E.creat_sys_cd, E.take_sno		                     , E.exam_rslt_cd, E.error_flag, E.virus_flag					         , DECODE(E.error_flag,'Y','X',DECODE(NVL(E.virus_dtime,''),'','X',DECODE(E.virus_flag,'1','X','O'))) auto_check							 , DECODE(E.take_fin_flag,'1','4',DECODE(E.rjct_flag,'1','3',NVL(E.exam_rslt_cd,'0'))) status		                FROM  TB_TKFOLDER E						WHERE E.record_center_id = '1'						AND   E.take_yyyy = '1'						AND   E.take_org_cd = '1'						AND   E.creat_sys_cd = '1'						AND   E.take_sno IN (SELECT take_sno                                              FROM tb_tkorgtakeplan D                                              WHERE D.record_center_id = E.record_center_id                                             AND D.take_yyyy          = E.take_yyyy                                                  AND D.take_org_cd        = E.take_org_cd                                             AND D.creat_sys_cd       = E.creat_sys_cd                                             AND D.parent_take_sno    = (SELECT F.parent_take_sno                                                                          FROM tb_tkorgtakeplan F                                                                          WHERE F.record_center_id = D.record_center_id                                                                          AND F.take_yyyy = D.take_yyyy                                                                          AND F.take_org_cd = D.take_org_cd                                                                          AND F.creat_sys_cd = D.creat_sys_cd                                                                         AND F.take_sno = '1'))						AND   E.exam_rslt_cd = '0' 						AND   (E.rjct_flag = '0' or E.rjct_flag is null) 						 AND 							  E.erecord_flag = '1'						 					)					 WHERE  							  auto_check = '1'						  AND 							  auto_check = '1'						  AND 							  status = '1'						  				)		AND record_center_id > 0 AND folder_take_seq > 0;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckFolderBatchPlan

		SELECT COUNT(1)		FROM  TB_TKFOLDER E		WHERE E.record_center_id = '1'		AND   E.take_yyyy = '1'		AND   E.take_org_cd = '1'		AND   E.creat_sys_cd = '1'		AND   E.take_sno IN (SELECT take_sno                                              FROM tb_tkorgtakeplan D                                              WHERE D.record_center_id = E.record_center_id                                             AND D.take_yyyy          = E.take_yyyy                                                  AND D.take_org_cd        = E.take_org_cd                                             AND D.creat_sys_cd       = E.creat_sys_cd                                             AND D.parent_take_sno    = (SELECT F.parent_take_sno                                                                          FROM tb_tkorgtakeplan F                                                                          WHERE F.record_center_id = D.record_center_id                                                                          AND F.take_yyyy = D.take_yyyy                                                                          AND F.take_org_cd = D.take_org_cd                                                                          AND F.creat_sys_cd = D.creat_sys_cd                                                                         AND F.take_sno = '1'))		AND   E.exam_rslt_cd = '0'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderBatchPlan

		UPDATE TB_TKORGTAKEPLAN		SET   take_state_div_cd = '06'		WHERE record_center_id = '1'		AND   take_yyyy = '1'		AND   take_org_cd = '1'		AND   creat_sys_cd = '1'		AND   take_sno = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckFolderCheckedList

		SELECT COUNT(*)		FROM  (			SELECT A.record_center_id			     , A.folder_take_seq			     , A.org_cd			     , A.clss_id			     , A.clss_nm			     , A.title			     , A.creat_yyyy			     , A.presv_term_cd				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = DECODE(A.creat_sys_cd,'02','RD57','RD07')				    AND   C.com_cd = A.presv_term_cd) presv_term_nm			     , A.virus_flag			     , A.error_flag			     , DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) auto_check			     , A.erecord_flag				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'RD23'				    AND   C.com_cd = A.erecord_flag) erecord_flag_nm			     , TO_NUMBER(A.record_reg_cnt) record_reg_cnt			     , NVL(A.exam_rslt_cd,'0') exam_rslt_cd			     , (SELECT C.com_cd_nm		            FROM  TB_ZZCOMCD C			        WHERE C.com_type_cd = 'TK03'			        AND   C.com_cd = NVL(A.exam_rslt_cd,'0')) exam_rslt_nm			     , A.exam_cont			     , DECODE(A.take_fin_flag,'1','4',DECODE(A.rjct_flag,'1','3',NVL(A.exam_rslt_cd,'0'))) status			FROM TB_TKFOLDER A			WHERE A.record_center_id = '1' AND A.folder_take_seq IN						 ('1','1','1')   AND 				  DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) = '1'			 					);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderCheckedList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT record_center_id		     , folder_take_seq		     , org_cd		     , clss_id		     , clss_nm		     , title		     , creat_yyyy		     , presv_term_cd		     , presv_term_nm		     , virus_flag		     , error_flag		     , auto_check		     , erecord_flag		     , erecord_flag_nm		     , record_reg_cnt		     , exam_rslt_cd		     , exam_rslt_nm		     , exam_cont		     , status		     , DECODE(status,'4','인수','3','반려',exam_rslt_nm) status_nm		FROM  (			SELECT A.record_center_id			     , A.folder_take_seq			     , A.org_cd			     , A.clss_id			     , A.clss_nm			     , A.title			     , A.creat_yyyy			     , A.presv_term_cd				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = DECODE(A.creat_sys_cd,'02','RD57','RD07')				    AND   C.com_cd = A.presv_term_cd) presv_term_nm			     , A.virus_flag			     , A.error_flag			     , DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) auto_check			     , A.erecord_flag				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'RD23'				    AND   C.com_cd = A.erecord_flag) erecord_flag_nm			     , TO_NUMBER(A.record_reg_cnt) record_reg_cnt			     , NVL(A.exam_rslt_cd,'0') exam_rslt_cd			     , (SELECT C.com_cd_nm		            FROM  TB_ZZCOMCD C			        WHERE C.com_type_cd = 'TK03'			        AND   C.com_cd = NVL(A.exam_rslt_cd,'0')) exam_rslt_nm			     , A.exam_cont			     , DECODE(A.take_fin_flag,'1','4',DECODE(A.rjct_flag,'1','3',NVL(A.exam_rslt_cd,'0'))) status			FROM TB_TKFOLDER A			WHERE A.record_center_id = '1' AND A.folder_take_seq IN						 ('1','1','1')   AND 				  DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) = '1'			 		)		ORDER BY folder_take_seq		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderNormal

		UPDATE TB_TKFOLDER		SET   exam_rslt_cd = '1'			, exam_cont = '1'		WHERE record_center_id = '1'		AND   folder_take_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderAbnormal

		UPDATE TB_TKFOLDER		SET   exam_rslt_cd = '2'			, exam_cont = '1'		WHERE record_center_id = '1'		AND   folder_take_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckFolderPlan

		SELECT COUNT(1)		FROM  TB_TKFOLDER A		WHERE 			  EXISTS			  (								SELECT 1				FROM  TB_TKFOLDER				WHERE record_center_id = '1'				AND   folder_take_seq = '1'				AND   record_center_id = A.record_center_id				AND   take_yyyy = A.take_yyyy				AND   take_org_cd = A.take_org_cd				AND   creat_sys_cd = A.creat_sys_cd  				AND   take_sno = A.take_sno			   )		AND   exam_rslt_cd = '0'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderPlan

		UPDATE TB_TKORGTAKEPLAN AAA		SET	 				take_state_div_cd = '1'			 		WHERE 				EXISTS (SELECT 1				FROM  TB_TKFOLDER				WHERE record_center_id = '1'				AND   folder_take_seq = '1'				AND AAA.record_center_id = record_center_id				AND AAA.take_yyyy = take_yyyy				AND AAA.take_org_cd = take_org_cd				AND AAA.creat_sys_cd= creat_sys_cd				AND AAA.take_sno = take_sno			   );


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckRecvHist

		SELECT COUNT(1)		FROM  TB_TKFOLDER AAA		WHERE 				EXISTS (SELECT 1				FROM  TB_TKFOLDER				WHERE record_center_id = '1'				AND   folder_take_seq = '1'				AND AAA.record_center_id = record_center_id				AND AAA.reg_dtime= reg_dtime			   )		AND   ( exam_rslt_cd = '0' OR exam_rslt_cd IS NULL );


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckRecvHistError

		SELECT COUNT(1)		FROM  TB_TKFOLDER AAA		WHERE 				EXISTS (SELECT 1				FROM  TB_TKFOLDER				WHERE record_center_id = '1'				AND   folder_take_seq = '1'				AND AAA.record_center_id = record_center_id				AND AAA.reg_dtime = reg_dtime			   )		AND   exam_rslt_cd = '2';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckRecvHist

		UPDATE TB_TKRECVHIST AAA		SET   reg_prog_state_cd = '1'		    , exam_error_cnt = '1'		WHERE 				EXISTS (SELECT 1				FROM  TB_TKFOLDER				WHERE record_center_id = '1'				AND   folder_take_seq = '1'				AND AAA.record_center_id = record_center_id				AND AAA.recv_dtime = reg_dtime			   )		AND   creat_sys_cd = '1'		AND   file_div_cd = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckFolderCheckedRecordPagedList

		SELECT COUNT(*)		FROM (			SELECT A.record_center_id			     , A.record_take_seq				 , A.folder_take_seq			     , A.title			     , A.creat_yyyy			     , A.error_flag			     , A.erecord_flag				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'RD23'				    AND   C.com_cd = A.erecord_flag) erecord_flag_nm			     , DECODE(A.error_flag,'Y','X','O') auto_check			     , NVL(A.exam_rslt_cd,'0') exam_rslt_cd			     , (SELECT C.com_cd_nm		            FROM  TB_ZZCOMCD C			        WHERE C.com_type_cd = 'TK03'			        AND   C.com_cd = NVL(A.exam_rslt_cd,'0')) exam_rslt_nm			     , A.exam_cont				 , (SELECT COUNT(1)				    FROM TB_TKATTACHFILE B					WHERE B.record_center_id = A.record_center_id					AND   B.record_take_seq = A.record_take_seq					AND   B.virus_flag = '1') virus_cnt			FROM  TB_TKRECORD A			WHERE A.record_center_id = '1'			AND   A.folder_take_seq = '1'					) A WHERE 				  DECODE(A.error_flag,'Y','X',DECODE(A.virus_cnt,0,'O','X')) = '1'		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderCheckedRecordPagedList

		SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT A.record_center_id		     , A.record_take_seq			 , A.folder_take_seq		     , A.title		     , A.creat_yyyy		     , A.error_flag		     , A.erecord_flag			 , A.erecord_flag_nm		     , DECODE(A.error_flag,'Y','X',DECODE(A.virus_cnt,0,'O','X')) auto_check		     , A.exam_rslt_cd		     , A.exam_rslt_nm		     , A.exam_cont			 , DECODE(A.virus_cnt,0,'0','1') virus_flag		FROM (			SELECT A.record_center_id			     , A.record_take_seq				 , A.folder_take_seq			     , A.title			     , A.creat_yyyy			     , A.error_flag			     , A.erecord_flag				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'RD23'				    AND   C.com_cd = A.erecord_flag) erecord_flag_nm			     , DECODE(A.error_flag,'Y','X','O') auto_check			     , NVL(A.exam_rslt_cd,'0') exam_rslt_cd			     , (SELECT C.com_cd_nm		            FROM  TB_ZZCOMCD C			        WHERE C.com_type_cd = 'TK03'			        AND   C.com_cd = NVL(A.exam_rslt_cd,'0')) exam_rslt_nm			     , A.exam_cont				 , (SELECT COUNT(1)				    FROM TB_TKATTACHFILE B					WHERE B.record_center_id = A.record_center_id					AND   B.record_take_seq = A.record_take_seq					AND   B.virus_flag = '1'					AND	  B.virus_clean_flag = '1') virus_cnt			FROM  TB_TKRECORD A			WHERE A.record_center_id = '1'			AND   A.folder_take_seq = '1'					) A WHERE 				  DECODE(A.error_flag,'Y','X',DECODE(A.virus_cnt,0,'O','X')) = '1'		 		ORDER BY A.record_take_seq		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckRecordNormal

		UPDATE TB_TKRECORD		SET   exam_rslt_cd = '1'			, exam_cont = '1'		WHERE record_center_id = '1'		AND   record_take_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckRecordAbnormal

		UPDATE TB_TKRECORD		SET   exam_rslt_cd = '2'			, exam_cont = '1'		WHERE record_center_id = '1'		AND   record_take_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckFolderRjctFolderList

	SELECT COUNT(*)		FROM TB_TKFOLDER A		WHERE A.record_center_id = '1'		 AND A.folder_take_seq IN				 ('1','1','1')  ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderRjctFolderList

		SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT A.record_center_id		     , A.folder_take_seq		     , A.org_cd		     , A.clss_id		     , A.clss_nm		     , A.title		     , A.creat_yyyy		     , A.presv_term_cd			 , (SELECT C.com_cd_nm			    FROM TB_ZZCOMCD C			    WHERE C.com_type_cd = DECODE(A.creat_sys_cd,'02','RD57','RD07')			    AND   C.com_cd = A.presv_term_cd) presv_term_nm		     , A.virus_flag		     , A.error_flag		     , DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) auto_check		     , A.erecord_flag			 , (SELECT C.com_cd_nm			    FROM TB_ZZCOMCD C			    WHERE C.com_type_cd = 'RD23'			    AND   C.com_cd = A.erecord_flag) erecord_flag_nm		     , TO_NUMBER(A.record_reg_cnt) AS record_reg_cnt		     , NVL(A.exam_rslt_cd,'0') exam_rslt_cd		     , DECODE(A.rjct_flag,'1','반려'							     ,(SELECT C.com_cd_nm						            FROM  TB_ZZCOMCD C							        WHERE C.com_type_cd = 'TK03'							        AND   C.com_cd = NVL(A.exam_rslt_cd,'0'))) exam_rslt_nm		     , A.exam_cont		     , A.rjct_flag		     , A.rjct_cont		FROM TB_TKFOLDER A		WHERE A.record_center_id = '1'		 AND A.folder_take_seq IN				 ('1','1','1')  		ORDER BY A.folder_take_seq		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderRjctFolder

		UPDATE TB_TKFOLDER		SET   rjct_flag = '1'			, rjct_cont = '1'			, exam_rslt_cd = '2'		WHERE record_center_id = '1'		AND   folder_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckFolderRjctRecordPagedList

		SELECT COUNT(1)		FROM  TB_TKRECORD A		WHERE A.record_center_id = '1'		AND   A.folder_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderRjctRecordPagedList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT record_center_id		      ,record_take_seq		      ,folder_take_seq		      ,title		      ,creat_yyyy		      ,error_flag		      ,DECODE(auto_check,'X','X', DECODE(virus_cnt, 0, 'O','X')) auto_check		      ,exam_rslt_cd		      ,exam_rslt_nm		      ,exam_cont		FROM   (SELECT A.record_center_id		              ,A.record_take_seq		              ,A.folder_take_seq		              ,A.title		              ,A.creat_yyyy		              ,A.error_flag		              ,DECODE(A.error_flag,'Y','X','O') auto_check		              ,NVL(A.exam_rslt_cd,'0') exam_rslt_cd		              ,(SELECT C.com_cd_nm		                FROM   TB_ZZCOMCD C		                WHERE  C.com_type_cd = 'TK03'		                AND    C.com_cd = NVL(A.exam_rslt_cd,'0')) exam_rslt_nm		              ,A.exam_cont		              ,(SELECT COUNT(1) FROM TB_TKATTACHFILE Z WHERE Z.record_center_id = A.record_center_id AND Z.record_take_seq = A.record_take_seq AND Z.virus_flag = '1') virus_cnt		        FROM   TB_TKRECORD A		        WHERE  A.record_center_id = '1'		        AND    A.folder_take_seq = '1')		ORDER BY record_take_seq		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeFolderBatchList

		SELECT record_center_id		     , folder_take_seq		     , take_yyyy		     , creat_sys_cd		     , take_org_cd		     , take_sno		FROM  (			SELECT A.record_center_id			     , A.folder_take_seq			     , A.erecord_flag				 , DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) auto_check			     , NVL(A.exam_rslt_cd,'0') exam_rslt_cd			     , NVL(A.rjct_flag,'0') rjct_flag			     , NVL(A.take_fin_flag,'0') take_fin_flag			     , DECODE(A.take_fin_flag,'1','4',DECODE(A.rjct_flag,'1','3',NVL(A.exam_rslt_cd,'0'))) status			     , take_yyyy			     , creat_sys_cd			     , take_org_cd			     , take_sno			FROM  TB_TKFOLDER A			WHERE A.record_center_id = '1'			AND   A.take_yyyy = '1'			AND   A.take_org_cd = '1'			AND   A.creat_sys_cd = '1'			AND   A.take_sno IN (SELECT take_sno                                              FROM tb_tkorgtakeplan D                                              WHERE D.record_center_id = A.record_center_id                                             AND D.take_yyyy          = A.take_yyyy                                                  AND D.take_org_cd        = A.take_org_cd                                             AND D.creat_sys_cd       = A.creat_sys_cd                                             AND D.parent_take_sno    = (SELECT F.parent_take_sno                                                                          FROM tb_tkorgtakeplan F                                                                          WHERE F.record_center_id = D.record_center_id                                                                          AND F.take_yyyy = D.take_yyyy                                                                          AND F.take_org_cd = D.take_org_cd                                                                          AND F.creat_sys_cd = D.creat_sys_cd                                                                         AND F.take_sno = '1'))			 AND 				  A.erecord_flag = '1'			 			AND   A.exam_rslt_cd = '1'			AND   (A.rjct_flag = '0' OR A.rjct_flag is null)			AND   A.take_fin_flag = '0'		) WHERE  				  auto_check = '1'			  AND 				  auto_check = '1'			  AND 				  status = '1'			  		ORDER BY record_center_id, folder_take_seq	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeFolderId

		SELECT folder_id		FROM  TB_RDFOLDER		WHERE record_center_id = '1'		AND   folder_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeFolder

		INSERT INTO TB_RDFOLDER		(		    record_center_id		    , FOLDER_ID		    , creat_sys_cd, clss_div_cd, clss_id, creat_yyyy, folder_reg_seq			, ho_no, take_yyyy, TAKE_YYYY_SNO, clss_nm, org_title, title			, sub_title, folder_type_div_cd, etc_folder_type, folder_detl_type_cd, creat_purps			, media_format, medium, folder_size, record_tot_page_cnt, record_reg_cnt			, efile_cnt, new_div_cd, chng_flag, old_folder_creat_org_nm, old_folder_clss_no			, folder_bispjt_div_cd, bis_clss_path_nm, pjt_clss_path_nm, folder_start_dtime, folder_close_dtime			, funsh_end_dtime, funsh_rsn			, PRESV_TERM_CD, trans_dtime			, presv_term_fix_rsn, presv_method_cd			, presv_area_cd, presv_loc, presv_duty_chrgr_nm, secu_clss_cd, secu_clss_rsn			, read_range, take_takovr_div_cd, take_takovr_org_cd, take_takovr_clss_id, take_takovr_creat_yyyy			, take_takovr_folder_reg_seq, take_takovr_ho_no, take_takovr_ymd, creat_user_id, creat_user_nm			, creat_user_org_cd, creat_user_org_nm, creat_user_pos_rank_nm, creat_dtime, erecord_flag			, creat_sys_folder_id, virus_flag, virus_dtime, reg_dtime, transf_aprov_user_id		    , transf_aprov_user_nm, transf_aprov_dtime, org_cd, read_cnt, oper_read_range_cd		    , sumry, group_presv_term_cd, folder_take_seq, take_org_cd, cur_keep_org_cd			, OPEN_DIV_CD, MIG_FLAG, FOLDER_KEEP_STATE_CD, EFILE_DEL_FLAG			, EXPT_DISUSE_YYYY, EXPT_TRANSF_YYYY,PERIOD_FROM_DT, PERIOD_TO_DT		)		(			SELECT A.record_center_id			     , TO_CHAR(SYSDATE,'YYYY')||LPAD((TB_RDFOLDER_SQ01.nextval), 10, '0') folder_id			     , A.creat_sys_cd, A.clss_div_cd, A.clss_id, A.creat_yyyy, A.folder_reg_seq				 , A.ho_no, A.take_yyyy, A.take_sno, A.clss_nm, A.title, A.title				 , A.sub_title, A.folder_type_div_cd, A.etc_folder_type, A.folder_detl_type_cd, A.creat_purps				 , A.media_format, A.medium, A.folder_size, A.record_tot_page_cnt, A.record_reg_cnt				 , A.efile_cnt, A.new_div_cd, A.chng_flag, A.old_folder_creat_org_nm, A.old_folder_clss_no				 , A.folder_bispjt_div_cd, A.bis_clss_path_nm, A.pjt_clss_path_nm, A.folder_start_dtime, A.folder_close_dtime				 , A.funsh_end_dtime, A.funsh_rsn				 , DECODE(A.creat_sys_cd,'02',DECODE(A.presv_term_cd,'20','25',A.presv_term_cd),A.presv_term_cd) presv_term_cd, trans_dtime				 , A.presv_term_fix_rsn, A.presv_method_cd				 , A.presv_area_cd, A.presv_loc, A.presv_duty_chrgr_nm, A.secu_clss_cd, A.secu_clss_rsn				 , A.read_range, A.take_takovr_div_cd, A.take_takovr_org_cd, A.take_takovr_clss_id, A.take_takovr_creat_yyyy				 , A.take_takovr_folder_reg_seq, A.take_takovr_ho_no, A.take_takovr_ymd, A.creat_user_id, A.creat_user_nm				 , A.creat_user_org_cd, A.creat_user_org_nm, A.creat_user_pos_rank_nm, A.creat_dtime, A.erecord_flag				 				 , A.creat_sys_folder_id, A.virus_flag, A.virus_dtime, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), A.transf_aprov_user_id			     , A.transf_aprov_user_nm, A.transf_aprov_dtime, A.org_cd, A.read_cnt				 , '01' oper_read_range_cd			     , A.sumry, A.group_presv_term_cd, A.folder_take_seq, A.take_org_cd, A.take_org_cd				 , '3' open_div_cd, '0' mig_flag, '01' folder_keep_state_cd, '0' efile_del_flag				 , DECODE( GREATEST(TO_NUMBER(A.presv_term_cd),19), 19, (TO_NUMBER(DECODE(A.creat_sys_cd,'01',A.creat_yyyy,'04',A.creat_yyyy,NVL(SUBSTR(A.FOLDER_CLOSE_DTIME,0,4),A.CREAT_YYYY)))+1+TO_NUMBER(A.presv_term_cd)) ) expt_disuse_yyyy				 , (CASE WHEN A.folder_type_div_cd = '3' OR A.folder_type_div_cd = '4'				        THEN DECODE( LEAST(TO_NUMBER(A.presv_term_cd),20), 20, (TO_NUMBER(DECODE(A.creat_sys_cd,'01',A.creat_yyyy,'04',A.creat_yyyy,NVL(SUBSTR(A.FOLDER_CLOSE_DTIME,0,4),A.CREAT_YYYY)))+5) )				        ELSE DECODE( LEAST(TO_NUMBER(A.presv_term_cd),20), 20, (TO_NUMBER(DECODE(A.creat_sys_cd,'01',A.creat_yyyy,'04',A.creat_yyyy,NVL(SUBSTR(A.FOLDER_CLOSE_DTIME,0,4),A.CREAT_YYYY)))+10) )				        END				  	) expt_transf_yyyy				 , PERIOD_FROM_DT, PERIOD_TO_DT			FROM TB_TKFOLDER A			WHERE A.record_center_id = '1'			AND   A.folder_take_seq = '1'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeFolderRel

		INSERT INTO TB_RDFOLDERREL		(		    record_center_id, folder_id, rel_type_cd, rel_seq, rel_trgt_id		    , rel_descr, reg_dtime		)		(			SELECT B.record_center_id			     , B.folder_id			     , A.rel_type_cd			     , A.rel_seq			     , A.rel_trgt_id			     , A.rel_descr			     , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKFOLDERREL A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_take_seq = B.folder_take_seq			AND   B.record_center_id = '1'			AND   B.folder_take_seq = '1'			AND   B.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeFolderCreat

		INSERT INTO TB_RDFOLDERCREAT		(		    record_center_id, folder_id, agent_sno, agent_type_cd, agent_id			, agent_nm, agent_org_cd, agent_org_nm, agent_pos_rank_nm, duty_type_cd			, duty_act_dtime, reg_dtime, opin		)		(			SELECT B.record_center_id, B.folder_id, A.agent_sno, A.agent_type_cd, A.agent_id				 , A.agent_nm, A.agent_org_cd, A.agent_org_nm, A.agent_pos_rank_nm, A.duty_type_cd				 				 , A.duty_act_dtime, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), A.opin			FROM TB_TKFOLDERCREAT A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_take_seq = B.folder_take_seq			AND   B.record_center_id = '1'			AND   B.folder_take_seq = '1'			AND   B.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeFolderPjtClss

		INSERT INTO TB_RDFOLDERPJTCLSS		(		    record_center_id, folder_id, sno, pjt_clss_id		)		(			SELECT B.record_center_id, B.folder_id, A.sno, A.pjt_clss_id			FROM TB_TKFOLDERPJTCLSS A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_take_seq = B.folder_take_seq			AND   B.record_center_id = '1'			AND   B.folder_take_seq = '1'			AND   B.mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeFolderTaketakovr

		INSERT INTO TB_RDFOLDERTAKETAKOVR		(		    record_center_id, folder_id, sno, take_takovr_div_cd, take_takovr_creat_dtime			, take_takovr_org_cd, take_takovr_org_nm, reg_dtime, take_takovr_clss_id, take_takovr_creat_yyyy			, take_takovr_folder_id, take_takovr_folder_title, take_takovr_folder_reg_seq, take_takovr_ho_no		)		(			SELECT B.record_center_id, B.folder_id, A.sno, A.take_takovr_div_cd, A.take_takovr_creat_dtime				 , A.take_takovr_org_cd, A.take_takovr_org_nm, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), A.take_takovr_clss_id, A.take_takovr_creat_yyyy				 , A.take_takovr_folder_id, A.take_takovr_folder_title, A.take_takovr_folder_reg_seq, A.take_takovr_ho_no			FROM TB_TKFOLDERTAKETAKOVR A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_take_seq = B.folder_take_seq			AND   B.record_center_id = '1'			AND   B.folder_take_seq = '1'			AND   B.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeFolderChngHist

		INSERT INTO TB_RDFOLDERCHNGHIST		(		    record_center_id, folder_id, chng_hist_no, org_cd, clss_id			, creat_yyyy, folder_reg_seq, ho_no, title_bef, title_aft			, folder_type_div_cd_bef, folder_type_div_cd_aft, chng_ymd, chng_rsn, chng_user_nm			, reg_dtime		)		(			SELECT B.record_center_id, B.folder_id, A.chng_hist_no, A.org_cd, A.clss_id				 , A.creat_yyyy, A.folder_reg_seq, A.ho_no, A.title_bef, A.title_aft				 , A.folder_type_div_cd_bef, A.folder_type_div_cd_aft, A.chng_ymd, A.chng_rsn, A.chng_user_nm				 				 , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKFOLDERCHNGHIST A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_take_seq = B.folder_take_seq			AND   B.record_center_id = '1'			AND   B.folder_take_seq = '1'			AND   B.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeFolderSpclList

		SELECT record_center_id		     , folder_take_seq		     , seq		     , spcl_list1		     , spcl_list2		     , spcl_list3		FROM  TB_TKSPCLLIST		WHERE record_center_id = '1'		AND   folder_take_seq = '1'		AND   spcl_list_loc = '1'		ORDER BY record_center_id, folder_take_seq, seq	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeFolderSpclList

		INSERT INTO TB_RDFOLDERKEYWD		(		    record_center_id, folder_id, keywd_levl, keywd, reg_dtime		)		(			SELECT record_center_id			     , folder_id			     , '1'			     , '1'			     			     , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM  TB_RDFOLDER			WHERE record_center_id = '1'			AND   folder_take_seq = '1'			AND   mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeRecord

		INSERT INTO TB_RDRECORD		(			record_center_id			, record_id			, folder_id			, take_yyyy, take_yyyy_sno, clss_div_cd, clss_id, clss_nm			, creat_sys_cd, org_cd, creat_yyyy, creat_reg_dtime			, creat_reg_no			, dtch_reg_no, org_title, title, sub_title, record_reg_div_cd, record_detl_type_cd			, record_sumry, audvis_record_type, audvis_record_sumry, media_format, medium			, record_size, attach_cnt, record_page_cnt, aprov_pos_rank_nm, duty_chrgr_nm			, enforc_ymd, creat_org_reg_no, erecord_flag, old_record_creat_org_nm, old_record_docno			, old_record_presv_term, presv_loc, secu_clss_cd, secu_clss_rsn, read_range			, open_div_cd, open_grade, part_open_rsn, open_limit_date, open_limit_part, open_expt_dtime			, recver, sender, chng_ver_no, doc_distr_no, folder_clss_no			, spcl_record_type, orign_copy_flag, new_div_cd, chng_flag, rjct_flag			, doc_no, doc_no_org_nm, creat_user_id, creat_user_org_cd, creat_user_org_nm, creat_user_pos_rank_nm			, creat_dtime, creat_sys_record_id, reg_dtime, record_take_seq			, oper_read_range_cd			, MIG_FLAG, enforc_docno, lang, record_sno			, secret_clss, secret_term, prod_type_cd, close_type_cd, distribute_no			, distribute_dt, recall_type_cd, record_clss_cd, transf_neo_trans_state, nonelect_reg_dtime			, bms_record_detl_type_cd, bms_record_detl_sort_cd		)		(			SELECT record_center_id				, TO_CHAR(SYSDATE,'YYYY')||LPAD((TB_RDRECORD_SQ01.nextval), 10, '0') record_id				, folder_id				, take_yyyy, take_yyyy_sno, clss_div_cd, clss_id, clss_nm				, creat_sys_cd, org_cd, creat_yyyy, creat_reg_dtime				, creat_reg_no				, dtch_reg_no, org_title, title, sub_title, record_reg_div_cd, record_detl_type_cd				, record_sumry, audvis_record_type, audvis_record_sumry, media_format, medium				, record_size, attach_cnt, record_page_cnt, aprov_pos_rank_nm, duty_chrgr_nm				, enforc_ymd, creat_org_reg_no, erecord_flag, old_record_creat_org_nm, old_record_docno				, old_record_presv_term, presv_loc, NVL(secu_clss_cd,'01'), secu_clss_rsn, read_range				, open_div_cd, open_grade, part_open_rsn, open_limit_date, open_limit_part, open_expt_dtime				, recver, sender, chng_ver_no, doc_distr_no, folder_clss_no				, spcl_record_type, orign_copy_flag, new_div_cd, chng_flag, rjct_flag				, doc_no, doc_no_org_nm, creat_user_id, creat_user_org_cd, creat_user_org_nm, creat_user_pos_rank_nm				, creat_dtime, creat_sys_record_id, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), record_take_seq				, oper_read_range_cd				, mig_flag, enforc_docno, lang, record_sno				, secret_clss, secret_term, prod_type_cd, close_type_cd, distribute_no				, distribute_dt, recall_type_cd, record_clss_cd, transf_neo_trans_state, nonelect_reg_dtime				, bms_record_detl_type_cd, bms_record_detl_sort_cd			FROM 			(				(					SELECT record_center_id						, folder_id						, take_yyyy, take_yyyy_sno, clss_div_cd, clss_id, clss_nm						, creat_sys_cd, org_cd, creat_yyyy, creat_reg_dtime						, LPAD(max_no+row_no,13,'0') creat_reg_no						, dtch_reg_no, org_title, title, sub_title, record_reg_div_cd, record_detl_type_cd						, record_sumry, audvis_record_type, audvis_record_sumry, media_format, medium						, record_size, attach_cnt, record_page_cnt, aprov_pos_rank_nm, duty_chrgr_nm						, enforc_ymd, creat_org_reg_no, erecord_flag, old_record_creat_org_nm, old_record_docno						, old_record_presv_term, presv_loc, secu_clss_cd, secu_clss_rsn, read_range						, open_div_cd, open_grade, part_open_rsn, open_limit_date, open_limit_part, open_expt_dtime						, recver, sender, chng_ver_no, doc_distr_no, folder_clss_no						, spcl_record_type, orign_copy_flag, new_div_cd, chng_flag, rjct_flag						, doc_no, doc_no_org_nm, creat_user_id, creat_user_org_cd, creat_user_org_nm, creat_user_pos_rank_nm						, creat_dtime, creat_sys_record_id, record_take_seq						, oper_read_range_cd						, mig_flag, enforc_docno, lang, record_sno						, secret_clss, secret_term, prod_type_cd, close_type_cd, distribute_no						, distribute_dt, recall_type_cd, record_clss_cd, transf_neo_trans_state, nonelect_reg_dtime						, bms_record_detl_type_cd, bms_record_detl_sort_cd					FROM (						SELECT B.record_center_id							 , B.folder_id							 , B.take_yyyy, B.take_yyyy_sno, B.clss_div_cd, B.clss_id, B.clss_nm							 , A.creat_sys_cd, A.org_cd, A.creat_yyyy, A.creat_reg_dtime							 , NVL((SELECT MAX(TO_NUMBER(NVL(C.creat_reg_no,0))) 								    FROM TB_RDRECORD C									WHERE C.record_center_id = A.record_center_id									AND   C.creat_sys_cd = A.creat_sys_cd									AND   C.org_cd = A.org_cd									AND   C.creat_yyyy = A.creat_yyyy),0) max_no							 , ROW_NUMBER() OVER (PARTITION BY A.record_center_id, A.creat_yyyy, A.org_cd, A.creat_sys_cd ORDER BY A.creat_reg_no) row_no							 , A.dtch_reg_no, A.title AS org_title, A.title, A.sub_title, A.record_reg_div_cd, A.record_detl_type_cd							 , A.record_sumry, A.audvis_record_type, A.audvis_record_sumry, A.media_format, A.medium							 , A.record_size, A.attach_cnt, A.record_page_cnt, A.aprov_pos_rank_nm, A.duty_chrgr_nm							 , A.enforc_ymd, A.creat_org_reg_no, A.erecord_flag, A.old_record_creat_org_nm, A.old_record_docno							 , A.old_record_presv_term, A.presv_loc, A.secu_clss_cd, A.secu_clss_rsn, A.read_range							 , A.open_div_cd, A.open_grade, A.part_open_rsn, A.open_limit_date, A.open_limit_part, A.open_expt_dtime							 , A.recver, A.sender, A.chng_ver_no, A.doc_distr_no, A.folder_clss_no							 , A.spcl_record_type, A.orign_copy_flag, A.new_div_cd, A.chng_flag, A.rjct_flag							 , A.doc_no, A.doc_no_org_nm, A.creat_user_id, A.creat_user_org_cd, A.creat_user_org_nm, A.creat_user_pos_rank_nm							 , A.creat_dtime, A.creat_sys_record_id, A.record_take_seq							 , DECODE(A.record_detl_type_cd, '01', DECODE(A.read_range,'0','03','1','01'							                                                          , DECODE((SELECT COUNT(1) FROM TB_STORG WHERE record_center_id=A.record_center_id AND upper_org_cd=A.read_range)												                                               ,0,'02','01'))												                 , '02') oper_read_range_cd							 , '0' mig_flag, A.enforc_docno, A.lang, A.record_sno							 , A.secret_clss, A.secret_term, '' prod_type_cd, ''  close_type_cd, '' distribute_no						     , '' distribute_dt, '' recall_type_cd, A.record_clss_cd, '0' transf_neo_trans_state, A.nonelect_reg_dtime						     , '' as bms_record_detl_type_cd, '' as bms_record_detl_sort_cd						FROM TB_TKRECORD A						   , TB_RDFOLDER B						WHERE A.record_center_id = B.record_center_id						AND   A.folder_take_seq = B.folder_take_seq						AND   B.record_center_id = '1'						AND   B.folder_take_seq = '1'						AND   B.mig_flag = '0'						AND   A.creat_sys_cd = '01'						ORDER BY A.record_center_id, A.creat_sys_cd, A.org_cd, A.creat_yyyy, A.creat_reg_dtime, A.creat_reg_no, A.record_take_seq					)				)				UNION ALL				(					SELECT *					FROM (						SELECT B.record_center_id							 , B.folder_id							 , B.take_yyyy, B.take_yyyy_sno, B.clss_div_cd, B.clss_id, B.clss_nm							 , A.creat_sys_cd, A.org_cd, A.creat_yyyy, A.creat_reg_dtime							 , A.creat_reg_no							 , A.dtch_reg_no, A.title AS org_title, A.title, A.sub_title, A.record_reg_div_cd, A.record_detl_type_cd							 , A.record_sumry, A.audvis_record_type, A.audvis_record_sumry, A.media_format, A.medium							 , A.record_size, A.attach_cnt, A.record_page_cnt, A.aprov_pos_rank_nm, A.duty_chrgr_nm							 , A.enforc_ymd, A.creat_org_reg_no, A.erecord_flag, A.old_record_creat_org_nm, A.old_record_docno							 , A.old_record_presv_term, A.presv_loc, A.secu_clss_cd, A.secu_clss_rsn, A.read_range							 , A.open_div_cd, A.open_grade, A.part_open_rsn, A.open_limit_date, A.open_limit_part, A.open_expt_dtime							 , A.recver, A.sender, A.chng_ver_no, A.doc_distr_no, A.folder_clss_no							 , A.spcl_record_type, A.orign_copy_flag, A.new_div_cd, A.chng_flag, A.rjct_flag							 , A.doc_no, A.doc_no_org_nm, A.creat_user_id, A.creat_user_org_cd, A.creat_user_org_nm, A.creat_user_pos_rank_nm							 , A.creat_dtime, A.creat_sys_record_id, A.record_take_seq							 , '02' oper_read_range_cd							 , '0' mig_flag, A.enforc_docno, A.lang, A.record_sno							 , A.secret_clss, A.secret_term, A.prod_type_cd, ''  close_type_cd, '' distribute_no							     , '' distribute_dt, '' recall_type_cd, A.record_clss_cd, '0' transf_neo_trans_state, nonelect_reg_dtime							 , '' as bms_record_detl_type_cd, '' as bms_record_detl_sort_cd						FROM TB_TKRECORD A						   , TB_RDFOLDER B						WHERE A.record_center_id = B.record_center_id						AND   A.folder_take_seq = B.folder_take_seq						AND   B.record_center_id = '1'						AND   B.folder_take_seq = '1'						AND   B.mig_flag = '0'						AND   A.creat_sys_cd = '02'						ORDER BY A.record_center_id, A.creat_sys_cd, A.org_cd, A.creat_yyyy, A.creat_reg_no, A.dtch_reg_no					)				)				UNION ALL				(					SELECT record_center_id						, folder_id						, take_yyyy, take_yyyy_sno, clss_div_cd, clss_id, clss_nm						, creat_sys_cd, org_cd, creat_yyyy, creat_reg_dtime						, LPAD(max_no+row_no,13,'0') creat_reg_no						, dtch_reg_no, org_title, title, sub_title, record_reg_div_cd, record_detl_type_cd						, record_sumry, audvis_record_type, audvis_record_sumry, media_format, medium						, record_size, attach_cnt, record_page_cnt, aprov_pos_rank_nm, duty_chrgr_nm						, enforc_ymd, creat_org_reg_no, erecord_flag, old_record_creat_org_nm, old_record_docno						, old_record_presv_term, presv_loc, secu_clss_cd, secu_clss_rsn, read_range						, open_div_cd, open_grade, part_open_rsn, open_limit_date, open_limit_part, open_expt_dtime						, recver, sender, chng_ver_no, doc_distr_no, folder_clss_no						, spcl_record_type, orign_copy_flag, new_div_cd, chng_flag, rjct_flag						, doc_no, doc_no_org_nm, creat_user_id, creat_user_org_cd, creat_user_org_nm, creat_user_pos_rank_nm						, creat_dtime, creat_sys_record_id, record_take_seq						, oper_read_range_cd						, mig_flag, enforc_docno, lang, record_sno						, secret_clss, secret_term, '' prod_type_cd, ''  close_type_cd, '' distribute_no						     , '' distribute_dt, '' recall_type_cd, record_clss_cd, transf_neo_trans_state, nonelect_reg_dtime						, '' as bms_record_detl_type_cd, '' as bms_record_detl_sort_cd					FROM (						SELECT B.record_center_id							 , B.folder_id							 , B.take_yyyy, B.take_yyyy_sno, B.clss_div_cd, B.clss_id, B.clss_nm							 , A.creat_sys_cd, A.org_cd, A.creat_yyyy, A.creat_reg_dtime							 , NVL((SELECT MAX(TO_NUMBER(NVL(C.creat_reg_no,0))) 								    FROM TB_RDRECORD C									WHERE C.record_center_id = A.record_center_id									AND   C.creat_sys_cd = A.creat_sys_cd									AND   C.org_cd = A.org_cd									AND   C.creat_yyyy = A.creat_yyyy),0) max_no							 , ROW_NUMBER() OVER (PARTITION BY A.record_center_id, A.creat_yyyy, A.org_cd, A.creat_sys_cd ORDER BY A.record_center_id, A.creat_reg_dtime, A.creat_reg_no, A.record_take_seq) row_no							 , A.dtch_reg_no, A.title AS org_title, A.title, A.sub_title, A.record_reg_div_cd, A.record_detl_type_cd							 , A.record_sumry, A.audvis_record_type, A.audvis_record_sumry, A.media_format, A.medium							 , A.record_size, A.attach_cnt, A.record_page_cnt, A.aprov_pos_rank_nm, A.duty_chrgr_nm							 , A.enforc_ymd, A.creat_org_reg_no, A.erecord_flag, A.old_record_creat_org_nm, A.old_record_docno							 , A.old_record_presv_term, A.presv_loc, A.secu_clss_cd, A.secu_clss_rsn, A.read_range							 , A.open_div_cd, A.open_grade, A.part_open_rsn, A.open_limit_date, A.open_limit_part, A.open_expt_dtime							 , A.recver, A.sender, A.chng_ver_no, A.doc_distr_no, A.folder_clss_no							 , A.spcl_record_type, A.orign_copy_flag, A.new_div_cd, A.chng_flag, A.rjct_flag							 , A.doc_no, A.doc_no_org_nm, A.creat_user_id, A.creat_user_org_cd, A.creat_user_org_nm, A.creat_user_pos_rank_nm							 , A.creat_dtime, A.creat_sys_record_id, A.record_take_seq							 , A.oper_read_range_cd							 , '0' mig_flag, A.enforc_docno, A.lang, A.record_sno							 , A.secret_clss, A.secret_term, '' prod_type_cd, ''  close_type_cd, '' distribute_no						     , '' distribute_dt, '' recall_type_cd, A.record_clss_cd, '0' transf_neo_trans_state, nonelect_reg_dtime						FROM TB_TKRECORD A						   , TB_RDFOLDER B						WHERE A.record_center_id = B.record_center_id						AND   A.folder_take_seq = B.folder_take_seq						AND   B.record_center_id = '1'						AND   B.folder_take_seq = '1'						AND   B.mig_flag = '0'						AND   A.creat_sys_cd = '03'						ORDER BY A.record_center_id, A.creat_reg_dtime, A.creat_reg_no, A.record_take_seq					)					UNION ALL					(					SELECT record_center_id						, folder_id						, take_yyyy, take_yyyy_sno, clss_div_cd, clss_id, clss_nm						, creat_sys_cd, org_cd, creat_yyyy, creat_reg_dtime						, creat_reg_no						, dtch_reg_no, org_title, title, sub_title, record_reg_div_cd, record_detl_type_cd						, record_sumry, audvis_record_type, audvis_record_sumry, media_format, medium						, record_size, attach_cnt, record_page_cnt, aprov_pos_rank_nm, duty_chrgr_nm						, enforc_ymd, creat_org_reg_no, erecord_flag, old_record_creat_org_nm, old_record_docno						, old_record_presv_term, presv_loc, secu_clss_cd, secu_clss_rsn, read_range						, open_div_cd, open_grade, part_open_rsn, open_limit_date, open_limit_part, open_expt_dtime						, recver, sender, chng_ver_no, doc_distr_no, folder_clss_no						, spcl_record_type, orign_copy_flag, new_div_cd, chng_flag, rjct_flag						, doc_no, doc_no_org_nm, creat_user_id, creat_user_org_cd, creat_user_org_nm, creat_user_pos_rank_nm						, creat_dtime, creat_sys_record_id, record_take_seq						, oper_read_range_cd						, mig_flag, enforc_docno, lang, record_sno						, secret_clss, secret_term, prod_type_cd, close_type_cd, distribute_no						, distribute_dt, recall_type_cd, record_clss_cd, transf_neo_trans_state, nonelect_reg_dtime						, bms_record_detl_type_cd, bms_record_detl_sort_cd					FROM (						SELECT B.record_center_id							 , B.folder_id							 , B.take_yyyy, B.take_yyyy_sno, B.clss_div_cd, B.clss_id, B.clss_nm							 , A.creat_sys_cd, A.org_cd, A.creat_yyyy, A.creat_reg_dtime							 , A.creat_reg_no							 , A.dtch_reg_no, A.title AS org_title, A.title, A.sub_title, A.record_reg_div_cd, A.record_detl_type_cd							 , A.record_sumry, A.audvis_record_type, A.audvis_record_sumry, A.media_format, A.medium							 , A.record_size, A.attach_cnt, A.record_page_cnt, A.aprov_pos_rank_nm, A.duty_chrgr_nm							 , A.enforc_ymd, A.creat_org_reg_no, A.erecord_flag, A.old_record_creat_org_nm, A.old_record_docno							 , A.old_record_presv_term, A.presv_loc, A.secu_clss_cd, A.secu_clss_rsn, A.read_range							 , A.open_div_cd, A.open_grade, A.part_open_rsn, A.open_limit_date, A.open_limit_part, A.open_expt_dtime							 , A.recver, A.sender, A.chng_ver_no, A.doc_distr_no, A.folder_clss_no							 , A.spcl_record_type, A.orign_copy_flag, A.new_div_cd, A.chng_flag, A.rjct_flag							 , A.doc_no, A.doc_no_org_nm, A.creat_user_id, A.creat_user_org_cd, A.creat_user_org_nm, A.creat_user_pos_rank_nm							 , A.creat_dtime, A.creat_sys_record_id, A.record_take_seq							 , DECODE(A.record_detl_type_cd, '01', DECODE(A.read_range,'0','03','1','01'							                                                          , DECODE((SELECT COUNT(1) FROM TB_STORG WHERE record_center_id=A.record_center_id AND upper_org_cd=A.read_range)												                                               ,0,'02','01'))												                 , '02') oper_read_range_cd							 , '0' mig_flag, A.enforc_docno, A.lang, A.record_sno							 , A.secret_clss, A.secret_term, A.prod_type_cd, A.close_type_cd, A.distribute_no						     , A.distribute_dt, A.recall_type_cd, A.record_clss_cd, '0' transf_neo_trans_state, nonelect_reg_dtime						     , A.bms_record_detl_type_cd, A.bms_record_detl_sort_cd						FROM TB_TKRECORD A						   , TB_RDFOLDER B						WHERE A.record_center_id = B.record_center_id						AND   A.folder_take_seq = B.folder_take_seq						AND   B.record_center_id = '1'						AND   B.folder_take_seq = '1'						AND   B.mig_flag = '0'						AND   A.creat_sys_cd = '04'						ORDER BY A.record_center_id, A.creat_sys_cd, A.org_cd, A.creat_yyyy, A.creat_reg_dtime, A.creat_reg_no, A.record_take_seq					)				)				)			)		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeRecordRel

		INSERT INTO TB_RDRECORDREL		(			record_center_id, record_id, rel_type_cd, rel_seq, rel_trgt_id			, rel_descr, reg_dtime		)		(			SELECT B.record_center_id, B.record_id, A.rel_type_cd, A.rel_seq, A.rel_trgt_id				 				 , A.rel_descr, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKRECORDREL A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_take_seq = B.record_take_seq			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   C.record_center_id = '1'			AND   C.folder_take_seq = '1'			AND   C.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeRecordCreat

		INSERT INTO TB_RDRECORDCREAT		(			record_center_id, record_id, agent_sno, agent_type_cd, agent_id			, agent_nm, agent_org_cd, agent_org_nm, agent_pos_rank_nm, req_state_val			, duty_type_cd, duty_act_dtime, opin, opin_dtime, handl_rslt, reg_dtime			, take_mng_no, req_person_opin, send_orgn_nm, send_dept_nm, agent_duty_type_cd					)		(			SELECT B.RECORD_CENTER_ID, B.RECORD_ID, C.AGENT_SNO, C.AGENT_TYPE_CD, C.AGENT_ID			     , C.AGENT_NM, C.AGENT_ORG_CD, C.AGENT_ORG_NM, C.AGENT_POS_RANK_NM, C.REQ_STATE_VAL			     			     , C.DUTY_TYPE_CD, C.DUTY_ACT_DTIME, C.OPIN, C.OPIN_DTIME, C.HANDL_RSLT, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			     , C.TAKE_MNG_NO, C.REQ_PERSON_OPIN, C.SEND_ORG_NM, C.SEND_DEPT_NM, C.AGENT_DUTY_TYPE_CD			  FROM TB_RDFOLDER A,			       TB_RDRECORD B,			       TB_TKRECORDCREAT C			 WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID			   AND A.FOLDER_ID = B.FOLDER_ID			   AND B.RECORD_CENTER_ID = C.RECORD_CENTER_ID			   AND B.RECORD_TAKE_SEQ = C.RECORD_TAKE_SEQ			   AND A.RECORD_CENTER_ID = '1'			   AND A.FOLDER_TAKE_SEQ = '1'			   AND A.MIG_FLAG = '0'			   AND B.MIG_FLAG = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeRecordInfoSrc

		INSERT INTO TB_RDRECORDINFOSRC		(			record_center_id, record_id, info_src_type_cd, info_src_sno, info_src_title			, info_src_id, reg_dtime		)		(			SELECT B.record_center_id, B.record_id, A.info_src_type_cd, A.info_src_sno, A.info_src_title				 , A.info_src_id, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKRECORDINFOSRC A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_take_seq = B.record_take_seq			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   C.record_center_id = '1'			AND   C.folder_take_seq = '1'			AND   C.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeRecordChngHist

		INSERT INTO TB_RDRECORDCHNGHIST		(			record_center_id, record_id, chng_hist_no, org_cd, creat_yyyy			, creat_reg_no, dtch_reg_no, creat_reg_ymd_bef, creat_reg_ymd_aft, title_bef			, title_aft, page_cnt_bef, page_cnt_aft, aprov_pos_rank_bef, aprov_pos_rank_aft			, duty_chrgr_bef, duty_chrgr_aft, enforc_ymd_bef, enforc_ymd_aft, recver_bef			, recver_aft, chng_ymd, chng_rsn, chng_user_nm, reg_dtime		)		(			SELECT B.record_center_id, B.record_id, A.chng_hist_no, A.org_cd, A.creat_yyyy				 , A.creat_reg_no, A.dtch_reg_no, A.creat_reg_ymd_bef, A.creat_reg_ymd_aft, A.title_bef				 , A.title_aft, A.page_cnt_bef, A.page_cnt_aft, A.aprov_pos_rank_bef, A.aprov_pos_rank_aft				 , A.duty_chrgr_bef, A.duty_chrgr_aft, A.enforc_ymd_bef, A.enforc_ymd_aft, A.recver_bef				 				 , A.recver_aft, A.chng_ymd, A.chng_rsn, A.chng_user_nm, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKRECORDCHNGHIST A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_take_seq = B.record_take_seq			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   C.record_center_id = '1'			AND   C.folder_take_seq = '1'			AND   C.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeRecordOpenHist

		INSERT INTO TB_RDRECORDOPENHIST		(			RECORD_CENTER_ID, RECORD_ID, CHNG_HIST_NO, OPEN_DIV_CD, OPEN_LIMIT_PART			, PART_OPEN_RSN, OPEN_LIMIT_DATE, CHNG_DTIME, CHNG_RSN, CHNG_USER_NM		)		(			SELECT B.RECORD_CENTER_ID, B.RECORD_ID, A.CHNG_HIST_NO, A.OPEN_DIV_CD, A.OPEN_LIMIT_PART				 , A.PART_OPEN_RSN, A.OPEN_LIMIT_DATE, A.CHNG_DTIME, A.CHNG_RSN, A.CHNG_USER_NM			FROM TB_TKRECORDOPENHIST A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_take_seq = B.record_take_seq			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   C.record_center_id = '1'			AND   C.folder_take_seq = '1'			AND   C.mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeRecordSpclList

		SELECT record_center_id		     , record_take_seq		     , seq		     , spcl_list1		     , spcl_list2		     , spcl_list3		FROM  TB_TKSPCLLIST		WHERE record_center_id = '1'		AND   record_take_seq = '1'		AND   spcl_list_loc = '2'		ORDER BY record_center_id, record_take_seq, seq	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeRecordSpclList

		INSERT INTO TB_RDRECORDKEYWD		(		    record_center_id, record_id, keywd_levl, keywd, reg_dtime		)		(			SELECT record_center_id			     , record_id			     , '1'			     , '1'			     			     , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_RDRECORD			WHERE record_center_id = '1'			AND   record_take_seq = '1'			AND   mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeRecordList

		SELECT B.record_center_id			 , B.record_id		     , B.erecord_flag		     , B.record_take_seq		FROM TB_RDFOLDER A		   , TB_RDRECORD B		WHERE A.record_center_id = '1'		AND   A.folder_take_seq = '1'		AND   A.record_center_id = B.record_center_id		AND   A.folder_id = B.folder_id;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeAttachList

		SELECT B.doc_type_cd			 , B.attach_file_path			 , B.file_nm			 , B.agent_nm			 , B.ver			 , NVL(B.attach_file_page_cnt,0) attach_file_page_cnt			 , NVL(B.file_size,0) file_size			 , B.attach_file_mng_info			 , B.virus_flag		FROM TB_RDRECORD A		   , TB_TKATTACHFILE B		WHERE A.record_center_id = '1'		AND   A.record_id = '1'		AND   A.record_center_id = B.record_center_id		AND   A.record_take_seq = B.record_take_seq	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeRecordOrign

		UPDATE TB_RDRECORD		SET   orign_id = '1'		WHERE record_center_id = '1'		AND   record_id = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeRecordFin

		UPDATE TB_TKRECORD		SET   take_fin_flag = '1'		WHERE record_center_id = '1'		AND   record_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeFolderFin

		UPDATE TB_TKFOLDER		SET   take_fin_flag = '1'		WHERE record_center_id = '1'		AND   folder_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderCreatSysCd

		SELECT creat_sys_cd		FROM  TB_TKFOLDER		WHERE record_center_id = '1'		AND   folder_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeCreatReport

		INSERT INTO TB_CRREPORT		(		    record_center_id, cr_report_yyyy, cr_report_org_cd, creat_sys_cd, cr_report_sno		    , state_div_cd, reg_dtime		)		(		   SELECT A.record_center_id			    , A.take_yyyy			    , A.take_org_cd			    , A.creat_sys_cd			    , NVL(MAX((SELECT C.cr_report_sno 			               FROM TB_CRREPORT C 			               WHERE C.record_center_id = A.record_center_id 			               AND C.cr_report_yyyy = A.take_yyyy 			               AND C.cr_report_org_cd = A.take_org_cd 			               AND C.creat_sys_cd = A.creat_sys_cd 			               )), 0) + 1 as cr_report_sno			    , DECODE(A.creat_sys_cd,'03','08','06') as creat_sys_cd			    , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS') as reg_dtime			FROM  TB_RDFOLDER A 			WHERE A.record_center_id = '1'			AND   A.folder_take_seq = '1'			AND NOT EXISTS (			    SELECT folder_take_seq 			    FROM TB_CRREPORT B 			    WHERE B.record_center_id = A.record_center_id			    AND   B.cr_report_yyyy = A.take_yyyy			    AND   B.cr_report_org_cd = A.take_org_cd			    AND   B.creat_sys_cd = A.creat_sys_cd			    AND   B.cr_report_infrm_flag = '0'			)			GROUP BY A.record_center_id, A.take_yyyy, a.take_org_cd, a.creat_sys_cd, a.take_yyyy_sno, a.creat_sys_cd		)	;



-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeCreatFolder

		INSERT INTO TB_CRFOLDER		(		    record_center_id, folder_recv_seq, org_cd, cr_report_yyyy, cr_report_org_cd		    , creat_sys_cd, cr_report_sno, clss_div_cd, clss_id, creat_yyyy		    , folder_reg_seq, ho_no, clss_nm, title, sub_title		    , folder_type_div_cd, etc_folder_type, folder_detl_type_cd, creat_purps, media_format		    , medium, folder_size, record_tot_page_cnt, record_reg_cnt, efile_cnt		    , new_div_cd, chng_flag, old_folder_creat_org_nm, old_folder_clss_no, folder_bispjt_div_cd		    , bis_clss_path_nm, pjt_clss_path_nm, folder_start_dtime, folder_close_dtime, funsh_end_dtime		    , funsh_rsn, presv_term_cd, presv_term_fix_rsn, presv_method_cd, presv_area_cd		    , presv_loc, presv_duty_chrgr_nm, secu_clss_cd, secu_clss_rsn, read_range		    , take_takovr_div_cd, take_takovr_org_cd, take_takovr_clss_id, take_takovr_creat_yyyy, take_takovr_folder_reg_seq		    , take_takovr_ho_no, take_takovr_ymd, creat_user_id, creat_user_nm, creat_user_org_cd		    , creat_user_org_nm, creat_user_pos_rank_nm, creat_dtime, erecord_flag, creat_sys_folder_id		    , error_flag, exam_rslt_cd, exam_cont, rjct_flag, rjct_cont		    , take_fin_flag, cr_report_infrm_flag, reg_dtime, group_presv_term_cd, folder_take_seq		    , sumry, trans_dtime		)		(		    SELECT record_center_id		        , TO_CHAR(SYSDATE,'YYYY')||LPAD((TB_CRFOLDER_SQ01.nextval), 15, '0')		        , org_cd, take_yyyy, take_org_cd		        , creat_sys_cd, '1', clss_div_cd, clss_id, creat_yyyy		        , folder_reg_seq, ho_no, clss_nm, title, sub_title		        , folder_type_div_cd, etc_folder_type, folder_detl_type_cd, creat_purps, media_format		        , medium, folder_size, record_tot_page_cnt, record_reg_cnt, efile_cnt		        , new_div_cd, chng_flag, old_folder_creat_org_nm, old_folder_clss_no, folder_bispjt_div_cd		        , bis_clss_path_nm, pjt_clss_path_nm, folder_start_dtime, folder_close_dtime, funsh_end_dtime		        , funsh_rsn, presv_term_cd, presv_term_fix_rsn, presv_method_cd, presv_area_cd		        , presv_loc, presv_duty_chrgr_nm, secu_clss_cd, secu_clss_rsn, read_range		        , take_takovr_div_cd, take_takovr_org_cd, take_takovr_clss_id, take_takovr_creat_yyyy, take_takovr_folder_reg_seq		        , take_takovr_ho_no, take_takovr_ymd, creat_user_id, creat_user_nm, creat_user_org_cd		        , creat_user_org_nm, creat_user_pos_rank_nm, creat_dtime, erecord_flag, creat_sys_folder_id		        , 'N', '0', '', '0', ''		        , '1', '0', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), presv_term_cd, folder_take_seq		        , sumry, trans_dtime		    FROM  TB_RDFOLDER		    WHERE record_center_id = '1'		    AND   folder_take_seq = '1'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeCreatFolderTakeTakovr

		INSERT INTO TB_CRFOLDERTAKETAKOVR		(		    record_center_id, folder_recv_seq, sno, take_takovr_div_cd, take_takovr_creat_dtime		    , take_takovr_org_cd, take_takovr_org_nm, reg_dtime, take_takovr_clss_id, take_takovr_creat_yyyy		    , take_takovr_folder_reg_seq, take_takovr_ho_no		)		(		    SELECT C.record_center_id		        , C.folder_recv_seq		        , A.sno		        , A.take_takovr_div_cd		        , A.take_takovr_creat_dtime		        , A.take_takovr_org_cd		        , A.take_takovr_org_nm		        , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		        , A.take_takovr_clss_id		        , A.take_takovr_creat_yyyy		        , A.take_takovr_folder_reg_seq		        , A.take_takovr_ho_no		    FROM  TB_RDFOLDERTAKETAKOVR A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeCreatFolderChngHist

		INSERT INTO TB_CRFOLDERCHNGHIST		(		    record_center_id, folder_recv_seq, chng_hist_no, org_cd, clss_id		    , creat_yyyy, folder_reg_seq, ho_no, title_bef, title_aft		    , folder_type_div_cd_bef, folder_type_div_cd_aft, chng_ymd, chng_rsn, chng_user_nm		    , reg_dtime		)		(		    SELECT C.record_center_id		        , C.folder_recv_seq		        , A.chng_hist_no		        , A.org_cd		        , A.clss_id		        , A.creat_yyyy		        , A.folder_reg_seq		        , A.ho_no		        , A.title_bef		        , A.title_aft		        , A.folder_type_div_cd_bef		        , A.folder_type_div_cd_aft		        , A.chng_ymd		        , A.chng_rsn		        , A.chng_user_nm		        		        , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM  TB_RDFOLDERCHNGHIST A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeCreatFolderSpclList

		INSERT INTO TB_CRSPCLLIST		(		    record_center_id, spcl_list_reg_no, folder_recv_seq, record_recv_seq, spcl_list_loc		    , folder_clss_no, record_reg_no, seq, spcl_list1, spcl_list2		    , spcl_list3, reg_dtime		)		(		    SELECT C.record_center_id		        , LPAD((TB_CRSPCLLIST_SQ01.nextval), 15, '0') 		        , C.folder_recv_seq		        , '', '1'		        , (C.org_cd||C.clss_id||C.creat_yyyy||C.folder_reg_seq||C.ho_no) folder_clss_no		        , ''		        , ( SELECT LPAD((NVL(MAX(Z.seq),0)+1), 3, '0')		            FROM  TB_CRSPCLLIST Z		        	WHERE Z.folder_recv_seq = C.folder_recv_seq ) seq		        , A.keywd, '', '', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM TB_RDFOLDERKEYWD A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeCreatRecord

		INSERT INTO TB_CRRECORD		(		    record_center_id, record_recv_seq, folder_recv_seq, creat_sys_cd, org_cd		    , creat_yyyy, creat_reg_dtime, creat_reg_no, dtch_reg_no, title		    , sub_title, record_reg_div_cd, record_detl_type_cd, audvis_record_type, audvis_record_sumry		    , media_format, medium, record_size, attach_cnt, record_page_cnt		    , aprov_pos_rank_nm, duty_chrgr_nm, enforc_ymd, creat_org_reg_no, erecord_flag		    , old_record_creat_org_nm, old_record_docno, old_record_presv_term, presv_loc, secu_clss_cd		    , secu_clss_rsn, read_range, open_div_cd, open_grade, part_open_rsn		    , open_limit_part, open_expt_dtime, recver, sender, chng_ver_no		    , doc_distr_no, folder_clss_no, spcl_record_type, orign_copy_flag, new_div_cd		    , chng_flag, rjct_flag, doc_no, creat_sys_record_id, error_flag		    , exam_rslt_cd, take_fin_flag, cr_report_flag, reg_dtime, take_error_cont		    , exam_cont, doc_no_org_nm, open_limit_date		) 		(		    SELECT C.record_center_id		        , TO_CHAR(SYSDATE,'YYYY')||LPAD((TB_CRRECORD_SQ01.nextval), 15, '0')		        , C.folder_recv_seq		        , A.creat_sys_cd, A.org_cd		        , A.creat_yyyy, A.creat_reg_dtime, A.creat_reg_no, A.dtch_reg_no, A.title		        , A.sub_title, A.record_reg_div_cd, A.record_detl_type_cd, A.audvis_record_type, A.audvis_record_sumry		        , A.media_format, A.medium, A.record_size, A.attach_cnt, A.record_page_cnt		        , A.aprov_pos_rank_nm, A.duty_chrgr_nm, A.enforc_ymd, A.creat_org_reg_no, A.erecord_flag		        , A.old_record_creat_org_nm, A.old_record_docno, A.old_record_presv_term, A.presv_loc, A.secu_clss_cd		        , A.secu_clss_rsn, A.read_range, A.open_div_cd, A.open_grade, A.part_open_rsn		        , A.open_limit_part, A.open_expt_dtime, A.recver, A.sender, A.chng_ver_no		        , A.doc_distr_no, A.folder_clss_no, A.spcl_record_type, A.orign_copy_flag, A.new_div_cd		        , A.chng_flag, '0', A.doc_no, A.creat_sys_record_id, 'N'		        		        , '0', '0', '', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), ''		        , '', a.doc_no_org_nm, a.open_limit_date		    FROM  TB_RDRECORD A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeCreatRecordChngHist

		INSERT INTO TB_CRRECORDCHNGHIST		(		    record_center_id, record_recv_seq, chng_hist_no, org_cd, creat_yyyy		    , creat_reg_no, dtch_reg_no, creat_reg_ymd_bef, creat_reg_ymd_aft, title_bef		    , title_aft, page_cnt_bef, page_cnt_aft, aprov_pos_rank_bef, aprov_pos_rank_aft		    , duty_chrgr_bef, duty_chrgr_aft, enforc_ymd_bef, enforc_ymd_aft, recver_bef		    , recver_aft, chng_ymd, chng_rsn, chng_user_nm, reg_dtime		)		(		    SELECT C.record_center_id, C.record_recv_seq, A.chng_hist_no, A.org_cd, A.creat_yyyy		        , A.creat_reg_no, A.dtch_reg_no, A.creat_reg_ymd_bef, A.creat_reg_ymd_aft, A.title_bef		        , A.title_aft, A.page_cnt_bef, A.page_cnt_aft, A.aprov_pos_rank_bef, A.aprov_pos_rank_aft		        , A.duty_chrgr_bef, A.duty_chrgr_aft, A.enforc_ymd_bef, A.enforc_ymd_aft, A.recver_bef		        		        , A.recver_aft, A.chng_ymd, A.chng_rsn, A.chng_user_nm, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM  TB_RDRECORDCHNGHIST A		        , TB_RDRECORD B		        , TB_CRRECORD C		        , TB_CRFOLDER D		    WHERE D.record_center_id = '1'		    AND   D.folder_take_seq = '1'		    AND   D.record_center_id = C.record_center_id		    AND   D.folder_recv_seq = C.folder_recv_seq		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.creat_reg_no = B.creat_reg_no		    AND   C.dtch_reg_no = B.dtch_reg_no		    AND   B.record_center_id = A.record_center_id		    AND   B.record_id = A.record_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeCreatRecordSpclList

		INSERT INTO TB_CRSPCLLIST		(		    record_center_id, spcl_list_reg_no, folder_recv_seq, record_recv_seq, spcl_list_loc		    , folder_clss_no, record_reg_no, seq, spcl_list1, spcl_list2		    , spcl_list3, reg_dtime		)		(		    SELECT C.record_center_id		        , LPAD((TB_CRSPCLLIST_SQ01.nextval), 15, '0')                         		        , C.record_recv_seq		        , '', '2', ''		        , (C.creat_yyyy||C.creat_reg_no||C.dtch_reg_no) record_reg_no		        , ( SELECT LPAD((NVL(MAX(Z.seq),0)+1), 3, '0')		            FROM  TB_CRSPCLLIST Z		        	WHERE Z.record_recv_seq = C.record_recv_seq ) seq		        , A.keywd, '', '', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM TB_RDRECORDKEYWD A		        , TB_RDRECORD B		        , TB_CRRECORD C		        , TB_CRFOLDER D		    WHERE D.record_center_id = '1'		    AND   D.folder_take_seq = '1'		    AND   D.record_center_id = C.record_center_id		    AND   D.folder_recv_seq = C.folder_recv_seq		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.creat_reg_no = B.creat_reg_no		    AND   C.dtch_reg_no = B.dtch_reg_no		    AND   B.record_center_id = A.record_center_id		    AND   B.record_id = A.record_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeCreatAttachFile

		INSERT INTO TB_CRATTACHFILE		(		    record_center_id, record_recv_seq, reg_seq, org_cd, creat_yyyy		    , creat_reg_no, attach_file_seq, attach_file_page_cnt, reg_dtime, doc_type_cd		    , file_size		)		(		    SELECT DISTINCT C.record_center_id, C.record_recv_seq, A.reg_seq, A.org_cd, A.creat_yyyy		        , B.creat_reg_no, NVL(A.attach_file_seq,'00'), A.attach_file_page_cnt		        		        , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		        , A.doc_type_cd, A.file_size		    FROM  TB_TKATTACHFILE A		        , TB_RDRECORD B		        , TB_CRRECORD C		        , TB_CRFOLDER D		    WHERE D.record_center_id = '1'		    AND   D.folder_take_seq = '1'		    AND   D.record_center_id = C.record_center_id		    AND   D.folder_recv_seq = C.folder_recv_seq		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.creat_reg_no = B.creat_reg_no		    AND   C.dtch_reg_no = B.dtch_reg_no		    AND   B.record_center_id = A.record_center_id		    AND   B.record_take_seq = A.record_take_seq		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeFolderAccs

		INSERT INTO TB_RDFOLDERACCS		(			record_center_id, folder_id, accs_sno, accs_type_cd, accs_user_id, accs_dept_cd, reg_dtime		)		(			SELECT A.record_center_id			     , A.folder_id			     , (SELECT (NVL(MAX(Z.accs_sno),0)+1)			        FROM TB_RDFOLDERACCS Z			        WHERE Z.record_center_id = A.record_center_id			        AND   Z.folder_id = A.folder_id)			     , '2' accs_type_cd			     , null			     , A.take_org_cd			     , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM  TB_RDFOLDER A			WHERE A.record_center_id = '1'			AND   A.folder_take_seq = '1'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeRecordAccs

		INSERT INTO TB_RDRECORDACCS		(			record_center_id, record_id, accs_sno, accs_type_cd, accs_user_id, accs_dept_cd, reg_dtime		)		(			SELECT B.record_center_id			     , B.record_id			     , (SELECT (NVL(MAX(Z.accs_sno),0)+1)			        FROM TB_RDRECORDACCS Z			        WHERE Z.record_center_id = B.record_center_id			        AND   Z.record_id = B.record_id)			     , '2' accs_type_cd			     , null			     , A.take_org_cd			     , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM  TB_RDFOLDER A			    , TB_RDRECORD B			WHERE A.record_center_id = '1'			AND   A.folder_take_seq = '1'			AND   A.record_center_id = B.record_center_id			AND   A.folder_id = B.folder_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeFolderFinState

		UPDATE TB_TKFOLDER		SET   take_fin_state_cd = '1'		WHERE record_center_id = '1'		AND   folder_take_seq = '1'		AND   NVL(take_fin_state_cd,'0') != '4'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCheckOrgFinState

		SELECT COUNT(1)		FROM  TB_TKFOLDER		WHERE record_center_id = '1'		AND   take_yyyy = '1'		AND   take_org_cd = '1'		AND   creat_sys_cd = '1'		AND   take_sno = '1'		AND   take_fin_state_cd != '4';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeFolderFinStateClearList

		UPDATE TB_TKFOLDER		SET take_fin_state_cd = '0'		WHERE record_center_id = '1'		AND   folder_take_seq = '1'		AND   take_fin_state_cd = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCurStatePagedList

		SELECT COUNT(*) 			FROM 				 (SELECT A.ORG_CD AS TAKE_ORG_CD, 						A.ORG_NM AS TAKE_ORG_NM, 						A.TAKE_ORG_ABBR_NM AS TAKE_ORG_ABBR_NM, 						A.COM_CD AS CREAT_SYS_CD, 						A.COM_CD_NM AS CREAT_SYS_CD_NM, 						B.TAKE_YYYY,						CREAT_YYYY,						DECODE(B.TAKE_STATE_DIV_CD, '08', '1', '0') AS TAKE_FLAG, 						DECODE(B.TAKE_STATE_DIV_CD, '08', '인수', '미인수') TAKE_FLAG_NM, 						B.TAKE_YMD, 						NVL(B.CNT1, 0) AS RECV_FOLDER_CNT, 						NVL(B.CNT2, 0) AS RECV_RECORD_CNT, 						NVL(B.CNT3, 0) AS FOLDER_CNT01, 						NVL(B.CNT4, 0) AS RECORD_CNT01, 						NVL(B.CNT5, 0) AS FOLDER_CNT02, 						NVL(B.CNT6, 0) AS RECORD_CNT02, 						SUBSTR (B.REG_DTIME, 0, 8) AS REG_DTIME				   FROM 						(SELECT A.RECORD_CENTER_ID, 							   A.ORG_CD, 							   A.ORG_NM, 							   A.ORG_ABBR_NM TAKE_ORG_ABBR_NM, 							   B.COM_CD, 							   B.COM_CD_NM 						  FROM TB_STORG A, 							   (SELECT COM_CD, 									  COM_CD_NM 								 FROM TB_ZZCOMCD 								WHERE COM_TYPE_CD = 'RD17' 							   ) B 						)A, 						(SELECT A.RECORD_CENTER_ID, 							   A.TAKE_YYYY, 							   A.TAKE_ORG_CD, 							   A.CREAT_SYS_CD, 							   A.TAKE_SNO, 							   A.TAKE_STATE_DIV_CD, 							   A.TAKE_YMD, 							   A.REG_DTIME, 							   SUM(B.CNT1) AS CNT1, 							   SUM(B.CNT2) AS CNT2, 							   SUM(B.CNT3) AS CNT3, 							   SUM(B.CNT4) AS CNT4, 							   ( SUM(B.CNT1) - SUM(B.CNT3) ) AS CNT5, 							   ( SUM(B.CNT2) - SUM(B.CNT4) ) AS CNT6, 							   A.APP_TAKE_TYPE_CD, 							   CREAT_YYYY 						  FROM TB_TKORGTAKEPLAN A, 							   (SELECT RECORD_CENTER_ID, 									  TAKE_YYYY, 									  TAKE_ORG_CD, 									  CREAT_SYS_CD, 									  TAKE_SNO, 									  COUNT(*) AS CNT1, 									  SUM(CNT2) AS CNT2, 									  (SELECT COUNT(*) 										FROM TB_RDFOLDER B 									   WHERE B.RECORD_CENTER_ID = A.RECORD_CENTER_ID 											 AND A.TAKE_YYYY = B.TAKE_YYYY 											 AND A.FOLDER_TAKE_SEQ = B.FOLDER_TAKE_SEQ 									  ) AS CNT3, 									  SUM(CNT4) AS CNT4, 									  A.CREAT_YYYY 								 FROM 									  (SELECT G.RECORD_CENTER_ID, 											 G.TAKE_YYYY, 											 G.TAKE_ORG_CD, 											 G.CREAT_SYS_CD, 											 G.TAKE_SNO, 											 (SELECT COUNT(*) 											   FROM TB_TKRECORD K 											  WHERE K.RECORD_CENTER_ID = G.RECORD_CENTER_ID 													AND K.FOLDER_TAKE_SEQ = G.FOLDER_TAKE_SEQ 											 ) AS CNT2, 											 (SELECT COUNT(*) 											   FROM TB_RDRECORD J 											  WHERE J.RECORD_CENTER_ID = R.RECORD_CENTER_ID 													AND J.FOLDER_ID = R.FOLDER_ID 											 ) AS CNT4, 											 G.FOLDER_TAKE_SEQ, 											 R.CREAT_YYYY 										FROM TB_TKFOLDER G, 											 TB_RDFOLDER R 									   WHERE G.RECORD_CENTER_ID = '1'											 AND G.TAKE_YYYY = '1'											 AND G.RECORD_CENTER_ID = R.RECORD_CENTER_ID(+) 											 AND G.FOLDER_TAKE_SEQ = R.FOLDER_TAKE_SEQ(+) 											 AND 											 ( 												 G.APP_TAKE_DET_TYPE_CD IN ( '0', '2' ) 												 OR G.APP_TAKE_DET_TYPE_CD IS NULL 											 ) 											 AND G.RECV_RE_FLAG IS NULL 									  )A 								GROUP BY RECORD_CENTER_ID, 									  TAKE_YYYY, 									  TAKE_ORG_CD, 									  CREAT_SYS_CD, 									  TAKE_SNO, 									  FOLDER_TAKE_SEQ, 									  CREAT_YYYY 							   )B 						 WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID 							   AND A.TAKE_YYYY = B.TAKE_YYYY 							   AND A.TAKE_ORG_CD = B.TAKE_ORG_CD 							   AND A.CREAT_SYS_CD = B.CREAT_SYS_CD 							   AND A.TAKE_SNO = B.TAKE_SNO 						 GROUP BY A.RECORD_CENTER_ID, 							   A.TAKE_YYYY, 							   A.TAKE_ORG_CD, 							   A.CREAT_SYS_CD, 							   A.TAKE_SNO, 							   A.TAKE_STATE_DIV_CD, 							   A.TAKE_YMD, 							   A.REG_DTIME, 							   A.APP_TAKE_TYPE_CD, 							   CREAT_YYYY 						)B 				  WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID(+) 						AND A.ORG_CD = B.TAKE_ORG_CD(+) 						AND A.COM_CD = B.CREAT_SYS_CD(+)						AND A.RECORD_CENTER_ID = '1'						 AND 							  A.com_cd = '1'						  AND 		          	   		  A.org_cd = '1'		                 		               ) Z						 WHERE  								  Z.take_flag = '1'							  AND 								  Z.take_flag = '1'							  ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCurStatePagedList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		  SELECT * 			FROM 				 (SELECT A.ORG_CD AS TAKE_ORG_CD, 						A.ORG_NM AS TAKE_ORG_NM, 						A.TAKE_ORG_ABBR_NM AS TAKE_ORG_ABBR_NM, 						A.COM_CD AS CREAT_SYS_CD, 						A.COM_CD_NM AS CREAT_SYS_CD_NM, 						B.TAKE_YYYY,						CREAT_YYYY,						DECODE(B.TAKE_STATE_DIV_CD, '08', '1', '0') AS TAKE_FLAG, 						DECODE(B.TAKE_STATE_DIV_CD, '08', '인수', '미인수') TAKE_FLAG_NM, 						B.TAKE_YMD, 						NVL(B.CNT1, 0) AS RECV_FOLDER_CNT, 						NVL(B.CNT2, 0) AS RECV_RECORD_CNT, 						NVL(B.CNT3, 0) AS FOLDER_CNT01, 						NVL(B.CNT4, 0) AS RECORD_CNT01, 						NVL(B.CNT5, 0) AS FOLDER_CNT02, 						NVL(B.CNT6, 0) AS RECORD_CNT02, 						SUBSTR (B.REG_DTIME, 0, 8) AS REG_DTIME				   FROM 						(SELECT A.RECORD_CENTER_ID, 							   A.ORG_CD, 							   A.ORG_NM, 							   A.ORG_ABBR_NM TAKE_ORG_ABBR_NM, 							   B.COM_CD, 							   B.COM_CD_NM 						  FROM TB_STORG A, 							   (SELECT COM_CD, 									  COM_CD_NM 								 FROM TB_ZZCOMCD 								WHERE COM_TYPE_CD = 'RD17' 							   ) B 						  WHERE A.RECORD_CENTER_ID = '1'						)A, 						(SELECT A.RECORD_CENTER_ID, 							   A.TAKE_YYYY, 							   A.TAKE_ORG_CD, 							   A.CREAT_SYS_CD, 							   A.TAKE_SNO, 							   A.TAKE_STATE_DIV_CD, 							   A.TAKE_YMD, 							   A.REG_DTIME, 							   SUM(B.CNT1) AS CNT1, 							   SUM(B.CNT2) AS CNT2, 							   SUM(B.CNT3) AS CNT3, 							   SUM(B.CNT4) AS CNT4, 							   ( SUM(B.CNT1) - SUM(B.CNT3) ) AS CNT5, 							   ( SUM(B.CNT2) - SUM(B.CNT4) ) AS CNT6, 							   A.APP_TAKE_TYPE_CD, 							   CREAT_YYYY 						  FROM TB_TKORGTAKEPLAN A, 							   (SELECT RECORD_CENTER_ID, 									  TAKE_YYYY, 									  TAKE_ORG_CD, 									  CREAT_SYS_CD, 									  TAKE_SNO, 									  COUNT(*) AS CNT1, 									  SUM(CNT2) AS CNT2, 									  (SELECT COUNT(*) 										FROM TB_RDFOLDER B 									   WHERE B.RECORD_CENTER_ID = A.RECORD_CENTER_ID 											 AND A.TAKE_YYYY = B.TAKE_YYYY 											 AND A.FOLDER_TAKE_SEQ = B.FOLDER_TAKE_SEQ 									  ) AS CNT3, 									  SUM(CNT4) AS CNT4, 									  A.CREAT_YYYY 								 FROM 									  (SELECT G.RECORD_CENTER_ID, 											 G.TAKE_YYYY, 											 G.TAKE_ORG_CD, 											 G.CREAT_SYS_CD, 											 G.TAKE_SNO, 											 (SELECT COUNT(*) 											   FROM TB_TKRECORD K 											  WHERE K.RECORD_CENTER_ID = G.RECORD_CENTER_ID 													AND K.FOLDER_TAKE_SEQ = G.FOLDER_TAKE_SEQ 											 ) AS CNT2, 											 (SELECT COUNT(*) 											   FROM TB_RDRECORD J 											  WHERE J.RECORD_CENTER_ID = R.RECORD_CENTER_ID 													AND J.FOLDER_ID = R.FOLDER_ID 											 ) AS CNT4, 											 G.FOLDER_TAKE_SEQ, 											 R.CREAT_YYYY 										FROM TB_TKFOLDER G, 											 TB_RDFOLDER R 									   WHERE G.RECORD_CENTER_ID = '1'											 AND G.TAKE_YYYY = '1'											 AND G.RECORD_CENTER_ID = R.RECORD_CENTER_ID(+) 											 AND G.FOLDER_TAKE_SEQ = R.FOLDER_TAKE_SEQ(+) 											 AND 											 ( 												 G.APP_TAKE_DET_TYPE_CD IN ( '0', '2' ) 												 OR G.APP_TAKE_DET_TYPE_CD IS NULL 											 ) 											 AND G.RECV_RE_FLAG IS NULL 									  )A 								GROUP BY RECORD_CENTER_ID, 									  TAKE_YYYY, 									  TAKE_ORG_CD, 									  CREAT_SYS_CD, 									  TAKE_SNO, 									  FOLDER_TAKE_SEQ, 									  CREAT_YYYY 							   )B 						 WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID 							   AND A.TAKE_YYYY = B.TAKE_YYYY 							   AND A.TAKE_ORG_CD = B.TAKE_ORG_CD 							   AND A.CREAT_SYS_CD = B.CREAT_SYS_CD 							   AND A.TAKE_SNO = B.TAKE_SNO 						 GROUP BY A.RECORD_CENTER_ID, 							   A.TAKE_YYYY, 							   A.TAKE_ORG_CD, 							   A.CREAT_SYS_CD, 							   A.TAKE_SNO, 							   A.TAKE_STATE_DIV_CD, 							   A.TAKE_YMD, 							   A.REG_DTIME, 							   A.APP_TAKE_TYPE_CD, 							   CREAT_YYYY 						)B 				  WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID(+) 						AND A.ORG_CD = B.TAKE_ORG_CD(+) 						AND A.COM_CD = B.CREAT_SYS_CD(+)						AND A.RECORD_CENTER_ID = '1' AND 							  A.com_cd = '1'						  AND 		          	   		  A.org_cd = '1'		                 		               ) Z						 WHERE  								  Z.take_flag = '1'  AND 								  Z.take_flag = '1'  		ORDER BY Z.TAKE_ORG_CD,          Z.TAKE_ORG_NM,          Z.CREAT_SYS_CD         ) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeCurStateFolderPagedList

		SELECT COUNT(1)		FROM  (			SELECT A.folder_take_seq			     , A.clss_id			     , A.clss_nm			     , A.title			     , A.creat_yyyy			     , A.presv_term_cd				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = DECODE(A.creat_sys_cd,'02','RD57','RD07')				    AND   C.com_cd = A.presv_term_cd) presv_term_nm			     , A.erecord_flag				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'RD23'				    AND   C.com_cd = A.erecord_flag) erecord_flag_nm				 , A.app_take_det_type_cd				 , NVL((SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'TK21'				    AND   C.com_cd = A.app_take_det_type_cd),'정기') app_take_det_type_nm			FROM  TB_TKFOLDER A, TB_RDFOLDER B			WHERE A.record_center_id = '1'			AND   A.take_yyyy = '1'			AND   A.take_org_cd = '1'			AND   A.creat_sys_cd = '1'						AND   A.recv_re_flag IS NULL			 AND 				  A.app_take_det_type_cd = '1'			 			AND	  A.record_center_id = B.record_center_id(+)			AND	  A.folder_take_seq = B.folder_take_seq(+)		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCurStateFolderPagedList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT folder_take_seq		     , clss_id		     , clss_nm		     , title		     , creat_yyyy		     , presv_term_cd		     , presv_term_nm		     , erecord_flag		     , erecord_flag_nm			 , app_take_det_type_cd			 , app_take_det_type_nm		FROM  (			SELECT A.folder_take_seq			     , A.clss_id			     , A.clss_nm			     , A.title			     , A.creat_yyyy			     , A.presv_term_cd				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = DECODE(A.creat_sys_cd,'02','RD57','RD07')				    AND   C.com_cd = A.presv_term_cd) presv_term_nm			     , A.erecord_flag				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'RD23'				    AND   C.com_cd = A.erecord_flag) erecord_flag_nm				 , A.app_take_det_type_cd				 , NVL((SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'TK21'				    AND   C.com_cd = A.app_take_det_type_cd),'정기') app_take_det_type_nm			FROM  TB_TKFOLDER A, TB_RDFOLDER B			WHERE A.record_center_id = '1'			AND   A.take_yyyy = '1'			AND   A.take_org_cd = '1'			AND   A.creat_sys_cd = '1'			AND   A.recv_re_flag IS NULL			 AND 				  A.app_take_det_type_cd = '1'			 			AND	  A.record_center_id = B.record_center_id(+)			AND	  A.folder_take_seq = B.folder_take_seq(+)		)		ORDER BY folder_take_seq		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeYearCurStatePagedList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		  SELECT * 			FROM 				 (SELECT A.ORG_CD AS TAKE_ORG_CD, 						A.ORG_NM AS TAKE_ORG_NM, 						A.TAKE_ORG_ABBR_NM AS TAKE_ORG_ABBR_NM, 						A.COM_CD AS CREAT_SYS_CD, 						A.COM_CD_NM AS CREAT_SYS_CD_NM, 						B.TAKE_YYYY,						CREAT_YYYY,						DECODE(B.TAKE_STATE_DIV_CD, '08', '1', '0') AS TAKE_FLAG, 						DECODE(B.TAKE_STATE_DIV_CD, '08', '인수', '미인수') TAKE_FLAG_NM, 						B.TAKE_YMD, 						NVL(B.CNT1, 0) AS RECV_FOLDER_CNT, 						NVL(B.CNT2, 0) AS RECV_RECORD_CNT, 						NVL(B.CNT3, 0) AS FOLDER_CNT01, 						NVL(B.CNT4, 0) AS RECORD_CNT01, 						NVL(B.CNT5, 0) AS FOLDER_CNT02, 						NVL(B.CNT6, 0) AS RECORD_CNT02, 						SUBSTR (B.REG_DTIME, 0, 8) AS REG_DTIME				   FROM 						(SELECT A.RECORD_CENTER_ID, 							   A.ORG_CD, 							   A.ORG_NM, 							   A.ORG_ABBR_NM TAKE_ORG_ABBR_NM, 							   B.COM_CD, 							   B.COM_CD_NM 						  FROM TB_STORG A, 							   (SELECT COM_CD, 									  COM_CD_NM 								 FROM TB_ZZCOMCD 								WHERE COM_TYPE_CD = 'RD17' 							   ) B 						)A, 						(SELECT A.RECORD_CENTER_ID, 							   A.TAKE_YYYY, 							   A.TAKE_ORG_CD, 							   A.CREAT_SYS_CD, 							   A.TAKE_SNO, 							   A.TAKE_STATE_DIV_CD, 							   A.TAKE_YMD, 							   A.REG_DTIME, 							   SUM(B.CNT1) AS CNT1, 							   SUM(B.CNT2) AS CNT2, 							   SUM(B.CNT3) AS CNT3, 							   SUM(B.CNT4) AS CNT4, 							   ( SUM(B.CNT1) - SUM(B.CNT3) ) AS CNT5, 							   ( SUM(B.CNT2) - SUM(B.CNT4) ) AS CNT6, 							   A.APP_TAKE_TYPE_CD, 							   CREAT_YYYY 						  FROM TB_TKORGTAKEPLAN A, 							   (SELECT RECORD_CENTER_ID, 									  TAKE_YYYY, 									  TAKE_ORG_CD, 									  CREAT_SYS_CD, 									  TAKE_SNO, 									  COUNT(*) AS CNT1, 									  SUM(CNT2) AS CNT2, 									  (SELECT COUNT(*) 										FROM TB_RDFOLDER B 									   WHERE B.RECORD_CENTER_ID = A.RECORD_CENTER_ID 											 AND A.TAKE_YYYY = B.TAKE_YYYY 											 AND A.FOLDER_TAKE_SEQ = B.FOLDER_TAKE_SEQ 									  ) AS CNT3, 									  SUM(CNT4) AS CNT4, 									  A.CREAT_YYYY 								 FROM 									  (SELECT G.RECORD_CENTER_ID, 											 G.TAKE_YYYY, 											 G.TAKE_ORG_CD, 											 G.CREAT_SYS_CD, 											 G.TAKE_SNO, 											 (SELECT COUNT(*) 											   FROM TB_TKRECORD K 											  WHERE K.RECORD_CENTER_ID = G.RECORD_CENTER_ID 													AND K.FOLDER_TAKE_SEQ = G.FOLDER_TAKE_SEQ 											 ) AS CNT2, 											 (SELECT COUNT(*) 											   FROM TB_RDRECORD J 											  WHERE J.RECORD_CENTER_ID = R.RECORD_CENTER_ID 													AND J.FOLDER_ID = R.FOLDER_ID 											 ) AS CNT4, 											 G.FOLDER_TAKE_SEQ, 											 R.CREAT_YYYY 										FROM TB_TKFOLDER G, 											 TB_RDFOLDER R 									   WHERE G.RECORD_CENTER_ID = '1'											 AND G.TAKE_YYYY = '1'											 AND G.RECORD_CENTER_ID = R.RECORD_CENTER_ID(+) 											 AND G.FOLDER_TAKE_SEQ = R.FOLDER_TAKE_SEQ(+) 											 AND 											 ( 												 G.APP_TAKE_DET_TYPE_CD IN ( '0', '2' ) 												 OR G.APP_TAKE_DET_TYPE_CD IS NULL 											 ) 											 AND G.RECV_RE_FLAG IS NULL 									  )A 								GROUP BY RECORD_CENTER_ID, 									  TAKE_YYYY, 									  TAKE_ORG_CD, 									  CREAT_SYS_CD, 									  TAKE_SNO, 									  FOLDER_TAKE_SEQ, 									  CREAT_YYYY 							   )B 						 WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID 							   AND A.TAKE_YYYY = B.TAKE_YYYY 							   AND A.TAKE_ORG_CD = B.TAKE_ORG_CD 							   AND A.CREAT_SYS_CD = B.CREAT_SYS_CD 							   AND A.TAKE_SNO = B.TAKE_SNO 						 GROUP BY A.RECORD_CENTER_ID, 							   A.TAKE_YYYY, 							   A.TAKE_ORG_CD, 							   A.CREAT_SYS_CD, 							   A.TAKE_SNO, 							   A.TAKE_STATE_DIV_CD, 							   A.TAKE_YMD, 							   A.REG_DTIME, 							   A.APP_TAKE_TYPE_CD, 							   CREAT_YYYY 						)B 				  WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID(+) 				  		AND A.RECORD_CENTER_ID = '1'						AND A.ORG_CD = B.TAKE_ORG_CD(+) 						AND A.COM_CD = B.CREAT_SYS_CD(+) AND 							  A.com_cd = '1'						  AND 		          	   		  A.org_cd = '1'		                 		               ) Z						 WHERE  								  Z.take_flag = '1'							  AND 								  Z.take_flag = '1'							  		ORDER BY Z.TAKE_ORG_CD,          Z.TAKE_ORG_NM,          Z.CREAT_SYS_CD         ) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeYearCurStatePagedList

		  SELECT COUNT(*)  			FROM 				 (SELECT A.ORG_CD AS TAKE_ORG_CD, 						A.ORG_NM AS TAKE_ORG_NM, 						A.TAKE_ORG_ABBR_NM AS TAKE_ORG_ABBR_NM, 						A.COM_CD AS CREAT_SYS_CD, 						A.COM_CD_NM AS CREAT_SYS_CD_NM, 						B.TAKE_YYYY,						CREAT_YYYY,						DECODE(B.TAKE_STATE_DIV_CD, '08', '1', '0') AS TAKE_FLAG, 						DECODE(B.TAKE_STATE_DIV_CD, '08', '인수', '미인수') TAKE_FLAG_NM, 						B.TAKE_YMD, 						NVL(B.CNT1, 0) AS RECV_FOLDER_CNT, 						NVL(B.CNT2, 0) AS RECV_RECORD_CNT, 						NVL(B.CNT3, 0) AS FOLDER_CNT01, 						NVL(B.CNT4, 0) AS RECORD_CNT01, 						NVL(B.CNT5, 0) AS FOLDER_CNT02, 						NVL(B.CNT6, 0) AS RECORD_CNT02, 						SUBSTR (B.REG_DTIME, 0, 8) AS REG_DTIME				   FROM 						(SELECT A.RECORD_CENTER_ID, 							   A.ORG_CD, 							   A.ORG_NM, 							   A.ORG_ABBR_NM TAKE_ORG_ABBR_NM, 							   B.COM_CD, 							   B.COM_CD_NM 						  FROM TB_STORG A, 							   (SELECT COM_CD, 									  COM_CD_NM 								 FROM TB_ZZCOMCD 								WHERE COM_TYPE_CD = 'RD17' 							   ) B 						)A, 						(SELECT A.RECORD_CENTER_ID, 							   A.TAKE_YYYY, 							   A.TAKE_ORG_CD, 							   A.CREAT_SYS_CD, 							   A.TAKE_SNO, 							   A.TAKE_STATE_DIV_CD, 							   A.TAKE_YMD, 							   A.REG_DTIME, 							   SUM(B.CNT1) AS CNT1, 							   SUM(B.CNT2) AS CNT2, 							   SUM(B.CNT3) AS CNT3, 							   SUM(B.CNT4) AS CNT4, 							   ( SUM(B.CNT1) - SUM(B.CNT3) ) AS CNT5, 							   ( SUM(B.CNT2) - SUM(B.CNT4) ) AS CNT6, 							   A.APP_TAKE_TYPE_CD, 							   CREAT_YYYY 						  FROM TB_TKORGTAKEPLAN A, 							   (SELECT RECORD_CENTER_ID, 									  TAKE_YYYY, 									  TAKE_ORG_CD, 									  CREAT_SYS_CD, 									  TAKE_SNO, 									  COUNT(*) AS CNT1, 									  SUM(CNT2) AS CNT2, 									  (SELECT COUNT(*) 										FROM TB_RDFOLDER B 									   WHERE B.RECORD_CENTER_ID = A.RECORD_CENTER_ID 											 AND A.TAKE_YYYY = B.TAKE_YYYY 											 AND A.FOLDER_TAKE_SEQ = B.FOLDER_TAKE_SEQ 									  ) AS CNT3, 									  SUM(CNT4) AS CNT4, 									  A.CREAT_YYYY 								 FROM 									  (SELECT G.RECORD_CENTER_ID, 											 G.TAKE_YYYY, 											 G.TAKE_ORG_CD, 											 G.CREAT_SYS_CD, 											 G.TAKE_SNO, 											 (SELECT COUNT(*) 											   FROM TB_TKRECORD K 											  WHERE K.RECORD_CENTER_ID = G.RECORD_CENTER_ID 													AND K.FOLDER_TAKE_SEQ = G.FOLDER_TAKE_SEQ 											 ) AS CNT2, 											 (SELECT COUNT(*) 											   FROM TB_RDRECORD J 											  WHERE J.RECORD_CENTER_ID = R.RECORD_CENTER_ID 													AND J.FOLDER_ID = R.FOLDER_ID 											 ) AS CNT4, 											 G.FOLDER_TAKE_SEQ, 											 R.CREAT_YYYY 										FROM TB_TKFOLDER G, 											 TB_RDFOLDER R 									   WHERE G.RECORD_CENTER_ID = '1'											 AND G.TAKE_YYYY = '1'											 AND G.RECORD_CENTER_ID = R.RECORD_CENTER_ID(+) 											 AND G.FOLDER_TAKE_SEQ = R.FOLDER_TAKE_SEQ(+) 											 AND 											 ( 												 G.APP_TAKE_DET_TYPE_CD IN ( '0', '2' ) 												 OR G.APP_TAKE_DET_TYPE_CD IS NULL 											 ) 											 AND G.RECV_RE_FLAG IS NULL 									  )A 								GROUP BY RECORD_CENTER_ID, 									  TAKE_YYYY, 									  TAKE_ORG_CD, 									  CREAT_SYS_CD, 									  TAKE_SNO, 									  FOLDER_TAKE_SEQ, 									  CREAT_YYYY 							   )B 						 WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID 							   AND A.TAKE_YYYY = B.TAKE_YYYY 							   AND A.TAKE_ORG_CD = B.TAKE_ORG_CD 							   AND A.CREAT_SYS_CD = B.CREAT_SYS_CD 							   AND A.TAKE_SNO = B.TAKE_SNO 						 GROUP BY A.RECORD_CENTER_ID, 							   A.TAKE_YYYY, 							   A.TAKE_ORG_CD, 							   A.CREAT_SYS_CD, 							   A.TAKE_SNO, 							   A.TAKE_STATE_DIV_CD, 							   A.TAKE_YMD, 							   A.REG_DTIME, 							   A.APP_TAKE_TYPE_CD, 							   CREAT_YYYY 						)B 				  WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID(+) 				  		AND A.RECORD_CENTER_ID = '1'						AND A.ORG_CD = B.TAKE_ORG_CD(+) 						AND A.COM_CD = B.CREAT_SYS_CD(+) AND 							  A.com_cd = '1'						  AND 		          	   		  A.org_cd = '1'		                 		               ) Z						 WHERE  								  Z.take_flag = '1'							  AND 								  Z.take_flag = '1'							  ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeNotTakeCurStatePagedList

		SELECT COUNT(1)		FROM (			SELECT C.cr_report_org_cd, C.cr_report_org_nm, C.cr_report_org_abbr_nm			     , C.com_cd creat_sys_cd, C.com_cd_nm creat_sys_cd_nm				 , '1' cr_report_yyyy				 , NVL(E.folder_cnt01,0) folder_cnt01, NVL(H.record_cnt01,0) record_cnt01				 , NVL(E.folder_cnt02,0) folder_cnt02, NVL(H.record_cnt02,0) record_cnt02				 , (NVL(E.folder_cnt01,0)-NVL(E.folder_cnt02,0)) folder_cnt03				 , (NVL(H.record_cnt01,0)-NVL(H.record_cnt02,0)) record_cnt03				 , DECODE(NVL(E.folder_cnt01,0),0,'0',DECODE((NVL(E.folder_cnt01,0)-NVL(E.folder_cnt02,0)),0,'1','0')) take_flag				 , DECODE(NVL(E.folder_cnt01,0),0,'미인수',DECODE((NVL(E.folder_cnt01,0)-NVL(E.folder_cnt02,0)),0,'인수','미인수')) take_flag_nm			FROM			(   SELECT A.org_cd cr_report_org_cd			         , A.org_nm cr_report_org_nm			         , A.org_abbr_nm cr_report_org_abbr_nm			         , B.com_cd			         , B.com_cd_nm			    FROM  TB_STORG A			         , (SELECT com_cd, com_cd_nm			            FROM  TB_ZZCOMCD				        WHERE com_type_cd = 'RD17'						AND   com_cd = '02'					    ) B			    WHERE A.record_center_id = '1' AND 					  A.org_cd = '1'				 			    ) C			, ( SELECT I.record_center_id, I.cr_report_yyyy, I.cr_report_org_cd, I.creat_sys_cd, I.cr_report_sno			         , I.state_div_cd			    FROM  TB_CRREPORT I			    WHERE I.record_center_id = '1'				AND   I.cr_report_yyyy = '1'				) D			, ( SELECT M.record_center_id, M.cr_report_yyyy, M.cr_report_org_cd, M.creat_sys_cd, M.cr_report_sno				    , COUNT(M.folder_recv_seq) folder_cnt01					, COUNT(N.folder_id) folder_cnt02				FROM  TB_CRFOLDER M, TB_RDFOLDER N				WHERE M.record_center_id = '1'				AND   M.record_center_id = N.record_center_id(+)				AND   M.org_cd = N.org_cd(+)				AND   M.clss_id = N.clss_id(+)				AND   M.creat_yyyy = N.creat_yyyy(+)				AND   M.folder_reg_seq = N.folder_reg_seq(+)				AND   M.ho_no = N.ho_no(+)				GROUP BY M.record_center_id, M.cr_report_yyyy, M.cr_report_org_cd, M.creat_sys_cd, M.cr_report_sno ) E			, ( SELECT F.record_center_id, F.cr_report_yyyy, F.cr_report_org_cd, F.creat_sys_cd, F.cr_report_sno				     , COUNT(G.record_recv_seq) record_cnt01				     , COUNT(J.record_id) record_cnt02				FROM  TB_CRFOLDER F				    , TB_CRRECORD G				    , TB_RDRECORD J				WHERE F.record_center_id = '1'				AND   F.record_center_id = G.record_center_id				AND	  F.folder_recv_seq = G.folder_recv_seq				AND	  G.record_center_id = J.record_center_id(+)				AND	  G.org_cd = J.org_cd(+)				AND	  G.creat_yyyy = J.creat_yyyy(+)				AND	  G.creat_reg_no = J.creat_reg_no(+)				AND	  G.dtch_reg_no = J.dtch_reg_no(+)				GROUP BY F.record_center_id, F.cr_report_yyyy, F.cr_report_org_cd, F.creat_sys_cd, F.cr_report_sno ) H			WHERE C.cr_report_org_cd = D.cr_report_org_cd(+)			AND   C.com_cd = D.creat_sys_cd(+)			AND   D.record_center_id = E.record_center_id(+)			AND   D.cr_report_yyyy = E.cr_report_yyyy(+)			AND   D.cr_report_org_cd = E.cr_report_org_cd(+)			AND   D.creat_sys_cd = E.creat_sys_cd(+)			AND   D.cr_report_sno = E.cr_report_sno(+)			AND   D.record_center_id = H.record_center_id(+)			AND   D.cr_report_yyyy = H.cr_report_yyyy(+)			AND   D.cr_report_org_cd = H.cr_report_org_cd(+)			AND   D.creat_sys_cd = H.creat_sys_cd(+)			AND   D.cr_report_sno = H.cr_report_sno(+)		) Z		 WHERE  				  Z.take_flag = '1'			  AND 				  Z.take_flag = '1'			  ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeNotTakeCurStatePagedList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT *		FROM (			SELECT C.cr_report_org_cd, C.cr_report_org_nm, C.cr_report_org_abbr_nm			     , C.com_cd creat_sys_cd, C.com_cd_nm creat_sys_cd_nm				 , '1' cr_report_yyyy				 , NVL(E.folder_cnt01,0) folder_cnt01, NVL(H.record_cnt01,0) record_cnt01				 , NVL(E.folder_cnt02,0) folder_cnt02, NVL(H.record_cnt02,0) record_cnt02				 , (NVL(E.folder_cnt01,0)-NVL(E.folder_cnt02,0)) folder_cnt03				 , (NVL(H.record_cnt01,0)-NVL(H.record_cnt02,0)) record_cnt03				 , DECODE(NVL(E.folder_cnt01,0),0,'0',DECODE((NVL(E.folder_cnt01,0)-NVL(E.folder_cnt02,0)),0,'1','0')) take_flag				 , DECODE(NVL(E.folder_cnt01,0),0,'미인수',DECODE((NVL(E.folder_cnt01,0)-NVL(E.folder_cnt02,0)),0,'인수','미인수')) take_flag_nm			FROM			(   SELECT A.org_cd cr_report_org_cd			         , A.org_nm cr_report_org_nm			         , A.org_abbr_nm cr_report_org_abbr_nm			         , B.com_cd			         , B.com_cd_nm			    FROM  TB_STORG A			         , (SELECT com_cd, com_cd_nm			            FROM  TB_ZZCOMCD				        WHERE com_type_cd = 'RD17'						AND   com_cd = '02'					    ) B			    WHERE A.record_center_id = '1'			     AND 					  A.org_cd = '1'				 			    ) C			, ( SELECT I.record_center_id, I.cr_report_yyyy, I.cr_report_org_cd, I.creat_sys_cd, I.cr_report_sno			         , I.state_div_cd			    FROM  TB_CRREPORT I			    WHERE I.record_center_id = '1'				AND   I.cr_report_yyyy = '1'				) D			, ( SELECT M.record_center_id, M.cr_report_yyyy, M.cr_report_org_cd, M.creat_sys_cd, M.cr_report_sno				    , COUNT(M.folder_recv_seq) folder_cnt01					, COUNT(N.folder_id) folder_cnt02				FROM  TB_CRFOLDER M, TB_RDFOLDER N				WHERE M.record_center_id = '1'				AND   M.record_center_id = N.record_center_id(+)				AND   M.creat_sys_cd = N.creat_sys_cd(+)				AND   M.org_cd = N.org_cd(+)				AND   M.clss_id = N.clss_id(+)				AND   M.creat_yyyy = N.creat_yyyy(+)				AND   M.folder_reg_seq = N.folder_reg_seq(+)				AND   M.ho_no = N.ho_no(+)				GROUP BY M.record_center_id, M.cr_report_yyyy, M.cr_report_org_cd, M.creat_sys_cd, M.cr_report_sno ) E			, ( SELECT F.record_center_id, F.cr_report_yyyy, F.cr_report_org_cd, F.creat_sys_cd, F.cr_report_sno				     , COUNT(G.record_recv_seq) record_cnt01				     , COUNT(J.record_id) record_cnt02				FROM  TB_CRFOLDER F				    , TB_CRRECORD G				    , TB_RDRECORD J				WHERE F.record_center_id = '1'				AND   F.record_center_id = G.record_center_id				AND	  F.folder_recv_seq = G.folder_recv_seq				AND	  G.record_center_id = J.record_center_id(+)				AND	  G.creat_sys_cd = J.creat_sys_cd(+)				AND	  G.org_cd = J.org_cd(+)				AND	  G.creat_yyyy = J.creat_yyyy(+)				AND	  G.creat_reg_no = J.creat_reg_no(+)				AND	  G.dtch_reg_no = J.dtch_reg_no(+)				GROUP BY F.record_center_id, F.cr_report_yyyy, F.cr_report_org_cd, F.creat_sys_cd, F.cr_report_sno ) H			WHERE C.cr_report_org_cd = D.cr_report_org_cd(+)			AND   C.com_cd = D.creat_sys_cd(+)			AND   D.record_center_id = E.record_center_id(+)			AND   D.cr_report_yyyy = E.cr_report_yyyy(+)			AND   D.cr_report_org_cd = E.cr_report_org_cd(+)			AND   D.creat_sys_cd = E.creat_sys_cd(+)			AND   D.cr_report_sno = E.cr_report_sno(+)			AND   D.record_center_id = H.record_center_id(+)			AND   D.cr_report_yyyy = H.cr_report_yyyy(+)			AND   D.cr_report_org_cd = H.cr_report_org_cd(+)			AND   D.creat_sys_cd = H.creat_sys_cd(+)			AND   D.cr_report_sno = H.cr_report_sno(+)		) Z		 WHERE  				  Z.take_flag = '1'			  AND 				  Z.take_flag = '1'			  		ORDER BY Z.cr_report_org_cd, Z.cr_report_org_nm, Z.creat_sys_cd		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeFolderPlan

		SELECT record_center_id, take_yyyy, take_org_cd, creat_sys_cd, take_sno		FROM  TB_TKFOLDER		WHERE record_center_id = '1'		AND   folder_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeMonitorInfo

		INSERT INTO TB_TKMONITORINFO		(			record_center_id, monitor_id, monitor_div, period_from_dt, period_to_dt			, org_cd, start_dtime, state, reg_dtime		)		(		    SELECT B.record_center_id				, B.monitor_id				, '1' monitor_div				, B.period_from_dt				, B.period_to_dt				, B.org_cd								, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS') start_dtime				, '1' state				, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS') reg_dtime 			FROM  TB_TKORGTAKEPLAN A			    , TB_TKMONITORINFO B			WHERE A.record_center_id = '1'			AND   A.take_yyyy = '1'			AND   A.take_org_cd = '1'			AND   A.creat_sys_cd = '1'			AND   A.take_sno = '1'			AND   B.record_center_id = A.record_center_id			AND   B.monitor_id = A.monitor_id			AND   B.monitor_div = '01'			AND   NOT EXISTS ( SELECT 1 FROM TB_TKMONITORINFO C			                   WHERE C.record_center_id = B.record_center_id			                   AND   C.monitor_id = B.monitor_id						       AND   C.monitor_div = '1' )		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeMonitorInfo03

		UPDATE TB_TKMONITORINFO		SET ( a0_cnt, a1_cnt, a2_cnt, a3_cnt, a4_cnt, file_cnt, state 				,  end_dtime			 		)		= (			SELECT NVL(SUM(a0_cnt),0) a0_cnt				, NVL(SUM(a1_cnt),0) a1_cnt				, NVL(SUM(a2_cnt),0) a2_cnt				, NVL(SUM(a3_cnt),0) a3_cnt				, NVL(SUM(a4_cnt),0) a4_cnt				, NVL(SUM(file_cnt),0) file_cnt				, '1' state				 					, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS') end_dtime				 			FROM (				(					SELECT COUNT(1) a0_cnt, 0 a1_cnt, 0 a2_cnt, 0 a3_cnt, 0 a4_cnt, 0 file_cnt					FROM  TB_TKFOLDER A					WHERE A.record_center_id = '1'					AND   A.take_yyyy = '1'					AND   A.take_org_cd = '1'					AND   A.creat_sys_cd = '1'					AND   A.take_sno = '1'					AND   A.exam_rslt_cd IN ('1','2')				)				UNION ALL				(					SELECT 0 a0_cnt						, DECODE(B.record_detl_type_cd,'01',1,0) a1_cnt						, DECODE(B.record_detl_type_cd,'02',1,0) a2_cnt						, DECODE(B.record_detl_type_cd,'04',1,0) a3_cnt						, DECODE(B.record_detl_type_cd,'03',1,0) a4_cnt						, 0 file_cnt					FROM  TB_TKFOLDER A					, TB_TKRECORD B					WHERE A.record_center_id = '1'					AND   A.take_yyyy = '1'					AND   A.take_org_cd = '1'					AND   A.creat_sys_cd = '1'					AND   A.take_sno = '1'					AND   A.exam_rslt_cd IN ('1','2')					AND   B.record_center_id = A.record_center_id					AND   B.folder_take_seq = A.folder_take_seq				)				UNION ALL				(					SELECT 0 a0_cnt, 0 a1_cnt, 0 a2_cnt, 0 a3_cnt, 0 a4_cnt, COUNT(1) file_cnt					FROM  TB_TKFOLDER A					, TB_TKRECORD B					, TB_TKATTACHFILE C					WHERE A.record_center_id = '1'					AND   A.take_yyyy = '1'					AND   A.take_org_cd = '1'					AND   A.creat_sys_cd = '1'					AND   A.take_sno = '1'					AND   A.exam_rslt_cd IN ('1','2')					AND   B.record_center_id = A.record_center_id					AND   B.folder_take_seq = A.folder_take_seq					AND   C.record_center_id = B.record_center_id					AND   C.record_take_seq = B.record_take_seq				)			)		)		WHERE ( record_center_id, monitor_id, monitor_div )		= (			SELECT record_center_id, monitor_id, '1' monitor_div			FROM  TB_TKORGTAKEPLAN			WHERE record_center_id = '1'			AND   take_yyyy = '1'			AND   take_org_cd = '1'			AND   creat_sys_cd = '1'			AND   take_sno = '1'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeMonitorInfo04

		UPDATE TB_TKMONITORINFO		SET ( a0_cnt, a1_cnt, a2_cnt, a3_cnt, a4_cnt, file_cnt, state		)		= (			SELECT NVL(SUM(a0_cnt),0) a0_cnt				, NVL(SUM(a1_cnt),0) a1_cnt				, NVL(SUM(a2_cnt),0) a2_cnt				, NVL(SUM(a3_cnt),0) a3_cnt				, NVL(SUM(a4_cnt),0) a4_cnt				, NVL(SUM(file_cnt),0) file_cnt				, '1' state							FROM (				(					SELECT COUNT(1) a0_cnt, 0 a1_cnt, 0 a2_cnt, 0 a3_cnt, 0 a4_cnt, 0 file_cnt					FROM  TB_TKFOLDER A					WHERE A.record_center_id = '1'					AND   A.take_yyyy = '1'					AND   A.take_org_cd = '1'					AND   A.creat_sys_cd = '1'					AND   A.take_sno = '1'					AND   A.take_fin_flag = '1'				)				UNION ALL				(					SELECT 0 a0_cnt						, DECODE(B.record_detl_type_cd,'01',1,0) a1_cnt						, DECODE(B.record_detl_type_cd,'02',1,0) a2_cnt						, DECODE(B.record_detl_type_cd,'04',1,0) a3_cnt						, DECODE(B.record_detl_type_cd,'03',1,0) a4_cnt						, 0 file_cnt					FROM  TB_TKFOLDER A					, TB_TKRECORD B					WHERE A.record_center_id = '1'					AND   A.take_yyyy = '1'					AND   A.take_org_cd = '1'					AND   A.creat_sys_cd = '1'					AND   A.take_sno = '1'					AND   A.take_fin_flag = '1'					AND   B.record_center_id = A.record_center_id					AND   B.folder_take_seq = A.folder_take_seq				)				UNION ALL				(					SELECT 0 a0_cnt, 0 a1_cnt, 0 a2_cnt, 0 a3_cnt, 0 a4_cnt, COUNT(1) file_cnt					FROM  TB_TKFOLDER A					, TB_TKRECORD B					, TB_TKATTACHFILE C					WHERE A.record_center_id = '1'					AND   A.take_yyyy = '1'					AND   A.take_org_cd = '1'					AND   A.creat_sys_cd = '1'					AND   A.take_sno = '1'					AND   A.take_fin_flag = '1'					AND   B.record_center_id = A.record_center_id					AND   B.folder_take_seq = A.folder_take_seq					AND   C.record_center_id = B.record_center_id					AND   C.record_take_seq = B.record_take_seq				)			)		)		WHERE ( record_center_id, monitor_id, monitor_div )		= (			SELECT record_center_id, monitor_id, '1' monitor_div			FROM  TB_TKORGTAKEPLAN			WHERE record_center_id = '1'			AND   take_yyyy = '1'			AND   take_org_cd = '1'			AND   creat_sys_cd = '1'			AND   take_sno = '1'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findTakeRecvFolderErrorItemCnt

		select count(1) from tb_tkfolder		where record_center_id = '1'		AND   take_yyyy = '1'		AND   take_org_cd = '1'		AND   creat_sys_cd = '1'		AND   take_sno = '1'		AND   error_flag = 'Y'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findTakeRecvRecordErrorItemCnt

		select count(1) 		from tb_tkfolder a, tb_tkrecord b		where a.record_center_id = '1'		AND   a.record_center_id = b.record_center_id		AND   a.folder_take_seq = b.folder_take_seq		AND   a.take_yyyy = '1'		AND   a.take_org_cd = '1'		AND   a.creat_sys_cd = '1'		AND   a.take_sno = '1'		AND   b.error_flag = 'Y';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findTakeRecvAttachErrorItemCnt

		select count(1) 		from tb_tkattachfile Z                where                 EXISTS                    ( select 1		    from tb_tkfolder a, tb_tkrecord b		    where a.record_center_id = '1'		    and   a.record_center_id = b.record_center_id		    and   a.folder_take_seq = b.folder_take_seq		    and   a.take_yyyy = '1'		    and   a.take_org_cd = '1'		    and   a.take_sno = '1'                    AND b.record_center_id = Z.record_center_id     		    AND b.record_take_seq = Z.record_take_seq		)		AND Z.virus_flag = '1'               ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeRecvErrorList

		SELECT 	count(1)		FROM 	tb_tkorgrecverror		WHERE 	record_center_id 	= '1'		AND		take_yyyy 			= '1'		AND		take_org_cd			= '1'		AND		creat_sys_cd 		= '1'		AND 	recv_error_flag 	= '1'		;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeRecvErrorList

			SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (					SELECT 	take_yyyy					      	,nvl(file_div_cd, '0') as file_div_cd					      	 					      	,(case when file_div_cd = '1' then '기록물철등록부'					      	       when file_div_cd = '2' then '기록물등록대장'					      	       when file_div_cd = '3' then '특수목록'					      	       when file_div_cd = '4' then '전자파일'					      	       when file_div_cd = '5' then '기록물철변경이력'					      	       when file_div_cd = '6' then '기록물건변경이력'					      	       else '-'					      	  end) file_div_nm 					      	,take_file_nm					      	,to_number(nvl(trim(line_no), '0')) as line_no					      	,folder_clss_no					      	,folder_title					      	,record_reg_no					      	,record_title					      	,replace(recv_error_rsn, CHR(10), '<br/>') recv_error_rsn					FROM 	tb_tkorgrecverror					WHERE 	record_center_id 	= '1'					AND		take_yyyy 			= '1'					AND		take_org_cd			= '1'					AND		creat_sys_cd 		= '1'					AND 	recv_error_flag 	= '1'										ORDER BY  NVL(file_div_cd, 0), line_no				) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeReturnTrgtFolderPagedList

	    SELECT count(1)	    FROM  TB_TKFOLDER A	    WHERE A.record_center_id = '1'	    AND   A.take_yyyy = '1'	    AND   A.take_org_cd = '1'	    AND   A.creat_sys_cd = '1'	    AND   A.take_sno = '1'	    ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeReturnTrgtFolderPagedList

	SELECT C.*    FROM (        SELECT ROWNUM AS rnum            , B.*        FROM (		SELECT folder_take_seq, clss_id, clss_nm, title, creat_yyyy		     , presv_term_cd, presv_term_nm, erecord_flag, erecord_flag_nm		     , error_flag, auto_check, rjct_flag, rjct_flag_nm		     , record_cnt01, attach_cnt01, record_cnt03, attach_cnt03, take_fin_state_cd		     , org_cd, folder_reg_seq, ho_no, creat_sys_cd		FROM  (		    SELECT A.folder_take_seq, A.clss_id, A.clss_nm, A.title, A.creat_yyyy, A.presv_term_cd		         , (SELECT C.com_cd_nm		            FROM TB_ZZCOMCD C		            WHERE C.com_type_cd = DECODE(A.creat_sys_cd,'02','RD57','RD07')		            AND   C.com_cd = A.presv_term_cd) presv_term_nm		         , A.erecord_flag		         , (SELECT C.com_cd_nm		            FROM TB_ZZCOMCD C		            WHERE C.com_type_cd = 'RD23'		            AND   C.com_cd = A.erecord_flag) erecord_flag_nm		         , A.error_flag		         , DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) auto_check		         , A.rjct_flag		         , (SELECT Z.com_cd_nm 		            FROM tb_zzcomcd Z 		            WHERE Z.com_type_cd = 'RD29' 		            AND Z.com_cd = A.rjct_flag) rjct_flag_nm		         , (SELECT COUNT(1) 		              FROM tb_tkrecord z 		             WHERE Z.record_center_id = A.record_center_id 		               AND Z.folder_take_seq = A.folder_take_seq) record_cnt01		        , (SELECT COUNT(1)                    FROM  tb_tkrecord Z                   WHERE Z.record_center_id = A.record_center_id                   AND   Z.folder_take_seq = A.folder_take_seq                   AND   Z.error_flag = 'Y') record_cnt03		         , (SELECT COUNT(1) 		            FROM tb_tkattachfile Z		            WHERE		            EXISTS  (SELECT 1	                     FROM   tb_tkrecord K 		                 WHERE  K.record_center_id = A.record_center_id 						 AND    K.folder_take_seq = A.folder_take_seq								 AND K.record_center_id = Z.record_center_id    				 AND K.record_take_seq = Z.record_take_seq)) attach_cnt01		         ,  (select count(1) 		              from tb_tkattachfile z  		             where 		                exists (select 1		                      from tb_tkrecord k 		                     where k.record_center_id = a.record_center_id 		                       and k.folder_take_seq = a.folder_take_seq				       and k.record_center_id = z.record_center_id       				       and k.record_take_seq = z.record_take_seq)		               and virus_flag = '1') attach_cnt03		         , A.take_fin_state_cd			     , org_cd, folder_reg_seq, ho_no, creat_sys_cd		    FROM  TB_TKFOLDER A		    WHERE A.record_center_id 	= '1'		    AND   A.take_yyyy 			= '1'		    AND   A.take_org_cd 		= '1'		    AND   A.creat_sys_cd 		= '1'		    AND   A.take_sno 			= '1'		    		)		ORDER BY folder_take_seq		 ) B        WHERE ROWNUM <= '1'    ) C    WHERE C.rnum >= '1'  	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findTkFolderTakeInfo

		SELECT take_yyyy, take_org_cd, take_sno, creat_sys_cd		FROM tb_tkfolder		WHERE record_center_id = '1'		AND   folder_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countFolderTakeHist

		SELECT COUNT(1) FROM tb_tkfoldertakehist 		WHERE record_center_id  = '1'		AND   take_yyyy			= '1'		AND   take_org_cd       = '1'		AND   take_sno   		= '1'		AND   creat_sys_cd      = '1'		AND   folder_take_seq   = '1'		AND   take_state_cd     IN ('02', '03');


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateFolderTakeHist

		UPDATE  tb_tkfoldertakehist		SET 	take_state_cd = '1'			   ,rjct_cont     = (SELECT rjct_cont FROM tb_tkfolder WHERE record_center_id = '1' AND folder_take_seq = '1')		WHERE record_center_id 	= '1'		AND   take_yyyy 		= '1'		AND   take_org_cd		= '1'		AND   take_sno 			= '1'		AND   creat_sys_cd		= '1'		AND   folder_take_seq   = '1'		AND   take_state_cd    IN ('02', '03');


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : insertFolderTakeHist

		INSERT INTO TB_TKFOLDERTAKEHIST(		    record_center_id,   folder_take_seq,    title, 			hist_sno,       	creat_sys_cd,		    org_cd,				clss_div_cd,        clss_id,            creat_yyyy,     folder_reg_seq,			ho_no,				take_org_cd,        take_yyyy,          take_sno,       take_state_cd,			exam_cont, 			rjct_cont,			folder_err_flag,    record_err_cnt, record_tot_cnt,		    file_err_cnt,   	file_tot_cnt,		reg_dtime, 			rjct_dtime		)		(		    SELECT    record_center_id, folder_take_seq, title                    ,(SELECT count(1)+1                      FROM   tb_tkfoldertakehist Z                      WHERE Z.record_center_id = K.record_center_id                      AND   Z.creat_sys_cd     = K.creat_sys_cd                      AND   Z.clss_id          = K.clss_id                      AND   Z.creat_yyyy       = K.creat_yyyy                      AND   Z.folder_reg_seq   = K.folder_reg_seq                      AND   Z.ho_no            = K.ho_no) hist_sno                    ,creat_sys_cd, org_cd, clss_div_cd, clss_id, creat_yyyy                    ,folder_reg_seq, ho_no, take_org_cd, take_yyyy, take_sno                    ,'1'                    , reg_dtime, rjct_dtime		    FROM (		        SELECT      A.record_center_id                          ,A.folder_take_seq                          ,MAX(A.title) title                          ,MAX(A.creat_sys_cd) creat_sys_cd                          ,MAX(A.org_cd) org_cd                          ,MAX(A.clss_div_cd) clss_div_cd                          ,MAX(A.clss_id) clss_id                          ,MAX(A.creat_yyyy) creat_yyyy                          ,MAX(A.folder_reg_seq) folder_reg_seq                          ,MAX(A.ho_no) ho_no                          ,MAX(A.take_org_cd) take_org_cd                          ,MAX(A.take_yyyy) take_yyyy                          ,MAX(A.take_sno) take_sno                          ,MAX(A.exam_cont) exam_cont                          ,(CASE WHEN MAX(a.error_flag) = 'Y' THEN '1'                                 ELSE '0'                            END) folder_err_flag                          ,NVL(SUM(CASE WHEN B.error_flag = 'Y' THEN 1                                        ELSE 0                                   END), 0) record_err_cnt                          ,MAX(A.rjct_cont) rjct_cont                          ,COUNT(B.record_take_seq) record_tot_cnt                          ,SUM((select COUNT(1) FROM tb_tkattachfile Z WHERE Z.record_center_id = B.record_center_id AND Z.record_take_seq = B.record_take_seq AND Z.virus_flag = '1')) file_err_cnt                          ,SUM((select COUNT(1) FROM tb_tkattachfile Z WHERE Z.record_center_id = B.record_center_id AND Z.record_take_seq = B.record_take_seq)) file_tot_cnt                          ,MAX(A.reg_dtime) reg_dtime                          		        FROM  tb_tkfolder A		            , tb_tkrecord B		        WHERE   A.record_center_id  =   '1'		        AND     A.folder_take_seq   =   '1'		        AND     A.record_center_id  =   B.record_center_id		        AND     A.folder_take_seq   =   B.folder_take_seq		        AND     A.take_yyyy         =   '1'		        AND     A.take_org_cd       =   '1'		        AND     A.creat_sys_cd      =   '1'		        AND     A.take_sno          =   '1'		        GROUP BY A.record_center_id, A.folder_take_seq		    ) K		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findTkFolderTakeHistInfrm

		SELECT    A.take_yyyy				, A.take_org_cd				, A.creat_sys_cd				, A.take_sno		FROM TB_TKFOLDER A		WHERE A.record_center_id = '1'		AND	  A.folder_take_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeRjctFolderList

		SELECT   COUNT(1)		FROM tb_tkfoldertakehist A		WHERE A.record_center_id    = '1'				AND   A.take_state_cd IN ('02', '03')	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeRjctFolderList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT   A.record_center_id		        ,A.folder_take_seq		        ,A.creat_sys_cd		        ,(SELECT Z.com_cd_nm FROM tb_zzcomcd Z WHERE Z.com_type_cd = 'RD17' AND Z.com_cd = A.creat_sys_cd) creat_sys_cd_nm		        ,A.org_cd		        ,A.clss_id		        ,A.creat_yyyy		        ,A.folder_reg_seq		        ,A.ho_no		        ,A.title		        ,A.take_state_cd		        ,(SELECT Z.com_cd_nm FROM tb_zzcomcd Z WHERE Z.com_type_cd = 'TK22' AND com_cd = A.take_state_cd) take_state_cd_nm		        ,A.reg_dtime		        ,A.folder_err_flag		        ,(CASE WHEN A.folder_err_flag = '1' THEN 'Y' ELSE 'N' END) folder_err_flag_nm		        ,exam_cont		        ,rjct_cont		        ,record_err_cnt record_cnt		        ,file_err_cnt file_cnt		FROM tb_tkfoldertakehist A		WHERE A.record_center_id    = '1'		AND   A.take_state_cd IN ('02', '03')		order by org_cd, clss_id, creat_yyyy, folder_reg_seq, ho_no, hist_sno		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateFolderRecvReIsNull

		UPDATE tb_tkfolder Z set recv_re_flag = null		                where                 EXISTS                        (SELECT 1			FROM   TB_TKFOLDER			WHERE  record_center_id 	= '1'			AND    take_yyyy 			= '1'			AND    take_org_cd 			= '1'			AND    creat_sys_cd 		= '1'			AND    take_sno 			= ('1'-1)			AND    recv_re_flag 		= '1'                        AND record_center_id = Z.record_center_id                        AND org_cd = Z.org_cd                        AND clss_id = Z.clss_id                        AND creat_yyyy = Z.creat_yyyy                        AND folder_reg_seq = Z.folder_reg_seq                        AND ho_no = Z.ho_no                        AND take_sno = Z.take_sno			);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeErecordFlag

		SELECT 'O' 		FROM  tb_rdfolder 		WHERE record_center_id = '1'		AND   folder_id = '1'		AND   erecord_flag IN ('2','3')	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeErecord

	INSERT INTO tb_rdfolder_nonelect(record_center_id, folder_id, take_plan_yyyy, take_fin_div_cd, non_erecord_reg_cnt, take_off_rsn, reg_dtime)	(	    SELECT record_center_id	          ,'1'	          ,take_plan_yyyy	          ,'0'	          ,(SELECT COUNT(1) 	              FROM tb_tkrecord Z 	             WHERE Z.record_center_id = A.record_center_id 	               AND Z.folder_take_seq = A.folder_take_seq 	               AND erecord_flag = '2') non_erecord_reg_cnt	          ,take_off_rsn	          ,TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS') reg_dtime	     from tb_tkfolder_nonelect A	     where a.record_center_id = '1'	     AND   a.folder_take_seq = '1'	);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeErecord

		UPDATE tb_rdfolder_nonelect		   SET take_plan_yyyy = '1'		      ,reg_dtime =  TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS')		 WHERE record_center_id = '1'		   AND folder_id = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckNonElectFolderList

		INSERT INTO tb_rdrecord_nonelect (record_center_id, record_id, take_fin_div_cd, take_imposs_div_cd, take_imposs_rsn, reg_dtime)		(		    SELECT record_center_id		          ,record_id		          ,'0' take_fin_div_cd		          ,'' take_imposs_div_cd		          ,'' take_imposs_rsn		          		          ,TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS') reg_dtime 		    FROM   tb_rdrecord 		    where  record_center_id 	= '1'		    AND    folder_id 		    = '1'		    AND    erecord_flag 		= '2'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findTakeFinFlag

 		SELECT count(1)		FROM tb_tkfolder A		WHERE A.record_center_id = '1'		AND A.take_yyyy = '1'		AND A.take_org_cd = '1'		AND A.creat_sys_cd = '1'		AND A.rjct_flag = '0'		AND A.erecord_flag IN ('2', '3')		AND A.take_sno IN (SELECT B.take_sno 		                   FROM tb_tkorgtakeplan B		                   WHERE B.record_center_id = A.record_center_id		                   AND B.take_yyyy = A.take_yyyy		                   AND B.take_org_cd = A.take_org_cd		                   AND B.creat_sys_cd = A.creat_sys_cd		                   AND B.parent_take_sno = (SELECT C.parent_take_sno 		                                            FROM tb_tkorgtakeplan C 		                                            WHERE C.record_center_id = B.record_center_id		                                            AND C.take_yyyy = B.take_yyyy		                                            AND C.take_org_cd = B.take_org_cd		                                            AND C.creat_sys_cd = B.creat_sys_cd		                                            AND C.take_sno = '1'));


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : countUndTakeRecvVirusCheckHistList

 		SELECT COUNT(*)		  FROM		       (SELECT AA.RECORD_CENTER_ID ,		              AA.CREAT_SYS_CD ,		              AA.ORG_CD ,		              AA.CREAT_YYYY ,		              AC.DOC_TYPE_CD ,		              AC.DOC_TYPE_SNO ,		              DECODE(AB.CREAT_SYS_CD, '02', AB.CREAT_REG_NO, '05', AB.CREAT_REG_NO, DECODE(AB.RECORD_DETL_TYPE_CD, '01', DECODE(NVL(AB.DOC_NO, ''), '', AB.CREAT_SYS_RECORD_ID, AB.DOC_NO), AB.CREAT_SYS_RECORD_ID)) AS CREAT_REG_NO ,		              AB.DTCH_REG_NO ,		              AA.FOLDER_TAKE_SEQ ,		              AB.RECORD_TAKE_SEQ ,		              AA.TITLE AS FOLDER_TITLE ,		              AB.TITLE AS RECORD_TITLE ,		              AC.REG_SEQ ,		              AC.FILE_NM ,		              AB.RECORD_SNO ,		              AB.CREAT_REG_DTIME ,		              AB.CREAT_REG_NO AS CREAT_REG_NO_1,		              AC.ATTACH_FILE_TYPE		         FROM TB_TKFOLDER AA ,		              TB_TKRECORD AB ,		              TB_TKATTACHFILE AC		        WHERE AA.RECORD_CENTER_ID = AB.RECORD_CENTER_ID		              AND AA.FOLDER_TAKE_SEQ = AB.FOLDER_TAKE_SEQ		              AND AB.RECORD_CENTER_ID = AC.RECORD_CENTER_ID		              AND AB.RECORD_TAKE_SEQ = AC.RECORD_TAKE_SEQ		              AND AA.RECORD_CENTER_ID = '1'		              AND AA.FOLDER_TAKE_SEQ = '1'		       ) A ,		       TB_TKVIRUSCHECK B		 WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID		       AND B.RECORD_TAKE_SEQ=A.RECORD_TAKE_SEQ		       AND B.REG_SEQ=A.REG_SEQ		       AND B.ATTACH_FILE_TYPE=A.ATTACH_FILE_TYPE		       AND A.CREAT_REG_NO IS NOT NULL		 AND 				  B.virus_infection_flag  = '1'		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeRecvVirusCheckHistList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.*	        FROM (		SELECT ROW_NUMBER() OVER(PARTITION BY A.RECORD_TAKE_SEQ ORDER BY A.DOC_TYPE_CD, A.REG_SEQ, B.VIRUS_HIST_SEQ) AS ROW_IDX1 ,		       COUNT(*) OVER(PARTITION BY A.RECORD_TAKE_SEQ) AS ROW_CNT1 ,		       ROW_NUMBER() OVER(PARTITION BY A.RECORD_TAKE_SEQ, A.DOC_TYPE_CD ORDER BY A.DOC_TYPE_CD, A.REG_SEQ, B.VIRUS_HIST_SEQ) AS ROW_IDX2 ,		       COUNT(*) OVER(PARTITION BY A.RECORD_TAKE_SEQ, A.DOC_TYPE_CD) AS ROW_CNT2 ,		       ROW_NUMBER() OVER(PARTITION BY A.RECORD_TAKE_SEQ, A.DOC_TYPE_CD, A.REG_SEQ ORDER BY A.DOC_TYPE_CD, A.REG_SEQ, B.VIRUS_HIST_SEQ) AS ROW_IDX3 ,		       COUNT(*) OVER(PARTITION BY A.RECORD_TAKE_SEQ, A.DOC_TYPE_CD, A.REG_SEQ) AS ROW_CNT3 ,		       A.RECORD_CENTER_ID ,		       A.FOLDER_TAKE_SEQ ,		       A.FOLDER_TITLE ,		       A.RECORD_TAKE_SEQ ,		       A.RECORD_TITLE ,		       A.DOC_TYPE_CD ,		       Z.COM_CD_NM AS DOC_TYPE_NM ,		       A.DOC_TYPE_SNO ,		       A.FILE_NM ,		       B.VIRUS_CHECK_DTIME ,		       B.VIRUS_CHECK_FLAG ,		       DECODE(B.VIRUS_CHECK_FLAG, '1', 'O', 'X') AS VIRUS_CHECK_FLAG_NM ,		       B.VIRUS_INFECTION_FLAG ,		       DECODE(B.VIRUS_INFECTION_FLAG, '1', 'O', 'X') AS VIRUS_INFECTION_FLAG_NM ,		       B.VIRUS_INFECTION_DTIME ,		       B.VIRUS_INFECTION_CONT ,		       B.VIRUS_CLEAN_FLAG ,		       DECODE(B.VIRUS_CLEAN_FLAG, '1', '치료', '2', '치료불가', '-') AS VIRUS_CLEAN_FLAG_NM ,		       B.VIRUS_CLEAN_DTIME ,		       B.VIRUS_CLEAN_APPLY_FLAG ,		       DECODE(B.VIRUS_CLEAN_APPLY_FLAG, '1', '반영', '2', '미반영', '-') AS VIRUS_CLEAN_APPLY_FLAG_NM ,		       B.VIRUS_CLEAN_APPLY_DTIME ,		       A.REG_SEQ		  FROM		       (SELECT AA.RECORD_CENTER_ID ,		              AA.CREAT_SYS_CD ,		              AA.ORG_CD ,		              AA.CREAT_YYYY ,		              AC.DOC_TYPE_CD ,		              AC.DOC_TYPE_SNO ,		              DECODE(AB.CREAT_SYS_CD, '02', AB.CREAT_REG_NO, '05', AB.CREAT_REG_NO, DECODE(AB.RECORD_DETL_TYPE_CD, '01', DECODE(NVL(AB.DOC_NO, ''), '', AB.CREAT_SYS_RECORD_ID, AB.DOC_NO), AB.CREAT_SYS_RECORD_ID)) AS CREAT_REG_NO ,		              AB.DTCH_REG_NO ,		              AA.FOLDER_TAKE_SEQ ,		              AB.RECORD_TAKE_SEQ ,		              AA.TITLE AS FOLDER_TITLE ,		              AB.TITLE AS RECORD_TITLE ,		              AC.REG_SEQ ,		              AC.FILE_NM ,		              AB.RECORD_SNO ,		              AB.CREAT_REG_DTIME ,		              AB.CREAT_REG_NO AS CREAT_REG_NO_1,		              AC.ATTACH_FILE_TYPE		         FROM TB_TKFOLDER AA ,		              TB_TKRECORD AB ,		              TB_TKATTACHFILE AC		        WHERE AA.RECORD_CENTER_ID = AB.RECORD_CENTER_ID		              AND AA.FOLDER_TAKE_SEQ = AB.FOLDER_TAKE_SEQ		              AND AB.RECORD_CENTER_ID = AC.RECORD_CENTER_ID		              AND AB.RECORD_TAKE_SEQ = AC.RECORD_TAKE_SEQ		              AND AA.RECORD_CENTER_ID = '1'		              AND AA.FOLDER_TAKE_SEQ = '1'		       ) A ,		       TB_TKVIRUSCHECK B ,		       (SELECT COM_CD,		              COM_CD_NM		         FROM TB_ZZCOMCD		        WHERE COM_TYPE_CD = 'RD21'		       ) Z		 WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID		       AND B.RECORD_TAKE_SEQ=A.RECORD_TAKE_SEQ		       AND B.REG_SEQ=A.REG_SEQ		       AND B.ATTACH_FILE_TYPE=A.ATTACH_FILE_TYPE		       AND A.CREAT_REG_NO IS NOT NULL		       AND A.DOC_TYPE_CD = Z.COM_CD AND 								 B.virus_infection_flag  = '1'				 		ORDER BY A.RECORD_CENTER_ID ,		       A.FOLDER_TAKE_SEQ ,		       A.RECORD_SNO ,		       A.CREAT_REG_DTIME ,		       A.CREAT_REG_NO_1 ,		       A.DOC_TYPE_CD ,		       A.DOC_TYPE_SNO ,		       B.VIRUS_HIST_SEQ				        ) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeFolderName

		SELECT A.title FROM TB_TKFOLDER A WHERE A.record_center_id = '1' AND A.folder_take_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findExcelUndTakeRecvNewPagedList

		SELECT C.*    FROM (        SELECT ROWNUM AS rnum            , B.*        FROM (		SELECT Z.take_org_abbr_nm || '(' || Z.take_org_cd  ||')' AS TAKE_ORG_NM			, Z.creat_sys_cd_nm AS CREAT_SYS_CD_NM			, Z.take_state_div_cd_nm AS TAKE_STATE_DIV_CD_NM			, rjct_hist_cnt AS RJCT_HIST_CNT			, Z.recv_folder_cnt || '/' || Z.recv_record_cnt || '/' || Z.recv_attach_cnt AS FOLDER_CNT01			, nvl((z.folder_cnt01-z.folder_cnt03), 0) || '/' || nvl((z.record_cnt01-z.record_cnt03), 0) || '/' || nvl((z.attach_cnt01-z.attach_cnt03), 0) AS FOLDER_CNT02			, nvl(z.folder_cnt03, 0) || '/' || nvl(z.record_cnt03, 0) || '/' || nvl(z.attach_cnt03, 0) AS FOLDER_CNT03        FROM (            SELECT A.record_center_id                , A.org_cd AS take_org_cd                , A.org_nm AS take_org_nm                , A.org_abbr_nm AS take_org_abbr_nm                , A.creat_sys_cd                , (SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='RD17' AND com_cd=A.creat_sys_cd) creat_sys_cd_nm                , '1' take_yyyy                , B.take_sno                , B.parent_take_sno                , NVL(B.take_state_div_cd,DECODE(A.take_sched_set_state,'1','02','3','02','01')) take_state_div_cd                , (CASE WHEN B.take_sno != B.parent_take_sno AND B.take_state_div_cd = '04' THEN '재접수완료'                        ELSE (NVL((SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='TK08' AND com_cd=B.take_state_div_cd)                                ,DECODE(A.take_sched_set_state,'1','일정수립완료','3','일정수립완료','일정미수립')))                   END) take_state_div_cd_nm                , NVL(B.recv_fin_state_cd,'0') recv_fin_state_cd                , DECODE(B.recv_fin_state_cd,'1','접수중','2','접수실패','3','접수완료','4','접수대기','미접수') recv_fin_state_cd_nm                , NVL(B.recv_folder_cnt,0) AS recv_folder_cnt                , NVL(B.recv_record_cnt,0) AS recv_record_cnt                , NVL(B.recv_attach_cnt,0) AS recv_attach_cnt                , B.recv_ymd                , (SELECT MAX(D.recv_ymd)                 	 FROM TB_TKORGTAKEPLAN D                 	WHERE D.record_center_id = B.record_center_id                      AND D.take_yyyy        = B.take_yyyy                      AND D.take_org_cd      = B.take_org_cd                      AND D.creat_sys_cd     = B.creat_sys_cd                      AND D.parent_take_sno  = B.parent_take_sno) max_recv_ymd                , NVL(recv_folder_cnt, 0) as folder_cnt01            	, NVL(recv_folder_err_cnt, 0) as folder_cnt03            	, NVL(recv_record_cnt, 0) as record_cnt01            	, NVL(recv_record_err_cnt, 0) as record_cnt03                	, NVL(recv_attach_cnt, 0) as attach_cnt01             	, NVL(recv_attach_err_cnt, 0) as attach_cnt03            	,(SELECT COUNT(1)             		FROM TB_TKFOLDER D               	   WHERE D.record_center_id	= B.record_center_id                	 AND D.take_yyyy		= B.take_yyyy                	 AND D.take_org_cd		= B.take_org_cd                	 AND D.creat_sys_cd		= B.creat_sys_cd                	 AND D.take_sno			= B.take_sno                	 AND D.rjct_flag = '1') folder_cnt04            	,(SELECT COUNT(1) FROM TB_TKFOLDER D                   WHERE D.record_center_id=B.record_center_id                	 AND D.take_yyyy			= B.take_yyyy                	 AND D.take_org_cd			= B.take_org_cd                	 AND D.creat_sys_cd			= B.creat_sys_cd                	 AND D.take_sno				= B.take_sno                	 AND D.take_fin_flag = '1') folder_cnt05            	,(SELECT COUNT(1) 					FROM tb_tkfoldertakehist D				   				   WHERE 				   	  EXISTS (				    		SELECT 1				    		  FROM TB_TKFOLDER S				    		 WHERE S.record_center_id  	= B.record_center_id				    		   AND S.take_yyyy          = B.take_yyyy				    		   AND S.take_org_cd        = B.take_org_cd				    		   AND S.creat_sys_cd       = B.creat_sys_cd				    		   AND S.take_sno           = B.take_sno				    		   AND S.reg_dtime			= D.reg_dtime						   AND S.record_center_id = D.record_center_id						   AND S.creat_sys_cd = D.creat_sys_cd						   AND S.org_cd = D.org_cd						   AND S.clss_id = D.clss_id						   AND S.creat_yyyy = D.creat_yyyy						   AND S.folder_reg_seq = D.folder_reg_seq						   AND S.ho_no = D.ho_no						   AND S.take_sno = D.take_sno						)	 				 AND take_state_cd IN ('02','03')            	 ) rjct_hist_cnt            	 ,(SELECT 	MAX(D.reg_dtime)             	     FROM 	tb_tkfolder D            	    WHERE 	D.record_center_id = B.record_center_id            	      AND	D.take_yyyy			= B.take_yyyy            	      AND	D.take_org_cd 		= B.take_org_cd            	      AND 	D.creat_sys_cd		= B.creat_sys_cd            	      AND	D.take_sno			= B.take_sno            	   ) reg_dtime            	   ,(SELECT count(1)            	     FROM 	tb_tkfolder D            	    WHERE 	D.record_center_id = B.record_center_id            	      AND	D.take_yyyy			= B.take_yyyy            	      AND	D.take_org_cd 		= B.take_org_cd            	      AND 	D.creat_sys_cd		= B.creat_sys_cd            	      AND	D.take_sno			= B.take_sno            	      AND   D.recv_re_flag 		= '1'            	   ) recv_re_flag           FROM (					SELECT A.record_center_id, A.org_cd, A.org_nm, A.org_abbr_nm, B.creat_sys_cd, C.take_sched_set_state					FROM TB_STORG A					, TB_STLINKTRGT B					, (SELECT record_center_id,take_org_cd,take_sched_set_state					    FROM TB_TKORGTAKESCHED WHERE take_yyyy = '1') C					WHERE A.record_center_id = '1'					 AND 						  A.org_cd = '1'					  AND 						  A.close_flag = '1'					 					AND  A.link_trgt_id = B.link_trgt_id					 AND 						  B.creat_sys_cd = '1'					 					AND  A.record_center_id = C.record_center_id(+)					AND  A.org_cd = C.take_org_cd(+)				) A				, (					SELECT *					FROM TB_TKORGTAKEPLAN					WHERE record_center_id = '1'					AND   take_yyyy = '1' AND 						  take_org_cd = '1'					  AND 						  creat_sys_cd = '1'					 					AND	  (app_take_type_cd is null OR app_take_type_cd = '0')				) B			WHERE A.record_center_id = B.record_center_id(+)			AND   A.org_cd = B.take_org_cd(+)			AND   A.creat_sys_cd = B.creat_sys_cd(+)			) Z WHERE  				  Z.take_state_div_cd = '1'			  AND 				  Z.take_state_div_cd = '1'			  AND 				  Z.recv_fin_state_cd = '1'			  		ORDER BY Z.record_center_id, Z.max_recv_ymd desc nulls last,  Z.take_org_cd, Z.creat_sys_cd DESC,  Z.take_state_div_cd_nm desc, Z.take_sno desc		        	 ) B        WHERE ROWNUM <= '1'    ) C    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findExcelUndTakeReturnTrgtFolderPagedList

	SELECT C.*    FROM (        SELECT ROWNUM AS rnum            , B.*        FROM (		SELECT clss_nm				, title				, creat_yyyy				, presv_term_nm				, rjct_flag_nm				, auto_check				, record_cnt03 || '/' || record_cnt01 AS record_cnt01				, attach_cnt03 || '/' || attach_cnt01 AS attach_cnt01		FROM  (		    SELECT A.folder_take_seq, A.clss_id, A.clss_nm, A.title, A.creat_yyyy, A.presv_term_cd		         , (SELECT C.com_cd_nm		            FROM TB_ZZCOMCD C		            WHERE C.com_type_cd = DECODE(A.creat_sys_cd,'02','RD57','RD07')		            AND   C.com_cd = A.presv_term_cd) presv_term_nm		         , A.erecord_flag		         , (SELECT C.com_cd_nm		            FROM TB_ZZCOMCD C		            WHERE C.com_type_cd = 'RD23'		            AND   C.com_cd = A.erecord_flag) erecord_flag_nm		         , A.error_flag		         , DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) auto_check		         , A.rjct_flag		         , (SELECT Z.com_cd_nm 		            FROM tb_zzcomcd Z 		            WHERE Z.com_type_cd = 'RD29' 		            AND Z.com_cd = A.rjct_flag) rjct_flag_nm		         , (SELECT COUNT(1) 		              FROM tb_tkrecord z 		             WHERE Z.record_center_id = A.record_center_id 		               AND Z.folder_take_seq = A.folder_take_seq) record_cnt01		        , (SELECT COUNT(1)                    FROM  tb_tkrecord Z                   WHERE Z.record_center_id = A.record_center_id                   AND   Z.folder_take_seq = A.folder_take_seq                   AND   Z.error_flag = 'Y') record_cnt03		         , (SELECT COUNT(1) 		            FROM tb_tkattachfile Z		            WHERE 		            		            EXISTS  (SELECT 1	                     FROM   tb_tkrecord K 		                 WHERE  K.record_center_id = A.record_center_id 						 AND    K.folder_take_seq = A.folder_take_seq						 AND    K.record_center_id = Z.record_center_id						 AND    K.record_take_seq = Z.record_take_seq)) attach_cnt01		         ,  (select count(1) 		              from tb_tkattachfile z 		             where		                		                exists (select 1		                      from tb_tkrecord k 		                     where k.record_center_id = a.record_center_id 		                       and k.folder_take_seq = a.folder_take_seq				                   and k.record_center_id = z.record_center_id				                   and k.rocord_take_seq = z.record_take_seq				       )		               	       and virus_flag = '1'					) attach_cnt03		         , A.take_fin_state_cd			     , org_cd, folder_reg_seq, ho_no, creat_sys_cd		    FROM  TB_TKFOLDER A		    WHERE A.record_center_id 	= '1'		    AND   A.take_yyyy 			= '1'		    AND   A.take_org_cd 		= '1'		    AND   A.creat_sys_cd 		= '1'		    AND   A.take_sno 			= '1'		    		)		ORDER BY folder_take_seq		 ) B        WHERE ROWNUM <= '1'    ) C    WHERE C.rnum >= '1'  	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findExcelUndTakeCheckPagedList

	SELECT C.*	    FROM (	        SELECT ROWNUM AS rnum	            , B.take_org_abbr_nm	            , B.creat_sys_cd_nm	            , B.take_state_div_cd_nm	            , B.folder_cnt01 || '(' || B.record_cnt01 || ')' AS folder_cnt01	            , B.folder_cnt02 || '(' || B.record_cnt02 || ')' AS folder_cnt02	            , B.folder_cnt03 || '(' || B.record_cnt03 || ')' AS folder_cnt03	            , B.folder_cnt04 || '(' || B.record_cnt04 || ')' AS folder_cnt04	            , B.folder_cnt05 || '(' || B.record_cnt05 || ')' AS folder_cnt05	        FROM (		SELECT Z.record_center_id		      ,Z.take_yyyy		      ,Z.take_org_cd		      ,Z.creat_sys_cd		      ,Z.take_sno		      ,Z.take_state_div_cd		      ,(SELECT org_nm FROM TB_STORG WHERE record_center_id=Z.record_center_id AND org_cd=Z.take_org_cd) take_org_nm		      ,(SELECT org_abbr_nm FROM TB_STORG WHERE record_center_id=Z.record_center_id AND org_cd=Z.take_org_cd) take_org_abbr_nm		      ,(SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='RD17' AND com_cd=Z.creat_sys_cd) creat_sys_cd_nm		      ,(SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='TK08' AND com_cd=Z.take_state_div_cd) take_state_div_cd_nm		      ,Z.recv_folder_cnt		      ,Z.recv_record_cnt		      ,Z.virus_check_flag		      ,TO_NUMBER(SUBSTR(Z.folder_info, 1, 10)) folder_cnt01		      ,TO_NUMBER(SUBSTR(Z.folder_info, 12, 10)) folder_cnt02		      ,TO_NUMBER(SUBSTR(Z.folder_info, 23, 10)) folder_cnt03		      ,TO_NUMBER(SUBSTR(Z.folder_info, 34, 10)) folder_cnt04		      ,TO_NUMBER(SUBSTR(Z.folder_info, 45, 10)) folder_cnt05		      ,TO_NUMBER(SUBSTR(Z.folder_info, 56, 10)) folder_cnt06		      ,TO_NUMBER(SUBSTR(Z.folder_info, 67, 10)) folder_cnt07		      ,TO_NUMBER(SUBSTR(Z.record_info, 1, 10)) record_cnt01		      ,TO_NUMBER(SUBSTR(Z.record_info, 12, 10)) record_cnt02		      ,TO_NUMBER(SUBSTR(Z.record_info, 23, 10)) record_cnt03		      ,TO_NUMBER(SUBSTR(Z.record_info, 34, 10)) record_cnt04		      ,TO_NUMBER(SUBSTR(Z.record_info, 45, 10)) record_cnt05		      ,TO_NUMBER(SUBSTR(Z.record_info, 56, 10)) record_cnt06		      ,TO_NUMBER(SUBSTR(Z.record_info, 67, 10)) record_cnt07		      ,erecord_flag_cnt		FROM (		    SELECT   B.record_center_id		           , B.take_yyyy		           , B.take_org_cd		           , B.creat_sys_cd		           , B.parent_take_sno		           , B.take_sno		           , B.recv_folder_cnt		           , B.recv_record_cnt 		           , (SELECT Z.take_state_div_cd FROM tb_tkorgtakeplan Z WHERE Z.record_center_id = B.record_center_id AND Z.take_yyyy = B.take_yyyy AND Z.take_org_cd = B.take_org_cd AND Z.creat_sys_cd = B.creat_sys_cd AND Z.take_sno = B.take_sno) take_state_div_cd		           , (SELECT Z.virus_check_flag FROM tb_tkorgtakeplan Z WHERE Z.record_center_id = B.record_center_id AND Z.take_yyyy = B.take_yyyy AND Z.take_org_cd = B.take_org_cd AND Z.creat_sys_cd = B.creat_sys_cd AND Z.take_sno = B.take_sno) virus_check_flag		           ,  ( SELECT LPAD(COUNT(1),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.exam_rslt_cd, '1', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.exam_rslt_cd, '2', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.rjct_flag, '1', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_flag, '1', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_state_cd, '0', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_state_cd, '3', 1, 0)),0),10,'0')		                        FROM TB_TKFOLDER C		                        WHERE C.record_center_id    = B.record_center_id		                        AND   C.take_yyyy           = B.take_yyyy		                        AND   C.take_org_cd         = B.take_org_cd		                        AND   C.creat_sys_cd        = B.creat_sys_cd		                        AND   C.take_sno            IN (SELECT Z.take_sno 		                                                        FROM tb_tkorgtakeplan Z 		                                                        WHERE Z.record_center_id = B.record_center_id 		                                                        AND Z.take_yyyy = B.take_yyyy 		                                                        AND Z.take_org_cd = B.take_org_cd 		                                                        AND Z.creat_sys_cd = B.creat_sys_cd		                                                        AND Z.parent_take_sno = B.parent_take_sno)		                        AND   C.recv_re_flag  is null		                        ) AS folder_INfo		            , ( SELECT LPAD(COUNT(1),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.exam_rslt_cd, '1',1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.exam_rslt_cd, '2', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.rjct_flag, '1', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_flag, '1', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_state_cd, '0', 1, 0)),0),10,'0')		                            ||'/'||LPAD(NVL(SUM(DECODE(C.take_fIN_state_cd, '3', 1, 0)),0),10,'0')		                        FROM  TB_TKFOLDER C		                            , TB_TKRECORD D		                        WHERE C.record_center_id    = B.record_center_id		                        AND   C.take_yyyy           = B.take_yyyy		                        AND   C.take_org_cd         = B.take_org_cd		                        AND   C.creat_sys_cd        = B.creat_sys_cd		                        AND   C.take_sno            IN (SELECT Z.take_sno 		                                                        FROM tb_tkorgtakeplan Z 		                                                        WHERE Z.record_center_id = B.record_center_id 		                                                        AND Z.take_yyyy = B.take_yyyy 		                                                        AND Z.take_org_cd = B.take_org_cd 		                                                        AND Z.creat_sys_cd = B.creat_sys_cd		                                                        AND Z.parent_take_sno = B.parent_take_sno)		                        AND   C.recv_re_flag is null		                        AND   D.record_center_id    = C.record_center_id		                        AND   D.folder_take_seq     = C.folder_take_seq) AS record_INfo		            , ( SELECT count(1)                        FROM   tb_tkfolder X                        WHERE  X.record_center_id = B.record_center_id                       AND    X.take_yyyy = B.take_yyyy                       AND    X.take_org_cd = B.take_org_cd                       AND    X.creat_sys_cd = B.creat_sys_cd                        AND    X.take_sno     IN (SELECT Z.take_sno                                                                 FROM tb_tkorgtakeplan Z                                                                 WHERE Z.record_center_id = B.record_center_id                                                                 AND Z.take_yyyy = B.take_yyyy                                                                 AND Z.take_org_cd = B.take_org_cd                                                                 AND Z.creat_sys_cd = B.creat_sys_cd                                                                AND Z.parent_take_sno = B.parent_take_sno)                       AND X.erecord_flag in ('2','3')                       AND recv_re_flag is null) erecord_flag_cnt                     ,B.take_ymd                     ,B.reg_dtime		    FROM (SELECT  A.record_center_id		                , A.take_yyyy		                , A.take_org_cd 		                , A.creat_sys_cd		                , A.parent_take_sno parent_take_sno		                , MAX(A.take_sno) take_sno		                , SUM(A.recv_folder_cnt) recv_folder_cnt		                , SUM(A.recv_record_cnt) recv_record_cnt		                , MAX(A.take_ymd) take_ymd                     	, MAX(A.reg_dtime) reg_dtime		          FROM tb_tkorgtakeplan A		          WHERE A.record_center_id = '1'		          AND   A.take_yyyy = '1'		          AND   A.take_org_cd  IN (SELECT B.org_cd		                                   FROM TB_STORG B, TB_STLINKTRGT C		                                   WHERE B.record_center_id = '1'		                                   AND   B.lINk_trgt_id=C.lINk_trgt_id AND 		                                      B.org_cd = '1'		                                     AND 		                                      C.creat_sys_cd = '1'		                                    		                                  )		           AND 		                A.creat_sys_cd = '1'		           		          AND   A.recv_fin_state_cd = '3'		           AND 		                A.take_state_div_cd = '1'		                                               		          AND  (A.app_take_type_cd is null OR A.app_take_type_cd = '0')		          GROUP BY record_center_id, creat_sys_cd, take_yyyy, take_org_cd, parent_take_sno 		    ) B		)Z		ORDER BY Z.record_center_id, Z.take_ymd DESC, Z.reg_dtime DESC, Z.take_yyyy, Z.take_org_cd, Z.creat_sys_cd, Z.take_sno		) B	        WHERE ROWNUM <= '1'	    ) C	    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeDclssfyFolder

		UPDATE TB_RDFOLDER A		SET  A.expt_disuse_yyyy =  DECODE( GREATEST(TO_NUMBER(A.presv_term_cd),19), 19, (TO_NUMBER(DECODE(A.creat_sys_cd,'01',A.creat_yyyy,'04',A.creat_yyyy,NVL(SUBSTR(A.FOLDER_CLOSE_DTIME,0,4),A.CREAT_YYYY)))+1+TO_NUMBER(A.presv_term_cd)) ) 		   , A.expt_transf_yyyy = (CASE WHEN A.folder_type_div_cd = '3' OR A.folder_type_div_cd = '4'				                       	     THEN DECODE( LEAST(TO_NUMBER(A.presv_term_cd),20), 20, (TO_NUMBER(DECODE(A.creat_sys_cd,'01',A.creat_yyyy,'04',A.creat_yyyy,NVL(SUBSTR(A.FOLDER_CLOSE_DTIME,0,4),A.CREAT_YYYY)))+5) )				                             ELSE DECODE( LEAST(TO_NUMBER(A.presv_term_cd),20), 20, (TO_NUMBER(DECODE(A.creat_sys_cd,'01',A.creat_yyyy,'04',A.creat_yyyy,NVL(SUBSTR(A.FOLDER_CLOSE_DTIME,0,4),A.CREAT_YYYY)))+10) )				                             END				  	                   )		WHERE A.record_center_id = '1'      	AND A.folder_id = '1'			;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeDclssfyFolderRel

		INSERT INTO TB_RDFOLDERREL		(		    record_center_id, folder_id, rel_type_cd, rel_seq, rel_trgt_id		    , rel_descr, reg_dtime		)		(			SELECT B.record_center_id			     , B.folder_id			     , A.rel_type_cd			     , A.rel_seq			     , A.rel_trgt_id			     , A.rel_descr			     , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_RDFOLDERREL A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_id = B.folder_id			AND   B.record_center_id = '1'			AND   B.folder_id = '1'			AND   B.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeDclssfyFolderPjtClss

		INSERT INTO TB_RDFOLDERPJTCLSS		(		    record_center_id, folder_id, sno, pjt_clss_id		)		(			SELECT B.record_center_id, B.folder_id, A.sno, A.pjt_clss_id			FROM TB_RDFOLDERPJTCLSS A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_id = B.folder_id			AND   B.record_center_id = '1'			AND   B.folder_id = '1'			AND   B.mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeDclssfyFolderTaketakovr

		INSERT INTO TB_RDFOLDERTAKETAKOVR		(		    record_center_id, folder_id, sno, take_takovr_div_cd, take_takovr_creat_dtime			, take_takovr_org_cd, take_takovr_org_nm, reg_dtime, take_takovr_clss_id, take_takovr_creat_yyyy			, take_takovr_folder_id, take_takovr_folder_title, take_takovr_folder_reg_seq, take_takovr_ho_no		)		(			SELECT B.record_center_id, B.folder_id, A.sno, A.take_takovr_div_cd, A.take_takovr_creat_dtime                                 , A.take_takovr_org_cd, A.take_takovr_org_nm, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), A.take_takovr_clss_id, A.take_takovr_creat_yyyy				 , A.take_takovr_folder_id, A.take_takovr_folder_title, A.take_takovr_folder_reg_seq, A.take_takovr_ho_no			FROM TB_RDFOLDERTAKETAKOVR A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_id = B.folder_id			AND   B.record_center_id = '1'			AND   B.folder_id = '1'			AND   B.mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeDclssfyFolderChngHist

		INSERT INTO TB_RDFOLDERCHNGHIST		(		    record_center_id, folder_id, chng_hist_no, org_cd, clss_id			, creat_yyyy, folder_reg_seq, ho_no, title_bef, title_aft			, folder_type_div_cd_bef, folder_type_div_cd_aft, chng_ymd, chng_rsn, chng_user_nm			, reg_dtime		)		(			SELECT B.record_center_id, B.folder_id, A.chng_hist_no, A.org_cd, A.clss_id				 , A.creat_yyyy, A.folder_reg_seq, A.ho_no, A.title_bef, A.title_aft				 , A.folder_type_div_cd_bef, A.folder_type_div_cd_aft, A.chng_ymd, A.chng_rsn, A.chng_user_nm				 				 , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_RDFOLDERCHNGHIST A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_id = B.folder_id			AND   B.record_center_id = '1'			AND   B.folder_id = '1'			AND   B.mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeDclssfyFolderSpclList

		SELECT record_center_id		     , folder_take_seq		     , seq		     , spcl_list1		     , spcl_list2		     , spcl_list3		FROM  TB_RDSPCLLIST		WHERE record_center_id = '1'		AND   folder_take_seq = '1'		AND   spcl_list_loc = '1'		ORDER BY record_center_id, folder_take_seq, seq	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeDclssfyFolderSpclList

		INSERT INTO TB_RDFOLDERKEYWD		(		    record_center_id, folder_id, keywd_levl, keywd, reg_dtime		)		(			SELECT record_center_id			     , folder_id			     , '1'			     , '1'			                                  , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM  TB_RDFOLDER			WHERE record_center_id = '1'			AND   folder_take_seq = '1'			AND   mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeDclssfyFolderId

		SELECT folder_id		FROM  TB_RDFOLDER		WHERE record_center_id = '1'		AND   folder_id = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeDclssfyErecordFlag

		SELECT 'O' 		FROM  tb_rdfolder 		WHERE record_center_id = '1'		AND   folder_id = '1'		AND   erecord_flag IN ('2','3')	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeDclssfyRecord

	   UPDATE TB_RDRECORD   AAA 	              SET  reg_dtime = TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')	   WHERE	  EXISTS (SELECT 1	     FROM TB_RDRECORD A	        , TB_RDFOLDER B	     WHERE A.record_center_id = B.record_center_id	     AND   A.folder_id = B.folder_id	     AND   A.orign_id is null 	     AND   B.record_center_id = '1'	     AND   B.folder_id = '1'	     AND AAA.record_center_id = A.record_center_id	     AND AAA.record_id = A.record_id	   )			;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeDclssfyRecordRel

		INSERT INTO TB_RDRECORDREL		(			record_center_id, record_id, rel_type_cd, rel_seq, rel_trgt_id			, rel_descr, reg_dtime		)		(			SELECT B.record_center_id, B.record_id, A.rel_type_cd, A.rel_seq, A.rel_trgt_id				                                  , A.rel_descr, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_RDRECORDREL A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_id = B.record_id			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   B.orign_id is null 			AND   C.record_center_id = '1'			AND   C.folder_id = '1'			AND   C.mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeDclssfyRecordInfoSrc

		INSERT INTO TB_RDRECORDINFOSRC		(			record_center_id, record_id, info_src_type_cd, info_src_sno, info_src_title			, info_src_id, reg_dtime		)		(			SELECT B.record_center_id, B.record_id, A.info_src_type_cd, A.info_src_sno, A.info_src_title				                                  , A.info_src_id, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_RDRECORDINFOSRC A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_id = B.record_id			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   B.orign_id is null			AND   C.record_center_id = '1'			AND   C.folder_id = '1'			AND   C.mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeDclssfyRecordChngHist

		INSERT INTO TB_RDRECORDCHNGHIST		(			record_center_id, record_id, chng_hist_no, org_cd, creat_yyyy			, creat_reg_no, dtch_reg_no, creat_reg_ymd_bef, creat_reg_ymd_aft, title_bef			, title_aft, page_cnt_bef, page_cnt_aft, aprov_pos_rank_bef, aprov_pos_rank_aft			, duty_chrgr_bef, duty_chrgr_aft, enforc_ymd_bef, enforc_ymd_aft, recver_bef			, recver_aft, chng_ymd, chng_rsn, chng_user_nm, reg_dtime		)		(			SELECT B.record_center_id, B.record_id, A.chng_hist_no, A.org_cd, A.creat_yyyy				 , A.creat_reg_no, A.dtch_reg_no, A.creat_reg_ymd_bef, A.creat_reg_ymd_aft, A.title_bef				 , A.title_aft, A.page_cnt_bef, A.page_cnt_aft, A.aprov_pos_rank_bef, A.aprov_pos_rank_aft				 , A.duty_chrgr_bef, A.duty_chrgr_aft, A.enforc_ymd_bef, A.enforc_ymd_aft, A.recver_bef				                                  , A.recver_aft, A.chng_ymd, A.chng_rsn, A.chng_user_nm, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_RDRECORDCHNGHIST A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_id = B.record_id			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   B.orign_id is null			AND   C.record_center_id = '1'			AND   C.folder_id = '1'			AND   C.mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeDclssfyRecordOpenHist

		INSERT INTO TB_RDRECORDOPENHIST		(			RECORD_CENTER_ID, RECORD_ID, CHNG_HIST_NO, OPEN_DIV_CD, OPEN_LIMIT_PART			, PART_OPEN_RSN, OPEN_LIMIT_DATE, CHNG_DTIME, CHNG_RSN, CHNG_USER_NM		)		(			SELECT B.RECORD_CENTER_ID, B.RECORD_ID, A.CHNG_HIST_NO, A.OPEN_DIV_CD, A.OPEN_LIMIT_PART				 , A.PART_OPEN_RSN, A.OPEN_LIMIT_DATE, A.CHNG_DTIME, A.CHNG_RSN, A.CHNG_USER_NM			FROM TB_RDRECORDOPENHIST A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_id = B.record_id			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   B.orign_id is null			AND   C.record_center_id = '1'			AND   C.folder_id = '1'			AND   C.mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeDclssfyRecordList

		SELECT B.record_center_id			 , B.record_id		     , B.erecord_flag		     , B.record_take_seq		FROM TB_RDFOLDER A		   , TB_RDRECORD B		WHERE A.record_center_id = '1'		AND   A.folder_id = '1'		AND   A.record_center_id = B.record_center_id		AND   A.folder_id = B.folder_id		AND   B.orign_id is null	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeDclssfyRecordSpclList

	    SELECT A.record_center_id			 , A.record_take_seq			 , A.seq			 , A.spcl_list1			 , A.spcl_list2			 , A.spcl_list3		FROM  TB_RDSPCLLIST A	        , TB_RDRECORD B		WHERE A.record_center_id = B.Record_Center_Id	    AND   A.record_take_seq = B.record_take_seq 	    AND   A.record_center_id = '1'		AND   A.record_take_seq = '1'		AND   A.spcl_list_loc = '2'	    	    AND   B.reg_dtime is null		ORDER BY A.record_center_id, A.record_take_seq, A.seq		;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckFolderTakeDclssfyRecordSpclList

		INSERT INTO TB_RDRECORDKEYWD		(		    record_center_id, record_id, keywd_levl, keywd, reg_dtime		)		(			SELECT record_center_id			     , record_id			     , '1'			     , '1'			                                  , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_RDRECORD			WHERE record_center_id = '1'			AND   record_take_seq = '1'			AND   mig_flag = '0'			AND   orign_id is null		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckFolderTakeDclssfyAttachList

		SELECT B.doc_type_cd			 , B.attach_file_path			 , B.file_nm			 , B.agent_nm			 , B.ver			 , NVL(B.attach_file_page_cnt,0) attach_file_page_cnt			 , NVL(B.file_size,0) file_size			 , B.attach_file_mng_info			 , B.virus_flag		FROM TB_RDRECORD A		   , TB_RDATTACHFILE B		WHERE A.record_center_id = '1'		AND   A.record_id = '1'		AND   A.record_center_id = B.record_center_id		AND   A.record_take_seq = B.record_take_seq		AND   A.orign_id is null;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeDclssfyRecordOrign

		UPDATE TB_RDRECORD		SET   orign_id = '1'		WHERE record_center_id = '1'		AND   record_id = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeDclssfyRecordFin

		UPDATE TB_RDRECORD		                SET   reg_dtime = TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		WHERE record_center_id = '1'		AND   record_id = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : update
-- Query Id : updateUndTakeCheckFolderTakeDclssfyFolderFin

		UPDATE TB_RDFOLDER		SET   folder_keep_state_cd = '01'		WHERE record_center_id = '1'		AND   folder_id = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : select
-- Query Id : findUndTakeCheckDclssfyFolderCreatSysCd

		SELECT creat_sys_cd		FROM  TB_RDFOLDER		WHERE record_center_id = '1'		AND   folder_id = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckDclssfyFolderTakeCreatReport

		INSERT INTO TB_CRREPORT		(		    record_center_id, cr_report_yyyy, cr_report_org_cd, creat_sys_cd, cr_report_sno		    , state_div_cd, reg_dtime		)		(		   SELECT A.record_center_id			    , A.take_yyyy			    , A.take_org_cd			    , A.creat_sys_cd			    , NVL(MAX((SELECT C.cr_report_sno 			               FROM TB_CRREPORT C 			               WHERE C.record_center_id = A.record_center_id 			               AND C.cr_report_yyyy = A.take_yyyy 			               AND C.cr_report_org_cd = A.take_org_cd 			               AND C.creat_sys_cd = A.creat_sys_cd 			               )), 0) + 1 as cr_report_sno			    , DECODE(A.creat_sys_cd,'03','08','06') as creat_sys_cd                            , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS') as reg_dtime			FROM  TB_RDFOLDER A 			WHERE A.record_center_id = '1'			AND   A.folder_id = '1'			AND NOT EXISTS (			    SELECT folder_take_seq			    FROM TB_CRREPORT B 			    WHERE B.record_center_id = A.record_center_id			    AND   B.cr_report_yyyy = A.take_yyyy			    AND   B.cr_report_org_cd = A.take_org_cd			    AND   B.creat_sys_cd = A.creat_sys_cd			    AND   B.cr_report_infrm_flag = '0'			)			GROUP BY A.record_center_id, A.take_yyyy, a.take_org_cd, a.creat_sys_cd, a.take_yyyy_sno, a.creat_sys_cd		)	;



-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckDclssfyFolderTakeCreatFolder

		INSERT INTO TB_CRFOLDER		(		    record_center_id, folder_recv_seq, org_cd, cr_report_yyyy, cr_report_org_cd		    , creat_sys_cd, cr_report_sno, clss_div_cd, clss_id, creat_yyyy		    , folder_reg_seq, ho_no, clss_nm, title, sub_title		    , folder_type_div_cd, etc_folder_type, folder_detl_type_cd, creat_purps, media_format		    , medium, folder_size, record_tot_page_cnt, record_reg_cnt, efile_cnt		    , new_div_cd, chng_flag, old_folder_creat_org_nm, old_folder_clss_no, folder_bispjt_div_cd		    , bis_clss_path_nm, pjt_clss_path_nm, folder_start_dtime, folder_close_dtime, funsh_end_dtime		    , funsh_rsn, presv_term_cd, presv_term_fix_rsn, presv_method_cd, presv_area_cd		    , presv_loc, presv_duty_chrgr_nm, secu_clss_cd, secu_clss_rsn, read_range		    , take_takovr_div_cd, take_takovr_org_cd, take_takovr_clss_id, take_takovr_creat_yyyy, take_takovr_folder_reg_seq		    , take_takovr_ho_no, take_takovr_ymd, creat_user_id, creat_user_nm, creat_user_org_cd		    , creat_user_org_nm, creat_user_pos_rank_nm, creat_dtime, erecord_flag, creat_sys_folder_id		    , error_flag, exam_rslt_cd, exam_cont, rjct_flag, rjct_cont		    , take_fin_flag, cr_report_infrm_flag, reg_dtime, group_presv_term_cd, folder_take_seq		    , sumry, trans_dtime		)		(		    SELECT record_center_id		        , TO_CHAR(SYSDATE,'YYYY')||LPAD((TB_CRFOLDER_SQ01.nextval), 15, '0')		        , org_cd, take_yyyy, take_org_cd		        , creat_sys_cd, '1', clss_div_cd, clss_id, creat_yyyy		        , folder_reg_seq, ho_no, clss_nm, title, sub_title		        , folder_type_div_cd, etc_folder_type, folder_detl_type_cd, creat_purps, media_format		        , medium, folder_size, record_tot_page_cnt, record_reg_cnt, efile_cnt		        , new_div_cd, chng_flag, old_folder_creat_org_nm, old_folder_clss_no, folder_bispjt_div_cd		        , bis_clss_path_nm, pjt_clss_path_nm, folder_start_dtime, folder_close_dtime, funsh_end_dtime		        , funsh_rsn, presv_term_cd, presv_term_fix_rsn, presv_method_cd, presv_area_cd		        , presv_loc, presv_duty_chrgr_nm, secu_clss_cd, secu_clss_rsn, read_range		        , take_takovr_div_cd, take_takovr_org_cd, take_takovr_clss_id, take_takovr_creat_yyyy, take_takovr_folder_reg_seq		        , take_takovr_ho_no, take_takovr_ymd, creat_user_id, creat_user_nm, creat_user_org_cd		        , creat_user_org_nm, creat_user_pos_rank_nm, creat_dtime, erecord_flag, creat_sys_folder_id		        , 'N', '0', '', '0', ''                        , '1', '0', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), presv_term_cd, folder_take_seq		        , sumry, trans_dtime		    FROM  TB_RDFOLDER		    WHERE record_center_id = '1'		    AND   folder_id = '1'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckDclssfyFolderTakeCreatFolderTakeTakovr

		INSERT INTO TB_CRFOLDERTAKETAKOVR		(		    record_center_id, folder_recv_seq, sno, take_takovr_div_cd, take_takovr_creat_dtime		    , take_takovr_org_cd, take_takovr_org_nm, reg_dtime, take_takovr_clss_id, take_takovr_creat_yyyy		    , take_takovr_folder_reg_seq, take_takovr_ho_no		)		(		    SELECT C.record_center_id		        , C.folder_recv_seq		        , A.sno		        , A.take_takovr_div_cd		        , A.take_takovr_creat_dtime		        , A.take_takovr_org_cd		        , A.take_takovr_org_nm                        , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		        , A.take_takovr_clss_id		        , A.take_takovr_creat_yyyy		        , A.take_takovr_folder_reg_seq		        , A.take_takovr_ho_no		    FROM  TB_RDFOLDERTAKETAKOVR A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckDclssfyFolderTakeCreatFolderChngHist

		INSERT INTO TB_CRFOLDERCHNGHIST		(		    record_center_id, folder_recv_seq, chng_hist_no, org_cd, clss_id		    , creat_yyyy, folder_reg_seq, ho_no, title_bef, title_aft		    , folder_type_div_cd_bef, folder_type_div_cd_aft, chng_ymd, chng_rsn, chng_user_nm		    , reg_dtime		)		(		    SELECT C.record_center_id		        , C.folder_recv_seq		        , A.chng_hist_no		        , A.org_cd		        , A.clss_id		        , A.creat_yyyy		        , A.folder_reg_seq		        , A.ho_no		        , A.title_bef		        , A.title_aft		        , A.folder_type_div_cd_bef		        , A.folder_type_div_cd_aft		        , A.chng_ymd		        , A.chng_rsn		        , A.chng_user_nm		                                , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM  TB_RDFOLDERCHNGHIST A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckDclssfyFolderTakeCreatFolderSpclList

		INSERT INTO TB_CRSPCLLIST		(		    record_center_id, spcl_list_reg_no, folder_recv_seq, record_recv_seq, spcl_list_loc		    , folder_clss_no, record_reg_no, seq, spcl_list1, spcl_list2		    , spcl_list3, reg_dtime		)		(		    SELECT C.record_center_id		        , LPAD((TB_CRSPCLLIST_SQ01.nextval), 15, '0') 		        , C.folder_recv_seq		        , '', '1'		        , (C.org_cd||C.clss_id||C.creat_yyyy||C.folder_reg_seq||C.ho_no) folder_clss_no		        , ''		        , ( SELECT LPAD((NVL(MAX(Z.seq),0)+1), 3, '0')		            FROM  TB_CRSPCLLIST Z		        	WHERE Z.folder_recv_seq = C.folder_recv_seq ) seq                        , A.keywd, '', '', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM TB_RDFOLDERKEYWD A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckDclssfyFolderTakeCreatRecord

		INSERT INTO TB_CRRECORD		(		    record_center_id, record_recv_seq, folder_recv_seq, creat_sys_cd, org_cd		    , creat_yyyy, creat_reg_dtime, creat_reg_no, dtch_reg_no, title		    , sub_title, record_reg_div_cd, record_detl_type_cd, audvis_record_type, audvis_record_sumry		    , media_format, medium, record_size, attach_cnt, record_page_cnt		    , aprov_pos_rank_nm, duty_chrgr_nm, enforc_ymd, creat_org_reg_no, erecord_flag		    , old_record_creat_org_nm, old_record_docno, old_record_presv_term, presv_loc, secu_clss_cd		    , secu_clss_rsn, read_range, open_div_cd, open_grade, part_open_rsn		    , open_limit_part, open_expt_dtime, recver, sender, chng_ver_no		    , doc_distr_no, folder_clss_no, spcl_record_type, orign_copy_flag, new_div_cd		    , chng_flag, rjct_flag, doc_no, creat_sys_record_id, error_flag		    , exam_rslt_cd, take_fin_flag, cr_report_flag, reg_dtime, take_error_cont		    , exam_cont, doc_no_org_nm, open_limit_date		) 		(		    SELECT C.record_center_id		        , TO_CHAR(SYSDATE,'YYYY')||LPAD((TB_CRRECORD_SQ01.nextval), 15, '0')		        , C.folder_recv_seq		        , A.creat_sys_cd, A.org_cd		        , A.creat_yyyy, A.creat_reg_dtime, A.creat_reg_no, A.dtch_reg_no, A.title		        , A.sub_title, A.record_reg_div_cd, A.record_detl_type_cd, A.audvis_record_type, A.audvis_record_sumry		        , A.media_format, A.medium, A.record_size, A.attach_cnt, A.record_page_cnt		        , A.aprov_pos_rank_nm, A.duty_chrgr_nm, A.enforc_ymd, A.creat_org_reg_no, A.erecord_flag		        , A.old_record_creat_org_nm, A.old_record_docno, A.old_record_presv_term, A.presv_loc, A.secu_clss_cd		        , A.secu_clss_rsn, A.read_range, A.open_div_cd, A.open_grade, A.part_open_rsn		        , A.open_limit_part, A.open_expt_dtime, A.recver, A.sender, A.chng_ver_no		        , A.doc_distr_no, A.folder_clss_no, A.spcl_record_type, A.orign_copy_flag, A.new_div_cd		        , A.chng_flag, '0', A.doc_no, A.creat_sys_record_id, 'N'		                                , '0', '0', '', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), ''		        , '', a.doc_no_org_nm, a.open_limit_date		    FROM  TB_RDRECORD A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckDclssfyFolderTakeCreatRecordChngHist

		INSERT INTO TB_CRRECORDCHNGHIST		(		    record_center_id, record_recv_seq, chng_hist_no, org_cd, creat_yyyy		    , creat_reg_no, dtch_reg_no, creat_reg_ymd_bef, creat_reg_ymd_aft, title_bef		    , title_aft, page_cnt_bef, page_cnt_aft, aprov_pos_rank_bef, aprov_pos_rank_aft		    , duty_chrgr_bef, duty_chrgr_aft, enforc_ymd_bef, enforc_ymd_aft, recver_bef		    , recver_aft, chng_ymd, chng_rsn, chng_user_nm, reg_dtime		)		(		    SELECT C.record_center_id, C.record_recv_seq, A.chng_hist_no, A.org_cd, A.creat_yyyy		        , A.creat_reg_no, A.dtch_reg_no, A.creat_reg_ymd_bef, A.creat_reg_ymd_aft, A.title_bef		        , A.title_aft, A.page_cnt_bef, A.page_cnt_aft, A.aprov_pos_rank_bef, A.aprov_pos_rank_aft		        , A.duty_chrgr_bef, A.duty_chrgr_aft, A.enforc_ymd_bef, A.enforc_ymd_aft, A.recver_bef		                                , A.recver_aft, A.chng_ymd, A.chng_rsn, A.chng_user_nm, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM  TB_RDRECORDCHNGHIST A		        , TB_RDRECORD B		        , TB_CRRECORD C		        , TB_CRFOLDER D		    WHERE D.record_center_id = '1'		    AND   D.folder_take_seq = '1'		    AND   D.record_center_id = C.record_center_id		    AND   D.folder_recv_seq = C.folder_recv_seq		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.creat_reg_no = B.creat_reg_no		    AND   C.dtch_reg_no = B.dtch_reg_no		    AND   B.record_center_id = A.record_center_id		    AND   B.record_id = A.record_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckDclssfyFolderTakeCreatRecordSpclList

		INSERT INTO TB_CRSPCLLIST		(		    record_center_id, spcl_list_reg_no, folder_recv_seq, record_recv_seq, spcl_list_loc		    , folder_clss_no, record_reg_no, seq, spcl_list1, spcl_list2		    , spcl_list3, reg_dtime		)		(		    SELECT C.record_center_id		        , LPAD((TB_CRSPCLLIST_SQ01.nextval), 15, '0') 		        , ''		        , C.record_recv_seq, '2', ''		        , (C.creat_yyyy||C.creat_reg_no||C.dtch_reg_no) record_reg_no		        , ( SELECT LPAD((NVL(MAX(Z.seq),0)+1), 3, '0')		            FROM  TB_CRSPCLLIST Z		        	WHERE Z.record_recv_seq = C.record_recv_seq ) seq		                                , A.keywd, '', '', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM TB_RDRECORDKEYWD A		        , TB_RDRECORD B		        , TB_CRRECORD C		        , TB_CRFOLDER D		    WHERE D.record_center_id = '1'		    AND   D.folder_take_seq = '1'		    AND   D.record_center_id = C.record_center_id		    AND   D.folder_recv_seq = C.folder_recv_seq		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.creat_reg_no = B.creat_reg_no		    AND   C.dtch_reg_no = B.dtch_reg_no		    AND   B.record_center_id = A.record_center_id		    AND   B.record_id = A.record_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
-- Query    : insert
-- Query Id : createUndTakeCheckDclssfyFolderTakeCreatAttachFile

		INSERT INTO TB_CRATTACHFILE		(		    record_center_id, record_recv_seq, reg_seq, org_cd, creat_yyyy		    , creat_reg_no, attach_file_seq, attach_file_page_cnt, reg_dtime, doc_type_cd		    , file_size		)		(		    SELECT DISTINCT C.record_center_id, C.record_recv_seq, A.reg_seq, A.org_cd, A.creat_yyyy		        , B.creat_reg_no, NVL(A.attach_file_seq,'00'), A.attach_file_page_cnt		                                , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		        , A.doc_type_cd, A.file_size		    FROM  TB_TKATTACHFILE A		        , TB_RDRECORD B		        , TB_CRRECORD C		        , TB_CRFOLDER D		    WHERE D.record_center_id = '1'		    AND   D.folder_take_seq = '1'		    AND   D.record_center_id = C.record_center_id		    AND   D.folder_recv_seq = C.folder_recv_seq		    AND   C.record_center_id = B.record_center_id		    AND   C.creat_sys_cd = B.creat_sys_cd		    AND   C.org_cd = B.org_cd		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.creat_reg_no = B.creat_reg_no		    AND   C.dtch_reg_no = B.dtch_reg_no		    AND   B.record_center_id = A.record_center_id		    AND   B.record_take_seq = A.record_take_seq		);


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\undTake\UndTake.xml
