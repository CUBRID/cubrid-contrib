<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="common.detail">
	
	<!--
		기록물철 상세정보 : 공통 정보 조회 (인수후-보유기록물)
	-->
	<resultMap id="findRcFolderHead-result" class="rms.common.detail.domain.Folder">
		<result property="recordCenterId"			column="record_center_id" />
		<result property="folderId"					column="folder_id" />
		<result property="orgCd"					column="org_cd" />
		<result property="creatSysCd"				column="creat_sys_cd" />
		<result property="orgTitle"					column="org_title" />
		<result property="title"					column="title" />
		<result property="clssId"					column="clss_id" />
	</resultMap>
	<select id="findRcFolderHead" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderHead-result">
		SELECT A.record_center_id
			, A.folder_id
			, A.org_cd
			, A.creat_sys_cd
			, A.title AS org_title
			, A.title
			, A.clss_id
	    FROM  TB_RCFOLDER A
	    WHERE A.record_center_id = #recordCenterId:VARCHAR#
	    AND   A.folder_id = #folderId:VARCHAR#
	</select>
	
	<!--
		기록물철 상세정보 : 기록물철 정보
	-->
	<resultMap id="findRcFolderInfo-result" class="rms.common.detail.domain.Folder">
		<result property="recordCenterId"			column="record_center_id" />
		<result property="folderId"					column="folder_id" />
		<result property="creatSysCd"				column="creat_sys_cd" />
		<result property="creatSysNm"				column="creat_sys_nm" />
		<result property="folderDetlTypeCd"			column="folder_detl_type_cd" />
		<result property="folderDetlTypeNm"			column="folder_detl_type_nm" />
		<result property="orgTitle"					column="org_title" />
		<result property="title"					column="title" />
		<result property="creatPurps"				column="creat_purps" />
		<result property="sumry"					column="sumry"	jdbcType="CLOB"	javaType="java.lang.String" />
		<result property="folderBispjtDivCd"		column="folder_bispjt_div_cd" />
		<result property="folderBispjtDivNm"		column="folder_bispjt_div_nm" />
		<result property="orgCd"					column="org_cd" />
		<result property="orgNm"					column="org_nm" />
		<result property="orgAbbrNm"				column="org_abbr_nm" />
		<result property="readRange"				column="read_range" />
		<result property="readRangeNm"				column="read_range_nm" />
		<result property="operReadRangeCd"			column="oper_read_range_cd" />
		<result property="operReadRangeNm"			column="oper_read_range_nm" />
		<result property="presvTermCd"				column="presv_term_cd" />
		<result property="presvTermNm"				column="presv_term_nm" />
		<result property="clssDivCd"				column="clss_div_cd" />
		<result property="clssId"					column="clss_id" />
		<result property="clssNm"					column="clss_nm" />
		<result property="folderTypeDivCd"			column="folder_type_div_cd" />
		<result property="folderTypeDivNm"			column="folder_type_div_nm" />
		<result property="subTitle"					column="sub_title" />
		<result property="corctTitle"				column="corct_title" />
		<result property="creatYyyy"				column="creat_yyyy" />
		<result property="closeYyyy"				column="close_yyyy" />
		<result property="folderRegSeq"				column="folder_reg_seq" />
		<result property="hoNo"						column="ho_no" />
		<result property="oldFolderCreatOrgNm"		column="old_folder_creat_org_nm" />
		<result property="oldFolderClssNo"			column="old_folder_clss_no" />
		<result property="groupPresvTermCd"			column="group_presv_term_cd" />
		<result property="groupPresvTermNm"			column="group_presv_term_nm" />
		<result property="presvTermFixRsn"			column="presv_term_fix_rsn" />
		<result property="presvMethodNm"			column="presv_method_nm" />
		<result property="presvTypeNm"				column="presv_type_nm" />
		<result property="presvTypeCd"				column="presv_type_cd" />
		<result property="presvAreaCd"				column="presv_area_cd" />
		<result property="presvAreaNm"				column="presv_area_nm" />
		<result property="presvLoc"					column="presv_loc" />
		<result property="presvLocNm"				column="presv_loc_nm" />
		<result property="presvBoxId"				column="presv_box_id" />
		<result property="funshEndDtime"			column="funsh_end_dtime" />
		<result property="funshRsn"					column="funsh_rsn" />
		<result property="takeOrgCd"				column="take_org_cd" />
		<result property="takeYyyy"					column="take_yyyy" />
		<result property="takeSno"					column="take_sno" />
		<result property="folderSize"				column="folder_size" />
		<result property="recordTotPageCnt"			column="record_tot_page_cnt" />
		<result property="recordRegCnt"				column="record_reg_cnt" />
		<result property="electRecordRegCnt"		column="elect_record_reg_cnt" />
		<result property="nonelectRecordRegCnt"		column="nonelect_record_reg_cnt" />
		<result property="efileCnt"					column="efile_cnt" />
		<result property="adjstDescr"				column="adjst_descr" />
		<result property="damgCont"					column="damg_cont" />
		<result property="damgHandlRslt"			column="damg_handl_rslt" />
		<result property="creatUserNm"				column="creat_user_nm" />
		<result property="creatUserOrgNm"			column="creat_user_org_nm" />
		<result property="creatUserPosRankNm"		column="creat_user_pos_rank_nm" />
		<result property="creatDtime"				column="creat_dtime" />
		<result property="scanProgStateCd"			column="scan_prog_state_cd" />
		<result property="scanProgStateNm"			column="scan_prog_state_nm" />
		<result property="optiDiskStoreStateCd"		column="opti_disk_store_state_cd" />
		<result property="optiDiskStoreStateNm"		column="opti_disk_store_state_nm" />
		<result property="mfPicStateCd"				column="mf_pic_state_cd" />
		<result property="mfPicStateNm"				column="mf_pic_state_nm" />
		<result property="neoTransState"			column="neo_trans_state" />
		<result property="neoTransStateNm"			column="neo_trans_state_nm" />
		<result property="neoTransDtime"			column="neo_trans_dtime" />
		<result property="neoFileSize"				column="neo_file_size" />
		<result property="stakrmMngNo"				column="stakrm_mng_no" />
		<result property="erecordFlag"				column="erecord_flag" />
		<result property="erecordFlagNm"			column="erecord_flag_nm" />
		<result property="periodToDt"			    column="period_to_dt" />
		<result property="periodFromDt"			    column="period_from_dt" />
		<result property="periodToDtYear"			column="period_to_dt_year" />
		<result property="periodFromDtYear"			column="period_from_dt_year" />
		<result property="folderKeepStateCd"		column="folder_keep_state_cd" />
		<result property="folderKeepStateNm"		column="folder_keep_state_nm" />
		<result property="disuseYmd"				column="disuse_ymd" />
		<result property="transfYmd"				column="transf_ymd" />
		<result property="accsFlag"					column="accs_flag" />
		<result property="takeFinDivCd"				column="take_fin_div_cd" />
		<result property="takeFinDivNm"				column="take_fin_div_nm" />
		<result property="nonElectRecordTakeCnt"	column="non_elect_record_take_cnt" />
		<result property="hoNoCnt"      			column="ho_no_cnt" />
	</resultMap>
	<select id="findRcFolderInfo" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderInfo-result">
		SELECT A.record_center_id
			, A.folder_id
			, A.creat_sys_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD17' AND Z.com_cd=A.creat_sys_cd) creat_sys_nm
			, A.folder_detl_type_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD41' AND Z.com_cd=A.folder_detl_type_cd) folder_detl_type_nm
			, A.folder_bispjt_div_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD20' AND Z.com_cd=A.folder_bispjt_div_cd) folder_bispjt_div_nm
			, A.org_cd
			, (SELECT Z.org_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=A.org_cd) org_nm
			, (SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=A.org_cd) org_abbr_nm
			, A.read_range
			, (CASE WHEN LENGTH(A.read_range)=7 THEN (SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=A.read_range)
					ELSE (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD43' AND Z.com_cd=A.read_range)
				END) read_range_nm
			, A.oper_read_range_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD53' AND Z.com_cd=A.oper_read_range_cd) oper_read_range_nm
			, A.presv_term_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd=DECODE(A.presv_term_cd, '20', '25', A.presv_term_cd)) presv_term_nm
			, A.clss_div_cd
			, A.clss_id
			, A.clss_nm
			, A.folder_type_div_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD01' AND Z.com_cd=A.folder_type_div_cd) folder_type_div_nm
			, A.sub_title
			, A.corct_title
			, A.creat_yyyy
			, SUBSTR(RPAD(A.folder_close_dtime,14,'0'),1,4) close_yyyy
			, A.folder_reg_seq
			, A.ho_no
			, A.old_folder_creat_org_nm
			, A.old_folder_clss_no
			, A.group_presv_term_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd=DECODE(A.group_presv_term_cd, '20', '25', A.group_presv_term_cd)) group_presv_term_nm
			, A.presv_term_fix_rsn
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD09' AND Z.com_cd=A.presv_method_cd) presv_method_nm
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD85' AND Z.com_cd=A.presv_type_cd) presv_type_nm
			, A.presv_type_cd
			, A.presv_area_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD10' AND Z.com_cd=A.presv_area_cd) presv_area_nm
			, (CASE WHEN LENGTH(A.presv_box_id)=15 THEN SUBSTR(A.presv_box_id,1,3)||'-'||SUBSTR(A.presv_box_id,4,3)||'-'||SUBSTR(A.presv_box_id,7,3)||'-'||SUBSTR(A.presv_box_id,10,3)||'-'||SUBSTR(A.presv_box_id,13,3)
					WHEN LENGTH(A.presv_box_id)=19 THEN SUBSTR(A.presv_box_id,1,7)||'-'||SUBSTR(A.presv_box_id,8,2)||'-'||SUBSTR(A.presv_box_id,10,4)||'-'||SUBSTR(A.presv_box_id,15,6)
					ELSE A.presv_box_id
				END) presv_box_id
			, A.folder_keep_state_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD32' AND Z.com_cd=A.folder_keep_state_cd) folder_keep_state_nm
			, A.disuse_ymd
			, A.transf_ymd
			, '' presv_loc
		    , '' presv_loc_nm
			, RPAD(A.funsh_end_dtime,14,'0') funsh_end_dtime
			, A.funsh_rsn
			, A.take_org_cd
			, A.take_yyyy
			, A.take_yyyy_sno take_sno
			, CEIL(NVL(A.folder_size/1024,0)) folder_size
			, TO_NUMBER(NVL(A.record_tot_page_cnt,'0')) record_tot_page_cnt
			, TO_NUMBER(NVL(A.record_reg_cnt,'0')) record_reg_cnt
			, (SELECT COUNT(1) FROM TB_RCRECORD R WHERE R.record_center_id=A.record_center_id AND R.folder_id=A.folder_id AND R.erecord_flag='1') elect_record_reg_cnt
			, (SELECT COUNT(1) FROM TB_RCRECORD R WHERE R.record_center_id=A.record_center_id AND R.folder_id=A.folder_id AND R.erecord_flag='2') nonelect_record_reg_cnt
			, TO_NUMBER(NVL(A.efile_cnt,'0')) efile_cnt
			, A.adjst_descr
			, A.damg_cont
			, A.damg_handl_rslt
			, A.creat_user_nm
			, A.creat_user_org_nm
			, A.creat_user_pos_rank_nm
			, RPAD(A.creat_dtime,14,'0') creat_dtime
			, A.scan_prog_state_cd 
			, (CASE WHEN A.scan_prog_state_cd='1' THEN '미스캔'
					WHEN A.scan_prog_state_cd='2' THEN '스캔중(선정)'
					WHEN A.scan_prog_state_cd='3' THEN '스캔중(검사중)'
					WHEN A.scan_prog_state_cd='4' THEN '스캔중(반려)'
					WHEN A.scan_prog_state_cd='5' THEN '스캔완료'
				ELSE '미스캔' END) scan_prog_state_nm
			, A.opti_disk_store_state_cd
			, NVL((SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD36' AND Z.com_cd=A.opti_disk_store_state_cd),'미수록') opti_disk_store_state_nm
			, A.mf_pic_state_cd
			, NVL((SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD37' AND Z.com_cd=A.mf_pic_state_cd),'미촬영') mf_pic_state_nm
			, A.neo_trans_state
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='ST03' AND Z.com_cd=A.neo_trans_state) neo_trans_state_nm
			, (SELECT Z.trans_fin_dtime FROM TB_STFOLDERNEOFILE Z WHERE Z.record_center_id=A.record_center_id AND Z.folder_id=A.folder_id AND Z.chng_sno=(SELECT MAX(Y.chng_sno) FROM TB_STFOLDERNEOFILE Y WHERE Y.record_center_id=Z.record_center_id AND Y.folder_id=Z.folder_id)) neo_trans_dtime
			, (SELECT CEIL(Z.file_size/1024) FROM TB_STFOLDERNEOFILE Z WHERE Z.record_center_id=A.record_center_id AND Z.folder_id=A.folder_id AND Z.chng_sno=(SELECT MAX(Y.chng_sno) FROM TB_STFOLDERNEOFILE Y WHERE Y.record_center_id=Z.record_center_id AND Y.folder_id=Z.folder_id)) neo_file_size
			, A.stakrm_mng_no
			, A.erecord_flag
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD23' AND Z.com_cd=A.erecord_flag) erecord_flag_nm
			, A.period_to_dt
			, A.period_from_dt
			, SUBSTR(A.period_to_dt,0,4) period_to_dt_year
			, SUBSTR(A.period_from_dt,0,4) period_from_dt_year
			, A.title AS org_title
			, A.title
			, A.creat_purps
			, A.sumry
		    , '1' accs_flag
		     , NVL((SELECT Z.take_fin_div_cd FROM tb_rdfolder_nonelect Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_id = A.folder_id), '0') take_fin_div_cd
		     , (CASE WHEN NVL((SELECT Z.take_fin_div_cd FROM tb_rdfolder_nonelect Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_id = A.folder_id), '0') = '0' THEN '미인수'
	                 WHEN NVL((SELECT Z.take_fin_div_cd FROM tb_rdfolder_nonelect Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_id = A.folder_id), '0') = '1' THEN '인수중'
	                 WHEN NVL((SELECT Z.take_fin_div_cd FROM tb_rdfolder_nonelect Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_id = A.folder_id), '0') = '2' THEN '인수완료'
	            END) take_fin_div_nm
	         , (SELECT COUNT(1) FROM tb_rdrecord_nonelect Z 
	            WHERE Z.record_center_id = A.record_center_id
	            AND   Z.record_id IN (SELECT X.record_id FROM tb_rdrecord X WHERE X.record_center_id = Z.record_center_id AND X.folder_id = #folderId:VARCHAR#)) non_elect_record_take_cnt
	         , (SELECT COUNT(*)
			  FROM TB_RCFOLDER
 				WHERE CREAT_SYS_CD = A.CREAT_SYS_CD
 				AND ORG_CD = A.ORG_CD
 				AND CLSS_ID = A.CLSS_ID
 				AND CREAT_YYYY = A.CREAT_YYYY
 				AND FOLDER_REG_SEQ = A.FOLDER_REG_SEQ) AS ho_no_cnt
		FROM (
		    SELECT *
		    FROM  TB_RCFOLDER
		    WHERE record_center_id = #recordCenterId:VARCHAR#
		    AND   folder_id = #folderId:VARCHAR#
		) A
	</select>
	
	<!-- 
		기록물철 상세정보 : 기록물건 목록
	 -->
	<resultMap id="findRcFolderRecordList-result" class="rms.common.detail.domain.Record">
		<result property="recordCenterId"			column="record_center_id" />
		<result property="recordId"					column="record_id" />
		<result property="title"					column="title" />
		<result property="recordDetlTypeCd"			column="record_detl_type_cd" />
		<result property="recordDetlTypeNm"			column="record_detl_type_nm" />
		<result property="creatRegDtime"			column="creat_reg_dtime" />
		<result property="dutyChrgrNm"				column="duty_chrgr_nm" />
		<result property="erecordFlag"				column="erecord_flag" />
		<result property="erecordFlagNm"			column="erecord_flag_nm" />
		<result property="operReadRangeCd"			column="oper_read_range_cd" />
		<result property="operReadRangeNm"			column="oper_read_range_nm" />
   	 	<result property="accsFlag"				    column="accs_flag" />
   	 	<result property="openDivCd"			    column="open_div_cd" />
   	 	<result property="openDivNm"			    column="open_div_nm" />
   	 	<result property="recordRegDivCd"			column="record_reg_div_cd" />
   	 	<result property="recordRegDivNm"			column="record_reg_div_nm" />
   	 	<result property="prodTypeCd"				column="prod_type_cd" />
   	 	<result property="recordVirusFlagNm" 		column="record_virus_flag_nm" />
	</resultMap>
	<select id="countRcFolderRecordPagedList" parameterClass="rms.common.detail.domain.FindFolder" resultClass="long">
		SELECT COUNT(1)
		FROM  TB_RCRECORD A
		WHERE A.record_center_id = #recordCenterId:VARCHAR#
		AND   A.folder_id = #folderId:VARCHAR#
		<isNotEqual property="readRangType" compareValue="1">
			<isNotEqual prepend="AND" property="sesUserDiv" compareValue="3">
			    A.oper_read_range_cd != '03'
			</isNotEqual>
		</isNotEqual>
		<isNotEmpty prepend="AND" property="recordTitle">
			A.title LIKE #recordTitle:VARCHAR#
		</isNotEmpty>
	</select>
	<select id="findRcFolderRecordPagedList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderRecordList-result">
		SELECT E.record_center_id
			, E.record_id
			, E.title
			, E.record_detl_type_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD03' AND Z.com_cd=E.record_detl_type_cd) record_detl_type_nm
			, RPAD(E.creat_reg_dtime,14,'0') creat_reg_dtime
			, (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id
		        AND Z.agent_sno=(SELECT MIN(Y.agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd IN ('01','02','06','07','28'))
		       ) duty_chrgr_nm
			, E.erecord_flag
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD23' AND Z.com_cd=E.erecord_flag) erecord_flag_nm
			, E.oper_read_range_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD53' AND Z.com_cd=E.oper_read_range_cd) oper_read_range_nm
			, E.record_reg_div_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD02' AND Z.com_cd=E.record_reg_div_cd) record_reg_div_nm
			, E.open_div_cd
		    , (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD05' AND Z.com_cd=E.open_div_cd) open_div_nm
		    , '1' accs_flag
<!-- 			, (CASE WHEN E.record_reg_div_cd IN ('1','3','5','6','7','8') THEN 0 ELSE 1 END) prod_type_cd -->
			, (CASE WHEN E.prod_type_cd is not null THEN E.prod_type_cd ELSE (CASE WHEN E.record_reg_div_cd IN ('1','3','5','6','7','8') THEN '0' ELSE '1' END) END) prod_type_cd
			, (CASE WHEN EXISTS (SELECT 1 FROM TB_STORIGNFILE Z WHERE Z.record_center_id=E.record_center_id AND Z.orign_id=E.orign_id AND Z.virus_flag='1') THEN 'O'
					WHEN EXISTS (SELECT 1 FROM TB_STORIGNPDFA1FILE Z WHERE Z.record_center_id=E.record_center_id AND Z.orign_id=E.orign_id AND Z.virus_flag='1') THEN 'O'
					ELSE 'X' END) AS record_virus_flag_nm
		FROM (
			SELECT D.*
			FROM (
				SELECT ROWNUM AS rnum
					, C.*
				FROM (
					SELECT /*+ index(A, TB_RCRECORD_IX10) */ A.*
			        FROM   TB_RCRECORD A
			        WHERE  A.record_center_id = #recordCenterId:VARCHAR#
			        AND    A.folder_id = #folderId:VARCHAR#
			        <isNotEqual property="readRangType" compareValue="1">
			            <isNotEqual prepend="AND" property="sesUserDiv" compareValue="3">
			               A.oper_read_range_cd != '03'
			            </isNotEqual>
			        </isNotEqual>
					<isNotEmpty prepend="AND" property="recordTitle">
						A.title LIKE #recordTitle:VARCHAR#
					</isNotEmpty>
					ORDER BY A.record_center_id, A.creat_reg_dtime, A.creat_reg_no
				) C
				WHERE ROWNUM <![CDATA[<=]]> #pagedEnd:NUMBER#
			) D
			WHERE D.rnum <![CDATA[>=]]> #pagedStart:NUMBER#
		) E
		ORDER BY E.rnum
	</select>
	<select id="findExcelRcFolderRecordPagedList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderRecordList-result">
		SELECT E.record_center_id
			, E.record_id
			, E.title
			, E.record_detl_type_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD03' AND Z.com_cd=E.record_detl_type_cd) record_detl_type_nm
			, RPAD(E.creat_reg_dtime,14,'0') creat_reg_dtime
			, (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id
		        AND Z.agent_sno=(SELECT MIN(Y.agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd IN ('01','02','06','07','28'))
		       ) duty_chrgr_nm
			, E.erecord_flag
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD23' AND Z.com_cd=E.erecord_flag) erecord_flag_nm
			, E.oper_read_range_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD53' AND Z.com_cd=E.oper_read_range_cd) oper_read_range_nm
			, E.record_reg_div_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD02' AND Z.com_cd=E.record_reg_div_cd) record_reg_div_nm
			, E.open_div_cd
		    , (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD05' AND Z.com_cd=E.open_div_cd) open_div_nm
		    , 'O' accs_flag
<!-- 			, DECODE((CASE WHEN E.record_reg_div_cd IN ('1','3','5','6','7','8') THEN 0 ELSE 1 END),'0','생산','접수') prod_type_cd -->
			, DECODE((CASE WHEN E.prod_type_cd is not null THEN E.prod_type_cd ELSE (CASE WHEN E.record_reg_div_cd IN ('1','3','5','6','7','8') THEN '0' ELSE '1' END) END),'0','생산','접수') prod_type_cd
			, (CASE WHEN EXISTS (SELECT 1 FROM TB_STORIGNFILE Z WHERE Z.record_center_id=E.record_center_id AND Z.orign_id=E.orign_id AND Z.virus_flag='1') THEN 'O'
					WHEN EXISTS (SELECT 1 FROM TB_STORIGNPDFA1FILE Z WHERE Z.record_center_id=E.record_center_id AND Z.orign_id=E.orign_id AND Z.virus_flag='1') THEN 'O'
					ELSE 'X' END) AS record_virus_flag_nm
		FROM (
			SELECT D.*
			FROM (
				SELECT ROWNUM AS rnum
					, C.*
				FROM (
					SELECT /*+ index(A, TB_RCRECORD_IX10) */ A.*
			        FROM   TB_RCRECORD A
			        WHERE  A.record_center_id = #recordCenterId:VARCHAR#
			        AND    A.folder_id = #folderId:VARCHAR#
			        <isNotEqual property="readRangType" compareValue="1">
			            <isNotEqual prepend="AND" property="sesUserDiv" compareValue="3">
			               A.oper_read_range_cd != '03'
			            </isNotEqual>
			        </isNotEqual>
					<isNotEmpty prepend="AND" property="recordTitle">
						A.title LIKE #recordTitle:VARCHAR#
					</isNotEmpty>
					ORDER BY A.record_center_id, A.creat_reg_dtime, A.creat_reg_no
				) C
				WHERE ROWNUM <![CDATA[<=]]> #pagedEnd:NUMBER#
			) D
			WHERE D.rnum <![CDATA[>=]]> #pagedStart:NUMBER#
		) E
		ORDER BY E.rnum
	</select>
	
	<!-- 
		기록물철 상세정보 : 기록물건 목록
	 -->
	<resultMap id="findRcFolderRecordNewList-result" class="rms.common.detail.domain.Record">
		<result property="recordCenterId"			column="record_center_id" />
		<result property="recordId"					column="record_id" />
		<result property="title"					column="title" />
		<result property="recordDetlTypeCd"			column="record_detl_type_cd" />
		<result property="recordDetlTypeNm"			column="record_detl_type_nm" />
		<result property="creatRegDtime"			column="creat_reg_dtime" />
		<result property="dutyChrgrNm"				column="duty_chrgr_nm" />
		<result property="erecordFlag"				column="erecord_flag" />
		<result property="erecordFlagNm"			column="erecord_flag_nm" />
		<result property="operReadRangeCd"			column="oper_read_range_cd" />
		<result property="operReadRangeNm"			column="oper_read_range_nm" />
		<result property="ver"				        column="ver" />
		<result property="virusFlag"				column="virus_flag" />
		<result property="orignFileId"				column="orign_file_id" />
    	<result property="docTypeCd"				column="doc_type_cd" />
   	 	<result property="fileNm"				    column="file_nm" />
   	 	<result property="pdfA1TransState"			column="pdf_a1_trans_state" />
   	 	<result property="pdfA1FileId"				column="pdf_a1_file_id" />
   	 	<result property="accsFlag"				    column="accs_flag" />
   	 	<result property="recordRegDivNm"			column="record_reg_div_nm" />
   	 	<result property="prodTypeCd"				column="prod_type_cd" />
   	 	<result property="recordVirusFlagNm"		column="record_virus_flag_nm" />
	</resultMap>
	<select id="countRcFolderRecordNewPagedList" parameterClass="rms.common.detail.domain.FindFolder" resultClass="long">
		SELECT COUNT(1)
		FROM  TB_RCRECORD A
		WHERE A.record_center_id = #recordCenterId:VARCHAR#
		AND   A.folder_id = #folderId:VARCHAR#
		<isNotEqual property="readRangType" compareValue="1">
			<isNotEqual prepend="AND" property="sesUserDiv" compareValue="3">
			    A.oper_read_range_cd != '03'
			</isNotEqual>
		</isNotEqual>
		<isNotEmpty prepend="AND" property="recordTitle">
			A.title LIKE #recordTitle:VARCHAR#
		</isNotEmpty>
	</select>
	<select id="findRcFolderRecordNewPagedList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderRecordNewList-result">
		SELECT E.record_center_id
			, E.record_id
			, E.title
			, E.record_detl_type_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD03' AND Z.com_cd=E.record_detl_type_cd) record_detl_type_nm
			, RPAD(E.creat_reg_dtime,14,'0') creat_reg_dtime
			,( CASE WHEN (E.record_detl_type_cd='01' AND E.prod_type_cd='1')
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='28'))
					WHEN (E.record_detl_type_cd='02' OR E.record_detl_type_cd='03')
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='06'))
					WHEN E.record_detl_type_cd='04'
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='07'))
					WHEN E.creat_sys_cd='03'
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='01'))
					ELSE
						(SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='02'))
				END) duty_chrgr_nm 
			, E.erecord_flag
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD23' AND Z.com_cd=E.erecord_flag) erecord_flag_nm
			, E.oper_read_range_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD53' AND Z.com_cd=E.oper_read_range_cd) oper_read_range_nm
			, E.record_reg_div_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD02' AND Z.com_cd=E.record_reg_div_cd) record_reg_div_nm
			, E.open_div_cd
		    , (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD05' AND Z.com_cd=E.open_div_cd) open_div_nm
			, '01' doc_type_cd
			, (SELECT B.orign_file_id FROM TB_STORIGNFILE B WHERE rownum = 1 and B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01'
				AND NVL(TO_NUMBER(B.ver),0) = ( SELECT MAX(NVL(TO_NUMBER(C.ver),0)) FROM TB_STORIGNFILE C WHERE C.record_center_id=B.record_center_id AND C.orign_id=B.orign_id AND C.doc_type_cd=B.doc_type_cd )
				) orign_file_id
			, (SELECT B.ver FROM TB_STORIGNFILE B WHERE rownum = 1 and B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01'
				AND NVL(TO_NUMBER(B.ver),0) = ( SELECT MAX(NVL(TO_NUMBER(C.ver),0)) FROM TB_STORIGNFILE C WHERE C.record_center_id=B.record_center_id AND C.orign_id=B.orign_id AND C.doc_type_cd=B.doc_type_cd )
				) ver
			, (SELECT B.file_nm FROM TB_STORIGNFILE B WHERE rownum = 1 and B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01'
				AND NVL(TO_NUMBER(B.ver),0) = ( SELECT MAX(NVL(TO_NUMBER(C.ver),0)) FROM TB_STORIGNFILE C WHERE C.record_center_id=B.record_center_id AND C.orign_id=B.orign_id AND C.doc_type_cd=B.doc_type_cd )
				) file_nm
			, (SELECT B.virus_flag FROM TB_STORIGNFILE B WHERE rownum = 1 and B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01'
				AND NVL(TO_NUMBER(B.ver),0) = ( SELECT MAX(NVL(TO_NUMBER(C.ver),0)) FROM TB_STORIGNFILE C WHERE C.record_center_id=B.record_center_id AND C.orign_id=B.orign_id AND C.doc_type_cd=B.doc_type_cd )
				) virus_flag
			, (SELECT B.pdf_a1_trans_state FROM TB_STORIGNFILE B WHERE rownum = 1 and B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01'
				AND NVL(TO_NUMBER(B.ver),0) = ( SELECT MAX(NVL(TO_NUMBER(C.ver),0)) FROM TB_STORIGNFILE C WHERE C.record_center_id=B.record_center_id AND C.orign_id=B.orign_id AND C.doc_type_cd=B.doc_type_cd )
				) pdf_a1_trans_state
			, (SELECT B.pdf_a1_file_id FROM TB_STORIGNPDFA1FILE B WHERE B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01' AND B.doc_type_sno=1) pdf_a1_file_id
		    , '1' accs_flag
<!-- 			, (CASE WHEN E.record_reg_div_cd IN ('1','3','5','6','7','8') THEN 0 ELSE 1 END) prod_type_cd -->
			, (CASE WHEN E.prod_type_cd is not null THEN E.prod_type_cd ELSE (CASE WHEN E.record_reg_div_cd IN ('1','3','5','6','7','8') THEN '0' ELSE '1' END) END) prod_type_cd
			, (CASE WHEN EXISTS (SELECT 1 FROM TB_STORIGNFILE Z WHERE Z.record_center_id=E.record_center_id AND Z.orign_id=E.orign_id AND Z.virus_flag='1') THEN 'O'
					WHEN EXISTS (SELECT 1 FROM TB_STORIGNPDFA1FILE Z WHERE Z.record_center_id=E.record_center_id AND Z.orign_id=E.orign_id AND Z.virus_flag='1') THEN 'O'
					ELSE 'X' END) AS record_virus_flag_nm
		FROM (
			SELECT D.*
			FROM (
				SELECT ROWNUM AS rnum
					, C.*
				FROM (
					SELECT /*+ index(A, TB_RCRECORD_IX10) */ A.*
			        FROM   TB_RCRECORD A
			        WHERE  A.record_center_id = #recordCenterId:VARCHAR#
			        AND    A.folder_id = #folderId:VARCHAR#
			        <isNotEqual property="readRangType" compareValue="1">
			            <isNotEqual prepend="AND" property="sesUserDiv" compareValue="3">
			               A.oper_read_range_cd != '03'
			            </isNotEqual>
			        </isNotEqual>
					<isNotEmpty prepend="AND" property="recordTitle">
						A.title LIKE #recordTitle:VARCHAR#
					</isNotEmpty>
					ORDER BY A.record_center_id, A.creat_reg_dtime, A.creat_reg_no
				) C
				WHERE ROWNUM <![CDATA[<=]]> #pagedEnd:NUMBER#
			) D
			WHERE D.rnum <![CDATA[>=]]> #pagedStart:NUMBER#
		) E
		ORDER BY E.rnum
	</select>
	<select id="findExcelRcFolderRecordNewPagedList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderRecordNewList-result">
		SELECT E.record_center_id
			, E.record_id
			, E.title
			, E.record_detl_type_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD03' AND Z.com_cd=E.record_detl_type_cd) record_detl_type_nm
			, RPAD(E.creat_reg_dtime,14,'0') creat_reg_dtime
			,( CASE WHEN (E.record_detl_type_cd='01' AND E.prod_type_cd='1')
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='28'))
					WHEN (E.record_detl_type_cd='02' OR E.record_detl_type_cd='03')
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='06'))
					WHEN E.record_detl_type_cd='04'
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='07'))
					WHEN E.creat_sys_cd='03'
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='01'))
					ELSE
						(SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=E.record_center_id AND Z.record_id=E.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='02'))
				END) duty_chrgr_nm 
			, E.erecord_flag
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD23' AND Z.com_cd=E.erecord_flag) erecord_flag_nm
			, E.oper_read_range_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD53' AND Z.com_cd=E.oper_read_range_cd) oper_read_range_nm
			, E.record_reg_div_cd
			, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD02' AND Z.com_cd=E.record_reg_div_cd) record_reg_div_nm
			, E.open_div_cd
		    , (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD05' AND Z.com_cd=E.open_div_cd) open_div_nm
			, '01' doc_type_cd
			, (SELECT B.orign_file_id FROM TB_STORIGNFILE B WHERE rownum = 1 and B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01'
				AND NVL(TO_NUMBER(B.ver),0) = ( SELECT MAX(NVL(TO_NUMBER(C.ver),0)) FROM TB_STORIGNFILE C WHERE C.record_center_id=B.record_center_id AND C.orign_id=B.orign_id AND C.doc_type_cd=B.doc_type_cd )
				) orign_file_id
			, (SELECT B.ver FROM TB_STORIGNFILE B WHERE rownum = 1 and B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01'
				AND NVL(TO_NUMBER(B.ver),0) = ( SELECT MAX(NVL(TO_NUMBER(C.ver),0)) FROM TB_STORIGNFILE C WHERE C.record_center_id=B.record_center_id AND C.orign_id=B.orign_id AND C.doc_type_cd=B.doc_type_cd )
				) ver
			, (SELECT B.file_nm FROM TB_STORIGNFILE B WHERE rownum = 1 and B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01'
				AND NVL(TO_NUMBER(B.ver),0) = ( SELECT MAX(NVL(TO_NUMBER(C.ver),0)) FROM TB_STORIGNFILE C WHERE C.record_center_id=B.record_center_id AND C.orign_id=B.orign_id AND C.doc_type_cd=B.doc_type_cd )
				) file_nm
			, (SELECT B.virus_flag FROM TB_STORIGNFILE B WHERE rownum = 1 and B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01'
				AND NVL(TO_NUMBER(B.ver),0) = ( SELECT MAX(NVL(TO_NUMBER(C.ver),0)) FROM TB_STORIGNFILE C WHERE C.record_center_id=B.record_center_id AND C.orign_id=B.orign_id AND C.doc_type_cd=B.doc_type_cd )
				) virus_flag
			, (SELECT B.pdf_a1_trans_state FROM TB_STORIGNFILE B WHERE rownum = 1 and B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01'
				AND NVL(TO_NUMBER(B.ver),0) = ( SELECT MAX(NVL(TO_NUMBER(C.ver),0)) FROM TB_STORIGNFILE C WHERE C.record_center_id=B.record_center_id AND C.orign_id=B.orign_id AND C.doc_type_cd=B.doc_type_cd )
				) pdf_a1_trans_state
			, (SELECT B.pdf_a1_file_id FROM TB_STORIGNPDFA1FILE B WHERE B.record_center_id=E.record_center_id AND B.orign_id=E.orign_id AND B.doc_type_cd='01' AND B.doc_type_sno=1) pdf_a1_file_id
		    , 'O' accs_flag
<!-- 			, DECODE((CASE WHEN E.record_reg_div_cd IN ('1','3','5','6','7','8') THEN 0 ELSE 1 END),'0','생산','접수') prod_type_cd -->
			, DECODE((CASE WHEN E.prod_type_cd is not null THEN E.prod_type_cd ELSE (CASE WHEN E.record_reg_div_cd IN ('1','3','5','6','7','8') THEN '0' ELSE '1' END) END),'0','생산','접수') prod_type_cd
			, (CASE WHEN EXISTS (SELECT 1 FROM TB_STORIGNFILE Z WHERE Z.record_center_id=E.record_center_id AND Z.orign_id=E.orign_id AND Z.virus_flag='1') THEN 'O'
					WHEN EXISTS (SELECT 1 FROM TB_STORIGNPDFA1FILE Z WHERE Z.record_center_id=E.record_center_id AND Z.orign_id=E.orign_id AND Z.virus_flag='1') THEN 'O'
					ELSE 'X' END) AS record_virus_flag_nm
		FROM (
			SELECT D.*
			FROM (
				SELECT ROWNUM AS rnum
					, C.*
				FROM (
					SELECT /*+ index(A, TB_RCRECORD_IX10) */ A.*
			        FROM   TB_RCRECORD A
			        WHERE  A.record_center_id = #recordCenterId:VARCHAR#
			        AND    A.folder_id = #folderId:VARCHAR#
			        <isNotEqual property="readRangType" compareValue="1">
			            <isNotEqual prepend="AND" property="sesUserDiv" compareValue="3">
			               A.oper_read_range_cd != '03'
			            </isNotEqual>
			        </isNotEqual>
					<isNotEmpty prepend="AND" property="recordTitle">
						A.title LIKE #recordTitle:VARCHAR#
					</isNotEmpty>
					ORDER BY A.record_center_id, A.creat_reg_dtime, A.creat_reg_no
				) C
				WHERE ROWNUM <![CDATA[<=]]> #pagedEnd:NUMBER#
			) D
			WHERE D.rnum <![CDATA[>=]]> #pagedStart:NUMBER#
		) E
		ORDER BY E.rnum
	</select>
	
	<!--
		 기록물철 상세정보 : 생산자정보
	 -->
	<resultMap id="findRcFolderCreatList-result" class="rms.common.detail.domain.FolderCreat">
		<result property="agentId"					column="agent_id" />
		<result property="agentTypeCd"				column="agent_type_cd" />
		<result property="agentNm"					column="agent_nm" />
		<result property="agentOrgNm"				column="agent_org_nm" />
		<result property="agentPosRankNm"			column="agent_pos_rank_nm" />
		<result property="dutyActDtime"				column="duty_act_dtime" />
		<result property="dutyTypeCd"				column="duty_type_cd" />
		<result property="dutyTypeNm"				column="duty_type_nm" />
		<result property="opin"						column="opin" jdbcType="CLOB" javaType="java.lang.String" />
	</resultMap>
	<select id="findRcFolderCreatList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderCreatList-result">
		SELECT agent_id
		     , agent_type_cd
		     , agent_nm
		     , agent_org_nm
			 , agent_pos_rank_nm
			 , SUBSTR(duty_act_dtime,1,8) AS duty_act_dtime
			 , duty_type_cd
			 , (CASE WHEN duty_type_cd='1' THEN '신규' WHEN duty_type_cd='2' THEN '삭제' ELSE '' END) AS duty_type_nm
			 , opin
		FROM  TB_RCFOLDERCREAT
		WHERE record_center_id = #recordCenterId:VARCHAR#
		AND   folder_id = #folderId:VARCHAR#
		AND   agent_type_cd = #agentTypeCd:VARCHAR#
		ORDER BY duty_act_dtime DESC, agent_sno DESC
	</select>
	
	<!-- 
		기록물철 상세정보 : 과제실적
	 -->
	<resultMap id="findRcFolderTaskPagedList-result" class="rms.common.detail.domain.Record">
		<result property="recordCenterId"			column="record_center_id" />
		<result property="recordId"					column="record_id" />
		<result property="creatRegDtime"			column="creat_reg_dtime" />
		<result property="recordDetlTypeCd"			column="record_detl_type_cd" />
		<result property="recordDetlTypeNm"			column="record_detl_type_nm" />
		<result property="dutyChrgrNm"				column="duty_chrgr_nm" />
		<result property="orgCd"					column="org_cd" />
		<result property="orgNm"					column="org_nm" />
		<result property="orgAbbrNm"				column="org_abbr_nm" />
		<result property="title"					column="title" />
		<result property="attachCnt"				column="attach_cnt" />
		<result property="operReadRangeCd"			column="oper_read_range_cd" />
	</resultMap>
	<select id="countRcFolderTaskPagedList" parameterClass="rms.common.detail.domain.FindFolder" resultClass="long">
		SELECT COUNT(1)
		FROM (
			SELECT /*+ index(A, TB_RCRECORD_IX10) */
			       A.record_center_id
			     , A.record_id
			     , RPAD(A.creat_reg_dtime,14,'0') creat_reg_dtime
			     , A.creat_reg_no
				 , A.record_detl_type_cd
				 , DECODE(A.record_detl_type_cd,'01','문서','02','메모','03','회의','') record_detl_type_nm
				, (CASE WHEN (A.record_detl_type_cd='01' AND A.prod_type_cd='1')
							THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='28'))
						WHEN (A.record_detl_type_cd='02' OR A.record_detl_type_cd='03')
							THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='06'))
						WHEN A.record_detl_type_cd='04'
							THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='07'))
						WHEN A.creat_sys_cd='03'
							THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='01'))
						ELSE
							(SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='02'))
					END) duty_chrgr_nm 
				 , A.org_cd
                 , (SELECT B.org_nm FROM TB_STORG B WHERE B.record_center_id=A.record_center_id AND B.org_cd=A.org_cd) org_nm
                 , (SELECT B.org_abbr_nm FROM TB_STORG B WHERE B.record_center_id=A.record_center_id AND B.org_cd=A.org_cd) org_abbr_nm
				 , A.title
				 , TO_NUMBER(NVL(A.attach_cnt,'0')) attach_cnt
				 , A.oper_read_range_cd
			FROM  TB_RCRECORD A
			WHERE A.record_center_id = #recordCenterId:VARCHAR#
			AND   A.folder_id = #folderId:VARCHAR#
			<isEqual prepend="AND" property="prodTypeCd" compareValue="1">
				A.prod_type_cd = '1'
			</isEqual>
			<isNotEqual prepend="AND" property="prodTypeCd" compareValue="1">
				(A.prod_type_cd IS NULL OR A.prod_type_cd = '0')
			</isNotEqual>
	    	<isNotEqual property="readRangType" compareValue="1">
				<isNotEqual prepend="AND" property="sesUserDiv" compareValue="3">
				    A.oper_read_range_cd != '03'
				</isNotEqual>
			</isNotEqual>
			<dynamic prepend="AND" open="(" close=")">
				<isNotEqual prepend="OR" property="recordDetlTypeCd01" compareValue="N">
				A.record_detl_type_cd = '01'
				</isNotEqual>
				<isNotEqual prepend="OR" property="recordDetlTypeCd02" compareValue="N">
				A.record_detl_type_cd = '02'
				</isNotEqual>
				<isNotEqual prepend="OR" property="recordDetlTypeCd03" compareValue="N">
				A.record_detl_type_cd = '03'
				</isNotEqual>
			</dynamic>
		) B
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="title">
			B.title LIKE #title:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="creatRegDtimeFrom">
			B.creat_reg_dtime <![CDATA[>=]]> #creatRegDtimeFrom:VARCHAR#||'000000'
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="creatRegDtimeTo">
			B.creat_reg_dtime <![CDATA[<=]]> #creatRegDtimeTo:VARCHAR#||'240000'
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="dutyChrgrNm">
			B.duty_chrgr_nm LIKE #dutyChrgrNm:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="orgAbbrNm">
			B.org_abbr_nm LIKE #orgAbbrNm:VARCHAR#
			</isNotEmpty>
		</dynamic>
	</select>
	<select id="findRcFolderTaskPagedList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderTaskPagedList-result">
		SELECT E.record_center_id
			, E.record_id
			, E.creat_reg_dtime
			, E.record_detl_type_cd
			, E.record_detl_type_nm
			, E.duty_chrgr_nm
			, E.org_cd
			, E.org_nm
			, E.org_abbr_nm
			, E.title
			, E.attach_cnt
			, E.oper_read_range_cd
		FROM (
			SELECT D.*
			FROM (
				SELECT ROWNUM AS rnum
					, C.*
				FROM (
					SELECT B.*
					FROM (
						SELECT /*+ index(A, TB_RCRECORD_IX10) */
						       A.record_center_id
						     , A.record_id
						     , RPAD(A.creat_reg_dtime,14,'0') creat_reg_dtime
						     , A.creat_reg_no
							 , A.record_detl_type_cd
							 , DECODE(A.record_detl_type_cd,'01','문서','02','메모','03','회의','') record_detl_type_nm
							, (CASE WHEN (A.record_detl_type_cd='01' AND A.prod_type_cd='1')
										THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='28'))
									WHEN (A.record_detl_type_cd='02' OR A.record_detl_type_cd='03')
										THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='06'))
									WHEN A.record_detl_type_cd='04'
										THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='07'))
									WHEN A.creat_sys_cd='03'
										THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='01'))
									ELSE
										(SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='02'))
								END) duty_chrgr_nm 
							 , A.org_cd
			                 , (SELECT B.org_nm FROM TB_STORG B WHERE B.record_center_id=A.record_center_id AND B.org_cd=A.org_cd) org_nm
			                 , (SELECT B.org_abbr_nm FROM TB_STORG B WHERE B.record_center_id=A.record_center_id AND B.org_cd=A.org_cd) org_abbr_nm
							 , A.title
							 , TO_NUMBER(NVL(A.attach_cnt,'0')) attach_cnt
							 , A.oper_read_range_cd
						FROM  TB_RCRECORD A
						WHERE A.record_center_id = #recordCenterId:VARCHAR#
						AND   A.folder_id = #folderId:VARCHAR#
						<isEqual prepend="AND" property="prodTypeCd" compareValue="1">
							A.prod_type_cd = '1'
						</isEqual>
						<isNotEqual prepend="AND" property="prodTypeCd" compareValue="1">
							(A.prod_type_cd IS NULL OR A.prod_type_cd = '0')
						</isNotEqual>
						<isNotEqual property="readRangType" compareValue="1">
							<isNotEqual prepend="AND" property="sesUserDiv" compareValue="3">
							    A.oper_read_range_cd != '03'
							</isNotEqual>
						</isNotEqual>
						<dynamic prepend="AND" open="(" close=")">
							<isNotEqual prepend="OR" property="recordDetlTypeCd01" compareValue="N">
							A.record_detl_type_cd = '01'
							</isNotEqual>
							<isNotEqual prepend="OR" property="recordDetlTypeCd02" compareValue="N">
							A.record_detl_type_cd = '02'
							</isNotEqual>
							<isNotEqual prepend="OR" property="recordDetlTypeCd03" compareValue="N">
							A.record_detl_type_cd = '03'
							</isNotEqual>
						</dynamic>
					) B
					<dynamic prepend="WHERE">
						<isNotEmpty prepend="AND" property="title">
						B.title LIKE #title:VARCHAR#
						</isNotEmpty>
						<isNotEmpty prepend="AND" property="creatRegDtimeFrom">
						B.creat_reg_dtime <![CDATA[>=]]> #creatRegDtimeFrom:VARCHAR#||'000000'
						</isNotEmpty>
						<isNotEmpty prepend="AND" property="creatRegDtimeTo">
						B.creat_reg_dtime <![CDATA[<=]]> #creatRegDtimeTo:VARCHAR#||'240000'
						</isNotEmpty>
						<isNotEmpty prepend="AND" property="dutyChrgrNm">
						B.duty_chrgr_nm LIKE #dutyChrgrNm:VARCHAR#
						</isNotEmpty>
						<isNotEmpty prepend="AND" property="orgAbbrNm">
						B.org_abbr_nm LIKE #orgAbbrNm:VARCHAR#
						</isNotEmpty>
					</dynamic>
					ORDER BY B.record_center_id, B.creat_reg_dtime, B.creat_reg_no
				) C
				WHERE ROWNUM <![CDATA[<=]]> #pagedEnd:NUMBER#
			) D
			WHERE D.rnum <![CDATA[>=]]> #pagedStart:NUMBER#
		) E
		ORDER BY E.rnum
	</select>
	
	<!-- 
		기록물철 상세정보 : 지시사항
	 -->
	<resultMap id="findRcFolderTaskOrderList-result" class="rms.common.detail.domain.Record">
		<result property="recordId"					column="record_id" />
		<result property="creatRegDtime"			column="creat_reg_dtime" />
		<result property="dutyChrgrNm"				column="duty_chrgr_nm" />
		<result property="title"					column="title" />
		<result property="operReadRangeCd"			column="oper_read_range_cd" />
	</resultMap>
	<select id="findRcFolderTaskOrderList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderTaskOrderList-result">
		SELECT A.record_id
		     , RPAD(A.creat_reg_dtime,14,'0') creat_reg_dtime
			, (CASE WHEN (A.record_detl_type_cd='01' AND A.prod_type_cd='1')
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='28'))
					WHEN (A.record_detl_type_cd='02' OR A.record_detl_type_cd='03')
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='06'))
					WHEN A.record_detl_type_cd='04'
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='07'))
					WHEN A.creat_sys_cd='03'
						THEN (SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='01'))
					ELSE
						(SELECT Z.agent_nm FROM TB_RCRECORDCREAT Z WHERE Z.record_center_id=A.record_center_id AND Z.record_id=A.record_id AND Z.agent_sno=(SELECT MIN(agent_sno) FROM TB_RCRECORDCREAT Y WHERE Y.record_center_id=Z.record_center_id AND Y.record_id=Z.record_id AND Y.agent_type_cd='02'))
				END) duty_chrgr_nm 
			 , A.title
			 , A.oper_read_range_cd
		FROM  TB_RCRECORD A
		WHERE A.record_center_id = #recordCenterId:VARCHAR#
		AND   A.folder_id = #folderId:VARCHAR#
		AND   A.record_detl_type_cd = '04'
		<isEqual prepend="AND" property="prodTypeCd" compareValue="1">
			A.prod_type_cd = '1'
		</isEqual>
		<isNotEqual property="readRangType" compareValue="1">
			<isNotEqual prepend="AND" property="sesUserDiv" compareValue="3">
			    A.oper_read_range_cd != '03'
			</isNotEqual>
		</isNotEqual>
	</select>
	
	<!-- 
		기록물철 상세정보 : 분류체계 정보
	 -->
	<resultMap id="findRcFolderClssList-result" class="rms.common.detail.domain.FolderClss">
		<result property="bisClssId"				column="bis_clss_id" />
		<result property="bisClssNm"				column="bis_clss_nm" />
		<result property="levl"						column="levl" />
	</resultMap>
	<select id="findRcFolderClssBisList" parameterClass="java.lang.String" resultMap="findRcFolderClssList-result">
		SELECT bis_clss_id, bis_clss_nm, levl
		FROM  TB_ZZBISCLSS
		START WITH bis_clss_id = #value#
		CONNECT BY PRIOR upper_bis_clss_id = bis_clss_id 
	</select>
	
	<!-- 
		기록물철 상세정보 : 분류체계 정보
	 -->
	<select id="findRcFolderClssPjtList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderClssList-result">
		SELECT bis_clss_id, bis_clss_nm, levl
		FROM TB_ZZBISCLSS
		START WITH bis_clss_id IN ( SELECT C.bis_clss_id
		                            FROM TB_RCFOLDER A, TB_RCFOLDERPJTCLSS B, TB_ZZPJTMAPPNG C
		                            WHERE A.record_center_id = #recordCenterId:VARCHAR#
									AND   A.folder_id = #folderId:VARCHAR#
									AND   B.record_center_id = A.record_center_id
									AND   B.folder_id = A.folder_id
									AND   C.pjt_clss_id = B.pjt_clss_id )
		CONNECT BY PRIOR upper_bis_clss_id = bis_clss_id 
	</select>
	
	<!-- 
		기록물철 (단위과제카드 표제부) - 관리정보(관련 단위과제)
	 -->
	<select id="findRcFolderClssRelList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderClssList-result">
		SELECT bis_clss_id, bis_clss_nm, levl
		FROM  TB_ZZBISCLSS
		START WITH bis_clss_id IN ( SELECT B.rel_trgt_id
		                            FROM  TB_RCFOLDER A, TB_RCFOLDERREL B
		                            WHERE A.record_center_id = #recordCenterId:VARCHAR#
									AND   A.folder_id = #folderId:VARCHAR#
									AND   B.record_center_id = A.record_center_id
									AND   B.folder_id = A.folder_id
									AND   B.rel_type_cd = '03' )
		CONNECT BY PRIOR upper_bis_clss_id = bis_clss_id 
	</select>
	
	<!-- 
		기록물철 상세정보 : 기록물철 변경이력 
	 -->
	<resultMap id="findRcFolderChngHistList-result" class="rms.common.detail.domain.FolderChngHist">
		<result property="chngYmd"					column="chng_ymd" />
		<result property="chngUserNm"				column="chng_user_nm" />
		<result property="chngRsn"					column="chng_rsn" />
		<result property="titleBef"					column="title_bef" />
		<result property="titleAft"					column="title_aft" />
		<result property="folderTypeDivCdBef"		column="folder_type_div_cd_bef" />
		<result property="folderTypeDivCdBefNm"		column="folder_type_div_cd_bef_nm" />
		<result property="folderTypeDivCdAft"		column="folder_type_div_cd_aft" />
		<result property="folderTypeDivCdAftNm"		column="folder_type_div_cd_aft_nm" />
	</resultMap>
	<select id="findRcFolderChngHistList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderChngHistList-result">
	    SELECT A.chng_ymd
	         , A.chng_user_nm
	         , A.chng_rsn
		     , A.title_bef
		     , A.title_aft
		     , A.folder_type_div_cd_bef
			 , (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD01' AND Z.com_cd=A.folder_type_div_cd_bef) AS folder_type_div_cd_bef_nm
		     , A.folder_type_div_cd_aft
			 , (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD01' AND Z.com_cd=A.folder_type_div_cd_aft) AS folder_type_div_cd_aft_nm
	    FROM  TB_RCFOLDERCHNGHIST A
	    WHERE A.record_center_id = #recordCenterId:VARCHAR#
	    AND   A.folder_id = #folderId:VARCHAR#
		ORDER BY A.record_center_id, A.folder_id, A.chng_hist_no
	</select>
	
	<!-- 
		기록물철 상세정보 : 기록물철 인수인계정보
	 -->
	<resultMap id="findRcFolderTakeTakovrList-result" class="rms.common.detail.domain.FolderTakeTakovr">
		<result property="takeTakovrSno"                column="take_takovr_sno" />
		<result property="takeTakovrTypeNm"				column="take_takovr_type_nm" />
		<result property="takeTakovrDivNm"				column="take_takovr_div_nm" />
		<result property="takeTakovrOrgCd"				column="take_takovr_org_cd" />
		<result property="takeTakovrOrgNm"				column="take_takovr_org_nm" />
		<result property="takeTakovrClssId"             column="take_takovr_clss_id" />
		<result property="takeTakovrClssNm"             column="take_takovr_clss_nm" />
        <result property="takeTakovrFolderId"           column="take_takovr_folder_id" />
        <result property="takeTakovrFolderTitle"        column="take_takovr_folder_title" />
		<result property="takeTakovrDt"					column="take_takovr_dt" />
	</resultMap>
	<select id="findRcFolderTakeTakovrList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderTakeTakovrList-result">
		SELECT ROWNUM AS take_takovr_sno, take_takovr_type_nm, take_takovr_div_nm, take_takovr_org_cd, take_takovr_org_nm
			, take_takovr_clss_id, take_takovr_clss_nm, take_takovr_folder_id, take_takovr_folder_title, take_takovr_dt
		FROM (
			SELECT '생산기관간 인수인계' take_takovr_type_nm
				, (CASE WHEN take_takovr_div_cd='1' THEN '인수' WHEN take_takovr_div_cd='2' THEN '인계' END) take_takovr_div_nm
				, A.take_takovr_org_cd
				, A.take_takovr_org_nm
				, A.TAKE_TAKOVR_CLSS_ID
				, NVL((SELECT Z.BIS_CLSS_NM FROM TB_ZZBISCLSS Z WHERE Z.BIS_CLSS_ID = A.TAKE_TAKOVR_CLSS_ID), 
					(SELECT Z.UNIT_NM FROM TB_ZZUNIT Z WHERE Z.RECORD_CENTER_ID = A.RECORD_CENTER_ID AND Z.UNIT_CD = A.TAKE_TAKOVR_CLSS_ID)) AS TAKE_TAKOVR_CLSS_NM
				, A.TAKE_TAKOVR_FOLDER_ID
				, A.TAKE_TAKOVR_FOLDER_TITLE
				, SUBSTR(A.take_takovr_creat_dtime,1,8) take_takovr_dt
			FROM  TB_RCFOLDERTAKETAKOVR A
			WHERE A.record_center_id = #recordCenterId:VARCHAR#
			AND   A.folder_id = #folderId:VARCHAR#
			AND   A.take_takovr_div_cd IN ('1','2')
			ORDER BY A.record_center_id, A.folder_id, A.take_takovr_creat_dtime
		)
	</select>
	
	<!-- 
		기록물철 상세정보 : 기록물철 관리이력 
	 -->
	<resultMap id="findRcFolderEvalHistList-result" class="rms.common.detail.domain.FolderEval">
		<result property="evalTypeNm"					column="eval_type_nm" />
		<result property="cnclEvalDivNm"				column="cncl_eval_div_nm" />
		<result property="cnclEvalDetlCd"				column="cncl_eval_detl_cd" />
		<result property="cnclEvalDetlNm"				column="cncl_eval_detl_nm" />
		<result property="cnclEvalRsn"					column="cncl_eval_rsn" />
		<result property="cnclEvalYmd"					column="cncl_eval_ymd" />
	</resultMap>
	<select id="findRcFolderEvalHistList" parameterClass="rms.common.detail.domain.FindFolder" resultMap="findRcFolderEvalHistList-result">
		SELECT '보존기간재평가' eval_type_nm
			, (SELECT Z.com_cd_nm FROM tb_zzcomcd Z WHERE Z.com_type_cd = 'DF02' AND Z.com_cd = A.review_opin) cncl_eval_div_nm
			, A.review_opin cncl_eval_detl_cd
			, (CASE WHEN A.review_opin = '1' THEN ''
					WHEN A.review_opin = '2' THEN (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd = 'DF07' AND Z.COM_CD = A.review_presv_term_cd)
					WHEN A.review_opin = '3' THEN (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd = 'RD07' AND Z.com_cd = A.cur_presv_term_cd)
					ELSE ''
				END) cncl_eval_detl_nm
			, A.review_rsn cncl_eval_rsn
			, (CASE WHEN A.review_opin = '1' THEN (SELECT Z.disuse_ymd FROM TB_RCFOLDER Z WHERE Z.record_center_id = A.record_center_id AND Z.folder_id = A.folder_id)
					WHEN A.review_opin = '2' THEN A.review_ymd
					WHEN A.review_opin = '3' THEN A.review_ymd
					ELSE ''
				END) cncl_eval_ymd
		FROM  TB_RCDISUSEOPINHIST A
		WHERE A.record_center_id = #recordCenterId:VARCHAR#
		AND   A.folder_id = #folderId:VARCHAR#
		AND   A.review_opin IN ('1','2','3')
		ORDER BY A.record_center_id, A.folder_id, A.review_ymd
	</select>
	
</sqlMap>
