-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : countfindUnderDeptCreatState

		SELECT COUNT(1)		FROM		(		SELECT a.record_center_cd, a.record_center_nm, b.folderCnt, DECODE(b.folderCnt,'','N','Y') AS recvFlag		FROM (			SELECT record_center_cd, record_center_nm, record_center_id			FROM TB_STRECORDCENTER			 WHERE 				record_center_id = '1'			 			) a, 			 (			SELECT a.record_center_id, count(a.record_center_id) as folderCnt			FROM TB_CRINFRMFOLDER a WHERE 				a.cr_report_infrm_creat_yyyy = '1'			 			GROUP BY a.record_center_id			) b		WHERE a.record_center_id = b.record_center_id(+)		) WHERE 	 			recvFlag = '1'	 	 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findUnderDeptCreatState

		SELECT F.*		FROM (		    SELECT ROWNUM AS rnum		           , D.*		    FROM (		            SELECT    record_center_cd, record_center_id, record_center_nm, NVL(folderCnt,0) AS folderCnt, NVL(recordCnt,0) AS recordCnt, recvFlag		            FROM		                (		                    SELECT    a.record_center_cd, a.record_center_id, a.record_center_nm, b.folderCnt, b.recordCnt, DECODE(b.folderCnt,'','N','Y') AS recvFlag		                    FROM         (		                                    SELECT    record_center_cd,record_center_id, record_center_nm		                                    FROM         TB_STRECORDCENTER WHERE 		                                                    record_center_id = '1'		                                     		                                    ) a, 		                                    (		                                    SELECT    record_center_id, COUNT(recordCnt) AS folderCnt, SUM(recordCnt) AS recordCnt		                                    FROM		                                                    ( 		                                                    SELECT    a.record_center_id, COUNT(b.org_cd) AS recordCnt		                                                    FROM         TB_CRINFRMFOLDER a, TB_CRINFRMRECORD b		                                                    WHERE     a.record_center_id = b.record_center_id AND 		                                                                    a.cr_report_infrm_creat_yyyy = '1'		                                                     		                                                    AND            a.creat_sys_cd = b.infrm_creat_sys_cd		                                                    AND            a.org_cd = b.infrm_org_cd		                                                    AND            a.clss_id = b.infrm_clss_id		                                                    AND            a.creat_yyyy = b.infrm_creat_yyyy		                                                    AND            a.folder_reg_seq = b.infrm_folder_reg_seq		                                                    AND            a.ho_no = b.infrm_ho_no		                                                    GROUP BY a.record_center_id, a.creat_sys_cd, a.org_cd, a.clss_id, a.creat_yyyy, a.folder_reg_seq, a.ho_no		                                                    )		                                    GROUP BY    record_center_id		                                    ) b		                    WHERE a.record_center_id = b.record_center_id(+)		                ) WHERE 		                         recvFlag = '1'		              		            ORDER BY record_center_cd     		      ) D		    WHERE ROWNUM <= '1'		) F		WHERE F.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : delete
-- Query Id : deleteCrInfrmDfile

		DELETE FROM TB_CRINFRMDFILE Z				WHERE 		EXISTS (		    SELECT 1		    FROM  TB_CRINFRMFOLDER A		        , TB_CRINFRMRECORD B		    WHERE A.record_center_id = '1'		    AND   A.cr_report_infrm_creat_yyyy = '1'		    AND   A.record_center_id = B.record_center_id		    AND   A.creat_sys_cd = B.infrm_creat_sys_cd		    AND   A.org_cd = B.infrm_org_cd		    AND   A.clss_id = B.infrm_clss_id		    AND   A.creat_yyyy = B.infrm_creat_yyyy		    AND   A.folder_reg_seq = B.infrm_folder_reg_seq		    AND   A.ho_no = B.infrm_ho_no		    AND   B.record_center_id = Z.record_center_id		    AND   B.creat_sys_cd = Z.creat_sys_cd		    AND   B.org_cd= Z.org_cd		    AND   B.creat_reg_dtime = Z.creat_reg_dtime		    AND   B.creat_reg_no = Z.creat_reg_no		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : delete
-- Query Id : deleteCrInfrmDtl

		DELETE FROM TB_CRINFRMRECORD Z				WHERE 		EXISTS (		    SELECT 1		    FROM  TB_CRINFRMFOLDER		    WHERE record_center_id = '1'		    AND   cr_report_infrm_creat_yyyy = '1'		    AND   record_center_id = Z.record_center_id		    AND   creat_sys_cd = Z.infrm_creat_sys_cd	 	    AND   org_cd = Z.infrm_org_cd 		    AND   clss_id = Z.infrm_clss_id		    AND   creat_yyyy = Z.infrm_creat_yyyy		    AND   folder_reg_seq = Z.infrm_folder_reg_seq		    AND   ho_no = Z.infrm_ho_no		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : delete
-- Query Id : deleteCrInfrmTake

		DELETE FROM TB_CRINFRMFOLDERTAKETAKOVR Z				WHERE  		EXISTS (		    SELECT 1		    FROM  TB_CRINFRMFOLDER		    WHERE record_center_id = '1'		    AND   cr_report_infrm_creat_yyyy = '1'		    AND   record_center_id = Z.record_center_id                    AND   creat_sys_cd = Z.creat_sys_cd                    AND   org_cd = Z.org_cd                    AND   clss_id = Z.clss_id                    AND   creat_yyyy = Z.creat_yyyy                    AND   folder_reg_seq = Z.folder_reg_seq                    AND   ho_no = Z.ho_no		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : delete
-- Query Id : deleteCrInfrmMst

		DELETE FROM TB_CRINFRMFOLDER		WHERE record_center_id = '1'		AND   cr_report_infrm_creat_yyyy = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : countfindUnderDeptCreatStateAppr

		SELECT	COUNT(a.org_cd)		FROM						(						SELECT	record_center_cd, MAX(record_center_id) AS record_center_id, 										MAX(record_center_nm) AS record_center_nm,  org_cd						FROM										(										SELECT	a.record_center_id AS record_center_cd, a.creat_sys_cd, 						   								MAX(c.record_center_id) AS record_center_id, 						   								MAX(c.record_center_nm) AS record_center_nm, 						   								a.org_cd										FROM  	 	TB_CRINFRMFOLDER a, TB_CRINFRMRECORD b,														(														SELECT	record_center_cd, record_center_id, record_center_nm														FROM 		TB_STRECORDCENTER 														 WHERE 																		record_center_id = '1'														 														) c										WHERE 	a.record_center_id = c.record_center_id AND 						 								a.cr_report_infrm_creat_yyyy = '1'										 										AND	 		a.record_center_id = b.record_center_id										AND			a.creat_sys_cd = b.infrm_creat_sys_cd										AND			a.org_cd = b.infrm_org_cd										AND			a.clss_id = b.infrm_clss_id										AND			a.creat_yyyy = b.infrm_creat_yyyy										AND			a.folder_reg_seq = b.infrm_folder_reg_seq										AND			a.ho_no = b.infrm_ho_no										GROUP BY	 a.record_center_id, a.creat_sys_cd, a.org_cd, a.clss_id, a.creat_yyyy, a.folder_reg_seq, a.ho_no										) 						GROUP BY	 record_center_cd, creat_sys_cd, org_cd						) a	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findUnderDeptCreatStateAppr

        SELECT F.*        FROM (            SELECT ROWNUM AS rnum                   , D.*            FROM (                  SELECT    a.record_center_cd, a.record_center_id, a.record_center_nm, a.org_cd, b.org_abbr_nm, b.org_nm,                                   a.sys_folderCnt01, a.sys_recordCnt01, a.sys_folderCnt02, a.sys_recordCnt02, a.sys_folderCnt03, a.sys_recordCnt03,a.sys_folderCnt04,a.sys_recordCnt04,                                   a.tot_folderCnt, a.tot_recordCnt                FROM                                (                                SELECT    record_center_cd, MAX(record_center_id) AS record_center_id,                                                 MAX(record_center_nm) AS record_center_nm,  org_cd,                                                    DECODE(creat_sys_cd, '01', SUM(1)) AS sys_folderCnt01,                                                  DECODE(creat_sys_cd, '01', SUM(tot_recordCnt)) AS sys_recordCnt01,                                                  DECODE(creat_sys_cd, '02', SUM(1)) AS sys_folderCnt02,                                                   DECODE(creat_sys_cd, '02', SUM(tot_recordCnt)) AS sys_recordCnt02,                                                   DECODE(creat_sys_cd, '03', SUM(1)) AS sys_folderCnt03,                                                   DECODE(creat_sys_cd, '03', SUM(tot_recordCnt)) AS sys_recordCnt03,                                                   DECODE(creat_sys_cd, '04', SUM(1)) AS sys_folderCnt04,                                                   DECODE(creat_sys_cd, '04', SUM(tot_recordCnt)) AS sys_recordCnt04,                                                   COUNT(1) tot_folderCnt, SUM(tot_recordCnt) tot_recordCnt                                FROM                                                (                                                SELECT    a.record_center_id AS record_center_cd, a.creat_sys_cd,                                                                    MAX(c.record_center_id) AS record_center_id,                                                                    MAX(c.record_center_nm) AS record_center_nm,                                                                    a.org_cd, COUNT(b.org_cd) AS tot_recordCnt                                                FROM           TB_CRINFRMFOLDER a, TB_CRINFRMRECORD b,                                                                (                                                                SELECT    record_center_cd, record_center_id, record_center_nm                                                                FROM         TB_STRECORDCENTER                                                                  WHERE                                                                                 record_center_id = '1'                                                                                                                                 ) c                                                WHERE     a.record_center_id = c.record_center_id AND                                                                  a.cr_report_infrm_creat_yyyy = '1'                                                                                                 AND             a.record_center_id = b.record_center_id                                                AND            a.creat_sys_cd = b.infrm_creat_sys_cd                                                AND            a.org_cd = b.infrm_org_cd                                                AND            a.clss_id = b.infrm_clss_id                                                AND            a.creat_yyyy = b.infrm_creat_yyyy                                                AND            a.folder_reg_seq = b.infrm_folder_reg_seq                                                AND            a.ho_no = b.infrm_ho_no                                                GROUP BY     a.record_center_id, a.creat_sys_cd, a.org_cd, a.clss_id, a.creat_yyyy, a.folder_reg_seq, a.ho_no                                                )                                 GROUP BY     record_center_cd, creat_sys_cd, org_cd                                ) a,                                (                                SELECT    record_center_id, org_cd, org_abbr_nm, org_nm                                FROM       TB_STORG                                 WHERE                                                 record_center_id = '1'                                                                 ) b                WHERE     a.record_center_id = b.record_center_id                AND              a.org_cd = b.org_cd               ) D            WHERE ROWNUM <= '1'        ) F        WHERE F.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : countFindUnderDeptCreatStateApprFolder

		SELECT	COUNT(1) 		FROM  		TB_CRINFRMFOLDER a, 						(SELECT 	a.record_center_id, a.record_center_cd, a.record_center_nm, 									b.org_cd, b.org_nm, b.org_abbr_nm 						FROM 		TB_STRECORDCENTER a, TB_STORG b						WHERE 	a.record_center_id = '1'						AND	  		a.record_center_id = b.record_center_id			  			) b		WHERE 	a.record_center_id = b.record_center_id 		AND   	a.org_cd = b.org_cd AND 				a.cr_report_infrm_creat_yyyy = '1'		  AND 		 		a.presv_term_cd = '1'		  AND 				a.clss_id = '1'		  AND 		  	 	a.org_cd = '1'		  AND 	 					   		a.creat_yyyy = '1'  AND 								a.title LIKE '1' ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findUnderDeptCreatStateApprFolder

        SELECT F.*        FROM (            SELECT ROWNUM AS rnum                   , D.*            FROM (                    SELECT    a.record_center_id, a.org_cd, a.creat_yyyy,                                        a.title, b.org_nm, b.org_abbr_nm, b.record_center_nm,                                        a.presv_term_cd, c.com_cd_nm AS presv_term_nm,                                        a.cr_report_infrm_flag,                                        DECODE(a.cr_report_infrm_flag,'1','통보(온라인)','2','통보(오프라인)','미통보') AS cr_report_infrm_flag_nm                    FROM          TB_CRINFRMFOLDER a,                                     (SELECT     a.record_center_id, a.record_center_cd, a.record_center_nm,                                                 b.org_cd, b.org_nm, b.org_abbr_nm                                     FROM         TB_STRECORDCENTER a, TB_STORG b                                    WHERE     a.record_center_id = '1'                                    AND              a.record_center_id = b.record_center_id                                      ) b,                                      (SELECT     com_cd, com_cd_nm                                       FROM         TB_ZZCOMCD                                       WHERE     com_type_cd = 'RD07'                                       AND             use_flag = '1' ) c                    WHERE     a.record_center_id = b.record_center_id                     AND       a.org_cd = b.org_cd                    AND       a.presv_term_cd = c.com_cd AND                             a.cr_report_infrm_creat_yyyy = '1'                      AND                              a.presv_term_cd = '1'                      AND                              a.clss_id = '1'                      AND                                a.org_cd = '1'                      AND                                                 a.creat_yyyy = '1'  AND                                             a.title LIKE '1'                     ORDER BY a.record_center_id, a.org_cd, a.clss_id, a.creat_yyyy, a.folder_reg_seq, a.ho_no                ) D            WHERE ROWNUM <= '1'        ) F        WHERE F.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findUnderDeptCreatStateApprFileList

		SELECT	record_center_id, cr_report_infrm_creat_yyyy, 						MAX(infrm_mst_file_nm) AS infrm_mst_file_full_nm, 						SUBSTR(MAX(infrm_mst_file_nm),(INSTR(MAX(infrm_mst_file_nm),'/',-1))+1) AS infrm_mst_file_nm,						MAX(infrm_take_file_nm) AS infrm_take_file_full_nm,						SUBSTR(MAX(infrm_take_file_nm),(INSTR(MAX(infrm_take_file_nm),'/',-1))+1) AS infrm_take_file_nm, 						MAX(infrm_dtl_file_nm) AS infrm_dtl_file_full_nm,						SUBSTR(MAX(infrm_dtl_file_nm),(INSTR(MAX(infrm_dtl_file_nm),'/',-1))+1) AS infrm_dtl_file_nm, 						MAX(infrm_dfile_file_nm) AS infrm_dfile_file_full_nm,						SUBSTR(MAX(infrm_dfile_file_nm),(INSTR(MAX(infrm_dfile_file_nm),'/',-1))+1) AS infrm_dfile_file_nm,						MAX(infrm_end_file_nm) AS infrm_end_file_full_nm,						SUBSTR(MAX(infrm_end_file_nm),(INSTR(MAX(infrm_end_file_nm),'/',-1))+1) AS infrm_end_file_nm,						DECODE(MAX(cr_report_infrm_flag),'1','통보(온라인)','2','통보(오프라인)','0','미통보') AS cr_report_infrm_flag_nm,						MAX(cr_report_infrm_dtime) AS cr_report_infrm_dtime,						'0' AS record_center_type		FROM						(						SELECT	record_center_id, cr_report_infrm_creat_yyyy,										DECODE(cr_report_infrm_file_type,'MST', cr_report_infrm_file_nm) AS infrm_mst_file_nm,										DECODE(cr_report_infrm_file_type,'TAKE', cr_report_infrm_file_nm) AS infrm_take_file_nm,										DECODE(cr_report_infrm_file_type,'DTL', cr_report_infrm_file_nm) AS infrm_dtl_file_nm,										DECODE(cr_report_infrm_file_type,'DFILE', cr_report_infrm_file_nm) AS infrm_dfile_file_nm,										DECODE(cr_report_infrm_file_type,'END', cr_report_infrm_file_nm) AS infrm_end_file_nm,										cr_report_infrm_flag, cr_report_infrm_dtime						FROM 		TB_CRINFRMFILE						WHERE  	cr_report_infrm_creat_yyyy = '1'						AND			hupper_record_center_flag = '1'						) 		GROUP BY record_center_id, cr_report_infrm_creat_yyyy		ORDER BY record_center_id, cr_report_infrm_creat_yyyy;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : countFindUnderDeptCreatStateApprState

		SELECT 	COUNT(1)		FROM						(SELECT	cr_report_infrm_yyyy						FROM 										(										SELECT	SUBSTR(a.cr_report_infrm_dtime,1,4) AS cr_report_infrm_yyyy, a.org_cd										FROM  		TB_CRINFRMFOLDER a,														(														SELECT	record_center_cd, record_center_id, record_center_nm														FROM 		TB_STRECORDCENTER  WHERE 																		record_center_id = '1'														 														) b 										WHERE		a.record_center_id = b.record_center_id AND 							  							SUBSTR(a.cr_report_infrm_dtime,1,4) = '1'							  			 							  			AND 			a.cr_report_infrm_flag IN ('1','2')										GROUP BY SUBSTR(a.cr_report_infrm_dtime,1,4), a.org_cd										)						GROUP BY cr_report_infrm_yyyy		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findUnderDeptCreatStateApprState

        SELECT F.*        FROM (            SELECT ROWNUM AS rnum                   , D.*            FROM (   				SELECT 	cr_report_infrm_yyyy, COUNT(org_cd) AS cr_report_org_cd_cnt, 								SUM(folder_cnt) AS folder_cnt, SUM(record_cnt) AS record_cnt,								MAX(cr_report_infrm_user_id) AS cr_report_infrm_user_id, MAX(cr_report_infrm_user_nm) AS cr_report_infrm_user_nm, 								SUBSTR(MAX(cr_report_infrm_dtime),1,8) AS cr_report_infrm_dtime,								DECODE(MAX(cr_report_infrm_flag),'1','통보(온라인)','2','통보(오프라인)','미통보') AS cr_report_infrm_flag_nm				FROM 					(					SELECT	cr_report_infrm_yyyy, MAX(record_center_id), org_cd, COUNT(org_cd) AS folder_cnt, 									SUM(record_cnt) AS record_cnt, MAX(cr_report_infrm_user_id) AS cr_report_infrm_user_id, 									MAX(cr_report_infrm_user_nm) AS cr_report_infrm_user_nm,									MAX(cr_report_infrm_dtime) AS cr_report_infrm_dtime, MAX(cr_report_infrm_flag) AS cr_report_infrm_flag					FROM  											(									SELECT	SUBSTR(MAX(a.cr_report_infrm_dtime),1,4) AS cr_report_infrm_yyyy,													MAX(a.cr_report_infrm_dtime) AS cr_report_infrm_dtime,													a.record_center_id, MAX(c.record_center_cd) AS record_center_cd,  a.org_cd,													COUNT(b.org_cd) AS record_cnt,													MAX(a.cr_report_infrm_user_nm) AS cr_report_infrm_user_nm,													MAX(a.cr_report_infrm_user_id) AS cr_report_infrm_user_id,													MAX(a.cr_report_infrm_flag) AS cr_report_infrm_flag									FROM 		TB_CRINFRMFOLDER a, TB_CRINFRMRECORD b,													(													SELECT	record_center_cd, record_center_id, record_center_nm													FROM 		TB_STRECORDCENTER 													 WHERE 																	record_center_id = '1'													 													) c									WHERE 	a.record_center_id = c.record_center_id AND 													SUBSTR(a.cr_report_infrm_dtime,1,4) = '1'									 									AND	  		a.record_center_id = b.record_center_id									AND			a.creat_sys_cd = b.infrm_creat_sys_cd									AND			a.org_cd = b.infrm_org_cd									AND 			a.clss_id = b.infrm_clss_id									AND			a.creat_yyyy = b.infrm_creat_yyyy									AND			a.folder_reg_seq = b.infrm_folder_reg_seq									AND			a.ho_no = b.infrm_ho_no									AND 			a.cr_report_infrm_flag IN ('1','2')									GROUP BY a.record_center_id, a.creat_sys_cd, a.org_cd, a.clss_id, a.creat_yyyy, a.folder_reg_seq, a.ho_no									)					GROUP BY cr_report_infrm_yyyy, org_cd				)				GROUP BY cr_report_infrm_yyyy				ORDER BY cr_report_infrm_yyyy              ) D            WHERE ROWNUM <= '1'        ) F        WHERE F.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : countFindCreatStateAppr

		SELECT COUNT(1)		FROM (			SELECT D.record_center_id, D.cr_report_org_cd, D.creat_sys_cd			FROM (				(					SELECT A.record_center_id, A.cr_report_org_cd, A.creat_sys_cd					FROM  TB_CRREPORT A					    , TB_CRFOLDER B					WHERE B.record_center_id = '1'					 AND 						B.cr_report_org_cd = '1'					 					AND   B.creat_sys_cd IN ('01','02','04')					 AND 						( ( B.cr_report_yyyy  <=  '1' AND B.cr_report_infrm_flag = '0' )							OR ( B.cr_report_infrm_creat_yyyy = '1' AND B.cr_report_infrm_flag IN ('1','2') ) ) 					AND   A.record_center_id = B.record_center_id					AND   A.cr_report_yyyy = B.cr_report_yyyy					AND   A.cr_report_org_cd = B.cr_report_org_cd					AND   A.creat_sys_cd = B.creat_sys_cd					AND   A.cr_report_sno = B.cr_report_sno				)				UNION ALL				(					SELECT A.record_center_id, A.cr_report_org_cd, A.creat_sys_cd					FROM  TB_CRFOLDER A					WHERE A.record_center_id = '1'					 AND 						A.cr_report_org_cd = '1'					 					AND   A.creat_sys_cd = '03'					 AND 						( ( A.reg_dtime  <=  '1'||'0531' AND A.cr_report_infrm_flag = '0' )							OR ( A.cr_report_infrm_creat_yyyy = '1' AND A.cr_report_infrm_flag IN ('1','2') ) ) 				)			) D			GROUP BY D.record_center_id, D.cr_report_org_cd, D.creat_sys_cd		) E	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findCreatStateAppr

        SELECT J.*        FROM (            SELECT ROWNUM AS rnum                   , I.*            FROM (				SELECT F.record_center_id, F.cr_report_org_cd, F.creat_sys_cd					, F.state_div_cd, F.cr_report_infrm_flag					, tot_folderCnt					, tot_recordCnt					, sys_folderCnt01					, sys_recordCnt01					, sys_folderCnt02					, sys_recordCnt02					, sys_folderCnt03					, sys_recordCnt03					, sys_folderCnt04					, sys_recordCnt04					, DECODE(F.creat_sys_cd,'01',infrm_state,'') sys_infrm_state01					, DECODE(F.creat_sys_cd,'02',infrm_state,'') sys_infrm_state02					, DECODE(F.creat_sys_cd,'03',infrm_state,'') sys_infrm_state03					, DECODE(F.creat_sys_cd,'04',infrm_state,'') sys_infrm_state04					, (SELECT Z.org_nm FROM TB_STORG Z WHERE Z.record_center_id=F.record_center_id AND Z.org_cd=F.cr_report_org_cd) org_nm					, (SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=F.record_center_id AND Z.org_cd=F.cr_report_org_cd) org_abbr_nm					, (SELECT Z.record_center_nm FROM TB_STRECORDCENTER Z WHERE Z.record_center_id=F.record_center_id) record_center_nm  				FROM (					SELECT E.record_center_id, E.cr_report_org_cd, E.creat_sys_cd						, MIN(E.state_div_cd) state_div_cd						, MAX(E.cr_report_infrm_flag) cr_report_infrm_flag						, DECODE(MAX(E.cr_report_infrm_flag),'1','통보완료','2','통보완료',DECODE(MIN(E.state_div_cd),'08','통보가능','통보준비중')) infrm_state						, (SUM(E.sys_folderCnt01)+SUM(E.sys_folderCnt02)+SUM(E.sys_folderCnt03)+SUM(E.sys_folderCnt04)) tot_folderCnt						, (SUM(E.sys_recordCnt01)+SUM(E.sys_recordCnt02)+SUM(E.sys_recordCnt03)+SUM(E.sys_recordCnt04)) tot_recordCnt						, SUM(E.sys_folderCnt01) sys_folderCnt01						, SUM(E.sys_recordCnt01) sys_recordCnt01						, SUM(E.sys_folderCnt02) sys_folderCnt02						, SUM(E.sys_recordCnt02) sys_recordCnt02						, SUM(E.sys_folderCnt03) sys_folderCnt03						, SUM(E.sys_recordCnt03) sys_recordCnt03						, SUM(E.sys_folderCnt04) sys_folderCnt04						, SUM(E.sys_recordCnt04) sys_recordCnt04					FROM (						SELECT D.record_center_id, D.cr_report_org_cd, D.creat_sys_cd, D.state_div_cd, D.cr_report_infrm_flag							, DECODE(D.creat_sys_cd,'01',1,0) sys_folderCnt01							, DECODE(D.creat_sys_cd,'01',tot_recordCnt,0) sys_recordCnt01							, DECODE(D.creat_sys_cd,'02',1,0) sys_folderCnt02							, DECODE(D.creat_sys_cd,'02',tot_recordCnt,0) sys_recordCnt02							, DECODE(D.creat_sys_cd,'03',1,0) sys_folderCnt03							, DECODE(D.creat_sys_cd,'03',tot_recordCnt,0) sys_recordCnt03							, DECODE(D.creat_sys_cd,'04',1,0) sys_folderCnt04							, DECODE(D.creat_sys_cd,'04',tot_recordCnt,0) sys_recordCnt04						FROM (							(								SELECT A.record_center_id, A.cr_report_org_cd, A.creat_sys_cd, A.state_div_cd, A.cr_report_infrm_flag									, (SELECT COUNT(1) FROM TB_CRRECORD C WHERE C.record_center_id=B.record_center_id AND C.folder_recv_seq=B.folder_recv_seq) tot_recordCnt								FROM  TB_CRREPORT A									, TB_CRFOLDER B								WHERE B.record_center_id = '1' AND 									B.cr_report_org_cd = '1'								 								AND   B.creat_sys_cd IN ('01','02','04')								 AND 									( ( B.cr_report_yyyy  <=  '1' AND B.cr_report_infrm_flag = '0' )										OR ( B.cr_report_infrm_creat_yyyy = '1' AND B.cr_report_infrm_flag IN ('1','2') ) ) 								AND   A.record_center_id = B.record_center_id								AND   A.cr_report_yyyy = B.cr_report_yyyy								AND   A.cr_report_org_cd = B.cr_report_org_cd								AND   A.creat_sys_cd = B.creat_sys_cd								AND   A.cr_report_sno = B.cr_report_sno							)							UNION ALL							(								SELECT A.record_center_id, A.cr_report_org_cd, A.creat_sys_cd, '08' state_div_cd, A.cr_report_infrm_flag									, (SELECT COUNT(1) FROM TB_CRRECORD C WHERE C.record_center_id=A.record_center_id AND C.folder_recv_seq=A.folder_recv_seq) tot_recordCnt								FROM  TB_CRFOLDER A								WHERE A.record_center_id = '1' AND 									A.cr_report_org_cd = '1'								 								AND   A.creat_sys_cd = '03'								 AND 									( ( A.reg_dtime  <=  '1'||'0531' AND A.cr_report_infrm_flag = '0' )										OR ( A.cr_report_infrm_creat_yyyy = '1' AND A.cr_report_infrm_flag IN ('1','2') ) ) 							)						) D					) E					GROUP BY E.record_center_id, E.cr_report_org_cd, E.creat_sys_cd				) F				ORDER BY F.record_center_id, F.cr_report_org_cd               ) I            WHERE ROWNUM <= '1'        ) J        WHERE J.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : countFindCreatStateApprFolder

		SELECT COUNT(1)		FROM (			(				SELECT A.record_center_id, A.org_cd, A.folder_recv_seq, A.creat_yyyy, A.title, A.presv_term_cd, A.erecord_flag, A.cr_report_infrm_flag				FROM  TB_CRREPORT B				    , TB_CRFOLDER A				WHERE B.record_center_id = '1'				AND   B.cr_report_org_cd = '1'				AND   A.creat_sys_cd IN ('01','02','04')				 AND 					( ( A.cr_report_yyyy  <=  '1' AND A.cr_report_infrm_flag = '0' )						OR ( A.cr_report_infrm_creat_yyyy = '1' AND A.cr_report_infrm_flag IN ('1','2') ) )  AND 	 							   	A.creat_yyyy = '1'  AND 					(A.clss_div_cd = '1' AND A.clss_id = '1')				  AND 				 	A.presv_term_cd = '1'				  AND 					(A.title LIKE '1' OR A.sub_title LIKE '1')				 				AND   A.record_center_id = B.record_center_id				AND   A.cr_report_yyyy = B.cr_report_yyyy				AND   A.cr_report_org_cd = B.cr_report_org_cd				AND   A.creat_sys_cd = B.creat_sys_cd				AND   A.cr_report_sno = B.cr_report_sno			)			UNION ALL			(				SELECT A.record_center_id, A.org_cd, A.folder_recv_seq, A.creat_yyyy, A.title, A.presv_term_cd, A.erecord_flag, A.cr_report_infrm_flag				FROM  TB_CRFOLDER A				WHERE A.record_center_id = '1'				AND   A.cr_report_org_cd = '1'				AND   A.creat_sys_cd = '03' AND 					( ( A.reg_dtime  <=  '1'||'0531' AND A.cr_report_infrm_flag = '0' )						OR ( A.cr_report_infrm_creat_yyyy = '1' AND A.cr_report_infrm_flag IN ('1','2') ) )  AND 	 							   	A.creat_yyyy = '1'  AND 					(A.clss_div_cd = '1' AND A.clss_id = '1')				  AND 				 	A.presv_term_cd = '1'				  AND 					(A.title LIKE '1' OR A.sub_title LIKE '1')				 			)		) C;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findCreatStateApprFolder

        SELECT J.*        FROM (            SELECT ROWNUM AS rnum                   , I.*            FROM (				SELECT C.record_center_id					, (SELECT Z.record_center_nm FROM TB_STRECORDCENTER Z WHERE Z.record_center_id=C.record_center_id) record_center_nm					, C.folder_recv_seq					, C.org_cd					, (SELECT Z.org_nm FROM TB_STORG Z WHERE Z.record_center_id=C.record_center_id AND Z.org_cd=C.org_cd) org_nm					, (SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=C.record_center_id AND Z.org_cd=C.org_cd) org_abbr_nm					, C.creat_yyyy					, C.title					, C.presv_term_cd					, (CASE WHEN C.presv_term_cd = '01' THEN '1년' WHEN C.presv_term_cd = '03' THEN '3년' WHEN C.presv_term_cd = '05' THEN '5년'		                    WHEN C.presv_term_cd = '10' THEN '10년' WHEN C.presv_term_cd IN ('20','25') THEN '30년' WHEN C.presv_term_cd = '30' THEN '준영구'		                    WHEN C.presv_term_cd = '40' THEN '영구' ELSE '' END) presv_term_nm					, C.erecord_flag					, (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD23' AND Z.com_cd=C.erecord_flag) erecord_flag_nm					, C.cr_report_infrm_flag					, DECODE(C.cr_report_infrm_flag,'1','통보(온라인)','2','통보(오프라인)','미통보') cr_report_infrm_flag_nm  				FROM (					(						SELECT A.record_center_id, A.org_cd, A.folder_recv_seq, A.creat_yyyy, A.title, A.presv_term_cd, A.erecord_flag, A.cr_report_infrm_flag						FROM  TB_CRREPORT B							, TB_CRFOLDER A						WHERE B.record_center_id = '1'						AND   B.cr_report_org_cd = '1'						AND   A.creat_sys_cd IN ('01','02','04')						 AND 							( ( A.cr_report_yyyy  <=  '1' AND A.cr_report_infrm_flag = '0' )								OR ( A.cr_report_infrm_creat_yyyy = '1' AND A.cr_report_infrm_flag IN ('1','2') ) )  AND 	 										A.creat_yyyy = '1'  AND 							(A.clss_div_cd = '1' AND A.clss_id = '1')						  AND 							A.presv_term_cd = '1'						  AND 							(A.title LIKE '1' OR A.sub_title LIKE '1')						 						AND   A.record_center_id = B.record_center_id						AND   A.cr_report_yyyy = B.cr_report_yyyy						AND   A.cr_report_org_cd = B.cr_report_org_cd						AND   A.creat_sys_cd = B.creat_sys_cd						AND   A.cr_report_sno = B.cr_report_sno					)					UNION ALL					(						SELECT A.record_center_id, A.org_cd, A.folder_recv_seq, A.creat_yyyy, A.title, A.presv_term_cd, A.erecord_flag, A.cr_report_infrm_flag						FROM  TB_CRFOLDER A						WHERE A.record_center_id = '1'						AND   A.cr_report_org_cd = '1'						AND   A.creat_sys_cd = '03'						 AND 							( ( A.reg_dtime  <=  '1'||'0531' AND A.cr_report_infrm_flag = '0' )								OR ( A.cr_report_infrm_creat_yyyy = '1' AND A.cr_report_infrm_flag IN ('1','2') ) )  AND 	 										A.creat_yyyy = '1'  AND 							(A.clss_div_cd = '1' AND A.clss_id = '1')						  AND 							A.presv_term_cd = '1'						  AND 							(A.title LIKE '1' OR A.sub_title LIKE '1')						 					)				) C				ORDER BY C.record_center_id, C.org_cd, C.folder_recv_seq            ) I            WHERE ROWNUM <= '1'        ) J        WHERE J.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findCreatStateApprFileList

		SELECT	a.record_center_id, a.cr_report_infrm_creat_yyyy, 						MAX(a.infrm_mst_file_nm) AS infrm_mst_file_full_nm, 						SUBSTR(MAX(a.infrm_mst_file_nm),(INSTR(MAX(a.infrm_mst_file_nm),'/',-1))+1) AS infrm_mst_file_nm,						MAX(a.infrm_take_file_nm) AS infrm_take_file_full_nm,						SUBSTR(MAX(a.infrm_take_file_nm),(INSTR(MAX(a.infrm_take_file_nm),'/',-1))+1) AS infrm_take_file_nm, 						MAX(a.infrm_dtl_file_nm) AS infrm_dtl_file_full_nm,						SUBSTR(MAX(a.infrm_dtl_file_nm),(INSTR(MAX(a.infrm_dtl_file_nm),'/',-1))+1) AS infrm_dtl_file_nm, 						MAX(a.infrm_dfile_file_nm) AS infrm_dfile_file_full_nm,						SUBSTR(MAX(a.infrm_dfile_file_nm),(INSTR(MAX(a.infrm_dfile_file_nm),'/',-1))+1) AS infrm_dfile_file_nm,						MAX(a.infrm_end_file_nm) AS infrm_end_file_full_nm,						SUBSTR(MAX(a.infrm_end_file_nm),(INSTR(MAX(a.infrm_end_file_nm),'/',-1))+1) AS infrm_end_file_nm,						DECODE(MAX(a.cr_report_infrm_flag),'1','통보(온라인)','2','통보(오프라인)','0','미통보') AS cr_report_infrm_flag_nm,						MAX(cr_report_infrm_dtime) AS cr_report_infrm_dtime,						DECODE(MAX(b.record_center_type_cnt),1,'1','2') AS record_center_type		FROM						(						SELECT	'1' AS gubun, a.record_center_id, a.cr_report_infrm_creat_yyyy,										DECODE(a.cr_report_infrm_file_type,'MST', a.cr_report_infrm_file_nm) AS infrm_mst_file_nm,										DECODE(a.cr_report_infrm_file_type,'TAKE', a.cr_report_infrm_file_nm) AS infrm_take_file_nm,										DECODE(a.cr_report_infrm_file_type,'DTL', a.cr_report_infrm_file_nm) AS infrm_dtl_file_nm,										DECODE(a.cr_report_infrm_file_type,'DFILE', a.cr_report_infrm_file_nm) AS infrm_dfile_file_nm,										DECODE(a.cr_report_infrm_file_type,'END', a.cr_report_infrm_file_nm) AS infrm_end_file_nm,										a.cr_report_infrm_flag, a.cr_report_infrm_dtime						FROM 		TB_CRINFRMFILE a,										(SELECT 	record_center_id, record_center_cd										FROM 		TB_STRECORDCENTER										WHERE 	record_center_id = '1'			  							) b						WHERE  	a.record_center_id = b.record_center_cd						AND	    	a.cr_report_infrm_creat_yyyy = '1'						AND			a.hupper_record_center_flag = '2'						) a,						(SELECT	'1' AS gubun, COUNT(1) AS record_center_type_cnt						FROM		TB_STRECORDCENTER						) b		WHERE 	a.gubun = b.gubun		GROUP BY a.record_center_id, a.cr_report_infrm_creat_yyyy	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : countCreatStateApprInfrmFormPagedList

		SELECT COUNT(1)		FROM (		    SELECT record_center_id		    	, infrm_yyyy		    	, infrm_form_type_cd		    	, (SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd='CR03' AND com_cd=infrm_form_type_cd) AS infrm_form_type_nm		    	, file_creat_state		    	, (CASE WHEN file_creat_state='0' THEN '미생성' WHEN file_creat_state='1' THEN '생성중' WHEN file_creat_state='2' THEN '생성완료' END) AS file_creat_state_nm		    	, file_nm		    	, file_path		    	, file_creat_dtime		    FROM  TB_CRINFRMFORM		    WHERE record_center_id = '1'			AND   infrm_yyyy = '1'		    ORDER BY record_center_id, infrm_yyyy, infrm_form_type_cd		) ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : countFindCreatStateApprState

	 	SELECT 	COUNT(1)		FROM						(SELECT	cr_report_infrm_yyyy						FROM 										(										SELECT	cr_report_infrm_yyyy, cr_report_org_cd										FROM  		TB_CRFOLDER 										WHERE 	cr_report_infrm_flag IN ('1','2') AND 														record_center_id = '1'										  AND 							  							cr_report_infrm_yyyy = '1'							  			 										GROUP BY cr_report_infrm_yyyy, cr_report_org_cd										)						GROUP BY cr_report_infrm_yyyy		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findCreatStateApprState

        SELECT J.*        FROM (            SELECT ROWNUM AS rnum                   , I.*            FROM (                SELECT    cr_report_infrm_yyyy,                        COUNT(cr_report_org_cd) AS cr_report_org_cd_cnt,                         SUM(folder_cnt) AS folder_cnt,                        SUM(record_cnt) AS record_cnt,                        MAX(cr_report_infrm_user_id) AS cr_report_infrm_user_id,                        MAX(cr_report_infrm_user_nm) AS cr_report_infrm_user_nm,                         SUBSTR(MAX(cr_report_infrm_dtime),1,8) AS cr_report_infrm_dtime,                        DECODE(MAX(cr_report_infrm_flag),'1','통보(온라인)','2','통보(오프라인)','미통보') AS cr_report_infrm_flag_nm,                        DECODE(MAX(cr_report_infrm_state_flag), '1', '오류', '2', '반려', '3', '인수', '') as cr_report_infrm_state_flag_nm                FROM                        (                        SELECT    cr_report_infrm_yyyy,                                cr_report_org_cd,                                COUNT(folder_recv_seq) AS folder_cnt,                                 SUM(record_cnt) AS record_cnt,                                MAX(cr_report_infrm_user_id) AS cr_report_infrm_user_id,                                 MAX(cr_report_infrm_user_nm) AS cr_report_infrm_user_nm,                                MAX(cr_report_infrm_dtime) AS cr_report_infrm_dtime,                                 MAX(cr_report_infrm_flag) AS cr_report_infrm_flag,                                MAX(cr_report_infrm_state_flag) AS cr_report_infrm_state_flag                        FROM                                (                                SELECT    a.record_center_id,                                         a.folder_recv_seq,                                         MAX(a.cr_report_org_cd) AS cr_report_org_cd,                                        COUNT(b.record_recv_seq) AS record_cnt,                                        MAX(cr_report_infrm_flag) AS cr_report_infrm_flag,                                        MAX(cr_report_infrm_state_flag) AS cr_report_infrm_state_flag,                                        MAX(a.cr_report_infrm_yyyy) AS cr_report_infrm_yyyy,                                        MAX(cr_report_infrm_user_nm) AS cr_report_infrm_user_nm,                                        MAX(cr_report_infrm_user_id) AS cr_report_infrm_user_id,                                        MAX(cr_report_infrm_dtime) AS cr_report_infrm_dtime                                FROM    TB_CRFOLDER a, TB_CRRECORD b                                WHERE    a.record_center_id = b.record_center_id                                AND        a.folder_recv_seq = b.folder_recv_seq                                AND        a.cr_report_infrm_flag IN ('1','2')                                 AND                                         a.record_center_id = '1'                                  AND                                         a.cr_report_infrm_yyyy = '1'                                                                 GROUP BY a.record_center_id, a.folder_recv_seq                                )                        GROUP BY cr_report_infrm_yyyy, cr_report_org_cd                        )                GROUP BY cr_report_infrm_yyyy                ORDER BY cr_report_infrm_yyyy            ) I            WHERE ROWNUM <= '1'        ) J        WHERE J.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findCreatStateApprRecvInfo

		SELECT	a.record_center_id,  a.cr_report_org_cd,  						a.cr_report_sno, a.cr_report_yyyy, 			   			a.state_div_cd, a.recv_ymd, 			   			NVL(b.com_cd_nm,'미접수') AS state_div_cd_nm,			   			NVL(a.recv_folder_cnt,'0') AS recv_folder_cnt, 			   			NVL(a.recv_record_cnt,'0') AS recv_record_cnt,			   			NVL(a.error_recv_folder_cnt,'0') AS error_recv_folder_cnt, 			   			NVL(a.error_recv_record_cnt,'0') AS error_recv_record_cnt,			   			NVL(a.sucess_recv_folder_cnt,'0') AS sucess_recv_folder_cnt, 			   			NVL(a.sucess_recv_record_cnt,'0') AS sucess_recv_record_cnt,			   			NVL(a.rjct_folder_cnt,'0') AS rjct_folder_cnt, 			   			NVL(a.rjct_record_cnt,'0') AS rjct_record_cnt,			   			NVL(a.fin_folder_cnt,'0') AS fin_folder_cnt, 			   			NVL(a.fin_record_cnt,'0') AS fin_record_cnt		FROM 			(						SELECT	a.record_center_id, a.cr_report_yyyy, a.cr_report_org_cd, 				   						a.cr_report_sno, MAX(a.state_div_cd) AS state_div_cd,										MAX(a.recv_ymd) AS recv_ymd,				   						COUNT(b.folder_recv_seq) AS recv_folder_cnt, 				   						SUM(b.recv_record_cnt) AS recv_record_cnt, 				   						SUM(DECODE(b.exam_rslt_cd,'2',1,0)) AS error_recv_folder_cnt,				   						SUM(b.error_recv_record_cnt) AS error_recv_record_cnt,				   						SUM(DECODE(b.exam_rslt_cd,'1',1,null,1,'',1,0)) AS sucess_recv_folder_cnt,				   						SUM(b.sucess_recv_record_cnt) AS sucess_recv_record_cnt,			  	   						SUM(DECODE(b.rjct_flag,'1',1,0)) AS rjct_folder_cnt,				   						SUM(b.rjct_record_cnt) AS rjct_record_cnt,				   						SUM(DECODE(b.take_fin_flag,'1',1,0)) AS fin_folder_cnt,				   						SUM(b.fin_record_cnt) AS fin_record_cnt						FROM   	TB_CRREPORT a,										(										SELECT	a.record_center_id,						   								a.cr_report_yyyy, a.cr_report_org_cd, 												   		a.cr_report_sno, a.folder_recv_seq, 												   		MAX(a.exam_rslt_cd) AS exam_rslt_cd, 												  	 	MAX(a.error_flag) AS error_flag, 												  	 	MAX(a.rjct_flag) AS rjct_flag,												   		MAX(a.take_fin_flag) AS take_fin_flag,												   		COUNT(b.record_recv_seq) AS recv_record_cnt,												   		SUM(DECODE(a.exam_rslt_cd,'2',1,0)) AS error_recv_record_cnt,												   		SUM(DECODE(a.exam_rslt_cd,'1',1,null,1,'',1,0)) AS sucess_recv_record_cnt,												   		SUM(DECODE(a.rjct_flag,'1',1,0)) AS rjct_record_cnt,												   		SUM(DECODE(a.take_fin_flag,'1',1,0)) AS fin_record_cnt										FROM 		TB_CRFOLDER a, TB_CRRECORD b										WHERE 	a.record_center_id = '1' AND 														a.cr_report_org_cd = '1'										 										AND 			a.creat_sys_cd = '1'										AND			a.record_center_id = b.record_center_id										AND			a.folder_recv_seq = b.folder_recv_seq										GROUP BY a.record_center_id, a.cr_report_yyyy, a.cr_report_org_cd, a.cr_report_sno, a.folder_recv_seq										) b						WHERE	  	a.record_center_id = '1' AND 										a.cr_report_org_cd ='1'						 						AND		  a.creat_sys_cd = '1'						AND		  a.record_center_id = b.record_center_id						AND		  a.cr_report_yyyy = b.cr_report_yyyy						AND		  a.cr_report_org_cd = b.cr_report_org_cd						AND		  a.cr_report_sno = b.cr_report_sno						GROUP BY a.record_center_id, a.cr_report_yyyy, a.cr_report_org_cd, a.cr_report_sno						) a,						(SELECT	com_cd, com_cd_nm						FROM 		TB_ZZCOMCD						WHERE 	com_type_cd = 'TK08'						) b		WHERE 	a.record_center_id = '1' AND 						a.cr_report_org_cd = '1'		 		AND	  		a.state_div_cd = b.com_cd(+)		ORDER BY a.record_center_id, a.cr_report_org_cd, a.cr_report_yyyy, a.cr_report_sno;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findStateApprInfrmPossCheck

		SELECT	COUNT(1)		FROM 		TB_CRREPORT  		WHERE 	state_div_cd <> '08'  				AND 			creat_sys_cd IN ('01', '02', '03','04')		AND			record_center_id  =  '1'			AND			cr_report_yyyy  <= '1' 		;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findRecordCenterCnt

		SELECT	COUNT(record_center_cd) AS cnt		FROM 		TB_STRECORDCENTER;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateStateApprReportInfrmClearList

		UPDATE 	TB_CRREPORT		SET 			cr_report_infrm_flag = '0',						cr_report_infrm_yyyy = '',						cr_report_infrm_creat_yyyy  = ''		WHERE 	record_center_id = '1'		AND	  		cr_report_infrm_creat_yyyy = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateStateApprRmsFolderInfrmClearList

		UPDATE 	TB_CRFOLDER		SET 			cr_report_infrm_flag = '0',						cr_report_infrm_yyyy = '',						cr_report_infrm_creat_yyyy = '', 						cr_report_infrm_dtime = '', 						cr_report_infrm_user_id = '', 						cr_report_infrm_user_nm = ''		WHERE 	record_center_id = '1'		AND	  		cr_report_infrm_creat_yyyy = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : delete
-- Query Id : deleteStateApprInfrmFileInfoList

		DELETE 	FROM TB_CRINFRMFILE		WHERE  	record_center_id = '1'		AND	    	cr_report_infrm_creat_yyyy = '1'		AND			hupper_record_center_flag = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : insert
-- Query Id : creatStateApprInfrmInfoList

		INSERT INTO TB_CRINFRMFILE		(			record_center_id, 	cr_report_infrm_creat_yyyy, 	cr_report_infrm_file_type, 		cr_report_infrm_file_nm, 			reg_dtime, 				cr_report_infrm_flag,					hupper_record_center_flag		) VALUES (			'1', 	'1', 	'1', 	'1', 			TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS'), '0', '1'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findStateApprFolderInfrmInfoList

		SELECT record_center_id, creat_sys_cd, org_cd, clss_id, creat_yyyy		     , folder_reg_seq, ho_no, title, folder_type_div_cd, folder_close_yyyy		     , presv_term_cd, creat_user_nm, creat_purps, folder_recv_seq		FROM ( 			(				SELECT record_center_id, creat_sys_cd, org_cd, clss_id, creat_yyyy				     , folder_reg_seq, ho_no, title, folder_type_div_cd, SUBSTR(folder_close_dtime,1,4) AS folder_close_yyyy					 , presv_term_cd, creat_user_nm, '' creat_purps, folder_recv_seq				FROM  TB_CRFOLDER				WHERE record_center_id = '1'				AND   creat_sys_cd IN ('01','02','04')				AND ( ( cr_report_yyyy  <=  '1' AND (cr_report_infrm_flag IS NULL OR cr_report_infrm_flag = '0') )					OR ( cr_report_infrm_creat_yyyy = '1' AND cr_report_infrm_flag IN ('1','2') ) )			)			UNION ALL			(				SELECT record_center_id, creat_sys_cd, org_cd, clss_id, creat_yyyy				     , folder_reg_seq, ho_no, title, folder_type_div_cd, SUBSTR(folder_close_dtime,1,4) AS folder_close_yyyy					 , presv_term_cd, creat_user_nm, '' creat_purps, folder_recv_seq				FROM  TB_CRFOLDER				WHERE record_center_id = '1'				AND   creat_sys_cd = '03'				AND ( ( reg_dtime  <=  '1'||'0531' AND (cr_report_infrm_flag IS NULL OR cr_report_infrm_flag = '0') )					OR ( cr_report_infrm_creat_yyyy = '1' AND cr_report_infrm_flag IN ('1','2') ) )			)		)		ORDER BY record_center_id, creat_sys_cd, org_cd, clss_id, creat_yyyy, folder_reg_seq, ho_no	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findStateApprTakeTakovrInfrmInfoList

		SELECT A.record_center_id, A.creat_sys_cd, A.org_cd, A.clss_id, A.creat_yyyy		     , A.folder_reg_seq, A.ho_no, LPAD(B.sno,6,'0') as take_takovr_sno, B.take_takovr_div_cd, B.take_takovr_org_cd			 , B.take_takovr_creat_dtime		FROM  TB_CRFOLDER A		    , TB_CRFOLDERTAKETAKOVR B		WHERE A.record_center_id = '1'		AND   A.folder_recv_seq = '1'		AND   A.record_center_id = B.record_center_id		AND   A.folder_recv_seq = B.folder_recv_seq		ORDER BY B.record_center_id, B.folder_recv_seq, B.sno;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findStateApprRecordInfrmInfoList

		SELECT B.record_center_id, B.creat_sys_cd, B.org_cd, B.record_reg_div_cd, SUBSTR(B.creat_reg_dtime,1,12) AS creat_reg_dtime		     , B.creat_reg_no, B.dtch_reg_no, B.title, B.aprov_pos_rank_nm, B.duty_chrgr_nm			 , SUBSTR(B.enforc_ymd, 1, 8) enforc_ymd, B.erecord_flag			 , A.creat_sys_cd||'-'||A.org_cd||'-'||A.clss_id||'-'||A.creat_yyyy||'-'||A.folder_reg_seq||'-'||A.ho_no AS infrm_folder_clss_no			 , B.spcl_record_type, B.open_div_cd, B.open_grade, B.oper_read_range_cd		FROM  TB_CRFOLDER A		    , TB_CRRECORD B		WHERE A.record_center_id = '1'		AND   A.folder_recv_seq = '1'		AND   A.record_center_id = B.record_center_id		AND   A.folder_recv_seq = B.folder_recv_seq		ORDER BY A.record_center_id, A.folder_recv_seq, B.record_center_id, B.org_cd, B.record_reg_div_cd, B.creat_yyyy, B.creat_reg_no, B.dtch_reg_no;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findStateApprAttachInfrmInfoList

		SELECT A.record_center_id, A.creat_sys_cd, A.org_cd, SUBSTR(A.creat_reg_dtime,1,12) AS creat_reg_dtime, A.creat_reg_no			, A.dtch_reg_no, B.doc_type_cd, MAX(A.record_reg_div_cd) AS record_reg_div_cd, LPAD(COUNT(1),6,'0') file_cnt, LPAD(SUM(B.file_size),13,'0') file_size 		FROM  TB_CRRECORD A			, TB_CRATTACHFILE B		WHERE A.record_center_id = '1'		AND   A.folder_recv_seq = '1'		AND   B.record_center_Id=A.record_center_id		AND   B.record_recv_seq=A.record_recv_seq		GROUP BY A.record_center_id, A.creat_sys_cd, A.org_cd, A.creat_reg_dtime, A.creat_reg_no, A.dtch_reg_no, B.doc_type_cd		ORDER BY A.record_center_id, A.creat_sys_cd, A.org_cd, A.creat_reg_dtime, A.creat_reg_no, A.dtch_reg_no, B.doc_type_cd;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateStateApprReportInfrmInfo

		UPDATE 	TB_CRREPORT		SET 	cr_report_infrm_creat_yyyy = '1'		WHERE 	record_center_id = '1'		AND     cr_report_yyyy  <=  '1'		AND	  	cr_report_infrm_flag = '0';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateStateApprFolderRecvInfrmInfo

		UPDATE TB_CRFOLDER Z		SET    cr_report_infrm_creat_yyyy = '1'		WHERE 		EXISTS (			SELECT 1			FROM  TB_CRREPORT			WHERE cr_report_yyyy  <=  '1'			AND   record_center_id = '1'			AND	  creat_sys_cd IN ('01','02','04')			AND   (cr_report_infrm_flag IS NULL OR cr_report_infrm_flag = '0')			AND   record_center_id = Z.record_center_id			AND   cr_report_yyyy = Z.cr_report_yyyy			AND   cr_report_org_cd = Z.cr_report_org_cd			AND   cr_report_sno = Z.cr_report_sno		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateStateApprFolderRmsInfrmInfo

		UPDATE TB_CRFOLDER		SET    cr_report_infrm_creat_yyyy = '1'		WHERE  record_center_id = '1'		AND    creat_sys_cd = '03'		AND    (cr_report_infrm_flag IS NULL OR cr_report_infrm_flag = '0')		AND    reg_dtime   <=  '1'||'0531'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateStateApprInfrmEnd

		UPDATE	TB_CRINFRMFILE		SET 	cr_report_infrm_flag =  '1',				cr_report_infrm_dtime = TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS')		WHERE 	record_center_id = '1'		AND	  	cr_report_infrm_creat_yyyy = '1'		AND		hupper_record_center_flag = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateCrFolderRmsInfrmEnd

		UPDATE 	TB_CRFOLDER		SET 	cr_report_infrm_flag = '1',				cr_report_infrm_yyyy = TO_CHAR(SYSDATE,'YYYY'),				cr_report_infrm_user_id = '1',				cr_report_infrm_user_nm = '1',				cr_report_infrm_dtime = TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS')		WHERE 	record_center_id = '1'		AND	  	creat_sys_cd = '03'		AND	  	cr_report_infrm_creat_yyyy = '1'		AND   	cr_report_infrm_flag = '0'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateCrReportInfrmEnd

		UPDATE 	TB_CRREPORT		SET 	cr_report_infrm_flag = '1',				cr_report_infrm_yyyy = TO_CHAR(SYSDATE,'YYYY')		WHERE 	record_center_id = '1'		AND     cr_report_yyyy  <=  '1'		AND	  	cr_report_infrm_flag = '0';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateCrFolderRecvInfrmEnd

		UPDATE 	TB_CRFOLDER Z		SET 	cr_report_infrm_flag = '1',				cr_report_infrm_yyyy = TO_CHAR(SYSDATE,'YYYY'),				cr_report_infrm_user_id = '1',				cr_report_infrm_user_nm = '1',								cr_report_infrm_dtime = TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS')				WHERE 		EXISTS (			SELECT	1			FROM  	TB_CRREPORT			WHERE 	record_center_id = '1'			AND	  	creat_sys_cd IN ('01','02','04')			AND   	cr_report_infrm_creat_yyyy = '1'						AND 	record_center_id = Z.record_center_id			AND 	cr_report_yyyy = Z.cr_report_yyyy			AND 	cr_report_org_cd = Z.cr_report_org_cd			AND  	cr_report_sno = Z.cr_report_sno		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findUnderDeptInfrmFileList

		SELECT		cr_report_infrm_file_nm		FROM		(			SELECT	1 AS gubun, cr_report_infrm_file_nm			FROM 		TB_CRINFRMFILE			WHERE  		record_center_id = '1'			AND			cr_report_infrm_creat_yyyy = '1'			AND			hupper_record_center_flag = '1'			AND			cr_report_infrm_file_nm not LIKE '%_END%'			UNION ALL			SELECT	1 AS gubun, cr_report_infrm_file_nm			FROM 		TB_CRINFRMFILE			WHERE  		record_center_id = '1'			AND			cr_report_infrm_creat_yyyy = '1'			AND			hupper_record_center_flag = '1'			AND			cr_report_infrm_file_nm LIKE '%_END%'		)		ORDER BY gubun		;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findHupperOrgCd

		SELECT	a.hupper_org_cd		FROM 		tb_storg a,			 			(						SELECT	org_cd, record_center_id						FROM	 	tb_stdept						WHERE 	dept_cd = '1'						) b		WHERE a.org_cd = b.org_cd		   AND a.record_center_id = b.record_center_id	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findOfferFolderTypeDivCdCheck

		SELECT  COUNT(com_type_cd)		FROM 	  TB_ZZCOMCD		WHERE   com_type_cd = 'RD01'		AND        com_cd = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findOfferFolderDubCheck

		SELECT  	cr_report_infrm_creat_yyyy		FROM     	TB_CRINFRMFOLDER		WHERE   	record_center_id = '1'		AND			creat_sys_cd = '1'		AND        	org_cd = '1'		AND        	clss_id = '1'		AND        	creat_yyyy = '1'		AND        	folder_reg_seq = '1'		AND		  	ho_no = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : insert
-- Query Id : creatCrInfrmFolder

		INSERT INTO TB_CRINFRMFOLDER		(			record_center_id, 					creat_sys_cd, 				org_cd, 		clss_id, 									creat_yyyy, 			folder_reg_seq, 						ho_no, 							title, 				folder_type_div_cd, 					folder_close_yyyy,			presv_term_cd, 						creat_purps, 				reg_dtime, 	cr_report_infrm_creat_yyyy, 	cr_report_infrm_state,			cr_report_infrm_result_state, cr_report_infrm_dtime, creat_user_nm_accum		) VALUES (			'1',	 '1', 	'1', 												'1', 								'1', 			'1', 		'1', 				'1', 													'1', 				'1',			                        '1', 		'1', 		TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS'), 	'1', 	'1',			'1', '', '1'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findOfferFolderExistCheck

		SELECT	COUNT(*) 		FROM    	TB_CRINFRMFOLDER		WHERE  	record_center_id 	= '1'		AND			creat_sys_cd 		= '1'		AND			org_cd             	= '1'		AND	      	clss_id            	 	= '1'		AND	      	creat_yyyy        	= '1'		AND	      	folder_reg_seq 	= '1'		AND	      	ho_no               	= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : insert
-- Query Id : creatCrInfrmFolderTakeTakovr

		INSERT INTO TB_CRINFRMFOLDERTAKETAKOVR		(			record_center_id, 	creat_sys_cd,	org_cd, 				clss_id, 					creat_yyyy, 			folder_reg_seq, 		ho_no,				take_takovr_sno, 	take_takovr_div_cd, 	take_takovr_org_cd, 			take_takovr_creat_dtime		) VALUES (			'1', 	'1', 	'1', 										'1', 					'1', 			'1', 		'1', 				LPAD('1',6,'0'), 	'1', 	'1', 			TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS')		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : insert
-- Query Id : creatCrInfrmRecord

		INSERT INTO TB_CRINFRMRECORD		(			record_center_id,				creat_sys_cd, 				org_cd, 					creat_reg_dtime, 			creat_reg_no, 			dtch_reg_no, 					record_reg_div_cd, 		title, 							aprov_pos_rank_nm, 	enforc_ymd, 			erecord_flag, 					infrm_folder_clss_no, 	spcl_record_type, 	open_div_cd, 				open_grade, 			duty_chrgr_nm_accum, 	oper_read_range_cd,	infrm_creat_sys_cd,	infrm_org_cd,				infrm_clss_id,			infrm_creat_yyyy,				infrm_folder_reg_seq,		infrm_ho_no		) VALUES (			'1', 			'1', 				'1', 						'1', 		'1', 			'1', 					'1', 			'1', 							'1', 	'1', 			'1', 				'1', 		'1', 	'1', 				'1', 			'1', 	'1',		'1',		'1',				'1',			'1',			'1',		'1'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findOfferRecordDubCheck

		SELECT  	COUNT(*)		FROM     	TB_CRINFRMRECORD		WHERE   	record_center_id 	 = '1'		AND			creat_sys_cd 		 = '1'		AND        	org_cd 				 = '1'		AND			creat_reg_dtime 	 = '1'		AND			creat_reg_no 		 = '1'		AND			dtch_reg_no 		 = '1'		AND 		infrm_folder_clss_no = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findOfferDfileDubCheck

		SELECT  	COUNT(1)		FROM     	TB_CRINFRMDFILE		WHERE   	record_center_id 	= '1'		AND			creat_sys_cd 		= '1'		AND        	org_cd 				= '1'		AND        	creat_reg_dtime 	= '1'		AND        	creat_reg_no 		= '1'		AND			attach_file_seq 	= '1'		AND			doc_type_cd 		= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : insert
-- Query Id : creatCrInfrmDfile

		INSERT INTO TB_CRINFRMDFILE		(			record_center_id, 	creat_sys_cd, 			org_cd, 			creat_reg_dtime, 	creat_reg_no, 			attach_file_seq, 		record_reg_div_cd, 	doc_type_cd, 	file_cnt,	 				infrm_file_size		) VALUES (			'1',	'1', 		'1', 			'1', 		'1', 			'1', 		'1', 	'1', LPAD('1',6,'0'), 	LPAD('1',13,'0')		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateUnderDeptStateApprInfrmClearList

		UPDATE 	TB_CRINFRMFOLDER		SET		cr_report_infrm_state = '0',				cr_report_infrm_dtime = '',				cr_report_infrm_result_state = '0',				cr_report_infrm_flag = '0'		WHERE 	cr_report_infrm_creat_yyyy = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateUnderDeptStateApprInfrmInfo

		UPDATE 	TB_CRINFRMFOLDER		SET 	cr_report_infrm_creat_yyyy = '1'		WHERE 	cr_report_infrm_state = '0'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findUnderDeptStateApprFolderInfrmInfoList

		SELECT record_center_id, creat_sys_cd, org_cd, clss_id, creat_yyyy		     , folder_reg_seq, ho_no, title, folder_type_div_cd, folder_close_yyyy		     , presv_term_cd, creat_user_nm_accum, creat_purps		FROM  TB_CRINFRMFOLDER		WHERE cr_report_infrm_creat_yyyy = '1'		AND   cr_report_infrm_state = '0'  		ORDER BY record_center_id, creat_sys_cd, org_cd, clss_id, creat_yyyy, folder_reg_seq, ho_no	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findUnderDeptStateApprTakeTakovrInfrmInfoList

	 	SELECT A.record_center_id, A.creat_sys_cd, A.org_cd, A.clss_id, A.creat_yyyy		     , A.folder_reg_seq, A.ho_no, LPAD(B.take_takovr_sno,6,'0') as take_takovr_sno, B.take_takovr_div_cd, B.take_takovr_org_cd			 , B.take_takovr_creat_dtime		FROM  TB_CRINFRMFOLDER A		    , TB_CRINFRMFOLDERTAKETAKOVR B		WHERE A.record_center_id = '1'		AND   A.creat_sys_cd = '1'		AND   A.org_cd = '1'		AND   A.clss_id = '1'		AND   A.creat_yyyy = '1'		AND   A.folder_reg_seq = '1'		AND   A.ho_no = '1'		AND   A.record_center_id = B.record_center_id		AND   A.creat_sys_cd = B.creat_sys_cd		AND   A.org_cd = B.org_cd		AND   A.clss_id = B.clss_id		AND   A.creat_yyyy = B.creat_yyyy		AND   A.folder_reg_seq = B.folder_reg_seq		AND   A.ho_no = B.ho_no		ORDER BY A.record_center_id, A.creat_sys_cd, A.org_cd, A.clss_id, A.creat_yyyy, A.folder_reg_seq, A.ho_no, B.take_takovr_sno;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findUnderDeptStateApprRecordInfrmInfoList

			 	SELECT B.record_center_id, B.creat_sys_cd, B.org_cd, B.record_reg_div_cd, SUBSTR(B.creat_reg_dtime,1,12) AS creat_reg_dtime		     , B.creat_reg_no, B.dtch_reg_no, B.title, B.aprov_pos_rank_nm, B.duty_chrgr_nm_accum			 , SUBSTR(B.enforc_ymd, 1, 8) AS enforc_ymd, B.erecord_flag			 , A.creat_sys_cd||'-'||A.org_cd||'-'||A.clss_id||'-'||A.creat_yyyy||'-'||A.folder_reg_seq||'-'||A.ho_no AS infrm_folder_clss_no			 , B.spcl_record_type, B.open_div_cd, B.open_grade, B.oper_read_range_cd		FROM  TB_CRINFRMFOLDER A		    , TB_CRINFRMRECORD B		WHERE A.record_center_id = '1'		AND   A.creat_sys_cd = '1'		AND   A.org_cd = '1'		AND   A.clss_id = '1'		AND   A.creat_yyyy = '1'		AND   A.folder_reg_seq = '1'		AND   A.ho_no = '1'		AND   A.record_center_id = B.record_center_id		AND   A.creat_sys_cd = B.infrm_creat_sys_cd		AND   A.org_cd = B.infrm_org_cd		AND   A.clss_id = B.infrm_clss_id		AND   A.creat_yyyy = B.infrm_creat_yyyy		AND   A.folder_reg_seq = B.infrm_folder_reg_seq		AND   A.ho_no = B.infrm_ho_no		ORDER BY A.record_center_id, A.creat_sys_cd, A.org_cd, B.creat_reg_dtime, B.creat_reg_no, B.dtch_reg_no	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : select
-- Query Id : findUnderDeptStateApprAttachInfrmInfoList

	 	SELECT A.record_center_id, A.creat_sys_cd, A.org_cd, SUBSTR(A.creat_reg_dtime,1,12) AS creat_reg_dtime, A.creat_reg_no		    , A.dtch_reg_no AS attach_file_seq, MAX(A.record_reg_div_cd) record_reg_div_cd, B.doc_type_cd, LPAD(SUM(B.file_cnt),6,'0') file_cnt, LPAD(SUM(B.infrm_file_size),13,'0') infrm_file_size 		FROM  TB_CRINFRMRECORD A		    , TB_CRINFRMDFILE B		WHERE A.record_center_id = '1'		AND   A.infrm_creat_sys_cd = '1'		AND   A.infrm_org_cd = '1'		AND   A.infrm_clss_id = '1'		AND   A.infrm_creat_yyyy = '1'		AND   A.infrm_folder_reg_seq = '1'		AND   A.infrm_ho_no = '1'		AND   B.record_center_id = A.record_center_id		AND   B.creat_sys_cd = A.creat_sys_cd		AND   B.org_cd = A.org_cd		AND   B.creat_reg_dtime = A.creat_reg_dtime		AND   B.creat_reg_no = A.creat_reg_no		GROUP BY A.record_center_id, A.creat_sys_cd, A.org_cd, A.creat_reg_dtime, A.creat_reg_no, A.dtch_reg_no, B.doc_type_cd		ORDER BY A.record_center_id, A.creat_sys_cd, A.org_cd, A.creat_reg_dtime, A.creat_reg_no, A.dtch_reg_no, B.doc_type_cd;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
-- Query    : update
-- Query Id : updateUnderDeptStateApprInfrmFolderEnd

		UPDATE	TB_CRINFRMFOLDER		SET 	cr_report_infrm_flag = '1',				cr_report_infrm_state = '2',				cr_report_infrm_result_state = '0',				cr_report_infrm_user_id = '1',				cr_report_infrm_user_nm = '1',				cr_report_infrm_dtime = TO_CHAR(sys_datetime, 'YYYYMMDDHH24MISS')		WHERE 	cr_report_infrm_creat_yyyy = '1';


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\offer\StateAppr.xml
