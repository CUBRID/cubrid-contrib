-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : creatOrgPlan

	    INSERT INTO TB_TKORGTAKEPLAN (record_center_id	                                 ,take_yyyy	                                 ,take_org_cd	                                 ,creat_sys_cd	                                 ,take_sno	                                 ,recv_div_cd	                                 ,take_req_user_id	                                 ,take_req_user_nm	                                 ,take_state_div_cd	                                 ,reg_dtime)				              VALUES('1'				                    ,'1'				                    ,'1'				                    ,'1'				                    ,(SELECT NVL(MAX(take_sno),0) + 1			  			                FROM TB_TKORGTAKEPLAN			                           WHERE record_center_id = '1'			                             AND take_yyyy        = '1'			                             AND take_org_cd      = '1'			                             AND creat_sys_cd     = '1')			                        ,'2'			                        ,'1'			                        ,'1'			                        ,'1'			                        ,'1')	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findTkOrgTakePlan

		SELECT	take_yyyy, take_org_cd, take_sno		FROM	TB_TKORGTAKEPLAN		WHERE 	record_center_id 	= '1'		AND		reg_dtime 			= '1' ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : countBatchTkFolderList

			SELECT count(1)			FROM tb_tkrecvhist  			WHERE record_center_id = '1'			AND recv_dtime = '1'			AND reg_prog_state_cd = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findBatchTkFolderList

		SELECT 		   record_center_id, folder_take_seq, creat_sys_cd, 		   take_org_cd, clss_div_cd, clss_id, 		   creat_yyyy, folder_reg_seq, ho_no, 		   take_yyyy, take_sno, clss_nm, 		   title, sub_title, folder_type_div_cd, 		   etc_folder_type, folder_detl_type_cd, creat_purps, 		   media_format, medium, folder_size, 		   record_tot_page_cnt, record_reg_cnt, efile_cnt, 		   new_div_cd, chng_flag, old_folder_creat_org_nm, 		   old_folder_clss_no, folder_bispjt_div_cd, bis_clss_path_nm, 		   pjt_clss_path_nm, folder_start_dtime, folder_close_dtime, 		   funsh_end_dtime, funsh_rsn, presv_term_cd, 		   presv_term_fix_rsn, presv_method_cd, presv_area_cd, 		   presv_loc, presv_duty_chrgr_nm, secu_clss_cd, 		   secu_clss_rsn, read_range, take_takovr_div_cd, 		   take_takovr_org_cd, take_takovr_clss_id, take_takovr_creat_yyyy, 		   take_takovr_folder_reg_seq, take_takovr_ho_no, take_takovr_ymd, 		   creat_user_id, creat_user_nm, creat_user_org_cd, 		   creat_user_org_nm, creat_user_pos_rank_nm, creat_dtime, 		   erecord_flag, creat_sys_folder_id, error_flag, 		   virus_flag, virus_dtime, exam_rslt_cd, 		   exam_cont, rjct_flag, rjct_cont, 		   take_fin_flag, reg_dtime, take_type_cd, 		   transf_aprov_user_id, transf_aprov_user_nm, transf_aprov_dtime, 		   org_cd, read_cnt, oper_read_range_cd, 		   sumry, group_presv_term_cd, sml_cd, line_no		FROM TB_TKFOLDER		WHERE record_center_id = '1'		AND creat_sys_cd = '1'		AND reg_dtime = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findBatchTkRecordList

		SELECT 			record_center_id, record_take_seq, folder_take_seq, 			creat_sys_cd, org_cd, creat_yyyy, 			creat_reg_dtime, creat_reg_no, dtch_reg_no, 			title, sub_title, record_reg_div_cd, 			record_detl_type_cd, record_sumry, audvis_record_type, 			audvis_record_sumry, media_format, medium, 			record_size, attach_cnt, record_page_cnt, 			aprov_pos_rank_nm, duty_chrgr_nm, SUBSTR(enforc_ymd, 1, 8) AS enforc_ymd, 			creat_org_reg_no, erecord_flag, old_record_creat_org_nm, 			old_record_docno, old_record_presv_term, presv_loc, 			secu_clss_cd, secu_clss_rsn, read_range, 			open_div_cd, open_grade, part_open_rsn, 			open_limit_part, open_expt_dtime, recver, 			sender, chng_ver_no, doc_distr_no, 			folder_clss_no, spcl_record_type, orign_copy_flag, 			new_div_cd, chng_flag, rjct_flag, 			doc_no, creat_user_id, creat_user_org_cd, 			creat_user_org_nm, creat_user_pos_rank_nm, creat_dtime, 			creat_sys_record_id, error_flag, exam_rslt_cd, 			exam_cont, take_fin_flag, reg_dtime, 			enforc_docno, lang, attach_type_cd, 			media_format_etc, medium_etc, record_sno, 			attach_etc, secret_clss, secret_term, line_no		FROM TB_TKRECORD		WHERE record_center_id = '1'		AND creat_sys_cd = '1'		AND reg_dtime = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findBatchFolderTypeDivCdCheck

		SELECT  count(com_type_cd)		FROM 	  TB_ZZCOMCD		WHERE   com_type_cd = 'RD01'		AND        com_cd = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findComCdCheck

		SELECT  count(com_type_cd)		FROM 	TB_ZZCOMCD		WHERE   com_type_cd = '1'		AND     com_cd = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findFunshRecordFlag

		SELECT  nvl(funsh_record_flag,'2')		FROM 	TB_ZZUNIT		WHERE   record_center_id = '1'		AND     unit_cd = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : isTkFolder

			SELECT count(1)			FROM TB_TKFOLDER			WHERE RECORD_CENTER_ID = '1'			  AND CREAT_SYS_CD     = '1'			  AND ORG_CD           = '1'			  AND CLSS_ID          = '1'			  AND CREAT_YYYY       = '1'			  AND FOLDER_REG_SEQ   = '1'			  AND HO_NO            = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findRdFolderRegSeq

			SELECT 'O'			FROM TB_RDFOLDER			WHERE RECORD_CENTER_ID = '1'			  AND CREAT_SYS_CD     = '1'			  AND ORG_CD           = '1'			  AND CLSS_ID          = '1'			  AND CREAT_YYYY       = '1'			  AND FOLDER_REG_SEQ   = '1'			  AND HO_NO            = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : countFolderRecord

			SELECT count(1)			FROM TB_TKRECORD			WHERE RECORD_CENTER_ID = '1'			  AND FOLDER_TAKE_SEQ  = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : countFolderPage

			SELECT SUM(RECORD_PAGE_CNT)			FROM TB_TKRECORD			WHERE RECORD_CENTER_ID = '1'			  AND FOLDER_TAKE_SEQ  = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : countScanFinRecord

			SELECT COUNT(1)			FROM TB_TKRECORD			WHERE RECORD_CENTER_ID = '1'			  AND FOLDER_TAKE_SEQ  = '1'			  AND SCAN_FIN_FLAG    = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : isTkRecord

			SELECT count(1)			FROM TB_TKRECORD			WHERE RECORD_CENTER_ID = '1'			  AND CREAT_SYS_CD     = '1'			  AND ORG_CD           = '1'			  AND CREAT_YYYY       = '1'			  AND CREAT_REG_NO     = '1'			  AND DTCH_REG_NO      = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findRdRecordRegSeq

			SELECT 'O'			FROM TB_RDRECORD			WHERE RECORD_CENTER_ID = '1'			  AND CREAT_SYS_CD     = '1'			  AND ORG_CD           = '1'			  AND CREAT_YYYY       = '1'			  AND CREAT_REG_NO     = '1'			  AND DTCH_REG_NO      = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findTakeRecordCheck

		SELECT  COUNT(*) 		FROM    TB_TKRECORD		WHERE   creat_yyyy = '1'		AND     creat_reg_no = '1'		AND     dtch_reg_no = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createAutoCheckError

		INSERT INTO TB_TKRECVERROR (record_center_id,recv_dtime		                           ,creat_sys_cd,file_div_cd		                           ,line_no,recv_error_rsn		                           ,reg_prog_state_cd)					        VALUES ('1','1'					               ,'1','1'					               ,'1','1'					               ,'1')	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateTkRecvHist

		UPDATE TB_TKRECVHIST		   SET auto_check_error_cnt=(auto_check_error_cnt+NVL('1',0))			 , reg_prog_state_cd=DECODE(reg_prog_state_cd,'3','3','1')		WHERE record_center_id='1' 		  and recv_dtime='1' 		  and creat_sys_cd='1' 		  and file_div_cd='1' 	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateBatchAutoCheckState

    UPDATE TB_TKRECVHIST       SET reg_prog_state_cd     = '1'          ,state_flag            = NVL('1',0)            ,                   recv_imposs_error_cnt = NVL('1',0)                ,                   auto_check_error_cnt  = NVL('1',0)                ,                   exam_error_cnt        = NVL('1',0)                ,                   total_cnt             = NVL('1',0)                    WHERE record_center_id='1'      AND recv_dtime='1'       AND creat_sys_cd='1'      ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateTkFolderAutoCheck

		UPDATE TB_TKFOLDER		   SET error_flag         = '1'    		     , virus_flag         = '0'     	          	     , virus_dtime        = TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')     	     , scan_prog_state_cd = '1'	 	 WHERE record_center_id   = '1' 		   and folder_take_seq    = '1' ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateTkRecordAutoCheck

		UPDATE TB_TKRECORD		SET error_flag = '1' 		WHERE record_center_id = '1' 		  and record_take_seq = '1' ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findBatchTkSpclList

		SELECT record_center_id, spcl_list_take_seq, folder_take_seq, record_take_seq, spcl_list_loc, 			   folder_clss_no, record_reg_no, seq, spcl_list1, spcl_list2, 			   spcl_list3, mng_dept_cd, take_yyyy, reg_dtime		FROM TB_TKSPCLLIST		WHERE record_center_id = '1'		AND reg_dtime = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : countBatchExamFolderCheckPagedList

		SELECT COUNT(1)  		  FROM TB_TKFOLDER	 	 WHERE record_center_id = '1'		   AND creat_sys_cd = '1'		   AND reg_dtime = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findBatchExamFolderCheckPagedList

	SELECT C.*    FROM (        SELECT ROWNUM AS rnum            , B.*        FROM (		SELECT folder_take_seq		     , clss_id		     , clss_nm		     , title		     , creat_yyyy		     , presv_term_cd		     , presv_term_nm		     , erecord_flag		     , erecord_flag_nm		     , virus_flag		     , error_flag		     , auto_check		     , exam_rslt_cd		     , exam_rslt_nm		     , rjct_flag		     , rjct_cont		     , take_fin_flag		     , status		     , DECODE(status,'4','인수','3','반려',exam_rslt_nm) status_nm		FROM  (			SELECT A.folder_take_seq			     , A.clss_id			     , A.clss_nm			     , A.title			     , A.creat_yyyy			     , A.presv_term_cd				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'RD07'				    AND   C.com_cd = A.presv_term_cd) presv_term_nm			     , A.erecord_flag				 , (SELECT C.com_cd_nm				    FROM TB_ZZCOMCD C				    WHERE C.com_type_cd = 'RD23'				    AND   C.com_cd = A.erecord_flag) erecord_flag_nm			     , A.virus_flag			     , A.error_flag			     /*, DECODE(A.error_flag,'Y','X',DECODE(NVL(A.virus_dtime,''),'','X',DECODE(A.virus_flag,'1','X','O'))) auto_check*/				, DECODE(A.error_flag,'Y','X','O') auto_check			     			     , NVL(A.exam_rslt_cd,'0') exam_rslt_cd			     , (SELECT C.com_cd_nm		            FROM  TB_ZZCOMCD C			        WHERE C.com_type_cd = 'TK03'			        AND   C.com_cd = NVL(A.exam_rslt_cd,'0')) exam_rslt_nm			     , A.rjct_flag			     , A.rjct_cont			     , A.take_fin_flag			     , DECODE(A.take_fin_flag,'1','4',DECODE(A.rjct_flag,'1','3',NVL(A.exam_rslt_cd,'0'))) status			FROM  TB_TKFOLDER A			WHERE A.record_center_id = '1'			AND creat_sys_cd = '1'			AND reg_dtime = '1'			)			ORDER BY folder_take_seq			) B        WHERE ROWNUM <= '1'    ) C    WHERE C.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateBatchRegBatchExam

		UPDATE TB_TKFOLDER		SET   exam_rslt_cd = DECODE(error_flag,'Y','2',DECODE(virus_flag,'1','2','1'))		WHERE record_center_id = '1'		  AND creat_sys_cd = '1'		  AND reg_dtime = '1'	 	  AND (exam_rslt_cd = '0' or exam_rslt_cd is null);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : countBatchRegCheckRecvHist

		SELECT COUNT(1)		FROM  TB_TKFOLDER		WHERE record_center_id = '1'		  AND reg_dtime = '1' 		  AND ( exam_rslt_cd = '0' OR exam_rslt_cd IS NULL )	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : countBatchRegFolderExamError

		SELECT COUNT(1)		  FROM TB_TKFOLDER		 WHERE record_center_id = '1'		   AND reg_dtime = '1'		   AND exam_rslt_cd = '2'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateBatchRegRecvHist

		UPDATE TB_TKRECVHIST		   SET reg_prog_state_cd = '1'					 WHERE record_center_id = '1'		   AND creat_sys_cd = '1'		   AND recv_dtime = '1'		   AND file_div_cd = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findBatchRegBatchTakeFolderList

		SELECT record_center_id		     , folder_take_seq		     , reg_dtime		     , take_yyyy		     , take_org_cd		     , take_sno		FROM TB_TKFOLDER		WHERE record_center_id = '1'		AND creat_sys_Cd = '1'		AND reg_dtime = '1'		AND exam_rslt_cd in ('1','2') 	    AND (take_fin_flag is null OR take_fin_flag = '0')		ORDER BY record_center_id, folder_take_seq	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findBatchTakeFolderId

		SELECT RECORD_CENTER_ID,FOLDER_ID		  FROM TB_RDFOLDER		 WHERE record_center_id = '1'		   AND folder_take_seq  = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolder

		INSERT INTO TB_RDFOLDER	(RECORD_CENTER_ID,FOLDER_ID		                        ,TAKE_YYYY,TAKE_YYYY_SNO		                        ,CREAT_SYS_CD,ORG_CD		                        ,CLSS_DIV_CD,CLSS_ID		                        ,CREAT_YYYY,FOLDER_REG_SEQ		                        ,HO_NO,CLSS_NM		                        ,ORG_TITLE,TITLE,SUB_TITLE		                        ,FOLDER_TYPE_DIV_CD,ETC_FOLDER_TYPE		                        ,FOLDER_DETL_TYPE_CD,CREAT_PURPS		                        ,SUMRY,MEDIA_FORMAT		                        ,MEDIUM,FOLDER_SIZE		                        		                        ,RECORD_TOT_PAGE_CNT,RECORD_REG_CNT		                        ,EFILE_CNT,NEW_DIV_CD		                        ,CHNG_FLAG,OLD_FOLDER_CREAT_ORG_NM		                        ,OLD_FOLDER_CLSS_NO,FOLDER_BISPJT_DIV_CD		                        ,BIS_CLSS_PATH_NM,PJT_CLSS_PATH_NM		                        ,FOLDER_START_DTIME,FOLDER_CLOSE_DTIME		                        ,FUNSH_END_DTIME,FUNSH_RSN		                        ,PRESV_TERM_CD,PRESV_TERM_FIX_RSN		                        ,PRESV_METHOD_CD,PRESV_AREA_CD		                        ,PRESV_LOC,PRESV_DUTY_CHRGR_NM		                        ,SECU_CLSS_CD,SECU_CLSS_RSN		                        ,READ_RANGE,OPEN_DIV_CD		                        ,TAKE_TAKOVR_DIV_CD,TAKE_TAKOVR_ORG_CD		                        ,TAKE_TAKOVR_CLSS_ID,TAKE_TAKOVR_CREAT_YYYY		                        ,TAKE_TAKOVR_FOLDER_REG_SEQ,TAKE_TAKOVR_HO_NO		                        ,TAKE_TAKOVR_YMD,CREAT_USER_ID		                        ,CREAT_USER_NM,CREAT_USER_ORG_CD		                        ,CREAT_USER_ORG_NM,CREAT_USER_POS_RANK_NM		                        ,CREAT_DTIME,CREAT_SYS_FOLDER_ID		                        ,READ_CNT,OPER_READ_RANGE_CD		                        ,CUR_KEEP_ORG_CD                			                    ,FOLDER_KEEP_STATE_CD,EXPT_DISUSE_YYYY			                    ,EXPT_TRANSF_YYYY,EFILE_DEL_FLAG			                    ,ERECORD_FLAG,SCAN_PROG_STATE_CD			                    ,VIRUS_FLAG			                    ,VIRUS_DTIME,MIG_FLAG			                    ,FOLDER_TAKE_SEQ,TAKE_ORG_CD			                    ,REG_DTIME)		                (SELECT  RECORD_CENTER_ID,TO_CHAR(SYSDATE,'YYYY')||LPAD((TB_RDFOLDER_SQ01.nextval), 10, '0') FOLDER_ID			                    ,TAKE_YYYY,TAKE_SNO			                    ,CREAT_SYS_CD,ORG_CD			                    ,CLSS_DIV_CD,CLSS_ID			                    ,CREAT_YYYY,FOLDER_REG_SEQ			                    ,HO_NO,CLSS_NM			                    ,TITLE,TITLE,SUB_TITLE			                    ,FOLDER_TYPE_DIV_CD,ETC_FOLDER_TYPE			                    ,FOLDER_DETL_TYPE_CD,CREAT_PURPS			                    ,SUMRY,MEDIA_FORMAT			                    ,MEDIUM,FOLDER_SIZE			                    ,RECORD_TOT_PAGE_CNT,RECORD_REG_CNT			                    ,EFILE_CNT,NEW_DIV_CD			                    ,CHNG_FLAG,OLD_FOLDER_CREAT_ORG_NM			                    ,OLD_FOLDER_CLSS_NO,FOLDER_BISPJT_DIV_CD			                    ,BIS_CLSS_PATH_NM,PJT_CLSS_PATH_NM			                    ,FOLDER_START_DTIME,FOLDER_CLOSE_DTIME			                    ,FUNSH_END_DTIME,FUNSH_RSN			                    ,DECODE(PRESV_TERM_CD,'20','25',PRESV_TERM_CD) PRESV_TERM_CD,PRESV_TERM_FIX_RSN			                    ,PRESV_METHOD_CD,PRESV_AREA_CD			                    ,PRESV_LOC,PRESV_DUTY_CHRGR_NM			                    ,SECU_CLSS_CD,SECU_CLSS_RSN			                    ,READ_RANGE,'3' OPEN_DIV_CD			                    ,TAKE_TAKOVR_DIV_CD,TAKE_TAKOVR_ORG_CD			                    ,TAKE_TAKOVR_CLSS_ID,TAKE_TAKOVR_CREAT_YYYY			                    ,TAKE_TAKOVR_FOLDER_REG_SEQ,TAKE_TAKOVR_HO_NO			                    ,TAKE_TAKOVR_YMD,CREAT_USER_ID			                    ,CREAT_USER_NM,CREAT_USER_ORG_CD			                    ,CREAT_USER_ORG_NM,CREAT_USER_POS_RANK_NM			                    ,CREAT_DTIME,CREAT_SYS_FOLDER_ID			                    ,READ_CNT, '01' OPER_READ_RANGE_CD			                    ,CUR_KEEP_ORG_CD			                    ,'01' FOLDER_KEEP_STATE_CD								,DECODE( GREATEST(TO_NUMBER(presv_term_cd),19), 19, (TO_NUMBER(DECODE(creat_sys_cd,'01',creat_yyyy,'04',creat_yyyy,NVL(SUBSTR(FOLDER_CLOSE_DTIME,0,4),CREAT_YYYY)))+1+TO_NUMBER(presv_term_cd)) ) expt_disuse_yyyy								,DECODE( LEAST(TO_NUMBER(presv_term_cd),20), 20, (TO_NUMBER(DECODE(creat_sys_cd,'01',creat_yyyy,'04',creat_yyyy,NVL(SUBSTR(FOLDER_CLOSE_DTIME,0,4),CREAT_YYYY)))+10) ) expt_transf_yyyy			                    ,'0' EFILE_DEL_FLAG			                    ,ERECORD_FLAG,SCAN_PROG_STATE_CD			                    ,VIRUS_FLAG,VIRUS_DTIME			                    ,'0' MIG_FLAG			                    ,FOLDER_TAKE_SEQ,TAKE_ORG_CD			                    			                    ,TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			               FROM TB_TKFOLDER			              WHERE RECORD_CENTER_ID = '1'			                AND FOLDER_TAKE_SEQ  = '1'			           )	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderRel

		INSERT INTO TB_RDFOLDERREL		(		    record_center_id, folder_id, rel_type_cd, rel_seq, rel_trgt_id		    , rel_descr, reg_dtime		)		(			SELECT B.record_center_id			     , B.folder_id			     , A.rel_type_cd			     , A.rel_seq			     , A.rel_trgt_id			     , A.rel_descr			     , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKFOLDERREL A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_take_seq = B.folder_take_seq			AND   B.record_center_id = '1'			AND   B.folder_take_seq = '1'			AND   B.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderCreat

		INSERT INTO TB_RDFOLDERCREAT (RECORD_CENTER_ID,FOLDER_ID		                             ,AGENT_SNO,AGENT_TYPE_CD		                             ,AGENT_ID,AGENT_NM		                             ,AGENT_ORG_CD,AGENT_ORG_NM		                             ,AGENT_POS_RANK_NM,DUTY_TYPE_CD		                             ,DUTY_ACT_DTIME,REG_DTIME		                             ,OPIN)		                     (SELECT RECORD_CENTER_ID,(SELECT FOLDER_ID 		                                                 FROM TB_RDFOLDER 		                                                WHERE RECORD_CENTER_ID = '1'		                                                  AND FOLDER_TAKE_SEQ  = '1'		                                                  AND MIG_FLAG         = '0')		                            ,AGENT_SNO,AGENT_TYPE_CD		                            ,AGENT_ID,AGENT_NM		                            ,AGENT_ORG_CD,AGENT_ORG_NM		                            ,AGENT_POS_RANK_NM,DUTY_TYPE_CD		                            ,DUTY_ACT_DTIME,TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		                            ,OPIN 		                       FROM TB_TKFOLDERCREAT		                      WHERE RECORD_CENTER_ID = '1'		                        AND FOLDER_TAKE_SEQ  = '1')	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderPjtClss

		INSERT INTO TB_RDFOLDERPJTCLSS		(		    record_center_id, folder_id, sno, pjt_clss_id		)		(			SELECT B.record_center_id, B.folder_id, A.sno, A.pjt_clss_id			FROM TB_TKFOLDERPJTCLSS A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_take_seq = B.folder_take_seq			AND   B.record_center_id = '1'			AND   B.folder_take_seq = '1'			AND   B.mig_flag = '0'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderTaketakovr

		INSERT INTO TB_RDFOLDERTAKETAKOVR (RECORD_CENTER_ID,FOLDER_ID		                                  ,SNO,TAKE_TAKOVR_DIV_CD		                                  ,TAKE_TAKOVR_CREAT_DTIME,TAKE_TAKOVR_ORG_CD		                                  ,TAKE_TAKOVR_ORG_NM,TAKE_TAKOVR_CLSS_ID		                                  ,TAKE_TAKOVR_CREAT_YYYY,TAKE_TAKOVR_FOLDER_REG_SEQ		                                  ,TAKE_TAKOVR_HO_NO,REG_DTIME		                                  ,TAKE_MNG_NO)		                           (SELECT RECORD_CENTER_ID,(SELECT FOLDER_ID 		                                                       FROM TB_RDFOLDER 		                                                      WHERE RECORD_CENTER_ID = '1'		                                                        AND FOLDER_TAKE_SEQ  = '1'		                                                        AND MIG_FLAG         = '0')		                                  ,SNO,TAKE_TAKOVR_DIV_CD		                                  ,TAKE_TAKOVR_CREAT_DTIME,TAKE_TAKOVR_ORG_CD		                                  ,TAKE_TAKOVR_ORG_NM,TAKE_TAKOVR_CLSS_ID		                                  ,TAKE_TAKOVR_CREAT_YYYY,TAKE_TAKOVR_FOLDER_REG_SEQ		                                  ,TAKE_TAKOVR_HO_NO,TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		                                  ,TAKE_MNG_NO		                              FROM TB_TKFOLDERTAKETAKOVR		                             WHERE RECORD_CENTER_ID = '1'		                               AND FOLDER_TAKE_SEQ  = '1')	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderChngHist

		INSERT INTO TB_RDFOLDERCHNGHIST		(		    record_center_id, folder_id, chng_hist_no, org_cd, clss_id			, creat_yyyy, folder_reg_seq, ho_no, title_bef, title_aft			, folder_type_div_cd_bef, folder_type_div_cd_aft, chng_ymd, chng_rsn, chng_user_nm			, reg_dtime		)		(			SELECT B.record_center_id, B.folder_id, A.chng_hist_no, A.org_cd, A.clss_id				 , A.creat_yyyy, A.folder_reg_seq, A.ho_no, A.title_bef, A.title_aft				 , A.folder_type_div_cd_bef, A.folder_type_div_cd_aft, A.chng_ymd, A.chng_rsn, A.chng_user_nm				 				 , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKFOLDERCHNGHIST A			   , TB_RDFOLDER B			WHERE A.record_center_id = B.record_center_id			AND   A.folder_take_seq = B.folder_take_seq			AND   B.record_center_id = '1'			AND   B.folder_take_seq = '1'			AND   B.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderSpclList

		INSERT INTO TB_RDFOLDERKEYWD		(RECORD_CENTER_ID, FOLDER_ID, KEYWD_LEVL, KEYWD, REG_DTIME)		(			SELECT RECORD_CENTER_ID				,(SELECT FOLDER_ID		                                                       FROM TB_RDFOLDER 		                                                      WHERE RECORD_CENTER_ID = '1'		                                                        AND FOLDER_TAKE_SEQ  = '1'					AND MIG_FLAG         = '0') AS FOLDER_ID				, 1				, REPLACE(KEYWD,'/',',')				                                , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM (				SELECT RECORD_CENTER_ID,MAX (KEYWD) KEYWD				FROM (					SELECT RECORD_CENTER_ID,SUBSTR (SYS_CONNECT_BY_PATH (KEYWD, ','), 2) KEYWD					FROM (						SELECT RECORD_CENTER_ID,SUBSTR(DECODE(NVL(SPCL_LIST1,''),'','',SPCL_LIST1||'/')                                                                             ||DECODE(NVL(SPCL_LIST2,''),'','',SPCL_LIST2||'/')                                                                             ||DECODE(NVL(SPCL_LIST3,''),'','',SPCL_LIST3||'/') 							, 0							, LENGTH(DECODE(NVL(SPCL_LIST1,''),'','',SPCL_LIST1||'/')                                                                                     ||DECODE(NVL(SPCL_LIST2,''),'','',SPCL_LIST2||'/')                                                                                     ||DECODE(NVL(SPCL_LIST3,''),'','',SPCL_LIST3||'/'))-1) KEYWD							, FOLDER_TAKE_SEQ							, TO_NUMBER(SEQ) AS RNUM                                                  FROM TB_TKSPCLLIST                                                  WHERE RECORD_CENTER_ID = '1'                                                   AND FOLDER_TAKE_SEQ  = '1'                                                 ORDER BY SEQ                                                )                                        START WITH RNUM = 1                                  CONNECT BY PRIOR RNUM = RNUM - 1                                                AND PRIOR FOLDER_TAKE_SEQ = FOLDER_TAKE_SEQ				)                                     GROUP BY RECORD_CENTER_ID                                     )  	                            )	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateBatchTakeFolderSpclList

		 UPDATE tb_rdfolderkeywd    		SET keywd = REPLACE (keywd, '/', ',') 		WHERE folder_id =          (SELECT folder_id             FROM tb_rdfolder             WHERE folder_take_seq = '1'              AND record_center_id = '1'           )			  and record_center_id='1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeRecord

		INSERT INTO TB_RDRECORD		(			RECORD_CENTER_ID, RECORD_ID, FOLDER_ID, TAKE_YYYY, TAKE_YYYY_SNO			, CREAT_SYS_CD, ORG_CD, CREAT_YYYY, CREAT_REG_DTIME, CREAT_REG_NO			, DTCH_REG_NO, CLSS_DIV_CD, CLSS_ID, CLSS_NM, ORG_TITLE, TITLE			, SUB_TITLE, RECORD_REG_DIV_CD, RECORD_DETL_TYPE_CD, RECORD_SUMRY, AUDVIS_RECORD_TYPE			, AUDVIS_RECORD_SUMRY, MEDIA_FORMAT, MEDIUM, RECORD_SIZE, ATTACH_CNT			, RECORD_PAGE_CNT, APROV_POS_RANK_NM, DUTY_CHRGR_NM, ENFORC_YMD, CREAT_ORG_REG_NO			, ERECORD_FLAG, OLD_RECORD_CREAT_ORG_NM, OLD_RECORD_DOCNO, OLD_RECORD_PRESV_TERM, PRESV_LOC			, SECU_CLSS_CD, SECU_CLSS_RSN, READ_RANGE, OPEN_DIV_CD, OPEN_GRADE			, PART_OPEN_RSN, OPEN_LIMIT_DATE, OPEN_LIMIT_PART, OPEN_EXPT_DTIME, RECVER, SENDER			, DOC_DISTR_NO, FOLDER_CLSS_NO, SPCL_RECORD_TYPE, NEW_DIV_CD, CHNG_FLAG			, RJCT_FLAG, DOC_NO, DOC_NO_ORG_NM, CREAT_USER_ID, CREAT_USER_ORG_CD, CREAT_USER_ORG_NM			, CREAT_USER_POS_RANK_NM, CREAT_DTIME, CREAT_SYS_RECORD_ID, OPER_READ_RANGE_CD, SCAN_FIN_FLAG			, RECORD_TAKE_SEQ, MIG_FLAG, ENFORC_DOCNO, LANG, REG_DTIME			, RECORD_SNO, RECORD_CLSS_CD, transf_neo_trans_state		)		(			SELECT RECORD_CENTER_ID, TO_CHAR(SYSDATE,'YYYY')||LPAD((TB_RDRECORD_SQ01.NEXTVAL ), 10, '0') RECORD_ID				, FOLDER_ID, TAKE_YYYY, TAKE_YYYY_SNO				, CREAT_SYS_CD, ORG_CD, CREAT_YYYY, CREAT_REG_DTIME, CREAT_REG_NO				, DTCH_REG_NO, CLSS_DIV_CD, CLSS_ID, CLSS_NM, ORG_TITLE, TITLE				, SUB_TITLE, RECORD_REG_DIV_CD, RECORD_DETL_TYPE_CD, RECORD_SUMRY, AUDVIS_RECORD_TYPE				, AUDVIS_RECORD_SUMRY, MEDIA_FORMAT, MEDIUM, RECORD_SIZE, ATTACH_CNT				, RECORD_PAGE_CNT, APROV_POS_RANK_NM, DUTY_CHRGR_NM, ENFORC_YMD, CREAT_ORG_REG_NO				, ERECORD_FLAG, OLD_RECORD_CREAT_ORG_NM, OLD_RECORD_DOCNO, OLD_RECORD_PRESV_TERM, PRESV_LOC				, SECU_CLSS_CD, SECU_CLSS_RSN, READ_RANGE, OPEN_DIV_CD, OPEN_GRADE				, PART_OPEN_RSN, OPEN_LIMIT_DATE, OPEN_LIMIT_PART, OPEN_EXPT_DTIME, RECVER, SENDER				, DOC_DISTR_NO, FOLDER_CLSS_NO, SPCL_RECORD_TYPE, NEW_DIV_CD, CHNG_FLAG				, RJCT_FLAG, DOC_NO, DOC_NO_ORG_NM, CREAT_USER_ID, CREAT_USER_ORG_CD, CREAT_USER_ORG_NM				, CREAT_USER_POS_RANK_NM, CREAT_DTIME, CREAT_SYS_RECORD_ID, OPER_READ_RANGE_CD, SCAN_FIN_FLAG				, RECORD_TAKE_SEQ, MIG_FLAG, ENFORC_DOCNO, LANG, REG_DTIME				, RECORD_SNO, RECORD_CLSS_CD, '0' transf_neo_trans_state			FROM (				(					SELECT RECORD_CENTER_ID, FOLDER_ID, TAKE_YYYY, TAKE_YYYY_SNO					, CREAT_SYS_CD, ORG_CD, CREAT_YYYY, CREAT_REG_DTIME, CREAT_REG_NO					, DTCH_REG_NO, CLSS_DIV_CD, CLSS_ID, CLSS_NM, ORG_TITLE, TITLE					, SUB_TITLE, RECORD_REG_DIV_CD, RECORD_DETL_TYPE_CD, RECORD_SUMRY, AUDVIS_RECORD_TYPE					, AUDVIS_RECORD_SUMRY, MEDIA_FORMAT, MEDIUM, RECORD_SIZE, ATTACH_CNT					, RECORD_PAGE_CNT, APROV_POS_RANK_NM, DUTY_CHRGR_NM, ENFORC_YMD, CREAT_ORG_REG_NO					, ERECORD_FLAG, OLD_RECORD_CREAT_ORG_NM, OLD_RECORD_DOCNO, OLD_RECORD_PRESV_TERM, PRESV_LOC					, SECU_CLSS_CD, SECU_CLSS_RSN, READ_RANGE, OPEN_DIV_CD, OPEN_GRADE					, PART_OPEN_RSN, OPEN_LIMIT_DATE, OPEN_LIMIT_PART, OPEN_EXPT_DTIME, RECVER, SENDER					, DOC_DISTR_NO, FOLDER_CLSS_NO, SPCL_RECORD_TYPE, NEW_DIV_CD, CHNG_FLAG					, RJCT_FLAG, DOC_NO, DOC_NO_ORG_NM, CREAT_USER_ID, CREAT_USER_ORG_CD, CREAT_USER_ORG_NM					, CREAT_USER_POS_RANK_NM, CREAT_DTIME, CREAT_SYS_RECORD_ID, OPER_READ_RANGE_CD, SCAN_FIN_FLAG					, RECORD_TAKE_SEQ, MIG_FLAG, ENFORC_DOCNO, LANG, REG_DTIME					, RECORD_SNO, RECORD_CLSS_CD					FROM (						SELECT A.RECORD_CENTER_ID							, (SELECT C.FOLDER_ID FROM TB_RDFOLDER C WHERE C.RECORD_CENTER_ID=B.RECORD_CENTER_ID AND C.FOLDER_TAKE_SEQ=B.FOLDER_TAKE_SEQ) FOLDER_ID							, B.TAKE_YYYY							, (SELECT C.TAKE_YYYY_SNO FROM TB_RDFOLDER C WHERE C.RECORD_CENTER_ID=B.RECORD_CENTER_ID AND C.FOLDER_TAKE_SEQ=B.FOLDER_TAKE_SEQ) TAKE_YYYY_SNO							, A.CREAT_SYS_CD, A.ORG_CD, A.CREAT_YYYY, A.CREAT_REG_DTIME, A.CREAT_REG_NO							, A.DTCH_REG_NO, B.CLSS_DIV_CD, B.CLSS_ID, B.CLSS_NM, A.TITLE as ORG_TITLE, A.TITLE							, A.SUB_TITLE, A.RECORD_REG_DIV_CD, A.RECORD_DETL_TYPE_CD, A.RECORD_SUMRY, A.AUDVIS_RECORD_TYPE							, A.AUDVIS_RECORD_SUMRY, A.MEDIA_FORMAT, A.MEDIUM, A.RECORD_SIZE, A.ATTACH_CNT							, A.RECORD_PAGE_CNT, A.APROV_POS_RANK_NM, A.DUTY_CHRGR_NM, A.ENFORC_YMD, A.CREAT_ORG_REG_NO							, A.ERECORD_FLAG, A.OLD_RECORD_CREAT_ORG_NM, A.OLD_RECORD_DOCNO, A.OLD_RECORD_PRESV_TERM, A.PRESV_LOC							, A.SECU_CLSS_CD, A.SECU_CLSS_RSN, A.READ_RANGE, A.OPEN_DIV_CD, A.OPEN_GRADE							, A.PART_OPEN_RSN, A.OPEN_LIMIT_DATE, A.OPEN_LIMIT_PART, A.OPEN_EXPT_DTIME, A.RECVER, A.SENDER							, A.DOC_DISTR_NO, A.FOLDER_CLSS_NO, A.SPCL_RECORD_TYPE, A.NEW_DIV_CD, A.CHNG_FLAG							, A.RJCT_FLAG, A.DOC_NO, A.DOC_NO_ORG_NM, A.CREAT_USER_ID, A.CREAT_USER_ORG_CD, A.CREAT_USER_ORG_NM							, A.CREAT_USER_POS_RANK_NM, A.CREAT_DTIME, A.CREAT_SYS_RECORD_ID							, '02' OPER_READ_RANGE_CD							, A.SCAN_FIN_FLAG 														, A.RECORD_TAKE_SEQ, '0' MIG_FLAG, A.ENFORC_DOCNO, A.LANG, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS') REG_DTIME							, A.RECORD_SNO, A.RECORD_CLSS_CD						FROM  TB_TKRECORD A, TB_TKFOLDER B						WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID						AND   A.FOLDER_TAKE_SEQ = B.FOLDER_TAKE_SEQ						AND   B.RECORD_CENTER_ID = '1'						AND   B.FOLDER_TAKE_SEQ = '1'						AND   B.CREAT_SYS_CD = '05'						ORDER BY A.ORG_CD, A.CREAT_YYYY, A.CREAT_REG_NO, A.DTCH_REG_NO					)				)				UNION ALL				(					SELECT RECORD_CENTER_ID, FOLDER_ID, TAKE_YYYY, TAKE_YYYY_SNO					, CREAT_SYS_CD, ORG_CD, CREAT_YYYY, CREAT_REG_DTIME, LPAD(MAX_NO+ROW_NO,13,'0') CREAT_REG_NO					, DTCH_REG_NO, CLSS_DIV_CD, CLSS_ID, CLSS_NM, ORG_TITLE, TITLE					, SUB_TITLE, RECORD_REG_DIV_CD, RECORD_DETL_TYPE_CD, RECORD_SUMRY, AUDVIS_RECORD_TYPE					, AUDVIS_RECORD_SUMRY, MEDIA_FORMAT, MEDIUM, RECORD_SIZE, ATTACH_CNT					, RECORD_PAGE_CNT, APROV_POS_RANK_NM, DUTY_CHRGR_NM, ENFORC_YMD, CREAT_ORG_REG_NO					, ERECORD_FLAG, OLD_RECORD_CREAT_ORG_NM, OLD_RECORD_DOCNO, OLD_RECORD_PRESV_TERM, PRESV_LOC					, SECU_CLSS_CD, SECU_CLSS_RSN, READ_RANGE, OPEN_DIV_CD, OPEN_GRADE					, PART_OPEN_RSN, OPEN_LIMIT_DATE, OPEN_LIMIT_PART, OPEN_EXPT_DTIME, RECVER, SENDER					, DOC_DISTR_NO, FOLDER_CLSS_NO, SPCL_RECORD_TYPE, NEW_DIV_CD, CHNG_FLAG					, RJCT_FLAG, DOC_NO, DOC_NO_ORG_NM, CREAT_USER_ID, CREAT_USER_ORG_CD, CREAT_USER_ORG_NM					, CREAT_USER_POS_RANK_NM, CREAT_DTIME, CREAT_SYS_RECORD_ID, OPER_READ_RANGE_CD, SCAN_FIN_FLAG					, RECORD_TAKE_SEQ, MIG_FLAG, ENFORC_DOCNO, LANG, REG_DTIME					, RECORD_SNO, RECORD_CLSS_CD					FROM (						SELECT A.RECORD_CENTER_ID							, (SELECT C.FOLDER_ID FROM TB_RDFOLDER C WHERE C.RECORD_CENTER_ID=B.RECORD_CENTER_ID AND C.FOLDER_TAKE_SEQ=B.FOLDER_TAKE_SEQ) FOLDER_ID							, B.TAKE_YYYY							, (SELECT C.TAKE_YYYY_SNO FROM TB_RDFOLDER C WHERE C.RECORD_CENTER_ID=B.RECORD_CENTER_ID AND C.FOLDER_TAKE_SEQ=B.FOLDER_TAKE_SEQ) TAKE_YYYY_SNO							, A.CREAT_SYS_CD, A.ORG_CD, A.CREAT_YYYY, A.CREAT_REG_DTIME, A.CREAT_REG_NO							, A.DTCH_REG_NO, B.CLSS_DIV_CD, B.CLSS_ID, B.CLSS_NM, A.TITLE as ORG_TITLE, A.TITLE							, A.SUB_TITLE, A.RECORD_REG_DIV_CD, A.RECORD_DETL_TYPE_CD, A.RECORD_SUMRY, A.AUDVIS_RECORD_TYPE							, A.AUDVIS_RECORD_SUMRY, A.MEDIA_FORMAT, A.MEDIUM, A.RECORD_SIZE, A.ATTACH_CNT							, A.RECORD_PAGE_CNT, A.APROV_POS_RANK_NM, A.DUTY_CHRGR_NM, A.ENFORC_YMD, A.CREAT_ORG_REG_NO							, A.ERECORD_FLAG, A.OLD_RECORD_CREAT_ORG_NM, A.OLD_RECORD_DOCNO, A.OLD_RECORD_PRESV_TERM, A.PRESV_LOC							, A.SECU_CLSS_CD, A.SECU_CLSS_RSN, A.READ_RANGE, A.OPEN_DIV_CD, A.OPEN_GRADE							, A.PART_OPEN_RSN, A.OPEN_LIMIT_DATE, A.OPEN_LIMIT_PART, A.OPEN_EXPT_DTIME, A.RECVER, A.SENDER							, A.DOC_DISTR_NO, A.FOLDER_CLSS_NO, A.SPCL_RECORD_TYPE, A.NEW_DIV_CD, A.CHNG_FLAG							, A.RJCT_FLAG, A.DOC_NO, A.DOC_NO_ORG_NM, A.CREAT_USER_ID, A.CREAT_USER_ORG_CD, A.CREAT_USER_ORG_NM							, A.CREAT_USER_POS_RANK_NM, A.CREAT_DTIME, A.CREAT_SYS_RECORD_ID							, '02' OPER_READ_RANGE_CD							, A.SCAN_FIN_FLAG 							, A.RECORD_TAKE_SEQ, '0' MIG_FLAG, A.ENFORC_DOCNO, A.LANG, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS') REG_DTIME							, A.RECORD_SNO, A.RECORD_CLSS_CD							, NVL((SELECT MAX(TO_NUMBER(NVL(C.CREAT_REG_NO,0))) FROM TB_RDRECORD C WHERE C.RECORD_CENTER_ID=A.RECORD_CENTER_ID AND C.CREAT_SYS_CD=A.CREAT_SYS_CD AND C.ORG_CD=A.ORG_CD AND C.CREAT_YYYY=A.CREAT_YYYY),0) MAX_NO							, ROW_NUMBER() OVER (PARTITION BY A.RECORD_CENTER_ID, A.CREAT_YYYY, A.ORG_CD, A.CREAT_SYS_CD ORDER BY A.RECORD_CENTER_ID, A.CREAT_REG_DTIME, A.CREAT_REG_NO, A.RECORD_TAKE_SEQ) ROW_NO						FROM  TB_TKRECORD A, TB_TKFOLDER B						WHERE A.RECORD_CENTER_ID = B.RECORD_CENTER_ID						AND   A.FOLDER_TAKE_SEQ = B.FOLDER_TAKE_SEQ						AND   B.RECORD_CENTER_ID = '1'						AND   B.FOLDER_TAKE_SEQ = '1'						AND   B.CREAT_SYS_CD = '03'						ORDER BY A.RECORD_CENTER_ID, A.CREAT_REG_DTIME, A.CREAT_REG_NO					)				)			)		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeRecordRel

		INSERT INTO TB_RDRECORDREL		(			record_center_id, record_id, rel_type_cd, rel_seq, rel_trgt_id			, rel_descr, reg_dtime		)		(			SELECT B.record_center_id, B.record_id, A.rel_type_cd, A.rel_seq, A.rel_trgt_id				 				 , A.rel_descr, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKRECORDREL A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_take_seq = B.record_take_seq			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   C.record_center_id = '1'			AND   C.folder_take_seq = '1'			AND   C.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeRecordCreat

		INSERT INTO TB_RDRECORDCREAT		(			record_center_id, record_id, agent_sno, agent_type_cd, agent_id			, agent_nm, agent_org_cd, agent_org_nm, agent_pos_rank_nm, req_state_val			, duty_type_cd, duty_act_dtime, opin, opin_dtime, handl_rslt, reg_dtime		)		(			SELECT B.record_center_id, B.record_id, A.agent_sno, A.agent_type_cd, A.agent_id				 , A.agent_nm, A.agent_org_cd, A.agent_org_nm, A.agent_pos_rank_nm, A.req_state_val				 , A.duty_type_cd, A.duty_act_dtime, A.opin, A.opin_dtime, A.handl_rslt			, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKRECORDCREAT A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_take_seq = B.record_take_seq			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   C.record_center_id = '1'			AND   C.folder_take_seq = '1'			AND   C.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeRecordInfoSrc

		INSERT INTO TB_RDRECORDINFOSRC		(			record_center_id, record_id, info_src_type_cd, info_src_sno, info_src_title			, info_src_id, reg_dtime		)		(			SELECT B.record_center_id, B.record_id, A.info_src_type_cd, A.info_src_sno, A.info_src_title				 				 , A.info_src_id, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKRECORDINFOSRC A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_take_seq = B.record_take_seq			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   C.record_center_id = '1'			AND   C.folder_take_seq = '1'			AND   C.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeRecordChngHist

		INSERT INTO TB_RDRECORDCHNGHIST		(			record_center_id, record_id, chng_hist_no, org_cd, creat_yyyy			, creat_reg_no, dtch_reg_no, creat_reg_ymd_bef, creat_reg_ymd_aft, title_bef			, title_aft, page_cnt_bef, page_cnt_aft, aprov_pos_rank_bef, aprov_pos_rank_aft			, duty_chrgr_bef, duty_chrgr_aft, enforc_ymd_bef, enforc_ymd_aft, recver_bef			, recver_aft, chng_ymd, chng_rsn, chng_user_nm, reg_dtime		)		(			SELECT B.record_center_id, B.record_id, A.chng_hist_no, A.org_cd, A.creat_yyyy				 , A.creat_reg_no, A.dtch_reg_no, A.creat_reg_ymd_bef, A.creat_reg_ymd_aft, A.title_bef				 , A.title_aft, A.page_cnt_bef, A.page_cnt_aft, A.aprov_pos_rank_bef, A.aprov_pos_rank_aft				 , A.duty_chrgr_bef, A.duty_chrgr_aft, A.enforc_ymd_bef, A.enforc_ymd_aft, A.recver_bef				 				 , A.recver_aft, A.chng_ymd, A.chng_rsn, A.chng_user_nm, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			FROM TB_TKRECORDCHNGHIST A			   , TB_RDRECORD B			   , TB_RDFOLDER C			WHERE A.record_center_id = B.record_center_id			AND   A.record_take_seq = B.record_take_seq			AND   B.record_center_id = C.record_center_id			AND   B.folder_id = C.folder_id			AND   B.mig_flag = '0'			AND   C.record_center_id = '1'			AND   C.folder_take_seq = '1'			AND   C.mig_flag = '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateBatchTakeRecordSpclList

         UPDATE tb_rdrecordkeywd    		 SET keywd = REPLACE (keywd, '/', ',')         WHERE record_id in          (SELECT a.record_id             FROM tb_rdrecord a, tb_rdfolder b            WHERE a.record_center_id = '1'              AND a.record_center_id = b.record_center_id               AND a.folder_id=b.folder_id              AND b.folder_take_seq = '1'          )		 AND record_center_id = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findBatchTakeRecordList

		SELECT B.record_center_id			 , B.record_id		     , B.erecord_flag		     , B.record_take_seq		FROM TB_RDFOLDER A		   , TB_RDRECORD B		WHERE A.record_center_id = '1'		AND   A.folder_take_seq = '1'		AND   A.record_center_id = B.record_center_id		AND   A.folder_id = B.folder_id;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findBatchTakeAttachList

		SELECT B.doc_type_cd			 , B.attach_file_path			 , B.file_nm			 , B.agent_nm			 , B.ver			 , NVL(B.attach_file_page_cnt,0) attach_file_page_cnt			 , NVL(B.file_size,0) file_size		FROM TB_RDRECORD A		   , TB_TKATTACHFILE B		WHERE A.record_center_id = '1'		AND   A.record_id = '1'		AND   A.record_center_id = B.record_center_id		AND   A.record_take_seq = B.record_take_seq		ORDER BY B.DOC_TYPE_SNO;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateBatchTakeRecordOrign

		UPDATE TB_RDRECORD		SET   orign_id = '1'		WHERE record_center_id = '1'		AND   record_id = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateBatchTakeRecordFin

		UPDATE TB_TKRECORD		SET   take_fin_flag = '1'		WHERE record_center_id = '1'		AND   record_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateBatchTakeFolderFin

		UPDATE TB_TKFOLDER		SET   take_fin_flag = '1'		WHERE record_center_id = '1'		AND   folder_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderCreatReport

		INSERT INTO TB_CRREPORT		(		    record_center_id, cr_report_yyyy, cr_report_org_cd, creat_sys_cd, cr_report_sno		    , state_div_cd, reg_dtime		)		(		    SELECT record_center_id		        , take_yyyy		        , take_org_cd		        , creat_sys_cd		        , take_yyyy_sno		        , '06'		        , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM  TB_RDFOLDER A		    WHERE record_center_id = '1'		    AND   folder_take_seq = '1'			AND   						    EXISTS (SELECT 1 				   FROM TB_CRREPORT				  WHERE A.record_center_id = record_center_id AND A.take_yyyy = cr_report_yyyy				    AND A.take_org_cd = cr_report_org_cd AND A.creat_sys_cd = creat_sys_cd				    AND A.take_yyyy_sno = cr_report_sno)		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderCreatFolder

		INSERT INTO TB_CRFOLDER		(		    record_center_id, folder_recv_seq, org_cd, cr_report_yyyy, cr_report_org_cd		    , creat_sys_cd, cr_report_sno, clss_div_cd, clss_id, creat_yyyy		    , folder_reg_seq, ho_no, clss_nm, title, sub_title		    , folder_type_div_cd, etc_folder_type, folder_detl_type_cd, creat_purps, media_format		    , medium, folder_size, record_tot_page_cnt, record_reg_cnt, efile_cnt		    , new_div_cd, chng_flag, old_folder_creat_org_nm, old_folder_clss_no, folder_bispjt_div_cd		    , bis_clss_path_nm, pjt_clss_path_nm, folder_start_dtime, folder_close_dtime, funsh_end_dtime		    , funsh_rsn, presv_term_cd, presv_term_fix_rsn, presv_method_cd, presv_area_cd		    , presv_loc, presv_duty_chrgr_nm, secu_clss_cd, secu_clss_rsn, read_range		    , take_takovr_div_cd, take_takovr_org_cd, take_takovr_clss_id, take_takovr_creat_yyyy, take_takovr_folder_reg_seq		    , take_takovr_ho_no, take_takovr_ymd, creat_user_id, creat_user_nm, creat_user_org_cd		    , creat_user_org_nm, creat_user_pos_rank_nm, creat_dtime, erecord_flag, creat_sys_folder_id		    , error_flag, exam_rslt_cd, exam_cont, rjct_flag, rjct_cont		    , take_fin_flag, cr_report_infrm_flag, reg_dtime, group_presv_term_cd, folder_take_seq		    , sumry		)		(		    SELECT record_center_id		        , TO_CHAR(SYSDATE,'YYYY')||LPAD((TB_CRFOLDER_SQ01.nextval), 15, '0')		        , org_cd, take_yyyy, take_org_cd		        , creat_sys_cd, take_yyyy_sno, clss_div_cd, clss_id, creat_yyyy		        , folder_reg_seq, ho_no, clss_nm, title, sub_title		        , folder_type_div_cd, etc_folder_type, folder_detl_type_cd, creat_purps, media_format		        , medium, folder_size, record_tot_page_cnt, record_reg_cnt, efile_cnt		        , new_div_cd, chng_flag, old_folder_creat_org_nm, old_folder_clss_no, folder_bispjt_div_cd		        , bis_clss_path_nm, pjt_clss_path_nm, folder_start_dtime, folder_close_dtime, funsh_end_dtime		        , funsh_rsn, presv_term_cd, presv_term_fix_rsn, presv_method_cd, presv_area_cd		        , presv_loc, presv_duty_chrgr_nm, secu_clss_cd, secu_clss_rsn, read_range		        , take_takovr_div_cd, take_takovr_org_cd, take_takovr_clss_id, take_takovr_creat_yyyy, take_takovr_folder_reg_seq		        , take_takovr_ho_no, take_takovr_ymd, creat_user_id, creat_user_nm, creat_user_org_cd		        , creat_user_org_nm, creat_user_pos_rank_nm, creat_dtime, erecord_flag, creat_sys_folder_id		        , 'N', '0', '', '0', ''		        , '0', '0', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), presv_term_cd, folder_take_seq		        , sumry		    FROM  TB_RDFOLDER		    WHERE record_center_id = '1'		    AND   folder_take_seq = '1'		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderCreatFolderTakeTakovr

		INSERT INTO TB_CRFOLDERTAKETAKOVR		(		    record_center_id, folder_recv_seq, sno, take_takovr_div_cd, take_takovr_creat_dtime		    , take_takovr_org_cd, take_takovr_org_nm, reg_dtime, take_takovr_clss_id, take_takovr_creat_yyyy		    , take_takovr_folder_reg_seq, take_takovr_ho_no		)		(		    SELECT C.record_center_id		        , C.folder_recv_seq		        , A.sno		        , A.take_takovr_div_cd		        , A.take_takovr_creat_dtime		        , A.take_takovr_org_cd		        , A.take_takovr_org_nm		        , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		        , A.take_takovr_clss_id		        , A.take_takovr_creat_yyyy		        , A.take_takovr_folder_reg_seq		        , A.take_takovr_ho_no		    FROM  TB_RDFOLDERTAKETAKOVR A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderCreatFolderChngHist

		INSERT INTO TB_CRFOLDERCHNGHIST		(		    record_center_id, folder_recv_seq, chng_hist_no, org_cd, clss_id		    , creat_yyyy, folder_reg_seq, ho_no, title_bef, title_aft		    , folder_type_div_cd_bef, folder_type_div_cd_aft, chng_ymd, chng_rsn, chng_user_nm		    , reg_dtime		)		(		    SELECT C.record_center_id		        , C.folder_recv_seq		        , A.chng_hist_no		        , A.org_cd		        , A.clss_id		        , A.creat_yyyy		        , A.folder_reg_seq		        , A.ho_no		        , A.title_bef		        , A.title_aft		        , A.folder_type_div_cd_bef		        , A.folder_type_div_cd_aft		        , A.chng_ymd		        , A.chng_rsn		        , A.chng_user_nm		        		        , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM  TB_RDFOLDERCHNGHIST A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderCreatFolderSpclList

		INSERT INTO TB_CRSPCLLIST		(		    record_center_id, spcl_list_reg_no, folder_recv_seq, record_recv_seq, spcl_list_loc		    , folder_clss_no, record_reg_no, seq, spcl_list1, spcl_list2		    , spcl_list3, reg_dtime		)		(		    SELECT C.record_center_id		        , LPAD((TB_CRSPCLLIST_SQ01.nextval), 15, '0') 		        , C.folder_recv_seq		        , '', '1'		        , (C.org_cd||C.clss_id||C.creat_yyyy||C.folder_reg_seq||C.ho_no) folder_clss_no		        , ''		        , ( SELECT LPAD((NVL(MAX(Z.seq),0)+1), 3, '0')		            FROM  TB_CRSPCLLIST Z		        	WHERE Z.folder_recv_seq = C.folder_recv_seq ) seq		        , A.keywd, '', '', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM TB_RDFOLDERKEYWD A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderCreatRecord

		INSERT INTO TB_CRRECORD		(		    record_center_id, record_recv_seq, folder_recv_seq, creat_sys_cd, org_cd		    , creat_yyyy, creat_reg_dtime, creat_reg_no, dtch_reg_no, title		    , sub_title, record_reg_div_cd, record_detl_type_cd, audvis_record_type, audvis_record_sumry		    , media_format, medium, record_size, attach_cnt, record_page_cnt		    , aprov_pos_rank_nm, duty_chrgr_nm, enforc_ymd, creat_org_reg_no, erecord_flag		    , old_record_creat_org_nm, old_record_docno, old_record_presv_term, presv_loc, secu_clss_cd		    , secu_clss_rsn, read_range, open_div_cd, open_grade, part_open_rsn		    , open_limit_part, open_expt_dtime, recver, sender, chng_ver_no		    , doc_distr_no, folder_clss_no, spcl_record_type, orign_copy_flag, new_div_cd		    , chng_flag, rjct_flag, doc_no, creat_sys_record_id, error_flag		    , exam_rslt_cd, take_fin_flag, cr_report_flag, reg_dtime, take_error_cont		    , exam_cont, doc_no_org_nm, open_limit_date		) 		(		    SELECT C.record_center_id		        , TO_CHAR(SYSDATE,'YYYY')||LPAD((TB_CRRECORD_SQ01.nextval), 15, '0')		        , C.folder_recv_seq		        , A.creat_sys_cd, A.org_cd		        , A.creat_yyyy, A.creat_reg_dtime, A.creat_reg_no, A.dtch_reg_no, A.title		        , A.sub_title, A.record_reg_div_cd, A.record_detl_type_cd, A.audvis_record_type, A.audvis_record_sumry		        , A.media_format, A.medium, A.record_size, A.attach_cnt, A.record_page_cnt		        , A.aprov_pos_rank_nm, A.duty_chrgr_nm, A.enforc_ymd, A.creat_org_reg_no, A.erecord_flag		        , A.old_record_creat_org_nm, A.old_record_docno, A.old_record_presv_term, A.presv_loc, A.secu_clss_cd		        , A.secu_clss_rsn, A.read_range, A.open_div_cd, A.open_grade, A.part_open_rsn		        , A.open_limit_part, A.open_expt_dtime, A.recver, A.sender, A.chng_ver_no		        , A.doc_distr_no, A.folder_clss_no, A.spcl_record_type, A.orign_copy_flag, A.new_div_cd		        , A.chng_flag, '0', A.doc_no, A.creat_sys_record_id, 'N'		        		        , '0', '0', '', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS'), ''		        , '', a.doc_no_org_nm, a.open_limit_date		    FROM  TB_RDRECORD A		        , TB_RDFOLDER B		        , TB_CRFOLDER C		    WHERE C.record_center_id = '1'		    AND   C.folder_take_seq = '1'		    AND   C.record_center_id = B.record_center_id		    AND   C.org_cd = B.org_cd		    AND   C.clss_id = B.clss_id		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.folder_reg_seq = B.folder_reg_seq		    AND   C.ho_no = B.ho_no		    AND   B.record_center_id = A.record_center_id		    AND   B.folder_id = A.folder_id		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderCreatRecordChngHist

		INSERT INTO TB_CRRECORDCHNGHIST		(		    record_center_id, record_recv_seq, chng_hist_no, org_cd, creat_yyyy		    , creat_reg_no, dtch_reg_no, creat_reg_ymd_bef, creat_reg_ymd_aft, title_bef		    , title_aft, page_cnt_bef, page_cnt_aft, aprov_pos_rank_bef, aprov_pos_rank_aft		    , duty_chrgr_bef, duty_chrgr_aft, enforc_ymd_bef, enforc_ymd_aft, recver_bef		    , recver_aft, chng_ymd, chng_rsn, chng_user_nm, reg_dtime		)		(		    SELECT C.record_center_id, C.record_recv_seq, A.chng_hist_no, A.org_cd, A.creat_yyyy		        , A.creat_reg_no, A.dtch_reg_no, A.creat_reg_ymd_bef, A.creat_reg_ymd_aft, A.title_bef		        , A.title_aft, A.page_cnt_bef, A.page_cnt_aft, A.aprov_pos_rank_bef, A.aprov_pos_rank_aft		        , A.duty_chrgr_bef, A.duty_chrgr_aft, A.enforc_ymd_bef, A.enforc_ymd_aft, A.recver_bef		        , A.recver_aft, A.chng_ymd, A.chng_rsn, A.chng_user_nm			, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM  TB_RDRECORDCHNGHIST A		        , TB_RDRECORD B		        , TB_CRRECORD C		        , TB_CRFOLDER D		    WHERE D.record_center_id = '1'		    AND   D.folder_take_seq = '1'		    AND   D.record_center_id = C.record_center_id		    AND   D.folder_recv_seq = C.folder_recv_seq		    AND   C.record_center_id = B.record_center_id		    AND   C.org_cd = B.org_cd		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.creat_reg_no = B.creat_reg_no		    AND   C.dtch_reg_no = B.dtch_reg_no		    AND   B.record_center_id = A.record_center_id		    AND   B.record_id = A.record_id		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeFolderCreatRecordSpclList

		INSERT INTO TB_CRSPCLLIST		(		    record_center_id, spcl_list_reg_no, folder_recv_seq, record_recv_seq, spcl_list_loc		    , folder_clss_no, record_reg_no, seq, spcl_list1, spcl_list2		    , spcl_list3, reg_dtime		)		(		    SELECT C.record_center_id		        , LPAD((TB_CRSPCLLIST_SQ01.nextval), 15, '0') 		        , ''		        , C.record_recv_seq, '2', ''		        , (C.creat_yyyy||C.creat_reg_no||C.dtch_reg_no) record_reg_no		        , ( SELECT LPAD((NVL(MAX(Z.seq),0)+1), 3, '0')		            FROM  TB_CRSPCLLIST Z		        	WHERE Z.record_recv_seq = C.record_recv_seq ) seq		        		        , A.keywd, '', '', TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		    FROM TB_RDRECORDKEYWD A		        , TB_RDRECORD B		        , TB_CRRECORD C		        , TB_CRFOLDER D		    WHERE D.record_center_id = '1'		    AND   D.folder_take_seq = '1'		    AND   D.record_center_id = C.record_center_id		    AND   D.folder_recv_seq = C.folder_recv_seq		    AND   C.record_center_id = B.record_center_id		    AND   C.org_cd = B.org_cd		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.creat_reg_no = B.creat_reg_no		    AND   C.dtch_reg_no = B.dtch_reg_no		    AND   B.record_center_id = A.record_center_id		    AND   B.record_id = A.record_id		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : reateBatchTakeFolderCreatAttachFile

		INSERT INTO TB_CRATTACHFILE		(		    record_center_id, record_recv_seq, reg_seq, org_cd, creat_yyyy		    , creat_reg_no, attach_file_seq, attach_file_page_cnt, reg_dtime, doc_type_cd		    , file_size		)		(		    SELECT C.record_center_id, C.record_recv_seq, 1, A.org_cd, A.creat_yyyy		        , B.creat_reg_no, A.attach_file_seq, A.attach_file_page_cnt		        		        , TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')		        , A.doc_type_cd, A.file_size		    FROM  TB_TKATTACHFILE A		        , TB_RDRECORD B		        , TB_CRRECORD C		        , TB_CRFOLDER D		    WHERE D.record_center_id = '1'		    AND   D.folder_take_seq = '1'		    AND   D.record_center_id = C.record_center_id		    AND   D.folder_recv_seq = C.folder_recv_seq		    AND   C.record_center_id = B.record_center_id		    AND   C.org_cd = B.org_cd		    AND   C.creat_yyyy = B.creat_yyyy		    AND   C.creat_reg_no = B.creat_reg_no		    AND   C.dtch_reg_no = B.dtch_reg_no		    AND   B.record_center_id = A.record_center_id		    AND   B.record_take_seq = A.record_take_seq		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateBatchRegBatchTake

		UPDATE TB_TKRECVHIST		   SET reg_prog_state_cd = '1'		   	  ,state_flag 		 = nvl('1',0)		 WHERE record_center_id  = '1'		   AND creat_sys_cd 	 = '1'		   AND recv_dtime 		 = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : findRecordSpclTakeSeq

		SELECT DISTINCT record_take_seq, record_center_id           FROM tb_tkspcllist          WHERE record_take_seq IN (                   SELECT record_take_seq                     FROM tb_tkrecord                    WHERE record_center_id = '1'                      AND folder_take_seq = '1')	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : select
-- Query Id : BatchTakeRecordSpclList

		SELECT    spcl_list1       			|| DECODE (NVL (spcl_list2, ''), '', '', '/' || spcl_list2)       			|| DECODE (NVL (spcl_list3, ''), '', '', '/' || spcl_list3) keywd,       			ROW_NUMBER () OVER (PARTITION BY record_take_seq ORDER BY spcl_list1         		|| DECODE (NVL (spcl_list2, ''), '', '', '/' || spcl_list2)         		|| DECODE (NVL (spcl_list3, ''), '', '', '/' || spcl_list3))rnum,         		(select record_id from tb_rdrecord where record_take_seq = '1') record_id  		FROM tb_tkspcllist 		WHERE record_center_id = '1'   		AND record_take_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : insert
-- Query Id : createBatchTakeRecordSpclList

		INSERT INTO TB_RDRECORDKEYWD		(		    record_center_id, record_id, keywd_levl, keywd, reg_dtime		)		VALUES		(			'1','1','1','1',TO_CHAR (sys_datetime, 'YYYYMMDDHH24MISS')		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
-- Query    : update
-- Query Id : updateOrgPlan

 		UPDATE 	tb_tkorgtakeplan 		SET		take_state_div_cd 	= '1'		WHERE	record_center_id 	= '1'		AND		take_yyyy			= '1'		AND		take_org_cd			= '1'		AND		creat_sys_cd		= '1'		AND		take_sno			= '1' ;


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\take\batchReg\BatchTake.xml
