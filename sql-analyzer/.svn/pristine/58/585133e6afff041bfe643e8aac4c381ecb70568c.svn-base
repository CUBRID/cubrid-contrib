-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\accs\verify\VerifyStatus.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\accs\verify\VerifyStatus.xml
-- Query    : select
-- Query Id : findVerifyStatusByYearList

		SELECT			A.record_center_id		    ,(CASE WHEN A."month" = '01' THEN '1월'		         WHEN A."month" = '02' THEN '2월'		         WHEN A."month" = '03' THEN '3월'		         WHEN A."month" = '04' THEN '4월'		         WHEN A."month" = '05' THEN '5월'		         WHEN A."month" = '06' THEN '6월'		         WHEN A."month" = '07' THEN '7월'		         WHEN A."month" = '08' THEN '8월'		         WHEN A."month" = '09' THEN '9월'		         WHEN A."month" = '10' THEN '10월'		         WHEN A."month" = '11' THEN '11월'		         WHEN A."month" = '12' THEN '12월'		     END) AS "month"		     ,(CASE WHEN A."month" = '01' THEN month1		          WHEN A."month" = '02' THEN month2		          WHEN A."month" = '03' THEN month3		          WHEN A."month" = '04' THEN month4		          WHEN A."month" = '05' THEN month5		          WHEN A."month" = '06' THEN month6		          WHEN A."month" = '07' THEN month7		          WHEN A."month" = '08' THEN month8		          WHEN A."month" = '09' THEN month9		          WHEN A."month" = '10' THEN month10		          WHEN A."month" = '11' THEN month11		          WHEN A."month" = '12' THEN month12		     END) AS verify_cnt		FROM		(		    SELECT B.*,		        SUM(CASE WHEN B."month" = '01' THEN 1 ELSE 0 END) AS month1,		        SUM(CASE WHEN B."month" = '02' THEN 1 ELSE 0 END) AS month2,		        SUM(CASE WHEN B."month" = '03' THEN 1 ELSE 0 END) AS month3,		        SUM(CASE WHEN B."month" = '04' THEN 1 ELSE 0 END) AS month4,		        SUM(CASE WHEN B."month" = '05' THEN 1 ELSE 0 END) AS month5,		        SUM(CASE WHEN B."month" = '06' THEN 1 ELSE 0 END) AS month6,		        SUM(CASE WHEN B."month" = '07' THEN 1 ELSE 0 END) AS month7,		        SUM(CASE WHEN B."month" = '08' THEN 1 ELSE 0 END) AS month8,		        SUM(CASE WHEN B."month" = '09' THEN 1 ELSE 0 END) AS month9,		        SUM(CASE WHEN B."month" = '10' THEN 1 ELSE 0 END) AS month10,		        SUM(CASE WHEN B."month" = '11' THEN 1 ELSE 0 END) AS month11,		        SUM(CASE WHEN B."month" = '12' THEN 1 ELSE 0 END) AS month12    		    FROM 		    (		        SELECT		        	 record_center_id 		        	,SUBSTR(req_dtime,5,2) "month"		        FROM TB_STFORMATVERIFYHIST		        WHERE SUBSTR(req_dtime, 1,4) = '1'		        AND  record_center_id = '1' 		    ) B		    GROUP BY B."month", B.record_center_id		    ORDER BY B."month"		) A		;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\accs\verify\VerifyStatus.xml
-- Query    : select
-- Query Id : countMaxVerifyMonth

		SELECT MAX(C.verify_cnt) AS max_cnt		FROM		(			SELECT				A.record_center_id							    ,(CASE WHEN A."month" = '01' THEN '1월'			         WHEN A."month" = '02' THEN '2월'			         WHEN A."month" = '03' THEN '3월'			         WHEN A."month" = '04' THEN '4월'			         WHEN A."month" = '05' THEN '5월'			         WHEN A."month" = '06' THEN '6월'			         WHEN A."month" = '07' THEN '7월'			         WHEN A."month" = '08' THEN '8월'			         WHEN A."month" = '09' THEN '9월'			         WHEN A."month" = '10' THEN '10월'			         WHEN A."month" = '11' THEN '11월'			         WHEN A."month" = '12' THEN '12월'			     END) AS "month"			     ,(CASE WHEN A."month" = '01' THEN month1			          WHEN A."month" = '02' THEN month2			          WHEN A."month" = '03' THEN month3			          WHEN A."month" = '04' THEN month4			          WHEN A."month" = '05' THEN month5			          WHEN A."month" = '06' THEN month6			          WHEN A."month" = '07' THEN month7			          WHEN A."month" = '08' THEN month8			          WHEN A."month" = '09' THEN month9			          WHEN A."month" = '10' THEN month10			          WHEN A."month" = '11' THEN month11			          WHEN A."month" = '12' THEN month12			     END) AS verify_cnt			FROM			(			    SELECT B.*,			        SUM(CASE WHEN B."month" = '01' THEN 1 ELSE 0 END) AS month1,			        SUM(CASE WHEN B."month" = '02' THEN 1 ELSE 0 END) AS month2,			        SUM(CASE WHEN B."month" = '03' THEN 1 ELSE 0 END) AS month3,			        SUM(CASE WHEN B."month" = '04' THEN 1 ELSE 0 END) AS month4,			        SUM(CASE WHEN B."month" = '05' THEN 1 ELSE 0 END) AS month5,			        SUM(CASE WHEN B."month" = '06' THEN 1 ELSE 0 END) AS month6,			        SUM(CASE WHEN B."month" = '07' THEN 1 ELSE 0 END) AS month7,			        SUM(CASE WHEN B."month" = '08' THEN 1 ELSE 0 END) AS month8,			        SUM(CASE WHEN B."month" = '09' THEN 1 ELSE 0 END) AS month9,			        SUM(CASE WHEN B."month" = '10' THEN 1 ELSE 0 END) AS month10,			        SUM(CASE WHEN B."month" = '11' THEN 1 ELSE 0 END) AS month11,			        SUM(CASE WHEN B."month" = '12' THEN 1 ELSE 0 END) AS month12    			    FROM 			    (			        SELECT			        	 record_center_id 			        	,SUBSTR(req_dtime,5,2) "month"			        FROM TB_STFORMATVERIFYHIST			        WHERE SUBSTR(req_dtime, 1,4) = '1'			        AND  record_center_id = '1' 			    ) B			    GROUP BY B."month", B.record_center_id			    ORDER BY B."month"			) A					) C;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\accs\verify\VerifyStatus.xml
-- Query    : select
-- Query Id : findVerifyStatusByDoc

		SELECT AA.record_center_id			, AA.neo_gubun			, AA.trgt_id			, AA.trgt_title						, AA.req_user_id			, AA.req_user_nm			, AA.req_dtime			, AA.result_div_cd			, AA.result_div_nm			, AA.result_code			, AA.result_msg		FROM (			SELECT Z.*			FROM (				SELECT ROWNUM AS rnum					, Y.*				FROM (					SELECT A.record_center_id						, (CASE WHEN A.neo_gubun = '1' THEN '기록물철'					            WHEN A.neo_gubun = '2' THEN '기록물건'					        END) AS neo_gubun       						, (CASE WHEN A.neo_gubun = '1' THEN (SELECT title from TB_RDFOLDER where folder_id = A.trgt_id)					            WHEN A.neo_gubun = '2' THEN (SELECT title from TB_RDRECORD where record_id = A.trgt_id)					        END) AS trgt_title					    , A.trgt_id					    , A.req_user_id				        , (SELECT user_nm from TB_STUSER where user_id = A.req_user_id) AS req_user_nm				        , A.req_dtime				        , A.result_div_cd						, (CASE WHEN A.result_div_cd = '1' THEN '정상'								WHEN A.result_div_cd = '2' THEN '오류'				        	END) AS result_div_nm				        , A.result_code				        , A.result_msg					FROM  TB_STFORMATVERIFYHIST A					WHERE A.record_center_id = '1'										ORDER BY A.record_center_id, A.req_dtime DESC				) Y				WHERE ROWNUM <= '1'			) Z			WHERE z.rnum >= '1'		) AA		ORDER BY AA.rnum	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\accs\verify\VerifyStatus.xml
-- Query    : select
-- Query Id : countVerifyStatusByDoc

		SELECT COUNT(1)		FROM TB_STFORMATVERIFYHIST A		WHERE A.RECORD_CENTER_ID = '1'	  	;


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\accs\verify\VerifyStatus.xml
