-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : findOpenResortOpinCasePagedList

		SELECT D.*		FROM (			SELECT ROWNUM AS rnum				, C.*			FROM (				SELECT o.resort_case					, o.resort_case_no					, o.record_center_id					, o.record_chrgr_id					, o.record_id					, o.folder_id					, o.clss_id					, o.resort_doc_no					, o.discu_trgt_flag					, o.rslt_reg_ymd					, o.review_org_open_div_cd					, o.review_org_open_opin					, o.review_limit_part					, o.review_open_grade					, o.review_reg_ymd					, o.resort_prog_state_cd					, o.handl_org_cd					, o.resort_yyyy					, o.resort_seq					, o.rslt_decision_cd					, o.expert_org_open_div_cd					, o.expert_org_open_opin					, o.expert_limit_part					, o.expert_open_grade					, o.expert_reg_ymd					, o.handl_open_limit_part					, o.handl_org_chrgr_id					, o.handl_open_reg_ymd					, o.org_cd					, o.handl_org_open_div_cd					, o.handl_org_open_opin					,  o.handl_open_grade					, o.current_open_div_cd					, o.rjct_flag					, o.excel_dwn_flag					, o.center_sel_flag					,r.title					, r.record_detl_type_cd					, r.take_mng_no					, r.open_grade					, r.open_limit_part					, r.part_open_rsn					, r.reg_dtime					, r.last_open_resort_yyyy					, r.creat_sys_cd					, r.creat_yyyy					, r.folder_reg_seq					, r.ho_no					, r.creat_reg_no					, r.dtch_reg_no					, r.creat_reg_dtime					, r.doc_no_nm					, r.open_div_cd					, r.cur_keep_org_cd					, r.folder_keep_state_cd					, r.presv_term_cd					, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = o.handl_org_cd AND record_center_id = '1') as handl_org_nm					, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = o.org_cd AND record_center_id = '1') as dept_abbr_nm					, (SELECT full_org_nm FROM tb_storg WHERE org_cd = o.org_cd AND record_center_id = '1') as full_org_nm					, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = r.cur_keep_org_cd AND record_center_id = '1') as cur_keep_org_nm					, (SELECT close_flag FROM tb_stdept WHERE org_cd = r.cur_keep_org_cd AND record_center_id = '1') as close_flag					, (CASE 				    		WHEN r.clss_div_cd = '1' THEN (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = r.clss_id)				            WHEN r.clss_div_cd = '2' THEN (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = r.record_center_id and unit_cd = r.clss_id)				       END) as bis_clss_nm				    , (SELECT COUNT(*) FROM tb_rdopenhist WHERE record_center_id = o.record_center_id AND record_id = o.record_id) as open_hist_cnt				    , (SELECT title FROM tb_rdfolder WHERE record_center_id = o.record_center_id AND folder_id = o.folder_id) as folder_title				    , (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = r.record_detl_type_cd) as record_detl_type_nm				    , (SELECT COUNT(1) FROM tb_rdopenhist WHERE record_center_id = o.record_center_id AND record_id = o.record_id) AS hist_qty				    , r.open_limit_date				    , o.handl_org_open_ymd				    , o.expert_org_open_ymd				    , o.review_org_open_ymd				FROM tb_rdopenresortopin o					, (					SELECT /*+ index(A, TB_RDRECORD_IX01) */  						a.record_center_id						, a.record_id						, a.title						, a.record_detl_type_cd						, a.take_mng_no						, a.open_grade						, a.open_limit_part						, a.part_open_rsn						, a.reg_dtime						, a.last_open_resort_yyyy						, a.org_cd						, a.creat_reg_no						, a.dtch_reg_no						, a.creat_yyyy						, a.creat_reg_dtime						, a.clss_div_cd						, a.open_div_cd						, f.creat_sys_cd						, f.folder_reg_seq						, f.ho_no, a.clss_id						, f.cur_keep_org_cd						, f.folder_keep_state_cd						, (CASE 				               WHEN ((A.creat_sys_cd='02' OR A.creat_sys_cd='05' OR A.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=SUBSTR(A.creat_reg_no,1,7))=1)				               THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=SUBSTR(A.creat_reg_no,1,7)),SUBSTR(A.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(A.creat_reg_no,8))				               WHEN (A.creat_sys_cd='05' OR ((A.creat_sys_cd='01' OR A.creat_sys_cd='04') AND A.record_detl_type_cd='01'))				               THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=A.org_cd),A.org_cd) ||'-'|| TO_NUMBER(A.doc_no)				               ELSE doc_no				           END) as doc_no_nm				        , f.presv_term_cd				        , a.open_limit_date					FROM tb_rdfolder f, tb_rdrecord a   				    WHERE f.record_center_id = a.record_center_id				    AND	  f.folder_id = a.folder_id				    AND	  f.record_center_id = '1'				    									    				    ) r				WHERE o.record_center_id = '1'				AND	  o.record_id = r.record_id				AND	  o.record_center_id = r.record_center_id				 AND 					o.folder_id = '1'				  AND 					o.resort_yyyy = '1'				  AND 					r.title like '1'				  AND 					o.resort_case = '1'				  AND  						r.cur_keep_org_cd = '1'					   AND 					r.record_detl_type_cd = '1'				  AND   							o.resort_prog_state_cd IN ('3','4','5','6')						    AND 					o.clss_id = '1'				  AND 					o.current_open_div_cd = '1'				  AND 					r.open_grade = '1'				  AND 					r.open_grade = '1'				  AND 					r.open_grade = '1'				  AND 					r.open_grade = '1'				  AND 					o.discu_trgt_flag = '1'				   						AND	o.resort_prog_state_cd in ('5','6','7')					 					AND	 o.discu_trgt_flag = '1'				  AND 					o.handl_org_cd = '1'				  AND  						o.resort_prog_state_cd != '7'					   AND 					o.excel_dwn_flag = '1'				 			) C			WHERE ROWNUM <= '1'		) D		WHERE D.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : countOpenResortOpinCasePagedList

		SELECT COUNT(1)			FROM tb_rdopenresortopin o				, (				SELECT  /*+ index(A, TB_RDRECORD_IX01) */ 					  a.record_center_id					, a.record_id					, a.title					, a.record_detl_type_cd					, a.take_mng_no					, a.open_grade					, a.open_limit_part					, a.part_open_rsn					, a.reg_dtime					, a.last_open_resort_yyyy					, a.org_cd					, a.creat_reg_no					, a.dtch_reg_no					, a.creat_yyyy					, a.creat_reg_dtime					, a.clss_div_cd					, a.open_div_cd					, f.creat_sys_cd					, f.folder_reg_seq					, f.ho_no, a.clss_id					, f.cur_keep_org_cd					, f.folder_keep_state_cd					, (CASE 			               WHEN ((A.creat_sys_cd='02' OR A.creat_sys_cd='05' OR A.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=SUBSTR(A.creat_reg_no,1,7))=1)			               THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=SUBSTR(A.creat_reg_no,1,7)),SUBSTR(A.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(A.creat_reg_no,8))			               WHEN (A.creat_sys_cd='05' OR ((A.creat_sys_cd='01' OR A.creat_sys_cd='04') AND A.record_detl_type_cd='01'))			               THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=A.org_cd),A.org_cd) ||'-'|| TO_NUMBER(A.doc_no)			               ELSE doc_no			           END) as doc_no_nm			        , f.presv_term_cd				FROM tb_rdfolder f, tb_rdrecord a   			    WHERE f.record_center_id = a.record_center_id			    AND	  f.folder_id = a.folder_id			    AND	  f.record_center_id = '1'			    				    ) r			WHERE o.record_center_id = '1'			AND	  o.record_id = r.record_id			AND	  o.record_center_id = r.record_center_id			 AND 				o.folder_id = '1'			  AND 				o.resort_yyyy = '1'			  AND 				r.title like '1'			  AND 				o.resort_case = '1'			  AND  					r.cur_keep_org_cd = '1'				   AND 				r.record_detl_type_cd = '1'			  AND   						o.resort_prog_state_cd IN ('3','4','5','6')					    AND 				o.clss_id = '1'			  AND 				o.current_open_div_cd = '1'			  AND 				r.open_grade = '1'			  AND 				r.open_grade = '1'			  AND 				r.open_grade = '1'			  AND 				r.open_grade = '1'			  AND 				o.discu_trgt_flag = '1'			   					AND	o.resort_prog_state_cd in ('5','6','7')				 				AND	 o.discu_trgt_flag = '1'			  AND 				o.handl_org_cd = '1'			  AND  					o.resort_prog_state_cd != '7'				   AND 				o.excel_dwn_flag = '1'			 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : findOpenResortOpinCaseList

		SELECT o.resort_case			, o.resort_case_no			, o.record_center_id			, o.record_chrgr_id			, o.record_id			, o.folder_id			, o.clss_id			, o.resort_doc_no			, o.discu_trgt_flag			, o.rslt_reg_ymd			, o.review_org_open_div_cd			, o.review_org_open_opin			, o.review_limit_part			, o.review_open_grade			, o.review_reg_ymd			, o.resort_prog_state_cd			, o.handl_org_cd			, o.resort_yyyy			, o.resort_seq			, o.rslt_decision_cd			, o.expert_org_open_div_cd			, o.expert_org_open_opin			, o.expert_limit_part			, o.expert_open_grade			, o.expert_reg_ymd			, o.handl_open_limit_part			, o.handl_org_chrgr_id			, o.handl_open_reg_ymd			, o.org_cd			, o.handl_org_open_div_cd			, o.handl_org_open_opin			,  o.handl_open_grade			, o.current_open_div_cd			, o.rjct_flag			, o.excel_dwn_flag			, o.center_sel_flag			,r.title			, r.record_detl_type_cd			, r.take_mng_no			, r.open_grade			, r.open_limit_part			, r.part_open_rsn			, r.reg_dtime			, r.last_open_resort_yyyy			, r.creat_sys_cd			, r.creat_yyyy			, r.folder_reg_seq			, r.ho_no			, r.creat_reg_no			, r.dtch_reg_no			, r.creat_reg_dtime			, r.doc_no_nm			, r.open_div_cd			, r.cur_keep_org_cd			, r.folder_keep_state_cd			, r.presv_term_cd			, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = o.handl_org_cd AND record_center_id = '1') as handl_org_nm			, (SELECT full_org_nm FROM tb_storg WHERE org_cd = o.org_cd AND record_center_id = '1') as full_org_nm		    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = o.org_cd AND record_center_id = '1') as dept_abbr_nm			, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = r.cur_keep_org_cd AND record_center_id = '1') as cur_keep_org_nm			, (SELECT close_flag FROM tb_stdept WHERE org_cd = r.cur_keep_org_cd AND record_center_id = '1') as close_flag			, (CASE 		    		WHEN r.clss_div_cd = '1' THEN (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = r.clss_id)		            WHEN r.clss_div_cd = '2' THEN (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = r.record_center_id and unit_cd = r.clss_id)		       END) as bis_clss_nm		    , (SELECT COUNT(*) FROM tb_rdopenhist WHERE record_center_id = o.record_center_id AND record_id = o.record_id) as open_hist_cnt		    , (SELECT title FROM tb_rdfolder WHERE record_center_id = o.record_center_id AND folder_id = o.folder_id) as folder_title		    , (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = r.record_detl_type_cd) as record_detl_type_nm		    , (SELECT COUNT(1) FROM tb_rdopenhist WHERE record_center_id = o.record_center_id AND record_id = o.record_id) AS hist_qty		    , r.open_limit_date		    , o.handl_org_open_ymd		    , o.expert_org_open_ymd		    , o.review_org_open_ymd	    		FROM tb_rdopenresortopin o			, (			SELECT /*+ index(A, TB_RDRECORD_IX01) */ 			      a.record_center_id				, a.record_id				, a.title				, a.record_detl_type_cd				, a.take_mng_no				, a.open_grade				, a.open_limit_part				, a.part_open_rsn				, a.reg_dtime				, a.last_open_resort_yyyy				, a.org_cd				, a.creat_reg_no				, a.dtch_reg_no				, a.creat_yyyy				, a.creat_reg_dtime				, a.clss_div_cd				, a.open_div_cd				, f.creat_sys_cd				, f.folder_reg_seq				, f.ho_no, a.clss_id				, f.cur_keep_org_cd				, f.folder_keep_state_cd				, (CASE 		               WHEN ((A.creat_sys_cd='02' OR A.creat_sys_cd='05' OR A.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=SUBSTR(A.creat_reg_no,1,7))=1)		               THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=SUBSTR(A.creat_reg_no,1,7)),SUBSTR(A.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(A.creat_reg_no,8))		               WHEN (A.creat_sys_cd='05' OR ((A.creat_sys_cd='01' OR A.creat_sys_cd='04') AND A.record_detl_type_cd='01'))		               THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=A.org_cd),A.org_cd) ||'-'|| TO_NUMBER(A.doc_no)		               ELSE doc_no		           END) as doc_no_nm		        , (case when f.presv_term_cd = '01' then '1년' when f.presv_term_cd = '03' then '3년' when f.presv_term_cd = '05' then '5년'		           when f.presv_term_cd = '10' then '10년' when f.presv_term_cd in ('20','25') then '30년' when f.presv_term_cd = '30' then '준영구'		           when f.presv_term_cd = '40' then '영구' else '' end) presv_term_nm		          		  		        , SUBSTR(a.open_limit_date,1,8) open_limit_date				, f.presv_term_cd presv_term_cd 			FROM  tb_rdfolder f, tb_rdrecord a   		    WHERE f.record_center_id = a.record_center_id		    AND	  f.folder_id = a.folder_id		    AND	  a.record_center_id = '1'			    ) r		WHERE o.record_center_id = '1'		AND	  o.record_id = r.record_id		AND	  o.record_center_id = r.record_center_id		 AND 			o.folder_id = '1'		  AND 			o.resort_yyyy = '1'		  AND 			r.title like '1'		  AND 			o.resort_case = '1'		  AND  				r.cur_keep_org_cd = '1'			   AND 			r.record_detl_type_cd = '1'		  AND   					o.resort_prog_state_cd IN ('3','4','5','6')				    AND 			o.clss_id = '1'		  AND 			o.current_open_div_cd = '1'		  AND 			r.open_grade = '1'		  AND 			r.open_grade = '1'		  AND 			r.open_grade = '1'		  AND 			r.open_grade = '1'		  AND 			o.discu_trgt_flag = '1'		   				AND	o.resort_prog_state_cd in ('5','6','7')			 			AND	 o.discu_trgt_flag = '1'		  AND 			o.handl_org_cd = '1'		  AND  				o.resort_prog_state_cd != '7'			   AND 			o.excel_dwn_flag = '1'		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : findOpenResortOpin

		SELECT o.resort_case			, o.resort_case_no			, o.record_center_id			, o.record_chrgr_id			, o.record_id			, o.folder_id			, o.clss_id			, o.resort_doc_no			, o.discu_trgt_flag			, o.rslt_reg_ymd			, o.review_org_open_div_cd			, o.review_org_open_opin			, o.review_limit_part			, o.review_open_grade			, o.review_reg_ymd			, o.resort_prog_state_cd			, o.handl_org_cd			, o.resort_yyyy			, o.resort_seq			, o.rslt_decision_cd			, o.expert_org_open_div_cd			, o.expert_org_open_opin			, o.expert_limit_part			, o.expert_open_grade			, o.expert_reg_ymd			, o.handl_open_limit_part			, o.handl_org_chrgr_id			, o.handl_open_reg_ymd			, o.org_cd			, o.handl_org_open_div_cd			, o.handl_org_open_opin			, o.handl_open_grade			, o.current_open_div_cd			, o.rjct_flag			, o.excel_dwn_flag			, o.center_sel_flag			, r.title			, r.record_detl_type_cd			, r.take_mng_no			, r.open_grade			, r.open_limit_part			, r.part_open_rsn			, r.reg_dtime			, r.last_open_resort_yyyy			, r.creat_sys_cd			, r.creat_yyyy			, r.folder_reg_seq			, r.ho_no			, r.creat_reg_no			, r.dtch_reg_no			, r.creat_reg_dtime			, r.doc_no_nm			, r.open_div_cd			, r.presv_term_cd			, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = o.handl_org_cd AND record_center_id = '1') as handl_org_nm, r.cur_keep_org_cd, r.folder_keep_state_cd			, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = o.org_cd AND record_center_id = '1') as dept_abbr_nm			, (SELECT full_org_nm FROM tb_storg WHERE org_cd = o.org_cd AND record_center_id = '1') as full_org_nm			, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = r.cur_keep_org_cd AND record_center_id = '1') as cur_keep_org_nm			, (SELECT close_flag FROM tb_stdept WHERE org_cd = o.org_cd AND record_center_id = '1') as close_flag			, (CASE WHEN r.clss_div_cd = '1' THEN (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = r.clss_id)		            WHEN r.clss_div_cd = '2' THEN (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = r.record_center_id and unit_cd = o.clss_id)		       END) as bis_clss_nm		    , (SELECT COUNT(*) FROM tb_rdopenhist WHERE record_center_id = o.record_center_id AND record_id = o.record_id) as open_hist_cnt		    , (SELECT title FROM tb_rdfolder WHERE record_center_id = o.record_center_id AND folder_id = o.folder_id) as folder_title		    , (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = r.record_detl_type_cd) as record_detl_type_nm		    , (SELECT COUNT(1) FROM tb_rdopenhist WHERE record_center_id = o.record_center_id and record_id = o.record_id) as hist_qty		    , r.open_limit_date		    , o.handl_org_open_ymd		    , o.expert_org_open_ymd		    , o.review_org_open_ymd		FROM tb_rdopenresortopin o, (			SELECT a.record_center_id				, a.record_id				, a.title				, a.record_detl_type_cd				, a.take_mng_no				, a.open_grade				, a.open_limit_part				, a.part_open_rsn				, a.reg_dtime				, a.last_open_resort_yyyy				, a.org_cd				, a.creat_reg_no				, a.dtch_reg_no				, a.creat_yyyy				, a.creat_reg_dtime				, a.clss_div_cd				, a.open_div_cd				, f.creat_sys_cd				, f.folder_reg_seq				, f.ho_no, a.clss_id				, f.cur_keep_org_cd				, f.folder_keep_state_cd				, f.presv_term_cd				, (CASE WHEN ((A.creat_sys_cd='02' OR A.creat_sys_cd='05' OR A.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=SUBSTR(A.creat_reg_no,1,7))=1)					    THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=SUBSTR(A.creat_reg_no,1,7)),SUBSTR(A.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(A.creat_reg_no,8))						WHEN (A.creat_sys_cd='05' OR ((A.creat_sys_cd='01' OR A.creat_sys_cd='04') AND A.record_detl_type_cd='01'))						THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=A.org_cd),A.org_cd) ||'-'|| TO_NUMBER(A.doc_no)						ELSE doc_no				   END) as doc_no_nm				, a.open_limit_date			FROM tb_rdrecord a, tb_rdfolder f   		    WHERE a.record_center_id = f.record_center_id		    AND a.folder_id = f.folder_id			) r		WHERE o.record_center_id = '1'		AND o.record_id = '1'		AND	o.resort_seq = '1'		AND	o.record_id = r.record_id AND 			o.folder_id = '1'		  AND 			o.resort_yyyy = '1'		  AND 			r.title like '%1%'		  AND 			o.resort_case = '1'		  AND  				r.cur_keep_org_cd = '1'			   AND 			r.record_detl_type_cd = '1'		  AND   					o.resort_prog_state_cd IN ('3','4','5','6')				    AND 			o.clss_id = '1'		  AND 			o.current_open_div_cd = '1'		  AND 			r.open_grade = '1'		  AND 			r.open_grade = '1'		  AND 			r.open_grade = '1'		  AND 			r.open_grade = '1'		  AND 			o.discu_trgt_flag = '1'		   				AND	o.resort_prog_state_cd in ('5','6','7')			 			AND	 o.discu_trgt_flag = '1'		  AND 			o.handl_org_cd = '1'		  AND  				o.resort_prog_state_cd != '7'			   AND 			o.excel_dwn_flag = '1'		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : countOpenResortOpinCaseProcessList

		SELECT COUNT(*)		FROM (			SELECT o.resort_case				, o.resort_case_no				, o.record_center_id				, o.record_chrgr_id				, o.record_id				, o.folder_id				, o.clss_id				, o.resort_doc_no				, o.discu_trgt_flag				, o.rslt_reg_ymd				, o.review_org_open_div_cd				, o.review_org_open_opin				, o.review_limit_part				, o.review_open_grade				, o.review_reg_ymd				, o.resort_prog_state_cd				, o.handl_org_cd				, o.resort_yyyy				, o.resort_seq				, o.rslt_decision_cd				, o.expert_org_open_div_cd				, o.expert_org_open_opin				, o.expert_limit_part				, o.expert_open_grade				, o.expert_reg_ymd				, o.handl_open_limit_part				, o.handl_org_chrgr_id				, o.handl_open_reg_ymd				, o.org_cd				, o.handl_org_open_div_cd				, o.handl_org_open_opin				, o.handl_open_grade				, o.current_open_div_cd				, o.rjct_flag				, o.excel_dwn_flag				, o.center_sel_flag				, r.title				, r.record_detl_type_cd				, r.take_mng_no				, r.open_grade				, r.open_limit_part				, r.part_open_rsn				, r.reg_dtime				, r.last_open_resort_yyyy				, r.creat_sys_cd				, r.creat_yyyy				, r.folder_reg_seq				, r.ho_no				, r.creat_reg_no				, r.dtch_reg_no				, r.creat_reg_dtime				, r.doc_no_nm				, r.open_div_cd				, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = o.handl_org_cd) as handl_org_nm				, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = o.org_cd) as dept_abbr_nm				, (SELECT full_org_nm FROM tb_storg WHERE org_cd = o.org_cd) as full_org_nm				, (SELECT close_flag FROM tb_stdept WHERE org_cd = o.org_cd) as close_flag				, (case when r.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = r.clss_id)			            when r.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = r.record_center_id and unit_cd = r.clss_id)			       end 			    ) as bis_clss_nm			    , (SELECT COUNT(*) FROM tb_rdopenhist WHERE record_center_id = o.record_center_id AND record_id = o.record_id) as open_hist_cnt			    , (SELECT title FROM tb_rdfolder WHERE record_center_id = o.record_center_id AND folder_id = o.folder_id) as folder_title			    , (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = r.record_detl_type_cd) as record_detl_type_nm			FROM tb_rdopenresortopin o				, (					SELECT a.record_center_id						, a.record_id						, a.title						, a.record_detl_type_cd						, a.take_mng_no						, a.open_grade						, a.open_limit_part						, a.part_open_rsn						, a.reg_dtime						, a.last_open_resort_yyyy						, a.org_cd						, a.creat_reg_no						, a.dtch_reg_no						, a.creat_yyyy						, a.creat_reg_dtime						, a.clss_div_cd						, a.open_div_cd						, f.creat_sys_cd						, f.folder_reg_seq						, f.ho_no						, a.clss_id						, f.cur_keep_org_cd						, (CASE WHEN ((A.creat_sys_cd='02' OR A.creat_sys_cd='05' OR A.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=SUBSTR(A.creat_reg_no,1,7))=1)			                    THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=SUBSTR(A.creat_reg_no,1,7)),SUBSTR(A.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(A.creat_reg_no,8))			                    WHEN (A.creat_sys_cd='05' OR ((A.creat_sys_cd='01' OR A.creat_sys_cd='04') AND A.record_detl_type_cd='01'))			                    THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=A.record_center_id AND Z.org_cd=A.org_cd),A.org_cd) ||'-'|| TO_NUMBER(A.doc_no)			                    ELSE doc_no			               END			          	) as doc_no_nm          		  		, f.presv_term_cd				        FROM tb_rdrecord a, tb_rdfolder f   			        WHERE a.record_center_id = '1'          			AND	a.record_center_id = f.record_center_id			        AND	a.folder_id = f.folder_id				    ) r			WHERE o.record_center_id = '1'			AND	o.record_id = r.record_id			AND	o.record_center_id = r.record_center_id			AND o.resort_prog_state_cd > '1'			AND o.SCHEDULE_SEQ = '1'			 AND 				o.resort_yyyy = '1'			  AND 				r.title like '%1%'			  AND 				o.resort_case = '1'			  AND  					r.cur_keep_org_cd = '1'				   AND 				r.record_detl_type_cd = '1'			  AND   						o.resort_prog_state_cd IN ('3','4','5','6')					    AND 				o.clss_id = '1'			  AND 				o.current_open_div_cd = '1'			  AND 				r.open_grade = '1'			  AND 				r.open_grade = '1'			  AND 				r.open_grade = '1'			  AND 				r.open_grade = '1'			  AND 				o.discu_trgt_flag = '1'			   					AND	o.resort_prog_state_cd in ('5','6','7')				 				AND	 o.discu_trgt_flag = '1'			  AND 				o.handl_org_cd = '1'			  AND  					o.resort_prog_state_cd != '7'				   AND 				o.excel_dwn_flag = '1'			 		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : findOpenResortOpinCallPagedList

		SELECT D.*		FROM (			SELECT ROWNUM AS rnum				, C.*			FROM (				SELECT t.record_center_id					, t.folder_id					, t.record_id					, t.title					, t.current_open_div_cd					, t.open_grade					, t.org_cd					, t.record_detl_type_cd					, t.clss_id					, t.dept_abbr_nm					, t.bis_clss_nm					, t.record_detl_type_nm					, t.resort_yyyy					, NVL(t.resort_case, '0') as resort_case					, t.resort_prog_state_cd					, t.resort_seq					, t.folder_keep_state_cd					, t.presv_term_cd					, t.full_org_nm					, t.last_open_resort_yyyy				FROM (					SELECT /*+ index(R, TB_RDRECORD_IX01) */ 					    r.record_center_id						, r.folder_id						, r.record_id						, r.title						, r.open_div_cd as current_open_div_cd						, r.open_grade						, r.org_cd						, r.record_detl_type_cd						, r.clss_id						, r.creat_yyyy						, f.cur_keep_org_cd						, f.folder_keep_state_cd						, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = r.org_cd) as dept_abbr_nm						, (SELECT full_org_nm FROM tb_storg WHERE org_cd = r.org_cd and record_center_id = r.record_center_id) as full_org_nm						, (CASE WHEN r.clss_div_cd = '1' THEN (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = r.clss_id)							    WHEN r.clss_div_cd = '2' THEN (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = r.record_center_id and unit_cd = r.clss_id)						   END) as bis_clss_nm						, (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = r.record_detl_type_cd) as record_detl_type_nm						, o.resort_yyyy						, o.resort_case						, NVL(o.resort_prog_state_cd, '0') as resort_prog_state_cd						, o.resort_seq						, f.presv_term_cd						, r.last_open_resort_yyyy				    FROM tb_rdfolder f							INNER JOIN tb_rdrecord r 							ON  f.record_center_id = r.record_center_id							AND f.folder_id = r.folder_id							LEFT OUTER JOIN tb_rdopenresortopin o 			              ON 	r.record_center_id = o.record_center_id 			              AND r.record_id = o.record_id 			              AND o.resort_yyyy = '1' 			              AND o.resort_case in ('3','4')		                  AND	o.resort_prog_state_cd != '7'					WHERE   f.record_center_id = '1'					    AND     f.folder_keep_state_cd in ('01', '04')								    ) t				WHERE   1 = 1 AND 					t.record_detl_type_cd = '1'				  AND 					t.clss_id = '1'				  AND 					t.current_open_div_cd = '1'				  AND 					t.open_grade = '1'				  AND 					t.last_open_resort_yyyy = '1'				 			) C			WHERE ROWNUM <= '1'		) D		WHERE D.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : countOpenResortOpinCallPagedList

		SELECT COUNT(1)		FROM (				SELECT /*+ index(R, TB_RDRECORD_IX01) */					r.record_center_id					, r.folder_id					, r.record_id					, r.title					, r.open_div_cd as current_open_div_cd					, r.open_grade					, r.org_cd					, r.record_detl_type_cd					, r.clss_id					, r.creat_yyyy					, f.cur_keep_org_cd					, f.folder_keep_state_cd					, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = r.org_cd) as dept_abbr_nm					, (SELECT full_org_nm FROM tb_storg WHERE org_cd = r.org_cd and record_center_id = r.record_center_id) as full_org_nm					, (CASE WHEN r.clss_div_cd = '1' THEN (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = r.clss_id)						    WHEN r.clss_div_cd = '2' THEN (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = r.record_center_id and unit_cd = r.clss_id)					   END) as bis_clss_nm					, (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = r.record_detl_type_cd) as record_detl_type_nm					, o.resort_yyyy					, o.resort_case					, NVL(o.resort_prog_state_cd, '0') as resort_prog_state_cd					, o.resort_seq					, f.presv_term_cd					, r.last_open_resort_yyyy			    FROM tb_rdfolder f						INNER JOIN tb_rdrecord r 						ON  f.record_center_id = r.record_center_id						AND f.folder_id = r.folder_id						LEFT OUTER JOIN tb_rdopenresortopin o 		              ON 	r.record_center_id = o.record_center_id 		              AND r.record_id = o.record_id 		              AND o.resort_yyyy = '1' 		              AND o.resort_case in ('3','4')	                  AND	o.resort_prog_state_cd != '7'				WHERE   f.record_center_id = '1'  			    AND     f.folder_keep_state_cd in ('01', '04')						    ) t			WHERE   1 = 1 AND 				t.record_detl_type_cd = '1'			  AND 				t.clss_id = '1'			  AND 				t.current_open_div_cd = '1'			  AND 				t.open_grade = '1'			  AND 				t.last_open_resort_yyyy = '1'			 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : findOpenResortOpinCallList

		SELECT t.record_center_id			, t.folder_id			, t.record_id			, t.title			, t.current_open_div_cd			, t.open_grade			, t.org_cd			, t.record_detl_type_cd			, t.clss_id			, t.dept_abbr_nm			, t.bis_clss_nm			, t.record_detl_type_nm			, t.resort_yyyy			, NVL(t.resort_case, '0') as resort_case			, t.resort_prog_state_cd			, t.resort_seq			, t.folder_keep_state_cd			, t.presv_term_cd			, t.full_org_nm		FROM (			SELECT r.record_center_id				, r.folder_id				, r.record_id				, r.title				, r.open_div_cd as current_open_div_cd				, r.open_grade				, r.org_cd				, r.record_detl_type_cd				, r.clss_id				, r.creat_yyyy				, f.cur_keep_org_cd				, f.folder_keep_state_cd				, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = r.org_cd) as dept_abbr_nm				, (SELECT full_org_nm FROM tb_storg WHERE org_cd = r.org_cd) as full_org_nm				, (CASE WHEN r.clss_div_cd = '1' THEN (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = r.clss_id)					    WHEN r.clss_div_cd = '2' THEN (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = r.record_center_id and unit_cd = r.clss_id)				   END) as bis_clss_nm				, (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = r.record_detl_type_cd) as record_detl_type_nm				, o.resort_yyyy				, o.resort_case				, NVL(o.resort_prog_state_cd, '0') as resort_prog_state_cd				, o.resort_seq				, f.presv_term_cd		    FROM tb_rdfolder f		    	, tb_rdrecord r LEFT OUTER JOIN tb_rdopenresortopin o 	              ON 	r.record_center_id = o.record_center_id 	              AND r.record_id = o.record_id 	              AND o.resort_yyyy = '1' 	              AND o.resort_case in ('3','4')                  AND	o.resort_prog_state_cd != '7'		    WHERE   r.record_center_id = f.record_center_id		    AND     r.folder_id = f.folder_id		    AND     f.folder_keep_state_cd in ('01', '04')		    ORDER BY r.creat_yyyy DESC	    ) t		WHERE   t.record_center_id = '1' AND 			t.title like '%' || '1' || '%'		  AND  				t.cur_keep_org_cd = '1'			   AND 			t.record_detl_type_cd = '1'		  AND 			t.clss_id = '1'		  AND 			t.current_open_div_cd = '1'		  AND 			t.open_grade = '1'		  AND 			t.last_open_resort_yyyy = '1'		 		ORDER BY t.resort_case DESC	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : findOpenResortReasonPagedList

		SELECT B.*		FROM (			SELECT ROWNUM AS rnum				, A.*			FROM (				SELECT record_center_id as recordCenterId					, resort_yyyy as resortYyyy					, resort_case as resortCase					, resort_case_no as resortCaseNo					, resort_reason as resortReason					, (SELECT COUNT(*) FROM tb_rdopenresortopin WHERE record_center_id=rs.record_center_id AND resort_yyyy=rs.resort_yyyy AND resort_case=rs.resort_case AND resort_case_no=rs.resort_case_no) as opinTotalCnt					, (SELECT COUNT(*) FROM tb_rdopenresortopin WHERE record_center_id=rs.record_center_id AND resort_yyyy=rs.resort_yyyy AND resort_case=rs.resort_case AND resort_case_no=rs.resort_case_no AND resort_prog_state_cd IN ('3','4','5','6','7')) as opinEndCnt				FROM tb_rdopenresortreason rs				WHERE record_center_id = '1'				AND   resort_yyyy = '1'				 AND 					resort_case = '1'				 			) A			WHERE ROWNUM <= '1'		) B		WHERE B.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : countOpenResortReasonPagedList

		SELECT COUNT(1)		FROM (			SELECT record_center_id as recordCenterId				, resort_yyyy as resortYyyy				, resort_case as resortCase				, resort_case_no as resortCaseNo				, resort_reason as resortReason				, (SELECT COUNT(*) FROM tb_rdopenresortopin WHERE record_center_id=rs.record_center_id AND resort_yyyy=rs.resort_yyyy AND resort_case=rs.resort_case AND resort_case_no=rs.resort_case_no) as opinTotalCnt				, (SELECT COUNT(*) FROM tb_rdopenresortopin WHERE record_center_id=rs.record_center_id AND resort_yyyy=rs.resort_yyyy AND resort_case=rs.resort_case AND resort_case_no=rs.resort_case_no AND resort_prog_state_cd IN ('3','4','5','6','7')) as opinEndCnt			FROM tb_rdopenresortreason rs			WHERE record_center_id = '1'			AND   resort_yyyy = '1' AND 				resort_case = '1'			 		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : findOpenResortReasonList

		SELECT record_center_id as recordCenterId			, resort_yyyy as resortYyyy			, resort_case as resortCase			, resort_case_no as resortCaseNo			, resort_reason as resortReason			, (SELECT COUNT(*) FROM tb_rdopenresortopin WHERE record_center_id=rs.record_center_id AND resort_yyyy=rs.resort_yyyy AND resort_case=rs.resort_case AND resort_case_no=rs.resort_case_no) as opinTotalCnt			, (SELECT COUNT(*) FROM tb_rdopenresortopin WHERE record_center_id=rs.record_center_id AND resort_yyyy=rs.resort_yyyy AND resort_case=rs.resort_case AND resort_case_no=rs.resort_case_no AND resort_prog_state_cd IN ('3','4','5','6','7')) as opinEndCnt		FROM tb_rdopenresortreason rs		WHERE record_center_id = '1'		AND   resort_yyyy = '1' AND 			resort_case = '1'		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : select
-- Query Id : getMaxResortCaseNo

		SELECT	nvl(max(resort_case_no),0) as resort_case_no		FROM	tb_rdopenresortreason		WHERE	record_center_id = '1'		AND		resort_yyyy = '1'		AND		resort_case = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : insert
-- Query Id : createOpenResortReason

	 	INSERT INTO tb_rdopenresortreason (record_center_id	 		, resort_yyyy	 		, resort_case	 		, resort_case_no	 		, resort_reason	 	) VALUES ('1'	 		, '1'	 		, '1'	 		, (SELECT nvl(max(resort_case_no),0) FROM tb_rdopenresortreason WHERE record_center_id = '1' AND resort_yyyy = '1' AND resort_case = '1') + 1	 		, '1'	 	)	 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : insert
-- Query Id : createOpenResortOpin

		INSERT INTO tb_rdopenresortopin (record_center_id			, folder_id			, record_id			, resort_yyyy			, resort_seq			, resort_case			, resort_prog_state_cd			, org_cd			, current_open_div_cd			, clss_id			, resort_case_no			, discu_trgt_flag		) VALUES ('1'			, '1'			, '1'			, '1'			, (SELECT NVL(MAX(RESORT_SEQ), 0) + 1 FROM tb_rdopenresortopin WHERE record_center_id = '1' AND record_id = '1')			, '1'			, '1'			, '1'			, '1'			, '1'			, '1'			, '0'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : update
-- Query Id : updateRecordState

		UPDATE tb_rdrecord		SET	   open_resort_prog_state = '1'		WHERE  record_center_id = '1'		AND	   record_id = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : delete
-- Query Id : deleteOpenResortOpin

		DELETE	FROM	tb_rdopenresortopin		WHERE	record_center_id = '1'		AND	folder_id = '1'		AND	record_id = '1'		AND	resort_yyyy = '1'		AND	resort_case = '1'		AND	resort_seq = '1'		AND	resort_prog_state_cd = '2';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : update
-- Query Id : updateOpenResortCenterSel

		UPDATE tb_rdopenresortopin		SET resort_prog_state_cd = '1'			, handl_org_open_div_cd = '1'			, handl_org_cd = '1'		WHERE record_center_id = '1'		AND record_id = '1'		AND resort_seq = '1'		;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : update
-- Query Id : updateCurKeepOrgCdChng

		UPDATE TB_RDFOLDER		SET BEF_KEEP_ORG_CD = (SELECT CUR_KEEP_ORG_CD FROM TB_RDFOLDER WHERE RECORD_CENTER_ID = '1' AND FOLDER_ID = '1')			, CUR_KEEP_ORG_CD = '1'		WHERE RECORD_CENTER_ID = (SELECT O.RECORD_CENTER_ID FROM  TB_RDOPENRESORTOPIN O WHERE O.RECORD_CENTER_ID = '1' AND O.RESORT_PROG_STATE_CD = '1' GROUP BY O.RECORD_CENTER_ID) 		AND FOLDER_ID = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : update
-- Query Id : updateOpenResortDept

		UPDATE tb_rdopenresortopin		SET handl_org_cd = '1'			, handl_org_chrgr_id = '1'			, resort_prog_state_cd = '1'		WHERE record_center_id = '1'		AND record_id = '1'		AND resort_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
-- Query    : update
-- Query Id : updateOpenResortOpin

		UPDATE tb_rdopenresortopin		SET resort_prog_state_cd = '1'			, resort_case_no = '1'			 ,				rjct_flag = '1'			 		WHERE	record_center_id = '1'		AND		folder_id = '1'		AND		record_id = '1'		AND		resort_seq = '1';


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\openresortopin\OpenResortOpinTrgtChoice.xml
