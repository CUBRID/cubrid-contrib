-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\rcTakovr\RcTakovrCurState.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\rcTakovr\RcTakovrCurState.xml
-- Query    : select
-- Query Id : findRcTakovrCurStateTotal

	SELECT takovr_mng_no, takovr_rep_cd, takovr_yyyy, takovr_sno, record_center_id, takovr_rep_nm, take_rep_cd, take_rep_nm, sum(takovr_folder_cnt) takovr_folder_cnt, sum(takovr_record_cnt) takovr_record_cnt	FROM (		SELECT 'ÃÑ°è' takovr_mng_no		      ,A.takovr_rep_cd		      ,A.takovr_yyyy		      ,0 takovr_sno		      ,A.record_center_id		      ,'' takovr_rep_nm		      ,'' take_rep_cd		      ,'' take_rep_nm		      ,((SELECT COUNT(1) FROM TB_RDFOLDER Z WHERE EXISTS (SELECT 1 FROM TB_DFTAKOVRFOLDERLIST Y WHERE Y.takovr_rep_cd = A.takovr_rep_cd AND Y.takovr_yyyy = A.takovr_yyyy AND Y.takovr_sno = A.takovr_sno AND Y.record_center_id = Z.record_center_id AND Y.folder_id = Z.folder_id)) +		      (SELECT COUNT(1) FROM TB_NKFOLDER Z WHERE EXISTS (SELECT 1 FROM TB_DFTAKOVRFOLDERLIST Y WHERE Y.takovr_rep_cd = A.takovr_rep_cd AND Y.takovr_yyyy = A.takovr_yyyy AND Y.takovr_sno = A.takovr_sno AND Y.record_center_id = Z.record_center_id AND Y.folder_id = Z.folder_id))) takovr_folder_cnt		      ,((SELECT COUNT(1) FROM TB_RDRECORD Z WHERE EXISTS (SELECT 1 FROM TB_DFTAKOVRFOLDERLIST Y WHERE Y.takovr_rep_cd = A.takovr_rep_cd AND Y.takovr_yyyy = A.takovr_yyyy AND Y.takovr_sno = A.takovr_sno AND Y.record_center_id = Z.record_center_id AND Y.folder_id = Z.folder_id)) +		      (SELECT COUNT(1) FROM TB_NKRECORD Z WHERE EXISTS (SELECT 1 FROM TB_DFTAKOVRFOLDERLIST Y WHERE Y.takovr_rep_cd = A.takovr_rep_cd AND Y.takovr_yyyy = A.takovr_yyyy AND Y.takovr_sno = A.takovr_sno AND Y.record_center_id = Z.record_center_id AND Y.folder_id = Z.folder_id))) takovr_record_cnt		FROM TB_DFTAKOVRPLAN A		WHERE A.record_center_id = '1'		AND   A.takovr_yyyy = '1'		AND   A.takovr_prog_state_cd = '05'		ORDER BY A.takovr_rep_cd, A.takovr_yyyy, A.takovr_sno	) L	GROUP BY L.takovr_mng_no, L.takovr_rep_cd, L.takovr_yyyy, L.takovr_sno, L.record_center_id, L.takovr_rep_nm, L.take_rep_cd, L.take_rep_nm	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\rcTakovr\RcTakovrCurState.xml
-- Query    : select
-- Query Id : findRcTakovrCurStateList

		SELECT A.takovr_rep_cd||'-'||A.takovr_yyyy||'-'||LPAD(A.takovr_sno, 6, '0') takovr_mng_no		      ,A.takovr_rep_cd		      ,A.takovr_yyyy		      ,A.takovr_sno		      ,A.record_center_id		      ,A.takovr_rep_nm		      ,A.take_rep_cd		      ,A.take_rep_nm		      ,((SELECT COUNT(1) FROM TB_RDFOLDER Z WHERE EXISTS (SELECT 1 FROM TB_DFTAKOVRFOLDERLIST Y WHERE Y.takovr_rep_cd = A.takovr_rep_cd AND Y.takovr_yyyy = A.takovr_yyyy AND Y.takovr_sno = A.takovr_sno AND Y.record_center_id = Z.record_center_id AND Y.folder_id = Z.folder_id)) +		      (SELECT COUNT(1) FROM TB_NKFOLDER Z WHERE EXISTS (SELECT 1 FROM TB_DFTAKOVRFOLDERLIST Y WHERE Y.takovr_rep_cd = A.takovr_rep_cd AND Y.takovr_yyyy = A.takovr_yyyy AND Y.takovr_sno = A.takovr_sno AND Y.record_center_id = Z.record_center_id AND Y.folder_id = Z.folder_id))) takovr_folder_cnt		      ,((SELECT COUNT(1) FROM TB_RDRECORD Z WHERE EXISTS (SELECT 1 FROM TB_DFTAKOVRFOLDERLIST Y WHERE Y.takovr_rep_cd = A.takovr_rep_cd AND Y.takovr_yyyy = A.takovr_yyyy AND Y.takovr_sno = A.takovr_sno AND Y.record_center_id = Z.record_center_id AND Y.folder_id = Z.folder_id)) +		      (SELECT COUNT(1) FROM TB_NKRECORD Z WHERE EXISTS (SELECT 1 FROM TB_DFTAKOVRFOLDERLIST Y WHERE Y.takovr_rep_cd = A.takovr_rep_cd AND Y.takovr_yyyy = A.takovr_yyyy AND Y.takovr_sno = A.takovr_sno AND Y.record_center_id = Z.record_center_id AND Y.folder_id = Z.folder_id))) takovr_record_cnt		FROM TB_DFTAKOVRPLAN A		WHERE A.record_center_id = '1'		AND   A.takovr_yyyy = '1'		AND   A.takovr_prog_state_cd = '05'		ORDER BY A.takovr_rep_cd, A.takovr_yyyy, A.takovr_sno	;


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\transf\rcTakovr\RcTakovrCurState.xml
