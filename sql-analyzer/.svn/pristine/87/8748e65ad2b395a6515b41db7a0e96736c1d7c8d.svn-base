<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="webservice">

	<resultMap id="openList-result" class="rms.webservice.domain.OpenList" >
		<result property="recordCenterId" 			column="RECORD_CENTER_ID"/>
		<result property="recordId"					column="RECORD_ID"/>
		<result property="recordCenterCd"			column="RECORD_CENTER_CD"/>
		<result property="folderId"					column="FOLDER_ID"/>
		<result property="folderTitle"				column="FOLDER_TITLE"/>
		<result property="takeYYYY"					column="TAKE_YYYY"/>
		<result property="creatSysCd"				column="CREAT_SYS_CD"/>
		<result property="orgCd"					column="ORG_CD"/>
		<result property="creatYYYY"				column="CREAT_YYYY"/>
		<result property="creatRegDtime"			column="CREAT_REG_DTIME"/>
		<result property="creatRegNo" 				column="CREAT_REG_NO"/>
		<result property="dtchRegNo"				column="DTCH_REG_NO"/>
		<result property="clssId"					column="CLSS_ID"/>
		<result property="clssNm"					column="CLSS_NM"/>
		<result property="title"					column="TITLE"/>
		<result property="subTitle"					column="SUB_TITLE"/>
		<result property="recordRegDivCd"			column="RECORD_REG_DIV_CD"/>
		<result property="recordDetlTypeCd"			column="RECORD_DETL_TYPE_CD"/>
		<result property="presvTermCd"				column="PRESV_TERM_CD"/>
		<result property="regDtime"					column="REG_DTIME"/>
		<result property="recordSumry"				column="RECORD_SUMRY"	jdbcType="CLOB"	javaType="java.lang.String"/>
		<result property="audvisRecordType"			column="AUDVIS_RECORD_TYPE"/>
		<result property="audvisRecordSumry"		column="AUDVIS_RECORD_SUMRY"/>
		<result property="mediaFormat"				column="MEDIA_FORMAT"/>
		<result property="medium"					column="MEDIUM"/>
		<result property="recordSize"				column="RECORD_SIZE"/>
		<result property="attachCnt"				column="ATTACH_CNT"/>
		<result property="recordPageCnt"			column="RECORD_PAGE_CNT"/>
		<result property="approvPosRankNm"			column="APROV_POS_RANK_NM"/>
		<result property="dutyChrgrNm"				column="DUTY_CHRGR_NM"/>
		<result property="enforcYMD"				column="ENFORC_YMD"/>
		<result property="creatOrgRegNo"			column="CREAT_ORG_REG_NO"/>
		<result property="erecordFlag"				column="ERECORD_FLAG"/>
		<result property="oldRecordCreatOrgNm"		column="OLD_RECORD_CREAT_ORG_NM"/>
		<result property="oldRecordDocNo"			column="OLD_RECORD_DOCNO"/>
		<result property="oldRecordPresvTerm"		column="OLD_RECORD_PRESV_TERM"/>
		<result property="secuClssCd"				column="SECU_CLSS_CD"/>
		<result property="secuClssRsn"				column="SECU_CLSS_RSN"/>
		<result property="readRange"				column="READ_RANGE"/>
		<result property="openType"					column="OPEN_TYPE"/>
		<result property="partOpenRsn"				column="PART_OPEN_RSN"/>
		<result property="openLimitPart"			column="OPEN_LIMIT_PART"/>
		<result property="openExptDtime"			column="OPEN_EXPT_DTIME"/>
		<result property="recver"					column="RECVER"/>
		<result property="sender"					column="SENDER"/>
		<result property="docDistrNo"				column="DOC_DISTR_NO"/>
		<result property="folderClssNo"				column="FOLDER_CLSS_NO"/>
		<result property="spclRecordType"			column="SPCL_RECORD_TYPE"/>	
		<result property="newDivCd"					column="NEW_DIV_CD"/>
		<result property="docNo"					column="DOC_NO"/>
		<result property="creatSysRecordId"			column="CREAT_SYS_RECORD_ID"/>
		<result property="enforcDocno"				column="ENFORC_DOCNO"/>
		<result property="adjstDescr"				column="ADJST_DESCR"/>
		<result property="openResortDtime"			column="OPEN_RESORT_DTIME"/>
		<result property="disuseDtime"				column="DISUSE_DTIME"/>
		<result property="transfDtime"				column="TRANSF_DTIME"/>	
		<result property="revalDtime"				column="REVAL_DTIME"/>
		<result property="resortDtime"				column="RESORT_DTIME"/>
		<result property="changDtime"				column="CHNG_DTIME"/>
		<result property="changType"				column="CHNG_TYPE"/>
		<result property="diuseDiv"					column="DISUSE_DIV"/>
		<result property="befOpenFlag"				column="BEF_OPEN_FLAG"/>
		<result property="corctTitle"				column="CORCT_TITLE"/>	
	</resultMap>
	<resultMap id="openSearchListFolderDO-result" class="rms.webservice.domain.OpenSearchListFolderDO" >
		<result property="recordCenterId"			column="RECORD_CENTER_ID"/>
		<result property="folderId"					column="FOLDER_ID"/>
		<result property="takeYyyy"					column="TAKE_YYYY"/>
		<result property="takeOrgCd"				column="TAKE_ORG_CD"/>
		<result property="takeYyyySno"				column="TAKE_YYYY_SNO"/>
		<result property="folderTakeSeq"			column="FOLDER_TAKE_SEQ"/>
		<result property="creatSysCd"				column="CREAT_SYS_CD"/>
		<result property="orgCd"					column="ORG_CD"/>
		<result property="clssDivCd"				column="CLSS_DIV_CD"/>
		<result property="clssId"					column="CLSS_ID"/>
		<result property="newClssDivCd"				column="NEW_CLSS_DIV_CD"/>
		<result property="newClssId"				column="NEW_CLSS_ID"/>
		<result property="newClssNm"				column="NEW_CLSS_NM"/>
		<result property="creatYyyy"				column="CREAT_YYYY"/>
		<result property="folderRegSeq"				column="FOLDER_REG_SEQ"/>
		<result property="hoNo"						column="HO_NO"/>
		<result property="clssNm"					column="CLSS_NM"/>
		<result property="title"					column="TITLE"/>
		<result property="subTitle"					column="SUB_TITLE"/>
		<result property="corctTitle"				column="CORCT_TITLE"/>
		<result property="folderTypeDivCd"			column="FOLDER_TYPE_DIV_CD"/>
		<result property="etcFolderType"			column="ETC_FOLDER_TYPE"/>
		<result property="folderDetlTypeCd"			column="FOLDER_DETL_TYPE_CD"/>
		<result property="creatPurps"				column="CREAT_PURPS"/>
		<result property="mediaFormat"				column="MEDIA_FORMAT"/>
		<result property="medium"					column="MEDIUM"/>
		<result property="folderSize"				column="FOLDER_SIZE"/>
		<result property="recordTotPageCnt"			column="RECORD_TOT_PAGE_CNT"/>
		<result property="recordRegCnt"				column="RECORD_REG_CNT"/>
		<result property="efileCnt"					column="EFILE_CNT"/>
		<result property="newDivCd"					column="NEW_DIV_CD"/>
		<result property="chngFlag"					column="CHNG_FLAG"/>
		<result property="oldFolderCreatOrgNm"		column="OLD_FOLDER_CREAT_ORG_NM"/>
		<result property="oldFolderClssNo"			column="OLD_FOLDER_CLSS_NO"/>
		<result property="folderBispjtDivCd"		column="FOLDER_BISPJT_DIV_CD"/>
		<result property="bisClssPathNm"			column="BIS_CLSS_PATH_NM"/>
		<result property="pjtClssPathNm"			column="PJT_CLSS_PATH_NM"/>
		<result property="folderStartDtime"			column="FOLDER_START_DTIME"/>
		<result property="folderCloseDtime"			column="FOLDER_CLOSE_DTIME"/>
		<result property="funshEndDtime"			column="FUNSH_END_DTIME"/>
		<result property="funshRsn"					column="FUNSH_RSN"/>
		<result property="presvTermCd"				column="PRESV_TERM_CD"/>
		<result property="presvTermFixRsn"			column="PRESV_TERM_FIX_RSN"/>
		<result property="presvMethodCd"			column="PRESV_METHOD_CD"/>
		<result property="presvAreaCd"				column="PRESV_AREA_CD"/>
		<result property="presvLoc"					column="PRESV_LOC"/>
		<result property="presvDutyChrgrNm"			column="PRESV_DUTY_CHRGR_NM"/>
		<result property="secuClssCd"				column="SECU_CLSS_CD"/>
		<result property="secuClssRsn"				column="SECU_CLSS_RSN"/>
		<result property="readRange"				column="READ_RANGE"/>
		<result property="openDivCd"				column="OPEN_DIV_CD"/>
		<result property="creatUserId"				column="CREAT_USER_ID"/>
		<result property="creatUserNm"				column="CREAT_USER_NM"/>
		<result property="creatUserOrgCd"			column="CREAT_USER_ORG_CD"/>
		<result property="creatUserOrgNm"			column="CREAT_USER_ORG_NM"/>
		<result property="creatUserPosRankNm"		column="CREAT_USER_POS_RANK_NM"/>
		<result property="creatDtime"				column="CREAT_DTIME"/>
		<result property="creatSysFolderId"			column="CREAT_SYS_FOLDER_ID"/>
		<result property="oldPresvTermCd"			column="OLD_PRESV_TERM_CD"/>
		<result property="readCnt"					column="READ_CNT"/>
		<result property="operReadRangeCd"			column="OPER_READ_RANGE_CD"/>
		<result property="stakrmMngNo"				column="STAKRM_MNG_NO"/>
		<result property="curKeepOrgCd"				column="CUR_KEEP_ORG_CD"/>
		<result property="exptDisuseYyyy"			column="EXPT_DISUSE_YYYY"/>
		<result property="exptTransfYyyy"			column="EXPT_TRANSF_YYYY"/>
		<result property="erecordFlag"				column="ERECORD_FLAG"/>
		<result property="groupPresvTermCd"			column="GROUP_PRESV_TERM_CD"/>
		<result property="regDtime"					column="REG_DTIME"/>
	</resultMap>
	<resultMap id="openSearchListRecordDO-result" class="rms.webservice.domain.OpenSearchListRecordDO" >
		<result property="recordCenterId"			column="RECORD_CENTER_ID"/>
		<result property="recordId"					column="RECORD_ID"/>
		<result property="folderId"					column="FOLDER_ID"/>
		<result property="takeYyyy"					column="TAKE_YYYY"/>
		<result property="takeYyyySno"				column="TAKE_YYYY_SNO"/>
		<result property="creatSysCd"				column="CREAT_SYS_CD"/>
		<result property="orgCd"					column="ORG_CD"/>
		<result property="creatYyyy"				column="CREAT_YYYY"/>
		<result property="creatRegDtime"			column="CREAT_REG_DTIME"/>
		<result property="creatRegNo"				column="CREAT_REG_NO"/>
		<result property="dtchRegNo"				column="DTCH_REG_NO"/>
		<result property="clssDivCd"				column="CLSS_DIV_CD"/>
		<result property="clssId"					column="CLSS_ID"/>
		<result property="clssNm"					column="CLSS_NM"/>
		<result property="title"					column="TITLE"/>
		<result property="subTitle"					column="SUB_TITLE"/>
		<result property="corctTitle"				column="CORCT_TITLE"/>
		<result property="recordRegDivCd"			column="RECORD_REG_DIV_CD"/>
		<result property="recordDetlTypeCd"			column="RECORD_DETL_TYPE_CD"/>
		<result property="audvisRecordType"			column="AUDVIS_RECORD_TYPE"/>
		<result property="audvisRecordSumry"		column="AUDVIS_RECORD_SUMRY"/>
		<result property="mediaFormat"				column="MEDIA_FORMAT"/>
		<result property="medium"					column="MEDIUM"/>
		<result property="recordSize"				column="RECORD_SIZE"/>
		<result property="attachCnt"				column="ATTACH_CNT"/>
		<result property="recordPageCnt"			column="RECORD_PAGE_CNT"/>
		<result property="recordStartPage"			column="RECORD_START_PAGE"/>
		<result property="recordEndPage"			column="RECORD_END_PAGE"/>
		<result property="aprovPosRankNm"			column="APROV_POS_RANK_NM"/>
		<result property="dutyChrgrNm"				column="DUTY_CHRGR_NM"/>
		<result property="enforcYmd"				column="ENFORC_YMD"/>
		<result property="creatOrgRegNo"			column="CREAT_ORG_REG_NO"/>
		<result property="erecordFlag"				column="ERECORD_FLAG"/>
		<result property="oldRecordCreatOrgNm"		column="OLD_RECORD_CREAT_ORG_NM"/>
		<result property="oldRecordDocno"			column="OLD_RECORD_DOCNO"/>
		<result property="oldRecordPresvTerm"		column="OLD_RECORD_PRESV_TERM"/>
		<result property="presvLoc"					column="PRESV_LOC"/>
		<result property="secuClssCd"				column="SECU_CLSS_CD"/>
		<result property="secuClssRsn"				column="SECU_CLSS_RSN"/>
		<result property="readRange"				column="READ_RANGE"/>
		<result property="openDivCd"				column="OPEN_DIV_CD"/>
		<result property="openGrade"				column="OPEN_GRADE"/>
		<result property="partOpenRsn"				column="PART_OPEN_RSN"/>
		<result property="openLimitPart"			column="OPEN_LIMIT_PART"/>
		<result property="openExptDtime"			column="OPEN_EXPT_DTIME"/>
		<result property="recver"					column="RECVER"/>
		<result property="sender"					column="SENDER"/>
		<result property="chngVerNo"				column="CHNG_VER_NO"/>
		<result property="docDistrNo"				column="DOC_DISTR_NO"/>
		<result property="folderClssNo"				column="FOLDER_CLSS_NO"/>
		<result property="spclRecordType"			column="SPCL_RECORD_TYPE"/>
		<result property="newDivCd"					column="NEW_DIV_CD"/>
		<result property="chngFlag"					column="CHNG_FLAG"/>
		<result property="docNo"					column="DOC_NO"/>
		<result property="mainUserNm"				column="MAIN_USER_NM"/>
		<result property="creatUserId"				column="CREAT_USER_ID"/>
		<result property="creatUserOrgCd"			column="CREAT_USER_ORG_CD"/>
		<result property="creatUserOrgNm"			column="CREAT_USER_ORG_NM"/>
		<result property="creatUserPosRankNm"		column="CREAT_USER_POS_RANK_NM"/>
		<result property="creatDtime"				column="CREAT_DTIME"/>
		<result property="creatSysRecordId"			column="CREAT_SYS_RECORD_ID"/>
		<result property="operReadRangeCd"			column="OPER_READ_RANGE_CD"/>
		<result property="lastOpenResortYyyy"		column="LAST_OPEN_RESORT_YYYY"/>
		<result property="adjstDescr"				column="ADJST_DESCR"/>
		<result property="regDtime"					column="REG_DTIME"/>
		<result property="recordTakeSeq"			column="RECORD_TAKE_SEQ"/>
		<result property="enforcDocno"				column="ENFORC_DOCNO"/>
		<result property="lang"						column="LANG"/>
		<result property="secretClss"				column="SECRET_CLSS"/>
		<result property="secretTerm"				column="SECRET_TERM"/>
		<result property="creatUserNm"				column="CREAT_USER_NM"/>
	</resultMap>
	<resultMap id="findFolderIdForFolder-result" class="rms.webservice.domain.OpenSearchListFolderDO" >
		<result property="recordCenterId"			column="RECORD_CENTER_ID"/>
		<result property="folderId"					column="FOLDER_ID"/>
	</resultMap>
	<resultMap id="befOpenList-result" class="rms.webservice.domain.BefOpenList" >
		<result property="creatRegNo" 				column="CREAT_REG_NO"/>
		<result property="creatRegDtime"			column="CREAT_REG_DTIME"/>
		<result property="fileSno"					column="FILE_SNO"/>
		<result property="fileLinkPath"				column="FILE_LINK_PATH"/>
		<result property="creatSysCd"				column="CREAT_SYS_CD"/>
		<result property="filePath"					column="FILE_PATH"/>
		<result property="fileType"					column="FILE_TYPE"/>
		<result property="orignFlag"				column="ORIGN_FLAG"/>
		<result property="fileNm"					column="FILE_NM"/>
		<result property="fileSize"					column="FILE_SIZE"/>
		
	</resultMap>
		
	<!--
		공개목록리스트 검색(정보목록)
	-->
	<select id="findOpenList" parameterClass="rms.webservice.domain.InfolistsReqVO" resultMap="openList-result">
		
		SELECT RECORD_CENTER_ID,
		RECORD_ID,RECORD_CENTER_CD,FOLDER_ID,FOLDER_TITLE,TAKE_YYYY,CREAT_SYS_CD,ORG_CD,CREAT_YYYY,CREAT_REG_DTIME,CREAT_REG_NO,
		DTCH_REG_NO,CLSS_ID,CLSS_NM,TITLE,SUB_TITLE,RECORD_REG_DIV_CD,DECODE(RECORD_DETL_TYPE_CD,'01','02','05','01') RECORD_DETL_TYPE_CD,PRESV_TERM_CD,
		REG_DTIME,RECORD_SUMRY,AUDVIS_RECORD_TYPE,AUDVIS_RECORD_SUMRY,MEDIA_FORMAT,MEDIUM,RECORD_SIZE,ATTACH_CNT,
		RECORD_PAGE_CNT,APROV_POS_RANK_NM,DUTY_CHRGR_NM,SUBSTR(ENFORC_YMD, 1, 8) AS ENFORC_YMD,CREAT_ORG_REG_NO,ERECORD_FLAG,OLD_RECORD_CREAT_ORG_NM,
		OLD_RECORD_DOCNO,OLD_RECORD_PRESV_TERM,SECU_CLSS_CD,SECU_CLSS_RSN,READ_RANGE,OPEN_TYPE,PART_OPEN_RSN,OPEN_LIMIT_PART,
		OPEN_EXPT_DTIME,RECVER,SENDER,DOC_DISTR_NO,FOLDER_CLSS_NO,SPCL_RECORD_TYPE,NEW_DIV_CD,DOC_NO,CREAT_SYS_RECORD_ID,ENFORC_DOCNO,
		ADJST_DESCR,OPEN_RESORT_DTIME,DISUSE_DTIME,TRANSF_DTIME,REVAL_DTIME,RESORT_DTIME,CHNG_DTIME,CHNG_TYPE,DISUSE_DIV,DECODE(BEF_OPEN_FLAG,'0','N','1','Y') BEF_OPEN_FLAG,CORCT_TITLE
		FROM TB_STOPENLIST 
		WHERE 
		CHNG_DTIME BETWEEN  #beginDate:VARCHAR# AND #endDate:VARCHAR#
		AND RECORD_CENTER_CD=#recordCenterCode:VARCHAR# 
		AND RECORD_DETL_TYPE_CD=#infolistCode:VARCHAR#
		
    </select>
    
	<!--
		공개목록리스트 검색(정보목록) - 철 내역 뽑기
	-->
	<select id="findOpenSearchListFolder" parameterClass="rms.webservice.domain.InfolistsReqVO" resultMap="openSearchListFolderDO-result">
		SELECT  RECORD_CENTER_ID, FOLDER_ID, TAKE_YYYY, TAKE_ORG_CD, TAKE_YYYY_SNO, FOLDER_TAKE_SEQ,
				CREAT_SYS_CD, ORG_CD, CLSS_DIV_CD, CLSS_ID, NEW_CLSS_DIV_CD, NEW_CLSS_ID, NEW_CLSS_NM,
				CREAT_YYYY, FOLDER_REG_SEQ,  HO_NO, CLSS_NM, TITLE, SUB_TITLE, CORCT_TITLE,
				FOLDER_TYPE_DIV_CD, ETC_FOLDER_TYPE, FOLDER_DETL_TYPE_CD, CREAT_PURPS, MEDIA_FORMAT, MEDIUM,
				FOLDER_SIZE, RECORD_TOT_PAGE_CNT, RECORD_REG_CNT, EFILE_CNT, NEW_DIV_CD, CHNG_FLAG,
				OLD_FOLDER_CREAT_ORG_NM, OLD_FOLDER_CLSS_NO, FOLDER_BISPJT_DIV_CD, BIS_CLSS_PATH_NM,
				PJT_CLSS_PATH_NM,FOLDER_START_DTIME, FOLDER_CLOSE_DTIME, FUNSH_END_DTIME, FUNSH_RSN,
				PRESV_TERM_CD, PRESV_TERM_FIX_RSN, PRESV_METHOD_CD, PRESV_AREA_CD, PRESV_LOC, PRESV_DUTY_CHRGR_NM,
				SECU_CLSS_CD, SECU_CLSS_RSN, READ_RANGE, OPEN_DIV_CD, CREAT_USER_ID, CREAT_USER_NM,
				CREAT_USER_ORG_CD, CREAT_USER_ORG_NM, CREAT_USER_POS_RANK_NM, CREAT_DTIME, CREAT_SYS_FOLDER_ID,
				OLD_PRESV_TERM_CD, READ_CNT, OPER_READ_RANGE_CD, STAKRM_MNG_NO, CUR_KEEP_ORG_CD, 
				EXPT_DISUSE_YYYY, EXPT_TRANSF_YYYY, ERECORD_FLAG, GROUP_PRESV_TERM_CD, REG_DTIME	
		FROM    TB_RDFOLDER
		WHERE   CHNG_DTIME BETWEEN  #beginDate:VARCHAR# AND #endDate:VARCHAR#
		AND		RECORD_CENTER_ID = #recordCenterId:VARCHAR#
		AND     OPENLIST_SET_CD = '2'
    </select>

	<!--
		OPENSET값에 맞는 해당 RECORD_CENTER_ID의 모든 중복처리된 FOLDER_ID 추출
	-->
	<select id="findFolderIdForFolder" parameterClass="rms.webservice.domain.InfolistsReqVO" resultMap="findFolderIdForFolder-result">
		SELECT	DISTINCT FOLDER_ID, RECORD_CENTER_ID
		FROM	TB_RDFOLDER
		WHERE	CHNG_DTIME BETWEEN  #beginDate:VARCHAR# AND #endDate:VARCHAR#
		AND		RECORD_CENTER_ID = #recordCenterId:VARCHAR#
		AND		OPENLIST_SET_CD = '2'
	</select>
	
	<!--
		공개목록리스트 검색(정보목록) - 건 내역 뽑기
	-->
	<select id="findOpenSearchListRecord" parameterClass="rms.webservice.domain.OpenSearchListFolderDO" resultMap="openSearchListRecordDO-result">
		SELECT  RECORD_CENTER_ID, RECORD_ID, FOLDER_ID, TAKE_YYYY, TAKE_YYYY_SNO, CREAT_SYS_CD, ORG_CD,
				CREAT_YYYY, CREAT_REG_DTIME, CREAT_REG_NO, DTCH_REG_NO, CLSS_DIV_CD, CLSS_ID, CLSS_NM,
				TITLE, SUB_TITLE, CORCT_TITLE, RECORD_REG_DIV_CD, RECORD_DETL_TYPE_CD, AUDVIS_RECORD_TYPE,
				AUDVIS_RECORD_SUMRY, MEDIA_FORMAT, MEDIUM, RECORD_SIZE, ATTACH_CNT, RECORD_PAGE_CNT,
				RECORD_START_PAGE, RECORD_END_PAGE, APROV_POS_RANK_NM, DUTY_CHRGR_NM, SUBSTR(ENFORC_YMD, 1, 8) AS ENFORC_YMD,
				CREAT_ORG_REG_NO, ERECORD_FLAG, OLD_RECORD_CREAT_ORG_NM, OLD_RECORD_DOCNO, OLD_RECORD_PRESV_TERM,
				PRESV_LOC, SECU_CLSS_CD, SECU_CLSS_RSN, READ_RANGE, OPEN_DIV_CD, OPEN_GRADE, PART_OPEN_RSN,
				OPEN_LIMIT_PART, OPEN_EXPT_DTIME, RECVER, SENDER, CHNG_VER_NO, DOC_DISTR_NO, FOLDER_CLSS_NO,
				SPCL_RECORD_TYPE, NEW_DIV_CD, CHNG_FLAG, DOC_NO, MAIN_USER_NM, CREAT_USER_ID, CREAT_USER_ORG_CD,
				CREAT_USER_ORG_NM, CREAT_USER_POS_RANK_NM, CREAT_DTIME, CREAT_SYS_RECORD_ID, OPER_READ_RANGE_CD,
				LAST_OPEN_RESORT_YYYY, ADJST_DESCR, REG_DTIME, RECORD_TAKE_SEQ, ENFORC_DOCNO, LANG,
				SECRET_CLSS, SECRET_TERM, CREAT_USER_NM	
		FROM    TB_RDRECORD
		WHERE   RECORD_CENTER_ID = #recordCenterId:VARCHAR#
		AND     FOLDER_ID = #folderId:VARCHAR#
    </select>

    <!-- 공개목록 리스트 제공 이력등록  -->
    <update id="updateOpenListHist" parameterClass="rms.webservice.domain.InfolistsReqVO" >
    	UPDATE TB_STOPENLIST SET OPENLIST_OFFER_FLAG='1'
    	WHERE CHNG_DTIME BETWEEN  #beginDate:VARCHAR# AND #endDate:VARCHAR#
    	AND RECORD_CENTER_CD=#recordCenterCode:VARCHAR#
    	AND RECORD_DETL_TYPE_CD=#infolistCode:VARCHAR# 
    	AND OPENLIST_OFFER_FLAG='0'
    	    
    </update>
    
    <!-- 제공목록 리스트 제공 이력등록  -->
    <update id="updateOpenSearchListRecord" parameterClass="rms.webservice.domain.InfolistsReqVO" >
    	UPDATE	TB_RDFOLDER SET OPENSEARCHLIST_OFFER_FLAG = '1'
		WHERE   CHNG_DTIME BETWEEN  #beginDate:VARCHAR# AND #endDate:VARCHAR#
		AND		RECORD_CENTER_ID = #recordCenterId:VARCHAR#
		AND     OPENLIST_SET_CD = '2'
    </update>

    <!-- 사전공개목록리스트 검색 (사전원문 목록) -->
    <select id="findBefOpenList" parameterClass="rms.webservice.domain.InfolistsReqVO" resultMap="befOpenList-result">
    	SELECT B.CREAT_REG_NO,B.CREAT_REG_DTIME,B.FILE_SNO,B.FILE_LINK_PATH,A.CREAT_SYS_CD,B.FILE_PATH,B.FILE_TYPE,
    	B.ORIGN_FLAG,B.FILE_NM,B.FILE_SIZE
    	FROM TB_STOPENLIST A,TB_STBEFOPENLIST B
    	WHERE (A.RECORD_ID=B.RECORD_ID AND A.RECORD_CENTER_CD=B.RECORD_CENTER_CD) AND
    	A.CHNG_DTIME BETWEEN  #beginDate:VARCHAR# AND #endDate:VARCHAR#
    	AND A.RECORD_CENTER_CD=#recordCenterCode:VARCHAR#
    	AND A.RECORD_DETL_TYPE_CD=#infolistCode:VARCHAR# 
    	AND A.BEF_OPEN_FLAG='1'
	</select>
      
    <update id="updateBefOpenListHist" parameterClass="rms.webservice.domain.InfolistsReqVO" >
    	UPDATE TB_STBEFOPENLIST SET OPENLIST_OFFER_FLAG='1'
    	WHERE RECORD_ID IN
    	(SELECT RECORD_ID FROM TB_STOPENLIST 
    	WHERE CHNG_DTIME BETWEEN  #beginDate:VARCHAR# AND #endDate:VARCHAR#
    	AND RECORD_CENTER_CD=#recordCenterCode:VARCHAR#
    	AND RECORD_DETL_TYPE_CD=#infolistCode:VARCHAR#
    	AND OPENLIST_OFFER_FLAG='0' )
     </update>
    <!-- 기록관코드 확인  -->
    <select id="findRecordCenterCode" parameterClass="rms.webservice.domain.InfolistsReqVO" resultClass="string">
   	
    	SELECT count(1) cnt
    	FROM TB_STRECORDCENTER
    	WHERE RECORD_CENTER_CD=#recordCenterCode:VARCHAR#
    
    </select>
        <!-- 기록관코드개수 확인  -->
    <select id="findFolderCenterCode" parameterClass="rms.webservice.domain.InfolistsReqVO" resultClass="string">
   	
    	SELECT count(1) cnt
    	FROM TB_RDFOLDER
    	WHERE RECORD_CENTER_ID = #recordCenterId:VARCHAR#
    
    </select>
    <!-- 기록관코드   -->
    <select id="findRecordCenterCode1" parameterClass="rms.webservice.domain.BefOpenDocumentReqVO" resultClass="string">
   	
    	SELECT count(1) cnt
    	FROM TB_STRECORDCENTER
    	WHERE RECORD_CENTER_CD=#recordCenterCode:VARCHAR#
    
    </select>
    <!--  기록관Id   -->
    <select id="findRecordCenterId" parameterClass="rms.webservice.domain.BefOpenDocumentReqVO" resultClass="string">
     	SELECT RECORD_CENTER_ID
    	FROM TB_STRECORDCENTER
    	WHERE RECORD_CENTER_CD=#recordCenterCode:VARCHAR#
    </select>
    <!--  사전공개원문용 PdfFileId가져오기  -->
    <select id="findOrignPdfA1FileId" parameterClass="rms.webservice.domain.BefOpenDocumentReqVO" resultClass="string">
     	SELECT PDF_A1_FILE_ID
    	FROM TB_STBEFOPENLIST 
    	WHERE RECORD_CENTER_CD=#recordCenterCode:VARCHAR#
    	AND CREAT_REG_NO=#gvrnRgstNum:VARCHAR#
    	AND CREAT_REG_DTIME=#makedate:VARCHAR#
    	AND ORIGN_FLAG=#documentCode:VARCHAR#
    	AND FILE_SNO=#sourceNumber:VARCHAR#
    </select>
    <!--  기록관 기관코드 가져오기  -->
    <select id="findRecordCenterOrgCode" parameterClass="rms.webservice.domain.InfolistsReqVO" resultClass="string">
     	SELECT RECORD_CENTER_CD
    	FROM TB_STRECORDCENTER
    	WHERE RECORD_CENTER_ID=#recordCenterCode:VARCHAR#
    </select>


</sqlMap>