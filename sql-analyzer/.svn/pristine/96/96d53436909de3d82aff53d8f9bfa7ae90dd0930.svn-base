-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findRangeResortHandlDeptOpinRegRecordPagedList

		SELECT D.*		FROM (			SELECT ROWNUM AS rnum				, C.record_id				, C.record_center_id				, C.resort_case				, C.org_opin				, C.org_opin_ymd				, C.resort_seq				, C.title				, C.sub_title				, C.take_yyyy				, C.case_type				, C.bef_resort_yyyy				, C.excel_dwn_flag				, C.center_sel_flag				, C.expert_oper_read_range_aft				, C.expert_opin				, C.expert_opin_reg_ymd				, C.expert_user_id				, C.rslt_reg_ymd				, C.confirm_cd				, C.rjct_flag				, C.resort_opin_cd				, C.oper_read_range_bef				, C.oper_read_range_aft				, C.org_cd				, C.creat_yyyy				, C.corct_title				, C.doc_no_nm				, C.resort_prog_state_cd				, C.folder_keep_state_cd				, C.resort_prog_state_nm			    , C.creat_reg_dtime			    , C.take_mng_no			    , C.reg_dtime			    , C.last_read_resort_yyyy			    , C.creat_reg_no			    , C.dtch_reg_no			    , C.creat_sys_cd			    , C.folder_reg_seq			    , C.ho_no			    , C.clss_id			    , C.clss_div_cd			    , C.org_cd as handl_org_cd			    , C.org_nm			    , C.handl_org_nm			    , C.handl_org_abbr_nm			    , C.close_flag			    , C.clss_nm				, C.open_hist_cnt				, C.folder_title				, C.record_detl_type_nm				, C.org_abbr_nm				, C.oper_read_range_befnm				, C.oper_read_range_aftnm				, C.hist_qty			FROM (				SELECT a.record_id					, a.record_center_id					, a.resort_case					, a.org_opin					, a.org_opin_ymd					, a.resort_seq					, b.title					, b.sub_title					, a.take_yyyy					, a.case_type					, a.bef_resort_yyyy					, a.excel_dwn_flag					, a.center_sel_flag					, a.expert_oper_read_range_aft					, a.expert_opin					, a.expert_opin_reg_ymd					, a.expert_user_id					, a.rslt_reg_ymd					, a.confirm_cd					, a.take_mng_no					, a.rjct_flag					, a.resort_opin_cd					, trim(b.oper_read_range_cd) as oper_read_range_bef					, trim(a.org_oper_range_aft) as oper_read_range_aft					, b.org_cd					, b.creat_yyyy					, b.corct_title					, b.doc_no_nm					, a.resort_prog_state_cd					, b.folder_keep_state_cd					, (CASE WHEN A.resort_prog_state_cd = '03' THEN '미등록'				      	 	WHEN A.resort_prog_state_cd = '04' THEN '등록'				        	WHEN A.resort_prog_state_cd = '06' THEN '반영'				        	ELSE '진행중'				       END) resort_prog_state_nm				    , substr(b.creat_reg_dtime,0,12)||'00' creat_reg_dtime				    , b.reg_dtime				    , b.last_read_resort_yyyy				    , b.creat_reg_no				    , b.dtch_reg_no				    , b.creat_sys_cd				    , b.folder_reg_seq				    , b.ho_no				    , b.clss_id				    , b.clss_div_cd				    , a.org_cd as handl_org_cd				    , (SELECT dept_nm FROM tb_stdept WHERE org_cd = b.org_cd) as org_nm				    , (SELECT dept_nm FROM tb_stdept WHERE org_cd = a.org_cd) as handl_org_nm				    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = a.org_cd) as handl_org_abbr_nm				    , (SELECT close_flag FROM tb_stdept WHERE org_cd = b.org_cd) as close_flag				    , (CASE	WHEN b.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = b.clss_id)						    WHEN b.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = b.record_center_id and unit_cd = b.clss_id)					   END) as clss_nm					, (SELECT COUNT(*) FROM tb_rdopenhist WHERE record_center_id = a.record_center_id AND record_id = a.record_id) as open_hist_cnt					, (SELECT title FROM tb_rdfolder WHERE record_center_id = a.record_center_id AND folder_id = a.folder_id) as folder_title					, (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = b.record_detl_type_cd) as record_detl_type_nm					, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = b.org_cd) as org_abbr_nm					, (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_cd = trim(a.org_oper_range_bef) AND com_type_cd = 'RD53') as oper_read_range_befnm					, (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_cd = trim(a.org_oper_range_aft) AND com_type_cd = 'RD53') as oper_read_range_aftnm					, (SELECT COUNT(1) FROM tb_rdrangeresorthist WHERE record_center_id = a.record_center_id AND record_id = a.record_id) as hist_qty				FROM tb_rdrangeresortopin a, (					SELECT r.record_center_id						, r.record_id						, r.title						, r.record_detl_type_cd						, r.take_mng_no						, r.open_grade						, r.open_limit_part						, r.part_open_rsn						, r.reg_dtime						, r.last_read_resort_yyyy						, r.org_cd						, r.creat_reg_no						, r.dtch_reg_no						, r.creat_yyyy						, r.creat_reg_dtime						, r.clss_div_cd						, r.open_div_cd						, r.sub_title						, r.clss_id						, r.corct_title						, r.oper_read_range_cd						, f.creat_sys_cd						, f.folder_reg_seq						, f.ho_no						, f.folder_keep_state_cd						, (CASE WHEN ((r.creat_sys_cd='02' OR r.creat_sys_cd='05' OR r.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7))=1)				                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7)),SUBSTR(r.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(r.creat_reg_no,8))				                WHEN (r.creat_sys_cd='05' OR ((r.creat_sys_cd='01' OR r.creat_sys_cd='04') AND r.record_detl_type_cd='01'))				                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=r.org_cd),r.org_cd) ||'-'|| TO_NUMBER(r.doc_no)				                ELSE doc_no				            END) as doc_no_nm				    FROM tb_rdrecord r, tb_rdfolder f				    WHERE r.record_center_id = '1'				    AND	r.record_center_id = f.record_center_id				    AND	r.folder_id = f.folder_id				) b				WHERE a.record_center_id = '1'				AND a.record_center_id = b.record_center_id				AND a.record_id = b.record_id				AND trim(a.resort_prog_state_cd) between '03' and '07' AND 					a.resort_case = '1'				  AND 					a.resort_yyyy = '1'				  AND 					a.org_cd = '1'				  AND 					a.org_cd = '1'				  AND 					(b.clss_div_cd = '1' AND b.clss_id = '1')				  AND 					(b.title LIKE '1' OR b.sub_title LIKE '1' OR b.corct_title LIKE '1')				  AND 					b.creat_yyyy BETWEEN '1' AND '1'				  AND 					b.oper_read_range_cd = '1'				  AND 					a.org_oper_range_aft = '1'				  AND 					a.resort_prog_state_cd = '1'				  AND 					B.open_div_cd = '1'				  AND 					a.excel_dwn_flag = '1'				 				AND a.org_cd IS not null				ORDER BY a.record_id			) C			WHERE ROWNUM <= '1'		) D		WHERE D.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : countRangeResortHandlDeptOpinRegRecordPagedList

		SELECT COUNT(1)		FROM tb_rdrangeresortopin a, (			SELECT r.record_center_id				, r.record_id				, r.title				, r.record_detl_type_cd				, r.take_mng_no				, r.open_grade				, r.open_limit_part				, r.part_open_rsn				, r.reg_dtime				, r.last_read_resort_yyyy				, r.org_cd				, r.creat_reg_no				, r.dtch_reg_no				, r.creat_yyyy				, r.creat_reg_dtime				, r.clss_div_cd				, r.open_div_cd				, r.sub_title				, r.clss_id				, r.corct_title				, r.oper_read_range_cd				, f.creat_sys_cd				, f.folder_reg_seq				, f.ho_no				, f.folder_keep_state_cd				, (CASE WHEN ((r.creat_sys_cd='02' OR r.creat_sys_cd='05' OR r.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7))=1)		                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7)),SUBSTR(r.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(r.creat_reg_no,8))		                WHEN (r.creat_sys_cd='05' OR ((r.creat_sys_cd='01' OR r.creat_sys_cd='04') AND r.record_detl_type_cd='01'))		                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=r.org_cd),r.org_cd) ||'-'|| TO_NUMBER(r.doc_no)		                ELSE doc_no		            END) as doc_no_nm		    FROM tb_rdrecord r, tb_rdfolder f		    WHERE r.record_center_id = '1'		    AND	r.record_center_id = f.record_center_id		    AND	r.folder_id = f.folder_id		) b		WHERE a.record_center_id = '1'		AND a.record_center_id = b.record_center_id		AND a.record_id = b.record_id		AND trim(a.resort_prog_state_cd) between '03' and '07' AND 			a.resort_case = '1'		  AND 			a.resort_yyyy = '1'		  AND 			a.org_cd = '1'		  AND 			a.org_cd = '1'		  AND 			(b.clss_div_cd = '1' AND b.clss_id = '1')		  AND 			(b.title LIKE '1' OR b.sub_title LIKE '1' OR b.corct_title LIKE '1')		  AND 			b.creat_yyyy BETWEEN '1' AND '1'		  AND 			b.oper_read_range_cd = '1'		  AND 			a.org_oper_range_aft = '1'		  AND 			a.resort_prog_state_cd = '1'		  AND 			B.open_div_cd = '1'		  AND 			a.excel_dwn_flag = '1'		 		AND a.org_cd IS not null	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findRangeResortHandlDeptOpinRegRecord

		SELECT C.record_id			, C.record_center_id			, C.resort_case			, C.org_opin			, C.org_opin_ymd			, C.resort_seq			, C.title			, C.sub_title			, C.take_yyyy			, C.case_type			, C.bef_resort_yyyy			, C.excel_dwn_flag			, C.center_sel_flag			, C.expert_oper_read_range_aft			, C.expert_opin			, C.expert_opin_reg_ymd			, C.expert_user_id			, C.rslt_reg_ymd			, C.confirm_cd			, C.rjct_flag			, C.resort_opin_cd			, C.oper_read_range_bef			, C.oper_read_range_aft			, C.org_cd			, C.creat_yyyy			, C.corct_title			, C.doc_no_nm			, C.resort_prog_state_cd			, C.folder_keep_state_cd			, C.resort_prog_state_nm		    , C.creat_reg_dtime		    , C.take_mng_no		    , C.reg_dtime		    , C.last_read_resort_yyyy		    , C.creat_reg_no		    , C.dtch_reg_no		    , C.creat_sys_cd		    , C.folder_reg_seq		    , C.ho_no		    , C.clss_id		    , C.clss_div_cd		    , C.org_cd as handl_org_cd		    , C.org_nm		    , C.handl_org_nm		    , C.handl_org_abbr_nm		    , C.close_flag		    , C.clss_nm			, C.open_hist_cnt			, C.folder_title			, C.record_detl_type_nm			, C.org_abbr_nm			, C.oper_read_range_befnm			, C.oper_read_range_aftnm			, C.hist_qty		FROM (			SELECT a.record_id				, a.record_center_id				, a.resort_case				, a.org_opin				, a.org_opin_ymd				, a.resort_seq				, b.title				, b.sub_title				, a.take_yyyy				, a.case_type				, a.bef_resort_yyyy				, a.excel_dwn_flag				, a.center_sel_flag				, a.expert_oper_read_range_aft				, a.expert_opin				, a.expert_opin_reg_ymd				, a.expert_user_id				, a.rslt_reg_ymd				, a.confirm_cd				, a.take_mng_no				, a.rjct_flag				, a.resort_opin_cd				, trim(b.oper_read_range_cd) as oper_read_range_bef				, trim(a.org_oper_range_aft) as oper_read_range_aft				, b.org_cd				, b.creat_yyyy				, b.corct_title				, b.doc_no_nm				, a.resort_prog_state_cd				, b.folder_keep_state_cd				, (CASE WHEN A.resort_prog_state_cd = '03' THEN '미등록'			      	 	WHEN A.resort_prog_state_cd = '04' THEN '등록'			        	WHEN A.resort_prog_state_cd = '07' THEN '반영'			        	ELSE '진행중'			       END) resort_prog_state_nm			    , substr(b.creat_reg_dtime,0,12)||'00' creat_reg_dtime			    , b.reg_dtime			    , b.last_read_resort_yyyy			    , b.creat_reg_no			    , b.dtch_reg_no			    , b.creat_sys_cd			    , b.folder_reg_seq			    , b.ho_no			    , b.clss_id			    , b.clss_div_cd			    , a.org_cd as handl_org_cd			    , (SELECT dept_nm FROM tb_stdept WHERE org_cd = b.org_cd) as org_nm			    , (SELECT dept_nm FROM tb_stdept WHERE org_cd = a.org_cd) as handl_org_nm			    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = a.org_cd) as handl_org_abbr_nm			    , (SELECT close_flag FROM tb_stdept WHERE org_cd = b.org_cd) as close_flag			    , (CASE	WHEN b.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = b.clss_id)					    WHEN b.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = b.record_center_id and unit_cd = b.clss_id)				   END) as clss_nm				, (SELECT COUNT(*) FROM tb_rdopenhist WHERE record_center_id = a.record_center_id AND record_id = a.record_id) as open_hist_cnt				, (SELECT title FROM tb_rdfolder WHERE record_center_id = a.record_center_id AND folder_id = a.folder_id) as folder_title				, (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = b.record_detl_type_cd) as record_detl_type_nm				, (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = b.org_cd) as org_abbr_nm				, (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_cd = trim(a.org_oper_range_bef) AND com_type_cd = 'RD53') as oper_read_range_befnm				, (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_cd = trim(a.org_oper_range_aft) AND com_type_cd = 'RD53') as oper_read_range_aftnm				, (SELECT COUNT(1) FROM tb_rdrangeresorthist WHERE record_center_id = a.record_center_id AND record_id = a.record_id) as hist_qty			FROM tb_rdrangeresortopin a, (				SELECT r.record_center_id					, r.record_id					, r.title					, r.record_detl_type_cd					, r.take_mng_no					, r.open_grade					, r.open_limit_part					, r.part_open_rsn					, r.reg_dtime					, r.last_read_resort_yyyy					, r.org_cd					, r.creat_reg_no					, r.dtch_reg_no					, r.creat_yyyy					, r.creat_reg_dtime					, r.clss_div_cd					, r.open_div_cd					, r.sub_title					, r.clss_id					, r.corct_title					, r.oper_read_range_cd					, f.creat_sys_cd					, f.folder_reg_seq					, f.ho_no					, f.folder_keep_state_cd					, (CASE WHEN ((r.creat_sys_cd='02' OR r.creat_sys_cd='05' OR r.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7))=1)			                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7)),SUBSTR(r.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(r.creat_reg_no,8))			                WHEN (r.creat_sys_cd='05' OR ((r.creat_sys_cd='01' OR r.creat_sys_cd='04') AND r.record_detl_type_cd='01'))			                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=r.org_cd),r.org_cd) ||'-'|| TO_NUMBER(r.doc_no)			                ELSE doc_no			            END) as doc_no_nm			    FROM tb_rdrecord r, tb_rdfolder f			    WHERE r.record_center_id = '1'			    AND	r.record_center_id = f.record_center_id			    AND	r.folder_id = f.folder_id			) b			WHERE a.record_center_id = '1'			AND a.record_center_id = b.record_center_id			AND a.record_id = b.record_id			AND trim(a.resort_prog_state_cd) between '03' and '07' AND 				a.resort_case = '1'			  AND 				a.resort_yyyy = '1'			  AND 				a.org_cd = '1'			  AND 				a.org_cd = '1'			  AND 				(b.clss_div_cd = '1' AND b.clss_id = '1')			  AND 				(b.title LIKE '1' OR b.sub_title LIKE '1' OR b.corct_title LIKE '1')			  AND 				b.creat_yyyy BETWEEN '1' AND '1'			  AND 				b.oper_read_range_cd = '1'			  AND 				a.org_oper_range_aft = '1'			  AND 				a.resort_prog_state_cd = '1'			  AND 				B.open_div_cd = '1'			  AND 				a.excel_dwn_flag = '1'			 			AND a.org_cd IS not null			ORDER BY a.record_id		) C	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findRangeResortOrgOpinRecord

		SELECT a.record_id			, a.record_center_id			, a.resort_case			, a.org_opin			, a.org_opin_ymd			, a.resort_seq			, b.title			, b.sub_title			, a.take_yyyy			, a.case_type			, a.bef_resort_yyyy			, a.excel_dwn_flag			, a.center_sel_flag			, a.expert_oper_read_range_aft			, a.expert_opin			, a.expert_opin_reg_ymd			, a.expert_user_id			, a.rslt_reg_ymd			, a.confirm_cd			, a.take_mng_no			, a.rjct_flag			, a.resort_opin_cd			, trim(a.org_oper_range_bef) as oper_read_range_bef			, trim(a.org_oper_range_aft) as oper_read_range_aft			, b.org_cd			, b.creat_yyyy			, b.corct_title			, b.doc_no_nm			, a.resort_prog_state_cd			, b.folder_keep_state_cd			, (CASE WHEN A.resort_prog_state_cd = '04' THEN '미등록'		        	WHEN A.resort_prog_state_cd = '05' THEN '등록'		        	WHEN A.resort_prog_state_cd = '07' THEN '반영'		        	ELSE '진행중'		       END) resort_prog_state_nm		    , substr(b.creat_reg_dtime,0,12)||'00' creat_reg_dtime		    , b.take_mng_no		    , b.reg_dtime		    , b.last_read_resort_yyyy		    , b.creat_reg_no		    , b.dtch_reg_no		    , b.creat_sys_cd		    , b.folder_reg_seq		    , b.ho_no		    , b.clss_id		    , b.clss_div_cd		    , a.org_cd as handl_org_cd		    , (SELECT dept_nm FROM tb_stdept WHERE org_cd = b.org_cd) as org_nm		    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = b.org_cd) as org_abbr_nm		    , (SELECT dept_nm FROM tb_stdept WHERE org_cd = a.org_cd) as handl_org_nm		    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = a.org_cd) as handl_org_abbr_nm		    , (SELECT close_flag FROM tb_stdept WHERE org_cd = b.org_cd) as close_flag		    , (case when b.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = b.clss_id)		            when b.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = b.record_center_id and unit_cd = b.clss_id)		       end) as clss_nm		    , (SELECT COUNT(*) FROM tb_rdopenhist WHERE record_center_id = a.record_center_id AND record_id = a.record_id) as open_hist_cnt		    , (SELECT title FROM tb_rdfolder WHERE record_center_id = a.record_center_id AND folder_id = a.folder_id) as folder_title		    , (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = b.record_detl_type_cd) as record_detl_type_nm		    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = b.org_cd) as org_abbr_nm		    , (select com_cd_nm from tb_zzcomcd where com_cd = trim(a.org_oper_range_bef) and com_type_cd = 'RD53') as oper_read_range_befnm		    , (select com_cd_nm from tb_zzcomcd where com_cd = trim(a.org_oper_range_aft) and com_type_cd = 'RD53') as oper_read_range_aftnm		    , (SELECT COUNT(1) FROM tb_rdrangeresorthist WHERE record_center_id = a.record_center_id AND record_id = a.record_id) as hist_qty		FROM tb_rdrangeresortopin a, (			SELECT r.record_center_id				, r.record_id				, r.title				, r.record_detl_type_cd				, r.take_mng_no				, r.open_grade				, r.open_limit_part				, r.part_open_rsn				, r.reg_dtime				, r.last_read_resort_yyyy				, r.org_cd				, r.creat_reg_no				, r.dtch_reg_no				, r.creat_yyyy				, r.creat_reg_dtime				, r.clss_div_cd				, r.open_div_cd				, r.sub_title				, r.clss_id				, r.corct_title				, f.creat_sys_cd				, f.folder_reg_seq				, f.ho_no				, f.folder_keep_state_cd				, (CASE WHEN ((r.creat_sys_cd='02' OR r.creat_sys_cd='05' OR r.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7))=1)		                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7)),SUBSTR(r.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(r.creat_reg_no,8))		                WHEN (r.creat_sys_cd='05' OR ((r.creat_sys_cd='01' OR r.creat_sys_cd='04') AND r.record_detl_type_cd='01'))		                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=r.org_cd),r.org_cd) ||'-'|| TO_NUMBER(r.doc_no)		                ELSE doc_no		           END) as doc_no_nm		   FROM tb_rdrecord r, tb_rdfolder f		   WHERE r.record_center_id = '1'		   AND r.record_center_id = f.record_center_id		   AND r.folder_id = f.folder_id		) b		WHERE a.record_center_id = '1'		AND a.record_center_id = b.record_center_id		AND	a.record_id = b.record_id		AND a.record_id    = '1'		AND a.resort_seq   = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findRangeResortExpertOpinRegRecordPagedList

		SELECT D.*		FROM (			SELECT ROWNUM AS rnum				, C.*			FROM (				SELECT a.record_id					, a.record_center_id					, a.resort_case					, a.org_opin					, a.org_opin_ymd					, a.resort_seq					, b.title					, b.sub_title					, a.take_yyyy					, a.case_type					, a.bef_resort_yyyy					, a.excel_dwn_flag					, a.center_sel_flag					, a.expert_oper_read_range_aft					, a.expert_opin					, a.expert_opin_reg_ymd					, a.expert_user_id					, a.rslt_reg_ymd					, a.confirm_cd					, a.rjct_flag					, a.resort_opin_cd					, trim(a.org_oper_range_bef) as oper_read_range_bef, trim(a.org_oper_range_aft) as oper_read_range_aft					, b.org_cd					, b.creat_yyyy					, b.corct_title					, b.doc_no_nm					, a.resort_prog_state_cd					, b.folder_keep_state_cd					, (CASE WHEN A.resort_prog_state_cd = '04' THEN '미등록'				            WHEN A.resort_prog_state_cd = '05' THEN '등록'				        	WHEN A.resort_prog_state_cd = '07' THEN '반영'				        	ELSE '진행중'				       END) resort_prog_state_nm				    , substr(b.creat_reg_dtime,0,12)||'00' creat_reg_dtime				    , b.take_mng_no				    , b.reg_dtime				    , b.last_read_resort_yyyy				    , b.creat_reg_no				    , b.dtch_reg_no				    , b.creat_sys_cd				    , b.folder_reg_seq				    , b.ho_no				    , b.clss_id				    , b.clss_div_cd				    , trim(a.org_cd) as handl_org_cd				    , (SELECT dept_nm FROM tb_stdept WHERE org_cd = trim(b.org_cd)) as org_nm				    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = trim(b.org_cd)) as org_abbr_nm				    , (SELECT dept_nm FROM tb_stdept WHERE org_cd = trim(a.org_cd)) as handl_org_nm				    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = trim(a.org_cd)) as handl_org_abbr_nm				    , (SELECT close_flag FROM tb_stdept WHERE org_cd = trim(b.org_cd)) as close_flag				    , (case when b.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = b.clss_id)				            when b.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = b.record_center_id and unit_cd = b.clss_id)				       end) as clss_nm				    , (SELECT COUNT(*) FROM tb_rdopenhist WHERE record_center_id = a.record_center_id AND record_id = a.record_id) as open_hist_cnt				    , (SELECT title FROM tb_rdfolder WHERE record_center_id = a.record_center_id AND folder_id = a.folder_id) as folder_title				    , (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = b.record_detl_type_cd) as record_detl_type_nm				    , (select com_cd_nm from tb_zzcomcd where com_cd = trim(a.org_oper_range_bef) and com_type_cd = 'RD53') as oper_read_range_befnm				    , (select com_cd_nm from tb_zzcomcd where com_cd = trim(a.org_oper_range_aft) and com_type_cd = 'RD53') as oper_read_range_aftnm				    , (SELECT COUNT(1) FROM tb_rdrangeresorthist WHERE record_center_id = a.record_center_id AND record_id = a.record_id) as hist_qty				FROM tb_rdrangeresortopin a 					, (					SELECT r.record_center_id						, r.record_id						, r.title						, r.record_detl_type_cd						, r.take_mng_no						, r.open_grade						, r.open_limit_part						, r.part_open_rsn						, r.reg_dtime						, r.last_read_resort_yyyy						, r.org_cd						, r.creat_reg_no						, r.dtch_reg_no						, r.creat_yyyy						, r.creat_reg_dtime						, r.clss_div_cd						, r.open_div_cd						, r.sub_title						, r.clss_id						, r.corct_title						, f.creat_sys_cd						, f.folder_reg_seq						, f.ho_no						, f.folder_keep_state_cd						, (CASE WHEN ((r.creat_sys_cd='02' OR r.creat_sys_cd='05' OR r.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7))=1)				                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7)),SUBSTR(r.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(r.creat_reg_no,8))				                WHEN (r.creat_sys_cd='05' OR ((r.creat_sys_cd='01' OR r.creat_sys_cd='04') AND r.record_detl_type_cd='01'))				                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=r.org_cd),r.org_cd) ||'-'|| TO_NUMBER(r.doc_no)				                ELSE doc_no				           END) as doc_no_nm					FROM tb_rdrecord r, tb_rdfolder f				    WHERE r.record_center_id = '1'				    AND	  r.record_center_id = f.record_center_id				    AND	  r.folder_id = f.folder_id				    ) b				WHERE	a.record_center_id = '1'				AND		a.record_center_id = b.record_center_id				AND 	a.record_id = b.record_id AND 					trim(a.resort_Case) = '1'				  AND 					a.org_cd = '1'				  AND 					trim(a.org_cd) = '1'				  AND 					(b.clss_div_cd = '1' AND b.clss_id = '1')				  AND 					(b.title LIKE '1' OR b.sub_title LIKE '1' OR b.corct_title LIKE '1')				  AND 					b.creat_yyyy BETWEEN '1' AND '1'				  AND 					a.ORG_OPER_RANGE_BEF = '1'				  AND 					a.ORG_OPER_RANGE_AFT = '1'				  AND 					a.resort_prog_state_cd = '1'				  AND 					B.open_Div_Cd = '1'				  AND 					a.excel_dwn_flag = '1'				  AND 					a.resort_yyyy = '1'				  AND 					a.resort_case = '1'				 				ORDER BY a.record_id			) C			WHERE ROWNUM <= '1'		) D		WHERE D.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : countRangeResortExpertOpinRegRecordPagedList

		SELECT COUNT(*)		FROM tb_rdrangeresortopin a 			, (			SELECT r.record_center_id				, r.record_id				, r.title				, r.record_detl_type_cd				, r.take_mng_no				, r.open_grade				, r.open_limit_part				, r.part_open_rsn				, r.reg_dtime				, r.last_read_resort_yyyy				, r.org_cd				, r.creat_reg_no				, r.dtch_reg_no				, r.creat_yyyy				, r.creat_reg_dtime				, r.clss_div_cd				, r.open_div_cd				, r.sub_title				, r.clss_id				, r.corct_title				, f.creat_sys_cd				, f.folder_reg_seq				, f.ho_no				, f.folder_keep_state_cd				, (CASE WHEN ((r.creat_sys_cd='02' OR r.creat_sys_cd='05' OR r.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7))=1)		                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7)),SUBSTR(r.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(r.creat_reg_no,8))		                WHEN (r.creat_sys_cd='05' OR ((r.creat_sys_cd='01' OR r.creat_sys_cd='04') AND r.record_detl_type_cd='01'))		                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=r.org_cd),r.org_cd) ||'-'|| TO_NUMBER(r.doc_no)		                ELSE doc_no		           END) as doc_no_nm			FROM tb_rdrecord r, tb_rdfolder f		    WHERE r.record_center_id = '1'		    AND	  r.record_center_id = f.record_center_id		    AND	  r.folder_id = f.folder_id		    ) b		WHERE	a.record_center_id = '1'		AND		a.record_center_id = b.record_center_id		AND 	a.record_id = b.record_id		 AND 			trim(a.resort_Case) = '1'		  AND 			a.org_cd = '1'		  AND 			trim(a.org_cd) = '1'		  AND 			(b.clss_div_cd = '1' AND b.clss_id = '1')		  AND 			(b.title LIKE '1' OR b.sub_title LIKE '1' OR b.corct_title LIKE '1')		  AND 			b.creat_yyyy BETWEEN '1' AND '1'		  AND 			a.ORG_OPER_RANGE_BEF = '1'		  AND 			a.ORG_OPER_RANGE_AFT = '1'		  AND 			a.resort_prog_state_cd = '1'		  AND 			B.open_Div_Cd = '1'		  AND 			a.excel_dwn_flag = '1'		  AND 			a.resort_yyyy = '1'		  AND 			a.resort_case = '1'		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findRangeResortExpertOpinRegRecord

		SELECT a.record_id			, a.record_center_id			, a.resort_case			, a.org_opin			, a.org_opin_ymd			, a.resort_seq			, b.title			, b.sub_title			, a.take_yyyy			, a.case_type			, a.bef_resort_yyyy			, a.excel_dwn_flag			, a.center_sel_flag			, a.expert_oper_read_range_aft			, a.expert_opin			, a.expert_opin_reg_ymd			, a.expert_user_id			, a.rslt_reg_ymd			, a.confirm_cd			, a.take_mng_no			, a.rjct_flag			, a.resort_opin_cd			, trim(a.org_oper_range_bef) as oper_read_range_bef, trim(a.org_oper_range_aft) as oper_read_range_aft			, b.org_cd			, b.creat_yyyy			, b.corct_title			, b.doc_no_nm			, a.resort_prog_state_cd			, b.folder_keep_state_cd			, (CASE WHEN A.resort_prog_state_cd = '04' THEN '미등록'		            WHEN A.resort_prog_state_cd = '05' THEN '등록'		        	WHEN A.resort_prog_state_cd = '07' THEN '반영'		        	ELSE '진행중'		       END) resort_prog_state_nm		    , substr(b.creat_reg_dtime,0,12)||'00' creat_reg_dtime		    , b.take_mng_no		    , b.reg_dtime		    , b.last_read_resort_yyyy		    , b.creat_reg_no		    , b.dtch_reg_no		    , b.creat_sys_cd		    , b.folder_reg_seq		    , b.ho_no		    , b.clss_id		    , b.clss_div_cd		    , trim(a.org_cd) as handl_org_cd		    , (SELECT dept_nm FROM tb_stdept WHERE org_cd = trim(b.org_cd)) as org_nm		    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = trim(b.org_cd)) as org_abbr_nm		    , (SELECT dept_nm FROM tb_stdept WHERE org_cd = trim(a.org_cd)) as handl_org_nm		    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = trim(a.org_cd)) as handl_org_abbr_nm		    , (SELECT close_flag FROM tb_stdept WHERE org_cd = trim(b.org_cd)) as close_flag		    , (case when b.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = b.clss_id)		            when b.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = b.record_center_id and unit_cd = b.clss_id)		       end) as clss_nm		    , (SELECT COUNT(*) FROM tb_rdopenhist WHERE record_center_id = a.record_center_id AND record_id = a.record_id) as open_hist_cnt		    , (SELECT title FROM tb_rdfolder WHERE record_center_id = a.record_center_id AND folder_id = a.folder_id) as folder_title		    , (SELECT com_cd_nm FROM tb_zzcomcd WHERE com_type_cd = 'RD03' AND com_cd = b.record_detl_type_cd) as record_detl_type_nm		    , (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = b.org_cd) as org_abbr_nm		    , (select com_cd_nm from tb_zzcomcd where com_cd = trim(a.org_oper_range_bef) and com_type_cd = 'RD53') as oper_read_range_befnm		    , (select com_cd_nm from tb_zzcomcd where com_cd = trim(a.org_oper_range_aft) and com_type_cd = 'RD53') as oper_read_range_aftnm		    , (SELECT COUNT(1) FROM tb_rdrangeresorthist WHERE record_center_id = a.record_center_id AND record_id = a.record_id) as hist_qty		FROM tb_rdrangeresortopin a 			, (			SELECT r.record_center_id				, r.record_id				, r.title				, r.record_detl_type_cd				, r.take_mng_no				, r.open_grade				, r.open_limit_part				, r.part_open_rsn				, r.reg_dtime				, r.last_read_resort_yyyy				, r.org_cd				, r.creat_reg_no				, r.dtch_reg_no				, r.creat_yyyy				, r.creat_reg_dtime				, r.clss_div_cd				, r.open_div_cd				, r.sub_title				, r.clss_id				, r.corct_title				, f.creat_sys_cd				, f.folder_reg_seq				, f.ho_no				, f.folder_keep_state_cd				, (CASE WHEN ((r.creat_sys_cd='02' OR r.creat_sys_cd='05' OR r.creat_sys_cd='06') AND (SELECT 1 FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7))=1)		                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=SUBSTR(r.creat_reg_no,1,7)),SUBSTR(r.creat_reg_no,1,7)) ||'-'|| TO_NUMBER(SUBSTR(r.creat_reg_no,8))		                WHEN (r.creat_sys_cd='05' OR ((r.creat_sys_cd='01' OR r.creat_sys_cd='04') AND r.record_detl_type_cd='01'))		                THEN NVL((SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=r.record_center_id AND Z.org_cd=r.org_cd),r.org_cd) ||'-'|| TO_NUMBER(r.doc_no)		                ELSE doc_no		           END) as doc_no_nm			FROM tb_rdrecord r, tb_rdfolder f		    WHERE r.record_center_id = '1'		    AND	  r.record_center_id = f.record_center_id		    AND	  r.folder_id = f.folder_id		    ) b		WHERE	a.record_center_id = '1'		AND		a.record_center_id = b.record_center_id		AND 	a.record_id = b.record_id AND 			trim(a.resort_Case) = '1'		  AND 			b.org_cd = '1'		  AND 			trim(a.org_cd) = '1'		  AND 			(b.clss_div_cd = '1' AND b.clss_id = '1')		  AND 			(b.title LIKE '1' OR b.sub_title LIKE '1' OR b.corct_title LIKE '1')		  AND 			b.creat_yyyy BETWEEN '1' AND '1'		  AND 			a.ORG_OPER_RANGE_BEF = '1'		  AND 			a.ORG_OPER_RANGE_AFT = '1'		  AND 			a.resort_prog_state_cd = '1'		  AND 			B.open_Div_Cd = '1'		  AND 			a.excel_dwn_flag = '1'		  AND 			a.resort_yyyy = '1'		  AND 			a.resort_case = '1'		 		ORDER BY a.record_id	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findRangeResortExpOpinRecord

		SELECT A.expert_Opin_Reg_Ymd			, trim(A.expert_Oper_Read_Range_Aft) as expert_Oper_Read_Range_Aft			, B.com_cd_nm AS oper_read_range_aftnm       		, A.expert_Opin       		, A.confirm_cd		FROM tb_rdrangeresortopin A join tb_zzcomcd B on B.com_cd = trim(A.expert_Oper_Read_Range_Aft) AND  B.com_type_cd = 'RD53'		WHERE A.record_center_id = '1'		AND A.record_id = '1'		AND A.resort_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findRangeResortOpinBatchRegPagedList

		SELECT D.*		FROM (			SELECT ROWNUM AS rnum				, C.*			FROM (				SELECT RECORD_CENTER_ID					, TRIM(ORG_CD) AS ORG_CD					, (SELECT Z.ORG_NM FROM TB_STORG Z WHERE Z.RECORD_CENTER_ID=A.RECORD_CENTER_ID AND Z.ORG_CD=A.ORG_CD) ORG_NM					, (SELECT Z.ORG_ABBR_NM FROM TB_STORG Z WHERE Z.RECORD_CENTER_ID=A.RECORD_CENTER_ID AND Z.ORG_CD=A.ORG_CD) ORG_ABBR_NM					, COUNT(*) AS TOTCNT					, SUM(RESORT_PROG_STATE03) RESORT_PROG_STATE03					, SUM(RESORT_PROG_STATE04) RESORT_PROG_STATE04					, SUM(RESORT_PROG_STATE05) RESORT_PROG_STATE05					, SUM(RESORT_PROG_STATE07) RESORT_PROG_STATE07					, SUM(DWN_CNT) DWN_CNT					, SUM(DEPT_CNT) DEPT_CNT				FROM (					SELECT A.RECORD_CENTER_ID						, A.ORG_CD						, CASE WHEN RESORT_PROG_STATE_CD = '03' THEN 1				               ELSE 0				          END AS RESORT_PROG_STATE03				        , CASE WHEN RESORT_PROG_STATE_CD BETWEEN '04' AND '05' AND A.ORG_CD IS NOT NULL THEN 1				               ELSE 0				          END AS RESORT_PROG_STATE04				        , CASE WHEN RESORT_PROG_STATE_CD ='05' THEN 1				               ELSE 0				          END AS RESORT_PROG_STATE05				        , CASE WHEN RESORT_PROG_STATE_CD ='06' THEN 1				               ELSE 0				          END AS RESORT_PROG_STATE07				        , CASE WHEN RESORT_PROG_STATE_CD IN ('03','04','05','06') AND EXCEL_DWN_FLAG = '1' THEN 1				               ELSE 0				          END AS DWN_CNT				        , CASE WHEN RESORT_PROG_STATE_CD = '03' THEN 1				               ELSE 0				          END AS DEPT_CNT				    FROM TB_RDRANGERESORTOPIN A, TB_RDRECORD B				    WHERE A.RECORD_CENTER_ID=B.RECORD_CENTER_ID				    AND A.RECORD_ID = B.RECORD_ID				    AND A.RECORD_CENTER_ID = '1'				    AND A.RESORT_PROG_STATE_CD BETWEEN '03' AND '06' AND 				        trim(a.resort_Case) = '1'				      AND 				        a.resort_yyyy = '1'				      AND 				        a.org_cd = '1'				      AND 				        a.org_cd = '1'				     				) A				GROUP BY RECORD_CENTER_ID, ORG_CD				ORDER BY RECORD_CENTER_ID, ORG_CD			) C			WHERE ROWNUM <= '1'		) D		WHERE D.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : countRangeResortOpinBatchRegPagedList

		SELECT count(*)		FROM (			select record_center_id				, org_cd				, (SELECT Z.org_nm FROM TB_STORG Z WHERE Z.record_center_id=D.record_center_id AND Z.org_cd=D.org_cd) org_nm				, (SELECT Z.org_abbr_nm FROM TB_STORG Z WHERE Z.record_center_id=D.record_center_id AND Z.org_cd=D.org_cd) org_abbr_nm				, totcnt				, resort_prog_state03				, resort_prog_state04				, resort_prog_state05			from (				SELECT A.record_center_id					, A.org_cd					, COUNT(1) AS totCnt					, (						SELECT COUNT(1)					  	FROM tb_rdrangeresortopin x, tb_rdrecord y					  	WHERE x.record_center_id   = '1'					  	AND x.record_id            = y.record_id					  	AND y.record_center_id     = '1'					  	AND x.resort_prog_state_cd ='03'					  	AND x.org_cd               =a.org_cd AND 							trim(x.resort_Case) = '1'						  AND 							x.resort_yyyy = '1'						  AND 							x.org_cd = '1'						  AND 							x.org_cd = '1'						 ) AS resort_prog_state03					, (						SELECT COUNT(1)					 	FROM tb_rdrangeresortopin x, tb_rdrecord y					  	WHERE x.record_center_id   = '1'					  	AND x.record_id            = y.record_id					  	AND y.record_center_id     = '1'				      	AND x.resort_prog_state_cd  ='04'					  	AND x.org_cd               =a.org_cd					  	 AND 							trim(x.resort_Case) = '1'						  AND 							x.resort_yyyy = '1'						  AND 							x.org_cd = '1'						  AND 							x.org_cd = '1'						 ) AS resort_prog_state04					, (						SELECT COUNT(1)					  	FROM tb_rdrangeresortopin x, tb_rdrecord y					  	WHERE x.record_center_id   = '1'					  	AND x.record_id            = y.record_id					  	AND y.record_center_id     = '1'					  	AND x.resort_prog_state_cd ='05'					  	AND x.org_cd               =a.org_cd AND 							trim(x.resort_Case) = '1'						  AND 							x.resort_yyyy = '1'						  AND 							x.org_cd = '1'						  AND 							x.org_cd = '1'						 ) AS resort_prog_state05					, (						SELECT COUNT(1)					  	FROM tb_rdrangeresortopin x, tb_rdrecord y					  	WHERE x.record_center_id   = '1'					  	AND x.record_id            = y.record_id					  	AND y.record_center_id     = '1'					  	AND x.resort_prog_state_cd ='07'					  	AND x.org_cd               =a.org_cd AND 							trim(x.resort_Case) = '1'						  AND 							x.resort_yyyy = '1'						  AND 							x.org_cd = '1'						  AND 							x.org_cd = '1'						 ) AS resort_prog_state07					, (						SELECT COUNT(1)					  	FROM tb_rdrangeresortopin x, tb_rdrecord y					  	WHERE x.record_center_id   = '1'					  	AND x.record_id            = y.record_id					  	AND y.record_center_id     = '1'					  	AND x.resort_prog_state_cd in ('03','04','05','06')					  	AND x.excel_dwn_flag = '1'					  	AND x.org_cd               =a.org_cd					  	 AND 							trim(x.resort_Case) = '1'						  AND 							x.resort_yyyy = '1'						  AND 							x.org_cd = '1'						  AND 							x.org_cd = '1'						 )as dwn_cnt					, (						SELECT COUNT(1)					  	FROM tb_rdrangeresortopin x, tb_rdrecord y					  	WHERE x.record_center_id   = '1'					  	AND x.record_id            = y.record_id					  	AND y.record_center_id     = '1'					  	AND x.resort_prog_state_cd = '03'					  	AND x.org_cd               =a.org_cd AND 							trim(x.resort_Case) = '1'						  AND 							x.resort_yyyy = '1'						  AND 							x.org_cd = '1'						  AND 							x.org_cd = '1'						 )as dept_cnt				FROM tb_rdrangeresortopin A, tb_rdrecord b				WHERE A.record_center_id = '1'				AND A.record_id          = b.record_id				AND b.record_center_id   = '1'				AND A.resort_prog_state_cd BETWEEN '03' AND '05' AND 					trim(a.resort_Case) = '1'				  AND 					a.resort_yyyy = '1'				  AND 					a.org_cd = '1'				  AND 					a.org_cd = '1'				 				GROUP BY A.record_center_id, A.org_cd			)d		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateRangeResortHandlDeptOpinRegRecord

	 UPDATE tb_rdrangeresortopin	 SET resort_prog_state_cd = '1'	     ,org_opin = '1'	     ,org_opin_ymd = '1'	     ,org_oper_range_aft = '1'	     ,org_userid = '1'  	 WHERE  record_center_id = '1'  	 AND  record_id = '1'     AND  resort_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateRangeResortHandlDeptOpinRecord

		UPDATE TB_RDRANGERESORTOPIN		SET RESORT_PROG_STATE_CD = '1'      			,ORG_OPIN = '1'     			,ORG_OPIN_YMD = to_char(sysdate, 'yyyymmdd')     			,ORG_OPER_RANGE_AFT = '1'     			,ORG_USERID = '1'     			,CONFIRM_CD = '1'     			,RJCT_FLAG = '0' 		WHERE record_center_id = '1'		AND record_id = '1'		AND resort_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateRangeResortExpertOpinRegRecord

		UPDATE tb_rdrangeresortopin		SET resort_prog_state_cd = '1'	    	,expert_opin = '1'	        ,expert_opin_reg_ymd = '1'	        ,expert_oper_read_range_aft = '1'	        ,expert_user_id = '1'	        ,confirm_cd = '2'		WHERE record_center_id = '1'  	    AND record_id = '1'        AND resort_seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateRangeResortRecordOpinRegState

		UPDATE TB_RDRECORD	    SET READ_RANGERESORT_PROG_STATE_CD = '1'	    WHERE RECORD_ID = '1'	    AND RECORD_CENTER_ID = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : update
-- Query Id : updateRangeResortExcelDwnFlag

		UPDATE tb_rdrangeresortopin		SET excel_dwn_flag = '1'		WHERE record_center_id = '1'		AND record_id = '1'		AND resort_seq = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findRangeResortExpertOpinRegCurStatePagedList

		SELECT D.*		FROM (			SELECT ROWNUM AS rnum				, C.*			FROM (				SELECT RECORD_CENTER_ID					, TRIM(ORG_CD) AS ORG_CD					, (SELECT Z.ORG_NM FROM TB_STORG Z WHERE Z.RECORD_CENTER_ID=A.RECORD_CENTER_ID AND Z.ORG_CD=A.ORG_CD) ORG_NM					, (SELECT Z.ORG_ABBR_NM FROM TB_STORG Z WHERE Z.RECORD_CENTER_ID=A.RECORD_CENTER_ID AND Z.ORG_CD=A.ORG_CD) ORG_ABBR_NM					, COUNT(*) AS TOTCNT					, SUM(RESORT_PROG_STATE03) RESORT_PROG_STATE03					, SUM(ORG_AFT01) ORG_AFT01					, SUM(ORG_AFT02) ORG_AFT02					, SUM(ORG_AFT03) ORG_AFT03					, SUM(RESORT_PROG_STATE04) RESORT_PROG_STATE04					, SUM(EXP_AFT01) EXP_AFT01					, SUM(EXP_AFT02) EXP_AFT02					, SUM(EXP_AFT03) EXP_AFT03					, SUM(RESORT_PROG_STATE05) RESORT_PROG_STATE05 				FROM (					SELECT A.RECORD_CENTER_ID						, A.ORG_CD						, CASE WHEN RESORT_PROG_STATE_CD ='03' THEN 1 				               ELSE CASE WHEN A.ORG_CD IS NULL THEN 1 				                         ELSE 0 				                    END 				          END AS RESORT_PROG_STATE03				        , CASE WHEN RESORT_PROG_STATE_CD  BETWEEN '04' AND '05' AND ORG_OPER_RANGE_AFT = '01' THEN 1 				               ELSE 0 				          END AS ORG_AFT01				        , CASE WHEN RESORT_PROG_STATE_CD  BETWEEN '04' AND '05' AND ORG_OPER_RANGE_AFT = '02' THEN 1 				               ELSE 0 				          END AS ORG_AFT02				        , CASE WHEN RESORT_PROG_STATE_CD  BETWEEN '04' AND '05' AND ORG_OPER_RANGE_AFT = '03' THEN 1 				               ELSE 0				          END AS ORG_AFT03				        , CASE WHEN RESORT_PROG_STATE_CD BETWEEN '03' AND '05' AND EXPERT_OPER_READ_RANGE_AFT IS NULL THEN 1 				               ELSE 0 				          END AS RESORT_PROG_STATE04				        , CASE WHEN RESORT_PROG_STATE_CD ='05' AND EXPERT_OPER_READ_RANGE_AFT = '01' THEN 1 				               ELSE 0				          END AS EXP_AFT01				        , CASE WHEN RESORT_PROG_STATE_CD ='05' AND EXPERT_OPER_READ_RANGE_AFT = '02' THEN 1 				               ELSE 0 				          END AS EXP_AFT02				        , CASE WHEN RESORT_PROG_STATE_CD ='05' AND EXPERT_OPER_READ_RANGE_AFT = '03' THEN 1 				               ELSE 0 				          END AS EXP_AFT03				        , CASE WHEN RESORT_PROG_STATE_CD ='05' THEN 1				        	   ELSE 0 				          END AS RESORT_PROG_STATE05 				    FROM TB_RDRANGERESORTOPIN A, TB_RDRECORD B 				    WHERE A.RECORD_CENTER_ID=B.RECORD_CENTER_ID 				    AND A.RECORD_ID = B.RECORD_ID 				    AND A.RECORD_CENTER_ID = '1'				    AND A.RESORT_PROG_STATE_CD BETWEEN '03' AND '05' 				     AND 				        trim(a.resort_Case) = '1'				      AND 		                a.resort_yyyy = '1'		              AND 		                a.org_cd = '1'		              AND 		                a.org_cd = '1'		             				) A 				GROUP BY RECORD_CENTER_ID, ORG_CD 				ORDER BY RECORD_CENTER_ID, ORG_CD			) C			WHERE ROWNUM <= '1'		) D		WHERE D.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : countRangeResortExpertOpinRegCurStatePagedList

		SELECT count(1)		from(			select count(1)			FROM tb_rdrangeresortopin A, tb_rdrecord b			WHERE A.record_center_id = '1'			AND A.record_id          = b.record_id			AND b.record_center_id   = '1'			AND A.resort_prog_state_cd BETWEEN '03' AND '05' AND 				trim(a.resort_Case) = '1'			  AND 				a.resort_yyyy = '1'			  AND 				a.org_cd = '1'			  AND 				a.org_cd = '1'			 			GROUP BY A.record_center_id,A.org_cd		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findRangeResortExpertOpinHistRecordList

		SELECT B.*		FROM (			SELECT ROWNUM AS rnum				, A.*			FROM (				SELECT OPER_READ_RANGE_AFT					, z.com_cd_nm AS oper_read_range_aftnm					, CHNG_USER_ID					, u.user_nm					, decode(CHNG_YMD, '00000000', '', CHNG_YMD) as CHNG_YMD					, CHNG_OPIN					, r.resort_case_no					, r.resort_case					, s.resort_reason				FROM (					SELECT * FROM tb_rdrangeresorthist					WHERE record_center_id = '1'					AND record_id = '1'				) r JOIN tb_rdrangeresortreason s						ON r.record_center_id = s.record_center_id						AND r.resort_case = s.resort_case						AND r.resort_case_no = s.resort_case_no					LEFT OUTER JOIN tb_zzcomcd z						ON z.com_type_cd = 'RD53'						AND lpad(trim(r.OPER_READ_RANGE_AFT),2,'0') = z.com_cd					LEFT OUTER JOIN tb_stuser u						ON r.CHNG_USER_ID = u.user_id			) A			WHERE ROWNUM <= '1'		) B		WHERE B.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : countRangeResortExpertOpinHistRecordList

		SELECT count(1)		FROM (			SELECT * FROM tb_rdrangeresorthist			WHERE record_center_id = '1'			AND record_id = '1'		) r JOIN tb_rdrangeresortreason s				ON r.record_center_id = s.record_center_id				AND r.resort_case = s.resort_case				AND r.resort_case_no = s.resort_case_no			LEFT OUTER JOIN tb_zzcomcd z				ON z.com_type_cd = 'RD53'				AND lpad(trim(r.OPER_READ_RANGE_AFT),2,'0') = z.com_cd			LEFT OUTER JOIN tb_stuser u				ON r.CHNG_USER_ID = u.user_id;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : findRangeResortOpinRegOpinBatchErrorXls

		SELECT file_nm			, file_key		FROM TB_ZZREQEXCELLIST		WHERE REQ_USER_ID = '1'		AND REQ_MENU_ID = '1'		AND REQ_INDEX = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
-- Query    : select
-- Query Id : countAlreadyRsltOpenResortOpin

		SELECT COUNT(*)		FROM tb_rdrangeresortopin		WHERE record_center_id = '1'		AND	record_id = '1'		AND	resort_seq = '1'		AND	resort_prog_state_cd = '07';


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\rangeresortopin\RangeResortOpinRegOpin.xml
