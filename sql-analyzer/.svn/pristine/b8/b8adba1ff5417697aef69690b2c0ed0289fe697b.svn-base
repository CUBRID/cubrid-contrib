-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : countOptihistPagedList

             SELECT COUNT(1)            FROM    TB_SROPTIDISK_MST M,                    ( SELECT  O.optidisk_id, O.record_center_id, COUNT(*) AS eval_cnt, SUM(O.store_size) AS eval_size                      FROM    TB_NKFOLDER F, TB_SROPTIHIST_FLD O                      WHERE   F.record_center_id = '1'                      AND     F.record_center_id = O.record_center_id                      AND     F.folder_id = O.folder_id                      AND     F.folder_keep_state_cd in ('02', '03') AND                             F.last_eval_yyyy = '1'                                             GROUP BY O.optidisk_id, O.record_center_id                      UNION    ALL                      SELECT  O.optidisk_id, O.record_center_id, COUNT(*) AS eval_cnt, SUM(O.store_size) AS eval_size                      FROM    TB_RDFOLDER F, TB_SROPTIHIST_FLD O                      WHERE   F.record_center_id = '1'                      AND     F.record_center_id = O.record_center_id                      AND     F.folder_id = O.folder_id                      AND     F.disu_div_cd = '3'                      AND     F.presv_term_cd != (SELECT presv_term_cd FROM TB_SROPTIDISK_MST WHERE record_center_id = O.record_center_id AND optidisk_id = O.optidisk_id)                       AND                             F.last_eval_yyyy = '1'                                             GROUP BY O.optidisk_id, O.record_center_id) T            WHERE  M.record_center_id = '1'            AND    M.record_center_id = T.record_center_id            AND    M.optidisk_id = T.optidisk_id            AND    M.optidisk_state_cd = '4'             AND             	M.disuse_flag = '1'              ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : findOptihistPagedList

 		    SELECT C.optidisk_id		            ,C.optidisk_type_cd		            ,C.org_cd		            ,C.creat_yyyy		            ,C.presv_term_cd		            ,C.optidisk_yyyy		            ,(SELECT COUNT(*) FROM TB_SROPTIHIST_FLD WHERE record_center_id = C.record_center_id AND optidisk_id = C.optidisk_id) AS folder_cnt		            ,(SELECT dept_nm FROM TB_STDEPT WHERE record_center_id = C.record_center_id AND org_cd = C.org_cd) AS org_nm		            ,(SELECT dept_abbr_nm FROM TB_STDEPT WHERE record_center_id = C.record_center_id AND org_cd = C.org_cd) AS org_abbr_nm		            ,(SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd = C.presv_term_cd) AS presv_term_nm		            ,C.store_size		            ,C.optidisk_state_cd		            ,C.optidisk_stakrm_id		            ,C.optidisk_booksf_id		            ,C.floor_no		            ,C.col_no		            ,C.eval_cnt		            ,C.eval_size		            ,'' AS record_cnt		            ,NVL(C.disuse_flag, '0') AS disuse_flag		            ,C.disuse_yyyy		            ,C.disuse_ymd		            ,C.disuse_rsn		            ,C.disuse_user_id		            ,C.split_tot		    FROM (		        SELECT B.*		        FROM (		            SELECT ROWNUM AS rnum		                    ,A.*		            FROM (		                SELECT M.record_center_id,M.optidisk_id,M.optidisk_type_cd,M.org_cd,M.creat_yyyy		                        ,M.presv_term_cd,M.optidisk_yyyy,M.store_size,M.optidisk_state_cd,M.optidisk_stakrm_id		                        ,M.optidisk_booksf_id,M.floor_no,M.col_no,T.eval_cnt,T.eval_size		                        ,M.disuse_flag,M.disuse_yyyy,M.disuse_ymd,M.disuse_rsn,M.disuse_user_id		                        ,M.split_tot		                FROM    TB_SROPTIDISK_MST M,		                        ( SELECT  O.optidisk_id, O.record_center_id, COUNT(*) AS eval_cnt, SUM(O.store_size) AS eval_size		                          FROM    TB_NKFOLDER F, TB_SROPTIHIST_FLD O		                          WHERE   F.record_center_id = '1'		                          AND     F.record_center_id = O.record_center_id		                          AND     F.folder_id = O.folder_id		                          AND     F.folder_keep_state_cd in ('02', '03') AND 		                                F.last_eval_yyyy = '1'		                           		                          GROUP BY O.optidisk_id, O.record_center_id		                          UNION    ALL		                          SELECT  O.optidisk_id, O.record_center_id, COUNT(*) AS eval_cnt, SUM(O.store_size) AS eval_size		                          FROM    TB_RDFOLDER F, TB_SROPTIHIST_FLD O		                          WHERE   F.record_center_id = '1'		                          AND     F.record_center_id = O.record_center_id		                          AND     F.folder_id = O.folder_id		                          AND     F.disu_div_cd = '3'		                          AND     F.presv_term_cd != (SELECT presv_term_cd FROM TB_SROPTIDISK_MST WHERE record_center_id = O.record_center_id AND optidisk_id = O.optidisk_id)		                           AND 		                                F.last_eval_yyyy = '1'		                           		                          GROUP BY O.optidisk_id, O.record_center_id) T		                WHERE  M.record_center_id = '1'		                AND     M.record_center_id = T.record_center_id		                AND     M.optidisk_id = T.optidisk_id		                AND       M.optidisk_state_cd = '4'		                 AND 		                     M.disuse_flag = '1'		                 		                ORDER BY M.record_center_id, M.org_cd, M.seq		            ) A		            WHERE ROWNUM <= '1'		        ) B		        WHERE B.rnum >= '1'		    ) C		    ORDER BY C.rnum		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : countOptihistFldPagedList

 			SELECT COUNT(1)			FROM    TB_RDFOLDER F, TB_SROPTIHIST_FLD O			WHERE   O.RECORD_CENTER_ID = '1'			AND     O.RECORD_CENTER_ID = F.RECORD_CENTER_ID			AND     O.FOLDER_ID = F.FOLDER_ID			AND     O.OPTIDISK_ID = '1' ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : findOptihistFldPagedList

 		    SELECT C.*		    FROM (		        SELECT B.*		        FROM (		            SELECT ROWNUM AS rnum		                    ,A.*		            FROM (		                SELECT  F.RECORD_CENTER_ID		                        ,F.FOLDER_ID		                        ,F.ORG_CD		                        ,F.CLSS_ID		                        ,F.TITLE		                        ,F.CREAT_YYYY		                        ,F.PRESV_TERM_CD		                        ,O.RECORD_CNT		                        ,O.STORE_SIZE		                        ,F.FOLDER_KEEP_STATE_CD		                        ,(CASE WHEN (TRIM(F.PRESV_TERM_CD)=TRIM((SELECT PRESV_TERM_CD FROM TB_SROPTIDISK_MST WHERE RECORD_CENTER_ID = O.RECORD_CENTER_ID AND OPTIDISK_ID = O.OPTIDISK_ID))) THEN '0'		                                  ELSE '1'		                          END) AS SAME_PRESV		                         ,(SELECT DEPT_NM FROM TB_STDEPT WHERE ORG_CD = F.ORG_CD) AS ORG_NM		                         ,(SELECT DEPT_ABBR_NM FROM TB_STDEPT WHERE ORG_CD = F.ORG_CD) AS ORG_ABBR_NM		                         ,(SELECT Z.COM_CD_NM FROM TB_ZZCOMCD Z WHERE Z.COM_TYPE_CD='RD07' AND Z.COM_CD = F.PRESV_TERM_CD) PRESV_TERM_NM		                         ,(CASE WHEN F.CLSS_DIV_CD = '1' THEN (SELECT BIS_CLSS_NM FROM TB_ZZBISCLSS WHERE BIS_CLSS_ID = F.CLSS_ID)		                                   WHEN F.CLSS_DIV_CD = '2' THEN (SELECT UNIT_NM FROM TB_ZZUNIT WHERE RECORD_CENTER_ID = F.RECORD_CENTER_ID AND UNIT_CD = F.CLSS_ID)		                            END) AS CLSS_NM		                FROM    TB_RDFOLDER F, TB_SROPTIHIST_FLD O		                WHERE   O.RECORD_CENTER_ID = '1'		                AND     O.RECORD_CENTER_ID = F.RECORD_CENTER_ID		                AND     O.FOLDER_ID = F.FOLDER_ID		                AND     O.OPTIDISK_ID = '1'		                ORDER BY ORG_NM, CLSS_NM, F.TITLE		            ) A		            WHERE ROWNUM <= '1'		        ) B		        WHERE B.rnum >= '1'		    ) C		    ORDER BY C.rnum		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : update
-- Query Id : updateOptihistDisuse

 			UPDATE	tb_sroptidisk_mst			SET	disuse_ymd = '1',					disuse_flag = '1',					disuse_rsn = '1',					disuse_user_id = '1',					disuse_yyyy = '1'			WHERE	record_center_id = '1'			AND		optidisk_id = '1' ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : findOptihistDisuse

 			SELECT f.record_center_id				  ,f.folder_id				  ,f.org_cd				  ,f.clss_id				  ,f.title				  ,f.creat_yyyy				  ,f.presv_term_cd				  ,o.record_cnt				  ,o.store_size				  ,f.folder_keep_state_cd				  ,(case WHEN (trim(f.presv_term_cd)=trim((select presv_term_cd from tb_sroptidisk_mst where record_center_id = o.record_center_id and optidisk_id = o.optidisk_id))) THEN '0'				         ELSE '1'				    end) as same_presv				  ,(select dept_nm from tb_stdept where org_cd = f.org_cd) as org_nm				  ,(select dept_abbr_nm from tb_stdept where org_cd = f.org_cd) as org_abbr_nm				  ,(SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd = f.presv_term_cd) presv_term_nm				  ,(case when f.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = f.clss_id)				         when f.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = f.record_center_id and unit_cd = f.clss_id)				    end) as clss_nm			FROM tb_rdfolder f, tb_sroptihist_fld o			WHERE o.record_center_id = '1'			AND o.record_center_id = f.record_center_id			AND o.folder_id = f.folder_id			AND o.optidisk_id = '1'			ORDER BY org_nm, clss_nm, f.title		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : update
-- Query Id : updateOptihistDisuseFolder

		UPDATE tb_rdfolder		  				SET		opti_disk_store_state_cd = '0'			  		WHERE record_center_id = '1'		AND folder_id = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : countOptidiskRcdPagedList

             SELECT COUNT(1)            FROM    tb_sroptihist_rcd r, tb_rdrecord o            WHERE r.record_center_id = o.record_center_id            AND r.record_id = o.record_id            AND r.record_center_id = '1'            AND r.folder_id = '1'            AND r.optidisk_id = (select optidisk_id from tb_sroptihist_fld where record_center_id = '1' and folder_id = '1')             AND                 r.split_seq = '1'              AND                 o.title like '1'              ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : findOptidiskRcdPagedList

 		    SELECT C.*		    FROM (		        SELECT B.*		        FROM (		            SELECT ROWNUM AS rnum		                ,A.*		            FROM (		                SELECT r.record_center_id		                        ,r.folder_id		                        ,r.record_id		                        ,r.split_seq		                        ,r.file_cnt		                        ,r.store_size		                        ,o.title		                        ,o.creat_sys_cd		                        ,o.org_cd		                        ,o.creat_yyyy		                        ,o.creat_reg_no		                        ,o.dtch_reg_no		                        ,o.creat_sys_record_id		                        ,o.record_detl_type_cd		                        ,o.doc_no		                        ,(SELECT COUNT(DTCH_REG_NO) FROM TB_RDRECORD WHERE CREAT_SYS_CD = O.CREAT_SYS_CD AND ORG_CD = O.ORG_CD AND CREAT_YYYY = O.CREAT_YYYY AND CREAT_REG_NO = O.CREAT_REG_NO) dtch_reg_no_cnt		                        ,SUBSTR(o.creat_reg_no, 8, 6) creat_reg_no_sub		                FROM    tb_sroptihist_rcd r, tb_rdrecord o		                WHERE r.record_center_id = o.record_center_id		                AND r.record_id = o.record_id		                AND r.record_center_id = '1'		                AND r.folder_id = '1'		                AND r.optidisk_id = (select optidisk_id from tb_sroptihist_fld where record_center_id = '1' and folder_id = '1')		                 AND 		                    r.split_seq = '1'		                  AND 		                    o.title like '1'		                 		                ORDER BY    r.record_id, r.split_seq		            ) A		            WHERE ROWNUM <= '1'		        ) B		        WHERE B.rnum >= '1'		    ) C		    ORDER BY C.rnum	     ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : findExcelDocOptihistList

 			SELECT  m.optidisk_id, m.optidisk_type_cd, m.org_cd, m.creat_yyyy, m.presv_term_cd, m.optidisk_yyyy, 		        (select count(*) from tb_sroptihist_fld where record_center_id = m.record_center_id and optidisk_id = m.optidisk_id) as folder_cnt,		        (SELECT dept_nm FROM tb_stdept WHERE org_cd = m.org_cd) as org_nm,		        (SELECT dept_abbr_nm FROM tb_stdept WHERE org_cd = m.org_cd) as org_abbr_nm,		        (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd = m.presv_term_cd) presv_term_nm,		        m.store_size, m.optidisk_state_cd, m.optidisk_stakrm_id, m.optidisk_booksf_id, m.floor_no, m.col_no, t.eval_cnt, t.eval_size, '' as record_cnt,		        m.disuse_flag, m.disuse_yyyy, m.disuse_ymd, m.disuse_rsn, m.disuse_user_id		        ,m.split_tot			FROM    tb_sroptidisk_mst m, (select o.optidisk_id, o.record_center_id, count(*) as eval_cnt, sum(o.store_size) as eval_size		          						  from tb_nkfolder f, tb_sroptihist_fld o		          						  where f.record_center_id = '1'		          						  and f.record_center_id = o.record_center_id		          						  and f.folder_id = o.folder_id		          						  and f.folder_keep_state_cd in ('02', '03') AND 											  f.last_eval_yyyy = '1'				  						   		          						  group by o.optidisk_id, o.record_center_id		          						  UNION	ALL		          						  select o.optidisk_id, o.record_center_id, count(*) as eval_cnt, sum(o.store_size) as eval_size				  						  from tb_rdfolder f, tb_sroptihist_fld o				  						  where f.record_center_id = '1'				  						  and f.record_center_id = o.record_center_id				  						  and f.folder_id = o.folder_id				  						  and f.disu_div_cd = '3'				  						  and f.presv_term_cd != (select presv_term_cd 				  						  						  from tb_sroptidisk_mst 				  						  						  where record_center_id = o.record_center_id 				  						  						  and optidisk_id = o.optidisk_id) AND 											  f.last_eval_yyyy = '1'				  						   				  						  group by o.optidisk_id, o.record_center_id) t			WHERE m.record_center_id = '1'			AND m.record_center_id = t.record_center_id			AND m.optidisk_id = t.optidisk_id			AND m.optidisk_state_cd = '4'			 AND 				m.disuse_flag = '1'			 			ORDER BY m.record_center_id, m.org_cd, m.seq		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : countOptidiskMstCnclPagedList

             SELECT  COUNT(1)            FROM    (                        SELECT  f.record_center_id, f.folder_id, f.title, f.folder_keep_state_cd, '0' as same_presv, t.optidisk_type_cd, t.tot_copy_cnt,                                t.org_cd, t.seq, f.presv_term_cd, f.clss_id, f.creat_yyyy, f.last_eval_yyyy, t.fld_presv_term_cd as opti_presv_term_cd, t.org_cd||'-'||LPAD(t.seq, 6, '0') optidisk_id,                                (select dept_nm from tb_stdept where org_cd = f.org_cd) as org_nm,                                (select dept_abbr_nm from tb_stdept where org_cd = f.org_cd) as org_abbr_nm,                                (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd = DECODE(t.fld_presv_term_cd, '20', '25', t.fld_presv_term_cd)) as presv_term_nm,                                (case when f.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = f.clss_id)                                         when f.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = f.record_center_id and unit_cd = f.clss_id)                                 end) as clss_nm                        FROM    tb_nkfolder f,                                 ( select  o.folder_id, o.record_center_id, o.optidisk_type_cd, o.seq, o.org_cd, '' tot_copy_cnt,                                            o.presv_term_cd as fld_presv_term_cd, o.creat_yyyy as fld_creat_yyyy, o.org_cd as fld_org_cd                                  from    tb_sroptidisk_fld o left outer join tb_sroptidisk_mst m on m.record_center_id = o.record_center_id and m.org_cd = o.org_cd and m.seq = o.seq                                    where   o.record_center_id = '1') t                        WHERE f.record_center_id = t.record_center_id                        AND     f.folder_id = t.folder_id                        AND     f.org_cd = t.fld_org_cd                        AND     f.creat_yyyy = t.fld_creat_yyyy                        AND     f.presv_term_cd = t.fld_presv_term_cd                        AND     f.folder_keep_state_cd in ('02', '03')                             UNION ALL                        SELECT  f.record_center_id, f.folder_id, f.title, f.folder_keep_state_cd, '1' as same_presv, t.optidisk_type_cd, t.tot_copy_cnt,                                t.org_cd, t.seq, f.presv_term_cd, f.clss_id, f.creat_yyyy, f.last_eval_yyyy, t.fld_presv_term_cd as opti_presv_term_cd, t.org_cd||'-'||LPAD(t.seq, 6, '0') optidisk_id,                                (select dept_nm from tb_stdept where org_cd = f.org_cd) as org_nm,                                (select dept_abbr_nm from tb_stdept where org_cd = f.org_cd) as org_abbr_nm,                                (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd = DECODE(t.fld_presv_term_cd, '20', '25', t.fld_presv_term_cd)) as presv_term_nm,                                (                                    case                                         when f.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = f.clss_id)                                        when f.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = f.record_center_id and unit_cd = f.clss_id)                                    end                                 ) as clss_nm                        FROM    tb_rdfolder f,                                 (                                  select  o.folder_id, o.record_center_id, o.optidisk_type_cd, o.seq, o.org_cd, '' tot_copy_cnt,                                            o.presv_term_cd as fld_presv_term_cd, o.creat_yyyy as fld_creat_yyyy, o.org_cd as fld_org_cd                                  from    tb_sroptidisk_fld o left outer join tb_sroptidisk_mst m on m.record_center_id = o.record_center_id and m.org_cd = o.org_cd and m.seq = o.seq                                    where   o.record_center_id = '1'                                ) t                        WHERE   f.record_center_id = t.record_center_id                        AND      f.folder_id = t.folder_id                        AND        f.org_cd = t.fld_org_cd                        AND        f.creat_yyyy = t.fld_creat_yyyy                        AND      f.disu_div_cd = '3'                                                      AND      f.presv_term_cd != t.fld_presv_term_cd                    ) tb                WHERE 1=1                 AND                     tb.last_eval_yyyy = '1'                  AND                     tb.creat_yyyy = '1'                  AND                     tb.optidisk_type_cd = '1'                  AND                     tb.clss_id = '1'                  AND                     REPLACE(tb.optidisk_id, '-', '') = '1'                  AND                     tb.org_cd = '1'                  AND                     tb.title like '1'                   ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : findOptidiskMstCnclPagedList

 			SELECT C.*			FROM (			    SELECT B.*			    FROM (			        SELECT ROWNUM AS rnum			                ,A.*			        FROM (			            SELECT    tb.*			            FROM    (			                        SELECT  f.record_center_id, f.folder_id, f.title, f.folder_keep_state_cd, '0' as same_presv, t.optidisk_type_cd, t.tot_copy_cnt,			                                t.org_cd, t.seq, f.presv_term_cd, f.clss_id, f.creat_yyyy, f.last_eval_yyyy, t.fld_presv_term_cd as opti_presv_term_cd, t.org_cd||'-'||LPAD(t.seq, 6, '0') optidisk_id,			                                (select dept_nm from tb_stdept where org_cd = f.org_cd) as org_nm,			                                (select dept_abbr_nm from tb_stdept where org_cd = f.org_cd) as org_abbr_nm,			                                (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd = DECODE(t.fld_presv_term_cd, '20', '25', t.fld_presv_term_cd)) as presv_term_nm,			                                (case when f.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = f.clss_id)			                                         when f.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = f.record_center_id and unit_cd = f.clss_id)			                                 end) as clss_nm			                        FROM    tb_nkfolder f, 			                                ( select  o.folder_id, o.record_center_id, o.optidisk_type_cd, o.seq, o.org_cd, '' tot_copy_cnt,			                                            o.presv_term_cd as fld_presv_term_cd, o.creat_yyyy as fld_creat_yyyy, o.org_cd as fld_org_cd			                                  from    tb_sroptidisk_fld o left outer join tb_sroptidisk_mst m on m.record_center_id = o.record_center_id and m.org_cd = o.org_cd and m.seq = o.seq			                                    where   o.record_center_id = '1') t			                        WHERE f.record_center_id = t.record_center_id			                        AND     f.folder_id = t.folder_id			                        AND     f.org_cd = t.fld_org_cd			                        AND     f.creat_yyyy = t.fld_creat_yyyy			                        AND     f.presv_term_cd = t.fld_presv_term_cd			                        AND     f.folder_keep_state_cd in ('02', '03')         			                    UNION ALL			                        SELECT  f.record_center_id, f.folder_id, f.title, f.folder_keep_state_cd, '1' as same_presv, t.optidisk_type_cd, t.tot_copy_cnt,			                                t.org_cd, t.seq, f.presv_term_cd, f.clss_id, f.creat_yyyy, f.last_eval_yyyy, t.fld_presv_term_cd as opti_presv_term_cd, t.org_cd||'-'||LPAD(t.seq, 6, '0') optidisk_id,			                                (select dept_nm from tb_stdept where org_cd = f.org_cd) as org_nm,			                                (select dept_abbr_nm from tb_stdept where org_cd = f.org_cd) as org_abbr_nm,			                                (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd = DECODE(t.fld_presv_term_cd, '20', '25', t.fld_presv_term_cd)) as presv_term_nm,			                                (			                                    case 			                                        when f.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = f.clss_id)			                                        when f.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = f.record_center_id and unit_cd = f.clss_id)			                                    end 			                                ) as clss_nm			                        FROM    tb_rdfolder f, 			                                (			                                  select  o.folder_id, o.record_center_id, o.optidisk_type_cd, o.seq, o.org_cd, '' tot_copy_cnt,			                                            o.presv_term_cd as fld_presv_term_cd, o.creat_yyyy as fld_creat_yyyy, o.org_cd as fld_org_cd			                                  from    tb_sroptidisk_fld o left outer join tb_sroptidisk_mst m on m.record_center_id = o.record_center_id and m.org_cd = o.org_cd and m.seq = o.seq			                                    where   o.record_center_id = '1'			                                ) t			                        WHERE   f.record_center_id = t.record_center_id			                        AND     f.folder_id = t.folder_id			                        AND     f.org_cd = t.fld_org_cd			                        AND     f.creat_yyyy = t.fld_creat_yyyy			                        AND     f.disu_div_cd = '3'                              			                        AND     f.presv_term_cd != t.fld_presv_term_cd			                    ) tb			           		WHERE 1=1			                 AND 			                    tb.last_eval_yyyy = '1'			                  AND 			                    tb.creat_yyyy = '1'			                  AND 			                    tb.optidisk_type_cd = '1'			                  AND 			                    tb.clss_id = '1'			                  AND 			                    REPLACE(tb.optidisk_id, '-', '') = '1'			                  AND 			                    tb.org_cd = '1'			                  AND 			                    tb.title like '1' 			                 			            ORDER BY tb.org_cd, tb.seq			        ) A			        WHERE ROWNUM <= '1'			    ) B			    WHERE B.rnum >= '1'			) C			ORDER BY C.rnum		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : select
-- Query Id : findOptidiskMstCnclList

 			SELECT    tb.*			FROM    (			            SELECT  f.record_center_id, f.folder_id, f.title, f.folder_keep_state_cd, '0' as same_presv, t.optidisk_type_cd, t.tot_copy_cnt,			                    t.org_cd, t.seq, f.presv_term_cd, f.clss_id, f.creat_yyyy, f.last_eval_yyyy, t.fld_presv_term_cd as opti_presv_term_cd, t.org_cd||'-'||LPAD(t.seq, 6, '0') optidisk_id,			                    (select dept_nm from tb_stdept where org_cd = f.org_cd) as org_nm,			                    (select dept_abbr_nm from tb_stdept where org_cd = f.org_cd) as org_abbr_nm,			                    (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd = t.fld_presv_term_cd) as presv_term_nm,			                    (case when f.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = f.clss_id)			                             when f.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = f.record_center_id and unit_cd = f.clss_id)			                     end) as clss_nm			            FROM    tb_nkfolder f, 			                    ( select  o.folder_id, o.record_center_id, o.optidisk_type_cd, o.seq, o.org_cd, '' tot_copy_cnt,			                                o.presv_term_cd as fld_presv_term_cd, o.creat_yyyy as fld_creat_yyyy, o.org_cd as fld_org_cd			                      from    tb_sroptidisk_fld o left outer join tb_sroptidisk_mst m on m.record_center_id = o.record_center_id and m.org_cd = o.org_cd and m.seq = o.seq			                        where   o.record_center_id = '1') t			            WHERE f.record_center_id = t.record_center_id			            AND     f.folder_id = t.folder_id			            AND     f.org_cd = t.fld_org_cd			            AND     f.creat_yyyy = t.fld_creat_yyyy			            AND     f.presv_term_cd = t.fld_presv_term_cd			            AND     f.folder_keep_state_cd in ('02', '03')         			        UNION ALL			            SELECT  f.record_center_id, f.folder_id, f.title, f.folder_keep_state_cd, '1' as same_presv, t.optidisk_type_cd, t.tot_copy_cnt,			                    t.org_cd, t.seq, f.presv_term_cd, f.clss_id, f.creat_yyyy, f.last_eval_yyyy, t.fld_presv_term_cd as opti_presv_term_cd, t.org_cd||'-'||LPAD(t.seq, 6, '0') optidisk_id,			                    (select dept_nm from tb_stdept where org_cd = f.org_cd) as org_nm,			                    (select dept_abbr_nm from tb_stdept where org_cd = f.org_cd) as org_abbr_nm,			                    (SELECT Z.com_cd_nm FROM TB_ZZCOMCD Z WHERE Z.com_type_cd='RD07' AND Z.com_cd = t.fld_presv_term_cd) as presv_term_nm,			                    (			                        case 			                            when f.clss_div_cd = '1' then (SELECT bis_clss_nm FROM tb_zzbisclss WHERE bis_clss_id = f.clss_id)			                            when f.clss_div_cd = '2' then (SELECT unit_nm FROM tb_zzunit WHERE record_center_id = f.record_center_id and unit_cd = f.clss_id)			                        end 			                    ) as clss_nm			            FROM    tb_rdfolder f, 			                    (			                      select  o.folder_id, o.record_center_id, o.optidisk_type_cd, o.seq, o.org_cd, '' tot_copy_cnt,			                                o.presv_term_cd as fld_presv_term_cd, o.creat_yyyy as fld_creat_yyyy, o.org_cd as fld_org_cd			                      from    tb_sroptidisk_fld o left outer join tb_sroptidisk_mst m on m.record_center_id = o.record_center_id and m.org_cd = o.org_cd and m.seq = o.seq			                        where   o.record_center_id = '1'			                    ) t			            WHERE   f.record_center_id = t.record_center_id			            AND      f.folder_id = t.folder_id			            AND        f.org_cd = t.fld_org_cd			            AND        f.creat_yyyy = t.fld_creat_yyyy			            AND      f.disu_div_cd = '3'                              			            AND      f.presv_term_cd != t.fld_presv_term_cd			        ) tb				WHERE 1=1			     AND 			        tb.last_eval_yyyy = '1'			      AND 			        tb.creat_yyyy = '1'			      AND 			        tb.opti_presv_term_cd = '1'			      AND 			        tb.optidisk_type_cd = '1'			      AND 			        tb.clss_id = '1'			      AND 			        REPLACE(tb.optidisk_id, '-', '') = '1'			      AND 			        tb.org_cd = '1'			      AND 			        tb.title like '1' 			     			ORDER BY tb.org_cd, tb.seq		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : delete
-- Query Id : deleteOptidiskRcdInfo

		DELETE	FROM tb_sroptidisk_rcd		WHERE	record_center_id = '1'		AND		folder_id = '1'		AND		record_id = '1'		AND		optidisk_type_cd = '1'		;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : delete
-- Query Id : deleteOptidiskFldInfo

		DELETE		FROM	tb_sroptidisk_fld		WHERE	record_center_id = '1'		AND		folder_id = '1'		AND		org_cd = '1'		AND		seq = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : delete
-- Query Id : deleteMfFldInfo

        DELETE FROM tb_srmfpicdetl        WHERE record_center_id = '1'        AND    pic_sno = '1'        AND    folder_id = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : delete
-- Query Id : deleteMfMstInfo

		DELETE	FROM tb_srmfcopy		WHERE	record_center_id = '1'		AND 		pic_sno = '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
-- Query    : delete
-- Query Id : deleteOptidiskFldInfoList

 			DELETE	FROM tb_sroptidisk_fld                                       			WHERE	record_center_id = '1'			AND		folder_id = '1'			AND		creat_yyyy = '1'			AND		presv_term_cd = '1'			AND		optidisk_type_cd = '1' ;


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\presv\optidiskmst\OptidiskMng.xml
