-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : findDisuseDiscuDocTrgtChoisePagedList

		SELECT D.*		FROM (			SELECT ROWNUM AS rnum				, C.*			FROM (				SELECT (SELECT MAX(ORG_NM) FROM TB_STORG WHERE RECORD_CENTER_ID = B.RECORD_CENTER_ID AND ORG_CD = B.ORG_CD) AS ORG_NM					, (CASE WHEN B.CLSS_DIV_CD = '1' THEN (SELECT MAX(A.BIS_CLSS_NM) FROM TB_ZZBISCLSS A WHERE A.BIS_CLSS_ID = B.CLSS_ID)						    WHEN B.CLSS_DIV_CD = '2' THEN (SELECT MAX(A.UNIT_NM) FROM TB_ZZUNIT A WHERE A.UNIT_CD = B.CLSS_ID)					   END) AS BIS_CLSS_NM				    , B.TITLE				    , B.CREAT_YYYY				    , B.PRESV_TERM_CD				    , B.DISU_DELAY_CD     				    , A.CUR_PRESV_TERM_CD				    , A.CUR_DELAY_CD						    , A.DISCU_PROG_STATE_CD				    , A.FOLDER_ID				    , (SELECT MAX(ORG_NM) FROM TB_STORG WHERE RECORD_CENTER_ID = B.RECORD_CENTER_ID AND ORG_CD = A.ORG_CD) AS HANDL_ORG_NM				    , A.DISCU_YYYY_SEQ				    , CASE WHEN A.DISCU_YYYY_SEQ > 0 THEN A.DISCU_YYYY || '-' || LPAD(A.DISCU_YYYY_SEQ,6,'0') END AS DISCU_YYYY_SEQ_NO				    , A.EXPERT_DISU_TERM_CD				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = B.PRESV_TERM_CD) AS CUR_PRESV_TERM_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF14' AND COM_CD = A.DISCU_REQ_FLAG) AS DISCU_REQ_FLAG_NM				    , B.HO_NO				    ,(SELECT COUNT(1) FROM TB_DFDISUSEOPINHIST WHERE RECORD_CENTER_ID = B.RECORD_CENTER_ID AND FOLDER_ID = B.FOLDER_ID) AS HIST_QTY				    , B.folder_keep_state_cd				FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B				WHERE A.RECORD_CENTER_ID = '1'				AND A.DISCU_YYYY = '1'				AND A.DISCU_PROG_STATE_CD IN ('05','06','07','08','09') AND 					A.DISCU_REQ_FLAG = '1'				  AND  						A.CUR_PRESV_TERM_CD in ('01', '03', '05', '10', '25')					   AND 					A.CUR_PRESV_TERM_CD = '1'				 				AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID				AND B.FOLDER_ID        = A.FOLDER_ID AND  						B.CUR_KEEP_ORG_CD = '1'					   AND 					B.TITLE LIKE '1'				 				ORDER BY A.FOLDER_ID, B.CREAT_YYYY, B.ORG_CD			) C			WHERE ROWNUM <= '1'		) D		WHERE D.rnum >= '1' 	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : countDisuseDiscuDocTrgtChoisePagedList

		SELECT COUNT(1)		FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY = '1'		AND A.DISCU_PROG_STATE_CD IN ('05','06','07','08','09')		 AND 			A.DISCU_REQ_FLAG = '1'		  AND  				A.CUR_PRESV_TERM_CD in ('01', '03', '05', '10', '25')			   AND 			A.CUR_PRESV_TERM_CD = '1'		 		AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID		AND B.FOLDER_ID        = A.FOLDER_ID AND  				B.CUR_KEEP_ORG_CD = '1'			   AND 			B.TITLE LIKE '1'		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : findDisuseDiscuDocTrgtChoiseList

		SELECT (SELECT MAX(ORG_NM) FROM TB_STORG WHERE RECORD_CENTER_ID = B.RECORD_CENTER_ID AND ORG_CD = B.ORG_CD) AS ORG_NM			, (CASE WHEN B.CLSS_DIV_CD = '1' THEN (SELECT MAX(A.BIS_CLSS_NM) FROM TB_ZZBISCLSS A WHERE A.BIS_CLSS_ID = B.CLSS_ID)				    WHEN B.CLSS_DIV_CD = '2' THEN (SELECT MAX(A.UNIT_NM) FROM TB_ZZUNIT A WHERE A.UNIT_CD = B.CLSS_ID)			   END) AS BIS_CLSS_NM		    , B.TITLE		    , B.CREAT_YYYY		    , B.PRESV_TERM_CD		    , B.DISU_DELAY_CD     		    , A.CUR_PRESV_TERM_CD		    , A.CUR_DELAY_CD				    , A.DISCU_PROG_STATE_CD		    , A.FOLDER_ID		    , (SELECT MAX(ORG_NM) FROM TB_STORG WHERE RECORD_CENTER_ID = B.RECORD_CENTER_ID AND ORG_CD = A.ORG_CD) AS HANDL_ORG_NM		    , A.DISCU_YYYY_SEQ		    , CASE WHEN A.DISCU_YYYY_SEQ > 0 THEN A.DISCU_YYYY || '-' || LPAD(A.DISCU_YYYY_SEQ,6,'0') END AS DISCU_YYYY_SEQ_NO		    , A.EXPERT_DISU_TERM_CD		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = B.PRESV_TERM_CD) AS CUR_PRESV_TERM_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF14' AND COM_CD = A.DISCU_REQ_FLAG) AS DISCU_REQ_FLAG_NM		    , B.HO_NO		    ,(SELECT COUNT(1) FROM TB_DFDISUSEOPINHIST WHERE RECORD_CENTER_ID = B.RECORD_CENTER_ID AND FOLDER_ID = B.FOLDER_ID) AS HIST_QTY		    , B.folder_keep_state_cd		FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY = '1'		AND A.DISCU_PROG_STATE_CD IN ('05','06','07','08','09')		 AND 			A.DISCU_REQ_FLAG = '1'		  AND  				A.CUR_PRESV_TERM_CD in ('01', '03', '05', '10', '25')			   AND 			A.CUR_PRESV_TERM_CD = '1'		 		AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID		AND B.FOLDER_ID        = A.FOLDER_ID AND  				B.CUR_KEEP_ORG_CD = '1'			   AND 			B.TITLE LIKE '1'		 		ORDER BY A.FOLDER_ID, B.CREAT_YYYY, B.ORG_CD 	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : findDisuseDiscuDocTrgtChoisePrintList

		SELECT A.folder_id		     , A.discu_yyyy		     , B.creat_yyyy		     , B.title		     , B.creat_yyyy + TO_NUMBER(NVL(A.expert_disu_term_cd,0)) as end_term_yyyy		     , A.handl_org_disu_div_cd		     , A.handl_org_rsn		     , A.expert_disu_div_cd		     , A.expert_disu_rsn		     , B.org_cd		     , B.clss_id		     , B.folder_reg_seq		     , B.ho_no		     , A.review_div_cd		     , (SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd = 'DF02' AND com_cd = A.handl_org_disu_div_cd) as handl_org_disu_div_nm		     , (SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd = 'DF02' AND com_cd = A.expert_disu_div_cd) as expert_disu_div_nm		     , (SELECT com_cd_nm FROM TB_ZZCOMCD WHERE com_type_cd = 'DF02' AND com_cd = A.review_div_cd) as review_div_nm		  FROM TB_DFDISUSEOPIN A		     , TB_RDFOLDER B		 WHERE A.record_center_id = '1'		   AND A.discu_yyyy = '1'		   AND A.discu_yyyy_seq = '1'		   AND B.record_center_id = A.record_center_id		   AND B.folder_id = A.folder_id		 ORDER BY A.record_center_id, A.folder_id	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : findDisuseDiscuDocRsltRegPagedList

		SELECT E.*		FROM (			SELECT ROWNUM AS rnum				, D.*			FROM (				SELECT A.DISCU_YYYY_SEQ				    , MAX(C.DISCU_YYYY || '-' || LPAD(C.DISCU_YYYY_SEQ,6,'0')) AS DISCU_YYYY_SEQ_NO				    , MAX(C.DISCU_CHOICE_RSN) AS DISCU_CHOICE_RSN				    , MAX(C.DISCU_REQ_FLAG) AS DISCU_REQ_FLAG				    , MAX((SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF14' AND COM_CD = C.DISCU_REQ_FLAG)) AS DISCU_REQ_FLAG_NM				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD >= '05' THEN 1 ELSE 0 END) AS TOT_CNT1				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD >= '05' AND A.EXPERT_DISU_DIV_CD = '1' THEN 1 ELSE 0 END) AS OPIN1_CNT1				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD >= '05' AND A.EXPERT_DISU_DIV_CD = '2' THEN 1 ELSE 0 END) AS OPIN2_CNT1				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD >= '05' AND A.EXPERT_DISU_DIV_CD = '3' THEN 1 ELSE 0 END) AS OPIN3_CNT1          				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD >= '06' THEN 1 ELSE 0 END) AS TOT_CNT2				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD >= '06' AND A.REVIEW_DIV_CD = '1' THEN 1 ELSE 0 END) AS OPIN1_CNT2				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD >= '06' AND A.REVIEW_DIV_CD = '2' THEN 1 ELSE 0 END) AS OPIN2_CNT2				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD >= '06' AND A.REVIEW_DIV_CD = '3' THEN 1 ELSE 0 END) AS OPIN3_CNT2          				FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B, TB_DFDISUSEDISCUDOC C				WHERE A.RECORD_CENTER_ID = '1'				AND A.DISCU_YYYY = '1'				AND A.DISCU_PROG_STATE_CD IN ('05','06','07','08','09')				AND A.DISCU_YYYY_SEQ IS NOT NULL AND  						B.PRESV_TERM_CD in ('01', '03', '05', '10', '25')					  				AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID				AND B.FOLDER_ID        = A.FOLDER_ID				AND C.RECORD_CENTER_ID = A.RECORD_CENTER_ID				AND C.DISCU_YYYY       = A.DISCU_YYYY				AND C.DISCU_YYYY_SEQ   = A.DISCU_YYYY_SEQ 				GROUP BY A.DISCU_YYYY_SEQ				ORDER BY A.DISCU_YYYY_SEQ DESC			) D			WHERE ROWNUM <= '1'		) E		WHERE E.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : countDisuseDiscuDocRsltRegPagedList

		SELECT COUNT(1)		FROM (			SELECT A.DISCU_YYYY_SEQ          			FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B, TB_DFDISUSEDISCUDOC C			WHERE A.RECORD_CENTER_ID = '1'			AND A.DISCU_YYYY = '1'			AND A.DISCU_PROG_STATE_CD IN ('05','06','07','08','09')			AND A.DISCU_YYYY_SEQ IS NOT NULL AND  					B.PRESV_TERM_CD in ('01', '03', '05', '10', '25')				  			AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID			AND B.FOLDER_ID        = A.FOLDER_ID			AND C.RECORD_CENTER_ID = A.RECORD_CENTER_ID			AND C.DISCU_YYYY       = A.DISCU_YYYY			AND C.DISCU_YYYY_SEQ   = A.DISCU_YYYY_SEQ 			GROUP BY A.DISCU_YYYY_SEQ			ORDER BY A.DISCU_YYYY_SEQ DESC		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : findDiscuYyyySeqList

		SELECT A.DISCU_YYYY as discuYyyy			, A.DISCU_YYYY_SEQ as discuYyyySeq			, LPAD(A.DISCU_YYYY_SEQ, 6, '0')as lpadDiscuYyyySeq		    , '[' || A.DISCU_YYYY || '-' || LPAD(A.DISCU_YYYY_SEQ,6,'0') || '] ' || A.DISCU_CHOICE_RSN AS discuChoiceRsn		FROM TB_DFDISUSEDISCUDOC A		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY = '1'		ORDER BY A.DISCU_YYYY_SEQ	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : findDisuseFullRsltRegPagedList

		SELECT D.*		FROM (			SELECT ROWNUM AS rnum				, C.*			FROM (				SELECT A.ORG_CD AS HANDL_ORG_CD				    , MAX(( SELECT MAX(ORG_NM) FROM TB_STORG WHERE RECORD_CENTER_ID = A.RECORD_CENTER_ID AND ORG_CD = A.ORG_CD )) AS HANDL_ORG_NM				    , COUNT(*) AS TOT_CNT1				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD >= '03' THEN 1 ELSE 0 END) AS OPIN1_CNT1				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD >= '03' AND A.DISCU_PROG_STATE_CD <= '06' THEN 1 ELSE 0 END) AS OPIN2_CNT1				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD = '07' AND A.REVIEW_DIV_CD = '1' THEN 1 ELSE 0 END) AS OPIN3_CNT1          				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD = '07' AND A.REVIEW_DIV_CD = '2' THEN 1 ELSE 0 END) AS OPIN4_CNT1          				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD = '07' AND A.REVIEW_DIV_CD = '3' THEN 1 ELSE 0 END) AS OPIN5_CNT1				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD = '09' THEN 1 ELSE 0 END) AS OPIN6_CNT1				    , COUNT(*) AS CHOICE_CNT				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD = '09' THEN 1 ELSE 0 END) AS END_CNT				    , SUM(CASE WHEN A.EXCEL_DWN_FLAG = '1' THEN 1 ELSE 0 END) AS DWN_CNT				    , SUM(CASE WHEN A.DISCU_PROG_STATE_CD = '03' THEN 1 ELSE 0 END) AS DEPT_CNT				FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B				WHERE A.RECORD_CENTER_ID = '1'				AND A.DISCU_YYYY = '1'				AND A.DISCU_PROG_STATE_CD IN ('03','04','05','06','07','09')				 AND 					A.DISCU_REQ_FLAG = '1'				 	   				AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID				AND B.FOLDER_ID        = A.FOLDER_ID				GROUP BY A.ORG_CD			) C			WHERE ROWNUM <= '1'		) D		WHERE D.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : countDisuseFullRsltRegPagedList

		SELECT COUNT(1)		FROM (			SELECT A.ORG_CD AS HANDL_ORG_CD			FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B			WHERE A.RECORD_CENTER_ID = '1'			AND A.DISCU_YYYY = '1'			AND A.DISCU_PROG_STATE_CD IN ('03','04','05','06','07','09')			 AND 				A.DISCU_REQ_FLAG = '1'			 	   			AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID			AND B.FOLDER_ID        = A.FOLDER_ID			GROUP BY A.ORG_CD		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : findDisuseDiscuDocRsltRegDetailPagedList

		SELECT D.*		FROM (			SELECT ROWNUM AS rnum				, C.*			FROM (				SELECT A.FOLDER_ID					, (CASE WHEN B.CLSS_DIV_CD = '1' THEN (SELECT MAX(A.BIS_CLSS_NM) FROM TB_ZZBISCLSS A WHERE A.BIS_CLSS_ID = B.CLSS_ID)						    WHEN B.CLSS_DIV_CD = '2' THEN (SELECT MAX(A.UNIT_NM) FROM TB_ZZUNIT A WHERE A.UNIT_CD = B.CLSS_ID)					   END) AS BIS_CLSS_NM				    , B.TITLE				    , B.CREAT_YYYY				    , A.CUR_PRESV_TERM_CD				    , A.DISCU_PROG_STATE_CD				    , CASE WHEN A.CUR_PRESV_TERM_CD = '01' THEN '01'				           WHEN A.CUR_PRESV_TERM_CD = '03' THEN '01,03'				           WHEN A.CUR_PRESV_TERM_CD = '05' THEN '01,03,05'				           WHEN A.CUR_PRESV_TERM_CD = '10' THEN '01,03,05,10'				           WHEN A.CUR_PRESV_TERM_CD = '25' THEN '01,03,05,10,25'				           WHEN A.CUR_PRESV_TERM_CD = '30' THEN '01,03,05,10,25,30'				           WHEN A.CUR_PRESV_TERM_CD = '40' THEN '01,03,05,10,25,30,40'				      END AS REVIEW_TERM_CD_SKIP				    , A.HANDL_ORG_DISU_DIV_CD				    , A.HANDL_ORG_DEFER_CD				    , A.HANDL_ORG_TERM_CD				    , A.HANDL_ORG_RSN				    , A.EXPERT_DISU_DIV_CD				    , A.EXPERT_DISU_DEFER_CD				    , A.EXPERT_DISU_TERM_CD				    , A.EXPERT_DISU_RSN				    , A.REVIEW_DIV_CD				    , A.REVIEW_DEFER_CD				    , A.REVIEW_REFIX_AFT_PRESV_TERM AS REVIEW_TERM_CD				    , A.REVIEW_REFIX_AFT_RSN AS REVIEW_RSN				    , A.DISCU_REQ_FLAG     				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.CUR_PRESV_TERM_CD) AS CUR_PRESV_TERM_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.HANDL_ORG_DEFER_CD) AS HANDL_ORG_DEFER_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.HANDL_ORG_TERM_CD) AS HANDL_ORG_TERM_NM     				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.EXPERT_DISU_DEFER_CD) AS EXPERT_DISU_DEFER_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.EXPERT_DISU_TERM_CD) AS EXPERT_DISU_TERM_NM     				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.REVIEW_DEFER_CD) AS REVIEW_DEFER_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.REVIEW_REFIX_AFT_PRESV_TERM) AS REVIEW_TERM_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF14' AND COM_CD = A.DISCU_REQ_FLAG) AS DISCU_REQ_FLAG_NM				    , A.EXCEL_DWN_FLAG				    , B.HO_NO				    , (SELECT COUNT(1) FROM TB_DFDISUSEOPINHIST WHERE RECORD_CENTER_ID = B.RECORD_CENTER_ID AND FOLDER_ID = B.FOLDER_ID) AS HIST_QTY				    , B.folder_keep_state_cd				FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B				WHERE A.RECORD_CENTER_ID = '1'				AND A.DISCU_YYYY = '1'				AND A.DISCU_PROG_STATE_CD IN ('06','07','08','09') AND 					A.DISCU_REQ_FLAG = '1'				  AND 					A.REVIEW_DIV_CD = '1'				 				AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID				AND B.FOLDER_ID = A.FOLDER_ID AND 					B.ORG_CD = '1'				  AND  						B.PRESV_TERM_CD in ('01', '03', '05', '10', '25')					   AND 					B.PRESV_TERM_CD = '1'				  AND 					B.TITLE LIKE '1'				 				ORDER BY A.ORG_CD, A.FOLDER_ID			) C			WHERE ROWNUM <= '1'		) D		WHERE D.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : countDisuseDiscuDocRsltRegDetailPagedList

		SELECT COUNT(*)		FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY = '1'		AND A.DISCU_PROG_STATE_CD IN ('06','07','08','09')		 AND 			A.DISCU_REQ_FLAG = '1'		  AND 			A.REVIEW_DIV_CD = '1'		 		AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID		AND B.FOLDER_ID = A.FOLDER_ID AND 			B.ORG_CD = '1'		  AND  				B.PRESV_TERM_CD in ('01', '03', '05', '10', '25')			   AND 			B.PRESV_TERM_CD = '1'		  AND 			B.TITLE LIKE '1'		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : findDisuseDiscuDocRsltRegEach

		SELECT A.FOLDER_ID			, B.TITLE		    , B.CREAT_YYYY		    , A.DISCU_PROG_STATE_CD		    , A.CUR_DELAY_CD		    , A.CUR_PRESV_TERM_CD		    , A.EXPERT_DISU_DIV_CD		    , A.EXPERT_DISU_DEFER_CD		    , A.EXPERT_DISU_TERM_CD		    , A.EXPERT_DISU_RSN		    , A.EXPERT_DISU_YMD		    , A.EXPERT_DISU_USER_ID		    , A.HANDL_ORG_DISU_DIV_CD		    , A.HANDL_ORG_DEFER_CD		    , A.HANDL_ORG_TERM_CD		    , A.HANDL_ORG_RSN		    , A.HANDL_ORG_YMD		    , A.HANDL_ORG_USER_ID		    , A.REVIEW_DIV_CD		    , A.REVIEW_DEFER_CD		    , A.REVIEW_REFIX_AFT_PRESV_TERM AS REVIEW_TERM_CD		    , A.REVIEW_REFIX_AFT_RSN AS REVIEW_RSN		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF02' AND COM_CD = A.HANDL_ORG_DISU_DIV_CD) AS HANDL_ORG_DISU_DIV_NM     		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.HANDL_ORG_DEFER_CD) AS HANDL_ORG_DEFER_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.HANDL_ORG_TERM_CD) AS HANDL_ORG_TERM_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.CUR_DELAY_CD) AS CUR_DELAY_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.CUR_PRESV_TERM_CD) AS CUR_PRESV_TERM_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF02' AND COM_CD = A.EXPERT_DISU_DIV_CD) AS EXPERT_DISU_DIV_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.EXPERT_DISU_DEFER_CD) AS EXPERT_DISU_DEFER_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.EXPERT_DISU_TERM_CD) AS EXPERT_DISU_TERM_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF02' AND COM_CD = A.REVIEW_DIV_CD) AS REVIEW_DIV_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.REVIEW_DEFER_CD) AS REVIEW_DEFER_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.REVIEW_REFIX_AFT_PRESV_TERM) AS REVIEW_TERM_NM		    , CASE WHEN A.CUR_PRESV_TERM_CD = '01' THEN '01'		           WHEN A.CUR_PRESV_TERM_CD = '03' THEN '01,03'		           WHEN A.CUR_PRESV_TERM_CD = '05' THEN '01,03,05'		           WHEN A.CUR_PRESV_TERM_CD = '10' THEN '01,03,05,10'		           WHEN A.CUR_PRESV_TERM_CD = '25' THEN '01,03,05,10,25'		           WHEN A.CUR_PRESV_TERM_CD = '30' THEN '01,03,05,10,25,30'		           WHEN A.CUR_PRESV_TERM_CD = '40' THEN '01,03,05,10,25,30,40'		      END AS REVIEW_TERM_CD_SKIP		    , A.DISCU_REQ_FLAG		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF14' AND COM_CD = A.DISCU_REQ_FLAG) AS DISCU_REQ_FLAG_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF13' AND COM_CD = A.DISCU_ORIGN_TYPE_CD) AS DISCU_ORIGN_TYPE_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD85' AND COM_CD = B.PRESV_TYPE_CD) AS PRESV_TYPE_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD37' AND COM_CD = B.MF_PIC_STATE_CD) AS MF_PIC_STATE_NM     		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD50' AND COM_CD = B.SCAN_PROG_STATE_CD) AS SCAN_PROG_STATE_NM       		FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY = '1'		AND A.FOLDER_ID = '1'		AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID		AND B.FOLDER_ID = A.FOLDER_ID;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : select
-- Query Id : maxDisuseDiscusDocDiscuYyyySeq

 		SELECT NVL(MAX(A.DISCU_YYYY_SEQ),0) AS DISCU_YYYY_SEQ   		FROM TB_DFDISUSEDISCUDOC A  		WHERE A.RECORD_CENTER_ID = '1'    	AND A.DISCU_YYYY = '1';


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : insert
-- Query Id : createDisuseDiscuDoc

		INSERT INTO TB_DFDISUSEDISCUDOC (RECORD_CENTER_ID			, DISCU_YYYY			, DISCU_YYYY_SEQ			, DISCU_CHOICE_RSN			, REG_DTIME			, REG_USER_ID			, DISCU_TRGT_RECORD_CNT			, DISCU_REQ_FLAG		) VALUES ('1'			, '1'			, (SELECT NVL(MAX(A.DISCU_YYYY_SEQ),0) FROM TB_DFDISUSEDISCUDOC A WHERE A.RECORD_CENTER_ID = '1' AND A.DISCU_YYYY = '1') + 1			, '1'			, TO_CHAR(sys_datetime,'YYYYMMDDHH24MISS')			, '1'			, 0			, '1'		)	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : update
-- Query Id : updateDisuseDiscuDocTrgtChoiseStateEach

		UPDATE TB_DFDISUSEOPIN A   		SET A.DISCU_PROG_STATE_CD = '06'     		, A.DISCU_YYYY_SEQ = '1' 		WHERE A.RECORD_CENTER_ID = '1'   		AND A.DISCU_YYYY = '1'		AND A.FOLDER_ID = '1'	    AND A.DISCU_PROG_STATE_CD IN ('05')   		AND A.REVIEW_COFIRM_CD = '0'   ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : update
-- Query Id : updateDisuseDiscuDocTrgtChoiseStateList

		UPDATE TB_DFDISUSEOPIN A		SET A.DISCU_PROG_STATE_CD = '06'			, A.DISCU_YYYY_SEQ = '1'		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY       = '1'		AND A.DISCU_PROG_STATE_CD IN ('05')		AND A.REVIEW_COFIRM_CD = '0'		 AND 			A.CUR_PRESV_TERM_CD = '1'		    		AND EXISTS (			SELECT B.FOLDER_ID		    FROM TB_RDFOLDER B		    WHERE B.RECORD_CENTER_ID = A.RECORD_CENTER_ID		    AND B.FOLDER_ID = A.FOLDER_ID AND 		 		B.ORG_CD = '1'			  AND 		 		B.TITLE LIKE '1'			    		);


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
-- Query    : update
-- Query Id : updateDisuseDiscuDocRsltRegEach

		UPDATE TB_DFDISUSEOPIN A		SET A.DISCU_PROG_STATE_CD = '07'		    , A.REVIEW_DIV_CD = '1'		    , A.REVIEW_DEFER_CD = CASE WHEN '1' = '2' THEN LPAD('1',2,'0') ELSE NULL END		    , A.REVIEW_REFIX_AFT_PRESV_TERM = CASE WHEN A.DISCU_REQ_FLAG = '0' AND '1' = '3' THEN LPAD('1',2,'0') ELSE NULL END		    , A.REVIEW_REFIX_AFT_RSN = '1'		    , A.REVIEW_YMD = TO_CHAR(SYSDATE,'YYYYMMDD')		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY = '1'		AND A.FOLDER_ID  = '1' 		AND A.DISCU_PROG_STATE_CD IN ('06','07')		AND A.REVIEW_COFIRM_CD = '0'   ;


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseDiscuDoc.xml
