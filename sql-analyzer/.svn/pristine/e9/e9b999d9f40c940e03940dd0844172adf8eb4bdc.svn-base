-- File Open : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseNatCmtOpin.xml


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseNatCmtOpin.xml
-- Query    : select
-- Query Id : findDisuseNatCmtOpinRegPagedList

		SELECT D.*		FROM (			SELECT ROWNUM AS rnum				, C.*			FROM (				SELECT A.FOLDER_ID					, (CASE WHEN B.CLSS_DIV_CD = '1' THEN (SELECT MAX(A.BIS_CLSS_NM) FROM TB_ZZBISCLSS A WHERE A.BIS_CLSS_ID = B.CLSS_ID)						    WHEN B.CLSS_DIV_CD = '2' THEN (SELECT MAX(A.UNIT_NM) FROM TB_ZZUNIT A WHERE A.UNIT_CD = B.CLSS_ID)					   END) AS BIS_CLSS_NM				    , B.TITLE				    , B.CREAT_YYYY				    , A.CUR_PRESV_TERM_CD				    , A.DISCU_PROG_STATE_CD				    , CASE WHEN A.CUR_PRESV_TERM_CD = '01' THEN '01'				           WHEN A.CUR_PRESV_TERM_CD = '03' THEN '01,03'				           WHEN A.CUR_PRESV_TERM_CD = '05' THEN '01,03,05'				           WHEN A.CUR_PRESV_TERM_CD = '10' THEN '01,03,05,10'				           WHEN A.CUR_PRESV_TERM_CD = '25' THEN '01,03,05,10,25'				           WHEN A.CUR_PRESV_TERM_CD = '30' THEN '01,03,05,10,25,30'				           WHEN A.CUR_PRESV_TERM_CD = '40' THEN '01,03,05,10,25,30,40'				      END AS NAT_CMT_TERM_CD_SKIP				    , A.HANDL_ORG_DISU_DIV_CD				    , A.HANDL_ORG_DEFER_CD				    , A.HANDL_ORG_TERM_CD				    , A.HANDL_ORG_RSN				    , A.EXPERT_DISU_DIV_CD				    , A.EXPERT_DISU_DEFER_CD				    , A.EXPERT_DISU_TERM_CD				    , A.EXPERT_DISU_RSN				    , A.REVIEW_DIV_CD				    , A.REVIEW_DEFER_CD				    , A.REVIEW_REFIX_AFT_PRESV_TERM AS REVIEW_TERM_CD				    , A.REVIEW_REFIX_AFT_RSN AS REVIEW_RSN				    , A.DISCU_REQ_FLAG     				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.CUR_PRESV_TERM_CD) AS CUR_PRESV_TERM_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.HANDL_ORG_DEFER_CD) AS HANDL_ORG_DEFER_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.HANDL_ORG_TERM_CD) AS HANDL_ORG_TERM_NM     				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.EXPERT_DISU_DEFER_CD) AS EXPERT_DISU_DEFER_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.EXPERT_DISU_TERM_CD) AS EXPERT_DISU_TERM_NM     				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.REVIEW_DEFER_CD) AS REVIEW_DEFER_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.REVIEW_REFIX_AFT_PRESV_TERM) AS REVIEW_TERM_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF14' AND COM_CD = A.DISCU_REQ_FLAG) AS DISCU_REQ_FLAG_NM				    , A.EXCEL_DWN_FLAG     				    , A.NAT_CMT_DIV_CD				    , A.NAT_CMT_DEFER_CD				    , A.NAT_CMT_REFIX_AFT_PRESV_TERM AS NAT_CMT_TERM_CD				    , A.NAT_CMT_REFIX_AFT_RSN AS NAT_CMT_RSN				    , A.NAT_CMT_EXCEL_DWN_FLAG				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.NAT_CMT_DEFER_CD) AS NAT_CMT_DEFER_NM				    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.NAT_CMT_REFIX_AFT_PRESV_TERM) AS NAT_CMT_TERM_NM				    , B.folder_keep_state_cd				FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B				WHERE A.RECORD_CENTER_ID = '1'				AND A.DISCU_YYYY = '1'				AND A.DISCU_PROG_STATE_CD IN ('07','08','09')				AND A.DISCU_REQ_FLAG = '1' AND 					A.REVIEW_DIV_CD = '1'				  AND 					A.NAT_CMT_DIV_CD = '1'				 				AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID				AND B.FOLDER_ID = A.FOLDER_ID AND 					B.ORG_CD = '1'				  AND  						B.PRESV_TERM_CD in ('01', '03', '05', '10', '25')					   AND 					B.PRESV_TERM_CD = '1'				  AND 					B.TITLE LIKE '1'				 				ORDER BY A.ORG_CD, A.FOLDER_ID			) C			WHERE ROWNUM <= '1'		) D		WHERE D.rnum >= '1'	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseNatCmtOpin.xml
-- Query    : select
-- Query Id : countDisuseNatCmtOpinRegPagedList

		SELECT COUNT(1)		FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY = '1'		AND A.DISCU_PROG_STATE_CD IN ('07','08','09')		AND A.DISCU_REQ_FLAG = '1' AND 			A.REVIEW_DIV_CD = '1'		  AND 			A.NAT_CMT_DIV_CD = '1'		 		AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID		AND B.FOLDER_ID = A.FOLDER_ID AND 			B.ORG_CD = '1'		  AND  				B.PRESV_TERM_CD in ('01', '03', '05', '10', '25')			   AND 			B.PRESV_TERM_CD = '1'		  AND 			B.TITLE LIKE '1'		 ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseNatCmtOpin.xml
-- Query    : select
-- Query Id : findDisuseNatCmtDiscuDocList

		SELECT A.DISCU_YYYY as discuYyyy			, A.DISCU_YYYY_SEQ as discuYyyySeq			, LPAD(A.DISCU_YYYY_SEQ,6,'0') lpadDiscuYyyySeq		    , '[' || A.DISCU_YYYY || '-' || LPAD(A.DISCU_YYYY_SEQ,6,'0') || '] ' || A.DISCU_CHOICE_RSN AS discuChoiceRsn		FROM TB_DFDISUSEDISCUDOC A		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY = '1'		AND A.DISCU_REQ_FLAG = '1'		ORDER BY A.DISCU_YYYY_SEQ;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseNatCmtOpin.xml
-- Query    : select
-- Query Id : findDisuseNatCmtOpinRegEach

		SELECT A.FOLDER_ID			, B.TITLE		    , B.CREAT_YYYY		    , A.DISCU_PROG_STATE_CD		    , A.CUR_DELAY_CD		    , A.CUR_PRESV_TERM_CD		    , A.EXPERT_DISU_DIV_CD		    , A.EXPERT_DISU_DEFER_CD		    , A.EXPERT_DISU_TERM_CD		    , A.EXPERT_DISU_RSN		    , A.EXPERT_DISU_YMD		    , A.EXPERT_DISU_USER_ID		    , A.HANDL_ORG_DISU_DIV_CD		    , A.HANDL_ORG_DEFER_CD		    , A.HANDL_ORG_TERM_CD		    , A.HANDL_ORG_RSN		    , A.HANDL_ORG_YMD		    , A.HANDL_ORG_USER_ID		    , A.REVIEW_DIV_CD		    , A.REVIEW_DEFER_CD		    , A.REVIEW_REFIX_AFT_PRESV_TERM AS REVIEW_TERM_CD		    , A.REVIEW_REFIX_AFT_RSN AS REVIEW_RSN		    , A.NAT_CMT_DIV_CD		    , A.NAT_CMT_DEFER_CD		    , A.NAT_CMT_REFIX_AFT_PRESV_TERM AS NAT_CMT_TERM_CD		    , A.NAT_CMT_REFIX_AFT_RSN AS NAT_CMT_RSN		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF02' AND COM_CD = A.HANDL_ORG_DISU_DIV_CD) AS HANDL_ORG_DISU_DIV_NM     		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.HANDL_ORG_DEFER_CD) AS HANDL_ORG_DEFER_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.HANDL_ORG_TERM_CD) AS HANDL_ORG_TERM_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.CUR_DELAY_CD) AS CUR_DELAY_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.CUR_PRESV_TERM_CD) AS CUR_PRESV_TERM_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF02' AND COM_CD = A.EXPERT_DISU_DIV_CD) AS EXPERT_DISU_DIV_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.EXPERT_DISU_DEFER_CD) AS EXPERT_DISU_DEFER_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.EXPERT_DISU_TERM_CD) AS EXPERT_DISU_TERM_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF02' AND COM_CD = A.REVIEW_DIV_CD) AS REVIEW_DIV_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.REVIEW_DEFER_CD) AS REVIEW_DEFER_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.REVIEW_REFIX_AFT_PRESV_TERM) AS REVIEW_TERM_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF02' AND COM_CD = A.NAT_CMT_DIV_CD) AS NAT_CMT_DIV_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF07' AND COM_CD = A.NAT_CMT_DEFER_CD) AS NAT_CMT_DEFER_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD07' AND COM_CD = A.NAT_CMT_REFIX_AFT_PRESV_TERM) AS NAT_CMT_TERM_NM		    , CASE WHEN A.CUR_PRESV_TERM_CD = '01' THEN '01'		           WHEN A.CUR_PRESV_TERM_CD = '03' THEN '01,03'		           WHEN A.CUR_PRESV_TERM_CD = '05' THEN '01,03,05'		           WHEN A.CUR_PRESV_TERM_CD = '10' THEN '01,03,05,10'		           WHEN A.CUR_PRESV_TERM_CD = '25' THEN '01,03,05,10,25'		           WHEN A.CUR_PRESV_TERM_CD = '30' THEN '01,03,05,10,25,30'		           WHEN A.CUR_PRESV_TERM_CD = '40' THEN '01,03,05,10,25,30,40'		      END AS NAT_CMT_TERM_CD_SKIP		    , A.DISCU_REQ_FLAG		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF14' AND COM_CD = A.DISCU_REQ_FLAG) AS DISCU_REQ_FLAG_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'DF13' AND COM_CD = A.DISCU_ORIGN_TYPE_CD) AS DISCU_ORIGN_TYPE_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD85' AND COM_CD = B.PRESV_TYPE_CD) AS PRESV_TYPE_NM		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD37' AND COM_CD = B.MF_PIC_STATE_CD) AS MF_PIC_STATE_NM     		    , (SELECT COM_CD_NM FROM TB_ZZCOMCD WHERE COM_TYPE_CD = 'RD50' AND COM_CD = B.SCAN_PROG_STATE_CD) AS SCAN_PROG_STATE_NM       		FROM TB_DFDISUSEOPIN A, TB_RDFOLDER B		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY = '1'		AND A.FOLDER_ID = '1'		AND B.RECORD_CENTER_ID = A.RECORD_CENTER_ID		AND B.FOLDER_ID = A.FOLDER_ID	;


-- Filename : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseNatCmtOpin.xml
-- Query    : update
-- Query Id : updateDisuseNatCmtOpinRegEach

		UPDATE TB_DFDISUSEOPIN A		SET A.DISCU_PROG_STATE_CD = '08'		    , A.NAT_CMT_DIV_CD = '1'		    , A.NAT_CMT_DEFER_CD = CASE WHEN '1' = '2' THEN LPAD('1',2,'0') ELSE NULL END		    , A.NAT_CMT_REFIX_AFT_PRESV_TERM = CASE WHEN A.DISCU_REQ_FLAG = '0' AND '1' = '3' THEN LPAD('1',2,'0') ELSE NULL END		    , A.NAT_CMT_REFIX_AFT_RSN = '1'		    , A.NAT_CMT_YMD = TO_CHAR(SYSDATE,'YYYYMMDD')     		WHERE A.RECORD_CENTER_ID = '1'		AND A.DISCU_YYYY = '1'		AND A.FOLDER_ID  = '1' 		AND A.DISCU_PROG_STATE_CD IN ('07','08')		AND A.REVIEW_COFIRM_CD = '0';


-- File Close : C:\eclipse\workspace\SqlMapXMLParser\rmsCubrid\rms\default\rms\eval\disuseeval\DisuseNatCmtOpin.xml
